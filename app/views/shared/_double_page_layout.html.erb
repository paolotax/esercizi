<!--
  Double Page Layout Partial
  Usage:
  <%= render 'shared/double_page_layout',
    left_page_number: 2,
    right_page_number: 3,
    page_number_color: 'blue',
    border_color: 'blue',
    background_gradient: 'from-yellow-50 via-white to-yellow-50' do |double_page| %>
    <% double_page.left do %>
      Left page content
    <% end %>
    <% double_page.right do %>
      Right page content
    <% end %>
  <% end %>
-->

<%
  left_page_number ||= nil
  right_page_number ||= nil
  page_number_color ||= 'blue'
  border_color ||= 'blue'
  background_gradient ||= 'from-white to-gray-50'
  max_width ||= '1800px'
%>

<div class="max-w-[<%= max_width %>] mx-auto p-4 lg:p-8 bg-gradient-to-b <%= background_gradient %>">

  <!-- Two-page horizontal layout like an open book -->
  <div class="grid lg:grid-cols-2 gap-2 sm:gap-6 lg:gap-8">

    <!-- LEFT PAGE -->
    <div class="bg-white rounded-xl shadow-2xl p-6 lg:p-8 relative border-4 border-<%= border_color %>-200">

      <% if left_page_number %>
        <!-- Page number top right -->
        <div class="absolute top-4 right-4 bg-<%= page_number_color %>-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl shadow-lg">
          <%= left_page_number %>
        </div>
      <% end %>

      <!-- Left page content -->
      <% if block_given? %>
        <%= yield OpenStruct.new(
          left: -> (&block) { @left_content = capture(&block) },
          right: -> (&block) { @right_content = capture(&block) }
        ) %>
        <%= @left_content&.html_safe %>
      <% else %>
        <%= content_for(:left_page_content) %>
      <% end %>

    </div>

    <!-- RIGHT PAGE -->
    <div class="bg-white rounded-xl shadow-2xl p-6 lg:p-8 relative border-4 border-<%= border_color %>-200">

      <% if right_page_number %>
        <!-- Page number top right -->
        <div class="absolute top-4 right-4 bg-<%= page_number_color %>-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl shadow-lg">
          <%= right_page_number %>
        </div>
      <% end %>

      <!-- Right page content -->
      <%= @right_content&.html_safe || content_for(:right_page_content) %>

    </div>

  </div>

</div>
