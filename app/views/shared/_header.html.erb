<header class="print-hidden relative overflow-hidden sticky top-0 z-40">
  <!-- Sfondo colorato con forme decorative -->
  <div class="absolute inset-0 bg-gradient-to-r from-pastel-sky via-pastel-pink to-pastel-peach dark:from-indigo-900 dark:via-purple-900 dark:to-pink-900">
    <!-- Bolle decorative -->
    <div class="absolute top-0 left-10 w-20 h-20 bg-white/20 rounded-full blur-xl"></div>
    <div class="absolute bottom-0 right-20 w-32 h-32 bg-white/15 rounded-full blur-2xl"></div>
    <div class="absolute top-2 right-1/3 w-16 h-16 bg-pastel-lemon/30 rounded-full blur-lg"></div>
    <div class="absolute bottom-1 left-1/4 w-12 h-12 bg-pastel-mint/25 rounded-full blur-md"></div>
  </div>

  <div class="relative mx-auto px-4 py-3 md:py-4 flex items-center justify-between">
    <!-- Left side buttons -->
    <div class="flex items-center gap-3">
      <!-- Menu button -->
      <button class="flex items-center justify-center bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm hover:bg-white dark:hover:bg-gray-700 text-pastel-coral dark:text-pink-400 font-bold py-2.5 px-3 md:py-3 md:px-5 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 transform active:scale-95 hover:scale-105"
              data-action="click->sidebar#toggle"
              type="button">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <span class="hidden md:inline text-base font-semibold ml-2">Indice</span>
      </button>
    </div>

    <!-- Title (center) -->
    <h1 id="page-title" class="text-xl md:text-2xl lg:text-3xl font-extrabold text-white drop-shadow-md px-2 tracking-tight">
      <%= @page_title || yield(:titolo) %>
    </h1>

    <!-- Right buttons -->
    <div class="flex items-center gap-2">
      <!-- Dark mode toggle -->
      <button type="button"
              data-controller="dark-mode"
              data-action="click->dark-mode#toggle"
              class="flex items-center justify-center bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm hover:bg-white dark:hover:bg-gray-700 text-pastel-lavender dark:text-yellow-400 font-bold p-2.5 md:p-3 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 transform active:scale-95 hover:scale-105">
        <!-- Sun icon (shown in dark mode) -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <!-- Moon icon (shown in light mode) -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>

      <!-- Print button -->
      <button onclick="window.print()"
              type="button"
              class="flex items-center gap-1 md:gap-2 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm hover:bg-white dark:hover:bg-gray-700 text-pastel-sky dark:text-cyan-400 font-bold py-2.5 px-3 md:py-3 md:px-5 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 transform active:scale-95 hover:scale-105">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
        </svg>
        <span class="hidden md:inline text-base font-semibold">Stampa</span>
      </button>
    </div>
  </div>
</header>
