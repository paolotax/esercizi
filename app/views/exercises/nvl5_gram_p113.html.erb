<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" data-controller="exercise-checker">

  <!-- Header con badge SINTASSI -->
  <div class="mb-8">
    <div class="flex items-start justify-between">
      <!-- Badge e Titolo -->
      <div class="flex items-start gap-4">
        <!-- Badge SINTASSI con icona lampadina -->
        <div class="bg-yellow-400 text-orange-700 px-6 py-3 rounded-lg font-bold text-lg flex items-center gap-2">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 2a6 6 0 00-6 6c0 1.887.875 3.517 2.084 4.485A.5.5 0 016 12.5V14a1 1 0 001 1h6a1 1 0 001-1v-1.5a.5.5 0 01-.084-.015C15.125 11.517 16 9.887 16 8a6 6 0 00-6-6z"/>
          </svg>
          SINTASSI
        </div>
      </div>
      <!-- Numero pagina -->
      <div class="bg-orange-500 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold text-xl">
        113
      </div>
    </div>

    <!-- Titolo principale -->
    <h1 class="text-3xl font-bold text-orange-600 mt-6 text-center">
      Altri complementi indiretti
    </h1>
  </div>

  <!-- Box introduttivo -->
  <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-6 mb-8">
    <p class="text-gray-700 mb-2">
      Esistono altri tipi di <strong class="underline">complementi indiretti</strong>, distinti a seconda
      del tipo di informazione che forniscono.
    </p>
    <p class="text-gray-700">
      Per riconoscerli individua la <strong class="underline">domanda</strong> a cui rispondono.
    </p>
  </div>

  <!-- Tabella dei complementi -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-8">
    <table class="w-full">
      <thead>
        <tr class="bg-blue-100">
          <th class="border border-gray-300 px-4 py-3 text-center w-16">#</th>
          <th class="border border-gray-300 px-4 py-3 text-left">Complemento</th>
          <th class="border border-gray-300 px-4 py-3 text-center">Domanda/e</th>
          <th class="border border-gray-300 px-4 py-3 text-left">Esempio</th>
        </tr>
      </thead>
      <tbody>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">1</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">di argomento</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">di quale argomento?</td>
          <td class="border border-gray-300 px-4 py-3">• Ho letto il libro <span class="underline">di geografia</span>.</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">2</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">di compagnia</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">con chi?</td>
          <td class="border border-gray-300 px-4 py-3">• <span class="underline">Con lo zio</span> faccio lunghe passeggiate.</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">3</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">di causa</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">per quale causa?</td>
          <td class="border border-gray-300 px-4 py-3">• Sono rimasta a casa <span class="underline">per lo sciopero</span>.</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">4</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">di fine o scopo</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">per che cosa? / a quale scopo?</td>
          <td class="border border-gray-300 px-4 py-3">• Isa dipinge <span class="underline">per passatempo</span>.</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">5</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">di materia</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">di quale materiale?</td>
          <td class="border border-gray-300 px-4 py-3">• Prendi i fogli <span class="underline">di carta</span>.</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">6</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">di modo</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">in che modo? / come?</td>
          <td class="border border-gray-300 px-4 py-3">• Andiamo a scuola <span class="underline">a piedi</span>.</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="border border-gray-300 px-4 py-3 text-center font-bold">7</td>
          <td class="border border-gray-300 px-4 py-3 text-purple-600 font-semibold">d'agente o di causa efficiente</td>
          <td class="border border-gray-300 px-4 py-3 text-center text-purple-600 italic">da chi? / da che cosa?</td>
          <td class="border border-gray-300 px-4 py-3">
            • Sono stata punta <span class="underline">da un'ape</span>!<br>
            • Bobi è spaventato <span class="underline">dai tuoni</span>.
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Esercizio 1 - IMPARARE TUTTI -->
  <div class="bg-yellow-100 border-2 border-yellow-400 rounded-lg p-6 mb-8" data-controller="fill-blanks">
    <div class="flex items-center gap-3 mb-4">
      <div class="bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl">
        1
      </div>
      <div class="bg-blue-500 text-white px-4 py-2 rounded-lg font-bold">
        IMPARARE TUTTI
      </div>
    </div>

    <p class="font-bold text-gray-700 mb-4">
      Scrivi il numero corrispondente al complemento sottolineato.
    </p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <% [
        { text: "Gioco sempre volentieri", complement: "con Marco", answer: "2" },
        { text: "Batteva i denti", complement: "per il freddo", answer: "3" },
        { text: "La banca è stata svaligiata", complement: "dai ladri", answer: "7" },
        { text: "Parliamo", complement: "delle antiche civiltà italiche", answer: "1" },
        { text: "Ho comprato una camicetta", complement: "di seta", answer: "5" },
        { text: "Accarezzo", complement: "con dolcezza", extra: "il cane di Lia", answer: "6" },
        { text: "", complement: "Per lavoro", extra: "domani andrò a Milano", answer: "4" },
        { text: "È infastidito", complement: "dal chiasso", answer: "7" }
      ].each do |item| %>
        <div class="bg-white p-3 rounded-lg flex items-center gap-3">
          <span class="text-gray-500">•</span>
          <span class="flex-1">
            <%= item[:text] %> <span class="underline font-semibold"><%= item[:complement] %></span><%= " #{item[:extra]}" if item[:extra] %>.
          </span>
          <input type="text"
                 class="w-12 h-12 text-center border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none font-bold text-lg"
                 data-fill-blanks-target="input"
                 data-correct-answer="<%= item[:answer] %>"
                 maxlength="1">
        </div>
      <% end %>
    </div>
  </div>

  <!-- Esercizio 2 - Scrivi frasi -->
  <div class="bg-white border-2 border-gray-300 rounded-lg p-6 mb-8" data-controller="fill-blanks">
    <div class="flex items-center gap-3 mb-4">
      <div class="bg-orange-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl">
        2
      </div>
    </div>

    <p class="font-bold text-gray-700 mb-4">
      Scrivi una frase con ognuno dei seguenti complementi indiretti.
    </p>

    <div class="space-y-4">
      <% ["di compagnia", "di materia"].each do |complemento| %>
        <div class="bg-gray-50 rounded-lg p-4">
          <div class="flex items-center gap-4">
            <div class="bg-green-100 text-green-700 px-4 py-2 rounded-lg font-semibold min-w-[150px] text-center">
              <%= complemento %>
            </div>
            <input type="text"
                   class="flex-1 px-4 py-2 border-b-2 border-dotted border-gray-400 focus:border-blue-500 focus:outline-none"
                   data-fill-blanks-target="input"
                   data-correct-answer="libera">
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Riferimento esercizi aggiuntivi -->
  <div class="mt-8 text-center">
    <div class="inline-block bg-orange-100 border-2 border-orange-300 rounded-lg px-6 py-3">
      <p class="font-bold text-orange-700">
        Esercizi pp. <%= link_to "186", pagina_path("nvl5_gram_p186"), class: "text-gray-600 hover:text-gray-800 underline" %>, <%= link_to "187", pagina_path("nvl5_gram_p187"), class: "text-gray-600 hover:text-gray-800 underline" %>
      </p>
    </div>
  </div>

  <!-- Exercise controls -->
  <%= render 'shared/exercise_controls', color: 'orange' %>
</div>