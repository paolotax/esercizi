<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1: Predicato verbale -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="font-bold text-gray-700 dark:text-gray-200 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">1</span>
        <span>In quale delle seguenti frasi c'e un <span class="text-blue-600 dark:text-blue-400 font-bold">predicato verbale</span>?</span>
      </div>
    </h2>

    <div class="space-y-3">
      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">A.</span>
          <input type="radio"
                 name="question1"
                 data-multiple-choice-target="answer"
                 data-correct-answer="true"
                 class="w-5 h-5">
        </div>
        <span class="">Oggi Ivo e arrivato in ritardo.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">B.</span>
          <input type="radio"
                 name="question1"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="">Camminare tutto il giorno e pesante.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">C.</span>
          <input type="radio"
                 name="question1"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="">Il divanetto all'ingresso non e nuovo.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">D.</span>
          <input type="radio"
                 name="question1"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="">Enrico e molto vivace.</span>
      </label>
    </div>
  </div>

  <!-- Esercizio 2: Punteggiatura NON corretta -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="font-bold text-gray-700 dark:text-gray-200 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">2</span>
        <span>In quale delle seguenti frasi la punteggiatura <span class="font-bold">NON e corretta</span>?</span>
      </div>
    </h2>

    <div class="space-y-3">
      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">A.</span>
          <input type="radio"
                 name="question2"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="">Ilaria, la sorella di Laura, vive in Germania.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">B.</span>
          <input type="radio"
                 name="question2"
                 data-multiple-choice-target="answer"
                 data-correct-answer="true"
                 class="w-5 h-5">
        </div>
        <span class="">Saremo al parco, se vorrai incontrarci.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">C.</span>
          <input type="radio"
                 name="question2"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="">Ho preso tutto: il burro, la farina, le uova, lo zucchero.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700 dark:text-gray-200">D.</span>
          <input type="radio"
                 name="question2"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="">Chi ci portera a casa?</span>
      </label>
    </div>
  </div>

  <!-- Esercizio 3: Tabella puo completare/non puo completare -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="font-bold text-gray-700 dark:text-gray-200 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">3</span>
        <span>Ti diamo l'inizio di una frase. Indica con <span class="font-bold">X</span> nella tabella se i sintagmi proposti completano o non completano il senso della frase.</span>
      </div>
    </h2>

    <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">"Massimo ha messo..."</p>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr class="bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40">
            <th class="border-2 border-<%= @pagina.base_color %>-300 dark:border-<%= @pagina.base_color %>-600 px-4 py-3 text-left font-bold text-gray-700 dark:text-gray-200">Sintagma</th>
            <th class="border-2 border-<%= @pagina.base_color %>-300 dark:border-<%= @pagina.base_color %>-600 px-4 py-3 text-center font-bold text-gray-700 dark:text-gray-200">Puo completare la frase</th>
            <th class="border-2 border-<%= @pagina.base_color %>-300 dark:border-<%= @pagina.base_color %>-600 px-4 py-3 text-center font-bold text-gray-700 dark:text-gray-200">Non puo completare la frase</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">un panino al volo</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">un libro nello zaino</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">nel vano della lavastoviglie</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">una cornice al quadro</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">le sue figlie a merenda</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">a letto i bambini</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">sul davanzale una candela</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">il pollo alla cacciatora</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">in ordine la scrivania</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-white dark:bg-gray-800">ieri a Palermo</td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="w-5 h-5">
            </td>
            <td class="border-2 border-gray-200 dark:border-gray-600 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center">
              <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="true" class="w-5 h-5">
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Esercizio 4: Sottolinea il predicato -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="false">
    <h2 class="font-bold text-gray-700 dark:text-gray-200 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">4</span>
        <span>In ogni frase, sottolinea il predicato.</span>
      </div>
    </h2>

    <!-- Hidden color selector -->
    <div class="hidden">
      <span data-word-highlighter-target="colorBox" data-color="yellow"></span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 cursor-pointer">
      <div class="bg-white dark:bg-gray-800 rounded-lg px-3 py-3">
        <span class="text-gray-700 dark:text-gray-200">• Il parco non <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">e</span> ancora arrivato.</span>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg px-3 py-3">
        <span class="text-gray-700 dark:text-gray-200">• <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Sorge</span> il sole a est.</span>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg px-3 py-3">
        <span class="text-gray-700 dark:text-gray-200">• Ieri <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">sono giunti</span> i primi turisti.</span>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg px-3 py-3">
        <span class="text-gray-700 dark:text-gray-200">• <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Leggere</span> <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">e</span> bello.</span>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg px-3 py-3">
        <span class="text-gray-700 dark:text-gray-200">• Questo esercizio <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">sembra</span> corretto.</span>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg px-3 py-3">
        <span class="text-gray-700 dark:text-gray-200">• Chi di voi <span data-word-highlighter-target="word" data-correct="yellow" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">vuole</span> la pasta?</span>
      </div>
    </div>
  </div>

  <%= render 'shared/exercise_controls' %>
</div>
