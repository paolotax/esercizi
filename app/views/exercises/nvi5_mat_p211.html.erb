<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria: Lo sconto -->
    <div class="p-4 bg-custom-blue rounded-lg">
      <p class="text-gray-700 mb-2">
        Per calcolare il <span class="font-bold text-cyan-600">15%</span> di sconto su <span class="font-bold text-cyan-600">€ 240</span>
      </p>
      <p class="text-gray-700">
        (240 : 100) × 15 = 2,4 × 15 = 36 <span class="text-cyan-500">→</span> valore della percentuale di sconto
      </p>
      <p class="text-gray-700">
        240 – 36 = <span class="font-bold text-cyan-600">€ 204</span> <span class="text-cyan-500">→</span> prezzo scontato
      </p>
    </div>

    <!-- Esercizio 1: IMPARARE TUTTI -->
    <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
      <p class="font-bold text-gray-700 mb-4">
        <%= imparare_tutti_badge(1) %>
        Calcola sul quaderno e completa la tabella.
      </p>

      <div class="overflow-x-auto">
        <table class="w-full border-collapse border border-cyan-400">
          <thead>
            <tr>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Oggetto</th>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Prezzo</th>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Sconto</th>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Valore della percentuale di sconto</th>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Prezzo scontato</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">valigia</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 180</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">20%</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="36" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="144" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">orologio</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 960</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">15%</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="144" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="816" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">stivali</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 225</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">40%</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="90" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="135" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">borsa</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 320</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">25%</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="80" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="240" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">computer</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ <span class="whitespace-nowrap">1 700</span></td>
              <td class="p-2 border border-cyan-400 text-center bg-white">30%</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="510" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="1190" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Calcola il prezzo scontato degli oggetti, sapendo che su ciascuno viene praticato uno sconto del 33%.
      </p>

      <div class="overflow-x-auto">
        <table class="w-full border-collapse border border-cyan-400">
          <thead>
            <tr>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Gioco</th>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Prezzo iniziale</th>
              <th class="p-2 border border-cyan-400 bg-cyan-100 text-center text-gray-800">Prezzo scontato del 33%</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">automobile radiocomandata</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 87</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="58,29" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">trenino elettrico</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 139</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="93,13" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">casa delle bambole</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 115</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="77,05" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">console per videogiochi</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 243</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="162,81" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">peluche interattivo</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 68</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="45,56" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">castello delle magie</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">€ 99</td>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <input type="text" data-correct-answer="66,33" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 3: Problemi -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Risolvi i problemi sul quaderno.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <p class="text-gray-700">
            <span class="font-bold text-cyan-600">a.</span> Caterina compra una bicicletta che costava € 180 con uno sconto del 15%.<br>
            Quanto risparmia sul prezzo iniziale?
          </p>
        </div>
        <div class="space-y-2">
          <p class="text-gray-700">
            <span class="font-bold text-cyan-600">b.</span> Alessandro vuole comprare un aspirapolvere nuovo usando un buono sconto del 15% sul prezzo di acquisto.<br>
            Se l'aspirapolvere costa € 255, quanto pagherà Alessandro effettivamente?
          </p>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
