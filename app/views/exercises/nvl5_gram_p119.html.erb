<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <% options = [
    "Scegli...",
    "soggetto",
    "predicato verbale",
    "predicato nominale",
    "compl. oggetto",
    "compl. di specificazione",
    "compl. di termine",
    "compl. di luogo",
    "compl. di tempo",
    "compl. di causa",
    "compl. di modo",
    "compl. di mezzo",
    "attributo",
    "apposizione"
  ] %>

  <!-- Esercizio 2 - Analizza le frasi -->
  <div class="bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 p-4 md:p-6 pb-8 rounded-lg">
    <h2 class="font-bold mb-4 flex items-center gap-2">
      <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">2</span>
      Analizza le frasi, come nell'esempio. Fai attenzione ai soggetti sottintesi.
    </h2>

    <!-- Esempio -->
    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 mb-6">
      <div class="flex items-center gap-2 mb-2">
        <span class="text-gray-700 dark:text-gray-200 font-semibold">• Il gatto mangia il formaggio saporito.</span>
        <div class="w-24 h-16">
          <svg viewBox="0 0 100 80" class="w-full h-full">
            <path d="M20,40 Q30,20 40,40 T60,40" fill="#FCD34D" stroke="#F59E0B" stroke-width="2"/>
            <circle cx="25" cy="25" r="3" fill="#374151"/>
            <circle cx="35" cy="25" r="3" fill="#374151"/>
            <path d="M20,30 Q30,35 40,30" fill="none" stroke="#374151" stroke-width="2"/>
            <polygon points="15,15 20,5 25,15" fill="#FCD34D" stroke="#F59E0B" stroke-width="1"/>
            <polygon points="35,15 40,5 45,15" fill="#FCD34D" stroke="#F59E0B" stroke-width="1"/>
            <rect x="60" y="30" width="25" height="20" fill="#FBBF24" stroke="#F59E0B" stroke-width="2"/>
            <circle cx="63" cy="33" r="2" fill="#FCD34D"/>
            <circle cx="70" cy="35" r="2" fill="#FCD34D"/>
            <circle cx="78" cy="38" r="2" fill="#FCD34D"/>
          </svg>
        </div>
      </div>
      <div class="space-y-2 ml-4">
        <p><span class="font-semibold">Il gatto:</span> <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">soggetto</span></p>
        <p><span class="font-semibold">mangia:</span> <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">predicato verbale</span></p>
        <p><span class="font-semibold">il formaggio saporito:</span> <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">complemento oggetto + attributo</span></p>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Frase 1 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• I miei amici sono partiti.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">I miei amici:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">sono partiti:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 2 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• Il nonno legge una rivista.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">Il nonno:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">legge:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">una rivista:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. oggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 3 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• La Terra è un pianeta.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">La Terra:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">è:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato nominale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">un pianeta:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. oggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 4 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• Assaggiate un pasticcino!</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">Assaggiate:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">un pasticcino:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. oggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 5 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• A noi piacciono le storie allegre.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">A noi:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. di termine">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">piacciono:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">le storie allegre:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 6 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• Lo zio ha regalato a Emi una bambola.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">Lo zio:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">ha regalato:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">a Emi:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. di termine">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">una bambola:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. oggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 7 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• Il difensore passa la palla all'attaccante.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">Il difensore:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">passa:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">la palla:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. oggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">all'attaccante:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. di termine">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 8 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• Il maestro ha dato i compiti agli alunni.</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">Il maestro:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="soggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">ha dato:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">i compiti:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. oggetto">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">agli alunni:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="compl. di termine">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>

      <!-- Frase 9 -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-4">
        <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">• Sei arrivata?</p>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="w-32 text-gray-600 dark:text-gray-400">Sei arrivata:</span>
            <select class="flex-1 px-2 py-1 border-b-2 border-dotted border-<%= @pagina.base_color %>-500 dark:border-<%= @pagina.base_color %>-400 rounded focus:outline-none bg-transparent dark:text-white" data-correct-answer="predicato verbale">
              <% options.each do |opt| %>
                <option value="<%= opt == 'Scegli...' ? '' : opt %>"><%= opt %></option>
              <% end %>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 3 - Sul quaderno -->
  <div class="bg-white dark:bg-gray-800 p-4 md:p-6 pb-8">
    <h2 class="font-bold mb-4 flex items-center gap-2">
      <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">3</span>
      Fai l'analisi logica delle seguenti frasi sul quaderno.
    </h2>
    <ul class="space-y-2 text-gray-700 dark:text-gray-200">
      <li><span class="text-<%= @pagina.base_color %>-500 dark:text-<%= @pagina.base_color %>-400">•</span> La cugina di Laura va in piscina tutti i giovedì.</li>
      <li><span class="text-<%= @pagina.base_color %>-500 dark:text-<%= @pagina.base_color %>-400">•</span> Davide e Simone hanno portato un mazzo di rose alla maestra Anna.</li>
      <li><span class="text-<%= @pagina.base_color %>-500 dark:text-<%= @pagina.base_color %>-400">•</span> In autunno, nel bosco nascono tanti funghi.</li>
      <li><span class="text-<%= @pagina.base_color %>-500 dark:text-<%= @pagina.base_color %>-400">•</span> L'elefante è il più grande mammifero terrestre.</li>
      <li><span class="text-<%= @pagina.base_color %>-500 dark:text-<%= @pagina.base_color %>-400">•</span> Il dottor Alfredo ha preparato uno sciroppo per la tosse.</li>
      <li><span class="text-<%= @pagina.base_color %>-500 dark:text-<%= @pagina.base_color %>-400">•</span> I rami sono stati tagliati da nonno Giorgio.</li>
    </ul>
  </div>

  <%= render 'shared/exercise_controls' %>
</div>
