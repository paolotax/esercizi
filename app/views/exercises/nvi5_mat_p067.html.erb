<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Introduzione -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-4">Sai già che puoi scrivere uno stesso numero in diversi modi: come...</p>

      <div class="flex items-center justify-around mb-6 text-center">
        <div>
          <div class="font-bold text-<%= @pagina.base_color %>-600 text-xl mb-2">0,5</div>
          <div class="text-gray-600 text-sm">numero decimale</div>
        </div>
        <div>
          <%= render 'shared/frazione', num: 5, den: 10, bold: true %>
          <div class="text-gray-600 text-sm mt-1">frazione decimale<br>con denominatore 10</div>
        </div>
        <div>
          <%= render 'shared/frazione', num: 50, den: 100, bold: true %>
          <div class="text-gray-600 text-sm mt-1">frazione decimale<br>con denominatore 100</div>
        </div>
      </div>

      <div class="flex flex-col md:flex-row gap-4 items-start">
        <div class="flex-1">
          <p class="text-gray-700 mb-4">Impariamo ora un altro modo: sotto forma di <strong class="text-<%= @pagina.base_color %>-600">percentuale: 50%</strong>.</p>

          <div class="p-4 bg-pink-100 rounded-2xl">
            <p class="text-gray-700">
              Il simbolo <strong class="text-<%= @pagina.base_color %>-600">%</strong> si legge <strong>"per cento"</strong> e indica una <strong class="text-<%= @pagina.base_color %>-600">frazione con denominatore 100</strong>.
            </p>
          </div>
        </div>
        <%= image_tag "nvi5_mat/p067/p067_05.jpg", class: "max-w-[120px]", alt: "50%" %>
      </div>
    </div>

    <!-- Calcolare la percentuale -->
    <div class="p-4 md:p-6">
      <h2 class="font-bold text-<%= @pagina.base_color %>-600 text-xl mb-4 italic">Calcolare la percentuale</h2>

      <div class="p-4 bg-cyan-50 rounded-lg mb-4">
        <p class="text-gray-700 mb-2">A scuola è stata fatta un'indagine sugli sport preferiti da 400 alunni.</p>
        <p class="text-gray-700 mb-1">Il <strong>35%</strong> degli alunni preferisce il calcio. Quanti sono gli alunni che preferiscono il calcio?</p>
        <p class="text-gray-700 mb-1">Il <strong>23%</strong> degli alunni preferisce il nuoto. Quanti sono gli alunni che preferiscono il nuoto?</p>
        <p class="text-gray-700">Il <strong>42%</strong> degli alunni preferisce il tennis. Quanti sono gli alunni che preferiscono il tennis?</p>
      </div>

      <p class="text-gray-700 mb-4">
        Per rispondere alla prima domanda devi calcolare il <strong>35%</strong> di <strong>400</strong>, cioè i
        <%= render 'shared/frazione', num: 35, den: 100, bold: true %>
        di 400.
      </p>

      <div class="p-4 bg-gray-50 rounded-lg mb-4">
        <p class="text-center text-xl mb-2">
          (400 : 100) × 35 = 4 × 35 = <strong>140</strong>
        </p>
        <div class="flex justify-center gap-8 text-sm text-gray-600">
          <span>↑ rappresenta <%= render 'shared/frazione', num: 1, den: 100 %></span>
          <span>← rappresenta <%= render 'shared/frazione', num: 35, den: 100 %></span>
        </div>
      </div>

      <div class="p-3 bg-cyan-100 rounded-lg mb-4">
        <p class="text-gray-800">
          Dunque, la risposta alla prima domanda è: Gli alunni che preferiscono il calcio sono
          <input type="text" data-correct-answer="140" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white mx-1">
        </p>
      </div>

      <p class="text-gray-700"><strong><span class="text-pink-600">•</span> Rispondi alle altre due domande sul quaderno.</strong></p>
    </div>

    <!-- Dalla percentuale all'intero -->
    <div class="p-4 md:p-6">
      <h2 class="font-bold text-<%= @pagina.base_color %>-600 text-xl mb-4 italic">Dalla percentuale all'intero</h2>

      <div class="flex flex-col md:flex-row gap-4 items-start">
        <div class="flex-1">
          <div class="p-4 bg-cyan-50 rounded-lg mb-4">
            <p class="text-gray-700">
              Da un'indagine svolta in una scuola è emerso che il 30% degli alunni suona uno strumento musicale. Se gli alunni che suonano uno strumento musicale sono 60, quanti sono in tutto gli alunni?
            </p>
          </div>

          <p class="text-gray-700 mb-4">
            Per calcolare l'intero conoscendo il valore della percentuale, procedi come per calcolare l'intero conoscendo il valore della frazione.
          </p>

          <p class="text-gray-700 mb-4">
            <strong>60 è il 30%, cioè 60 corrisponde ai
            <%= render 'shared/frazione', num: 30, den: 100, bold: true %>
            dell'intero.</strong>
          </p>

          <div class="p-4 bg-gray-50 rounded-lg">
            <p class="text-center text-xl mb-2">
              (60 : 30) × 100 = 2 × 100 = <strong>200</strong>
            </p>
            <div class="flex justify-center gap-8 text-sm text-gray-600">
              <span>↑ corrisponde a <%= render 'shared/frazione', num: 1, den: 100 %> = 1%</span>
              <span>← corrisponde a <%= render 'shared/frazione', num: 100, den: 100 %> = 100%</span>
            </div>
          </div>
        </div>
        <%= image_tag "nvi5_mat/p067/p067_07.jpg", alt: "Bambina con chitarra", class: "max-w-[150px]" %>
      </div>
    </div>

    <!-- Riferimento quaderno -->
    <div class="text-right text-sm">
      <span class="text-pink-600 font-bold">Quaderno esercizi</span> pp. 210, 212, 214
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
