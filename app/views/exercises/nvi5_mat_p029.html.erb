<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Intro -->
    <div class="pt-4">
      <p class="text-gray-800 dark:text-gray-200 mb-4">
        L'addizione gode della proprietà commutativa e della proprietà associativa, che sono utili per <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">semplificare i calcoli</strong>.
      </p>
      <p class="font-bold text-gray-800 dark:text-gray-200">
        <span class="text-pink-600 dark:text-pink-400">•</span> Leggi e completa.
      </p>
    </div>

    <!-- Proprietà commutativa -->
    <div class="flex flex-col md:flex-row items-center gap-6">

      <div class="px-4 py-3 bg-pink-100 dark:bg-pink-900/30 rounded-2xl">
        <h3 class="font-bold text-pink-700 dark:text-pink-400 mb-2">Proprietà commutativa</h3>
        <p class="text-gray-800 dark:text-gray-200">
          Se cambi l'ordine degli addendi, il risultato non cambia. Puoi usare questa proprietà per verificare la correttezza del risultato.
        </p>
      </div>

      <div class="space-y-2">
        <div class="flex items-center gap-2">
          <span class="text-cyan-500 dark:text-cyan-400 font-bold">12,4</span>
          <span class="text-pink-600 dark:text-pink-400 font-bold">+</span>
          <span class="text-cyan-500 dark:text-cyan-400 font-bold">25,3</span>
          <span class="text-gray-700 dark:text-gray-200">=</span>
          <input type="text" data-correct-answer="37,7" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        </div>
        <div class="flex items-center gap-2">
          <span class="text-cyan-500 dark:text-cyan-400 font-bold">25,3</span>
          <span class="text-pink-600 dark:text-pink-400 font-bold">+</span>
          <input type="text" data-correct-answer="12,4" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          <span class="text-gray-700 dark:text-gray-200">=</span>
          <input type="text" data-correct-answer="37,7" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        </div>
      </div>

    </div>

    <!-- Proprietà associativa -->
    <div class="flex flex-col md:flex-row items-center md:items-start gap-6">

      <div class="p-4 md:p-6 bg-pink-100 dark:bg-pink-900/30 rounded-2xl">
        <h3 class="font-bold text-pink-700 dark:text-pink-400 mb-3">Proprietà associativa</h3>
        <p class="text-gray-800 dark:text-gray-200 mb-4">
          Se sostituisci a due addendi la loro somma, il risultato non cambia.
        </p>
      </div>

      <div class="space-y-2">
        <div class="flex items-center gap-2 flex-shrink-0">
          <span class="text-gray-700 dark:text-gray-200 whitespace-nowrap">58 + 42 + 120 =</span>
          <input type="text" data-correct-answer="220" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        </div>
        <div class="flex items-center gap-2">
          <span class="pl-6 text-gray-400">↓</span>
        </div>
        <div class="flex items-center gap-2 flex-shrink-0">
          <input type="text" data-correct-answer="100" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          <span class="text-gray-700 dark:text-gray-200">+ 120 =</span>
          <input type="text" data-correct-answer="220" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        </div>
      </div>
      <div class="flex flex-col gap-2 items-start">
        <div class="flex items-center gap-2 flex-shrink-0">
          <span class="text-gray-700 dark:text-gray-200 whitespace-nowrap">(58 + 42) + 120 =</span>
          <input type="text" data-correct-answer="220" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-400 invisible">↓</span>
        </div>
        <div class="flex items-center gap-2 flex-shrink-0">
          <input type="text" data-correct-answer="100" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          <span class="text-gray-700 dark:text-gray-200 whitespace-nowrap">+ 120 =</span>
          <input type="text" data-correct-answer="220" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        </div>
      </div>

    </div>

    <!-- Lo zero e l'uno nell'addizione -->
    <div class="p-4 md:p-6">
      <h2 class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 text-xl mb-4">Lo zero e l'uno nell'addizione</h2>
      <p class="font-bold text-gray-800 dark:text-gray-200 mb-4">
        <span class="text-pink-600 dark:text-pink-400">•</span> Leggi e completa.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Lo zero -->
        <div class="flex flex-col gap-2 items-center">
          <p class="p-4 md:p-6 text-gray-800 dark:text-gray-200 mb-4 bg-pink-100 dark:bg-pink-900/30 rounded-2xl">
            Se addizioni un <strong>qualsiasi numero a 0</strong> o se addizioni <strong>0 a qualsiasi numero</strong>, il risultato è il <strong>numero stesso</strong>.
          </p>

          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span class="text-cyan-500 dark:text-cyan-400 font-bold">0</span>
              <span class="text-gray-700 dark:text-gray-200">+ 638 =</span>
              <input type="text" data-correct-answer="638" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">5,15 +</span>
              <span class="text-cyan-500 dark:text-cyan-400 font-bold">0</span>
              <span class="text-gray-700 dark:text-gray-200">=</span>
              <input type="text" data-correct-answer="5,15" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
          </div>
        </div>

        <!-- L'uno -->
        <div class="flex flex-col gap-2 items-center">
          <p class="p-4 md:p-6 text-gray-800 dark:text-gray-200 mb-4 bg-pink-100 dark:bg-pink-900/30 rounded-2xl">
            Se aggiungi <strong>1</strong> a un <strong>numero intero</strong> ottieni il <strong>numero successivo</strong>. Per questo motivo i numeri sono <strong>infiniti</strong>.<br>
            Nei <strong>numeri decimali non esiste il successivo</strong> perché <strong>tra due numeri decimali ci sono infiniti numeri decimali</strong>.
          </p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 dark:text-gray-200">37 +</span>
            <span class="text-cyan-500 dark:text-cyan-400 font-bold">1</span>
            <span class="text-gray-700 dark:text-gray-200">=</span>
            <input type="text" data-correct-answer="38" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 dark:bg-orange-900/30 rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 divide-y-2 md:divide-y-0 md:divide-x-2 divide-pink-400">
        <!-- Esercizio 1 -->
        <div class="p-4">
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(1) %>
            Applica la proprietà commutativa e la proprietà associativa nel modo più conveniente per semplificare i calcoli.<br>
            <span class="font-normal">Segui l'esempio e calcola sul quaderno.</span>
          </p>

          <div class="p-3 mb-4">
            <p class="text-gray-700 dark:text-gray-200">
              42 + 37 + 28 = <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">42 + 28 + 37 = (42 + 28) + 37 = 70 + 37 = 107</strong>
            </p>
          </div>

          <div class="space-y-2">
            <%= render 'shared/fill_list', container_class: "contents", items: [
              { prefix: "189 + 83 + 11 =", answer: "283" },
              { prefix: "205 + 64 + 75 =", answer: "344" },
              { prefix: "127 + 19 + 53 + 21 =", answer: "220" },
              { prefix: "23,8 + 11,6 + 16,2 =", answer: "51,6" },
              { prefix: "3,18 + 0,67 + 6,82 + 3,13 =", answer: "13,8" }
            ] %>
          </div>
        </div>

        <!-- AllenaMente -->
        <div class="p-4">
          <div class="p-4 bg-yellow-200 dark:bg-yellow-900/40 rounded-lg">
            <p class="font-bold text-red-600 dark:text-red-400 mb-3">AllenaMente!</p>
            <p class="text-gray-800 dark:text-gray-200 mb-4">
              Luigi e Andrea hanno unito i loro risparmi per comprare un regalo al papà: hanno in tutto 80 euro.<br>
              Luigi ha messo 8 euro più di Andrea.<br>
              Quanti soldi ha messo Luigi?
            </p>
            <div class="flex items-center gap-2">
              <span class="text-gray-800 dark:text-gray-200">Luigi ha messo</span>
              <input type="text" data-correct-answer="44" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-800 dark:text-gray-200">euro.</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/quaderno_link', pagine: [185, 200] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
