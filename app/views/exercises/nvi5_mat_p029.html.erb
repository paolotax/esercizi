<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Intro -->
    <div class="p-4 md:p-6">
      <p class="text-gray-800 mb-4">
        L'addizione gode della proprietà commutativa e della proprietà associativa, che sono utili per <strong class="text-<%= @pagina.base_color %>-600">semplificare i calcoli</strong>.
      </p>
      <p class="font-bold text-gray-800">
        <span class="text-pink-600">•</span> Leggi e completa.
      </p>
    </div>

    <!-- Proprietà commutativa -->
    <div class="p-4 md:p-6 bg-pink-100 rounded-2xl">
      <h3 class="font-bold text-pink-700 mb-3">Proprietà commutativa</h3>
      <p class="text-gray-800 mb-4">
        Se cambi l'ordine degli addendi, il risultato non cambia. Puoi usare questa proprietà per verificare la correttezza del risultato.
      </p>

      <div class="flex flex-col md:flex-row items-center gap-6">
        <%= image_tag "nvi5_mat/p029/p029_01.jpg", class: "max-w-sm" %>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-cyan-500 font-bold">12,4</span>
            <span class="text-pink-600 font-bold">+</span>
            <span class="text-cyan-500 font-bold">25,3</span>
            <span class="text-gray-700">=</span>
            <input type="text" data-correct-answer="37,7" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-cyan-500 font-bold">25,3</span>
            <span class="text-pink-600 font-bold">+</span>
            <input type="text" data-correct-answer="12,4" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            <span class="text-gray-700">=</span>
            <input type="text" data-correct-answer="37,7" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>
    </div>

    <!-- Proprietà associativa -->
    <div class="p-4 md:p-6 bg-pink-100 rounded-2xl">
      <h3 class="font-bold text-pink-700 mb-3">Proprietà associativa</h3>
      <p class="text-gray-800 mb-4">
        Se sostituisci a due addendi la loro somma, il risultato non cambia.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="text-gray-700">58 + 42 + 120 =</span>
            <input type="text" data-correct-answer="220" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-400">↓</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap">
            <input type="text" data-correct-answer="100" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            <span class="text-gray-700">+ 120 =</span>
            <input type="text" data-correct-answer="220" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="text-gray-700">(58 + 42) + 120 =</span>
            <input type="text" data-correct-answer="220" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-400 invisible">↓</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap">
            <input type="text" data-correct-answer="100" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            <span class="text-gray-700">+ 120 =</span>
            <input type="text" data-correct-answer="220" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>
    </div>

    <!-- Lo zero e l'uno nell'addizione -->
    <div class="p-4 md:p-6">
      <h2 class="font-bold text-<%= @pagina.base_color %>-600 text-xl mb-4">Lo zero e l'uno nell'addizione</h2>
      <p class="font-bold text-gray-800 mb-4">
        <span class="text-pink-600">•</span> Leggi e completa.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Lo zero -->
        <div class="p-4 bg-cyan-50 rounded-lg">
          <p class="text-gray-800 mb-4">
            Se addizioni un <strong>qualsiasi numero a 0</strong> o se addizioni <strong>0 a qualsiasi numero</strong>, il risultato è il <strong>numero stesso</strong>.
          </p>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span class="text-cyan-500 font-bold">0</span>
              <span class="text-gray-700">+ 638 =</span>
              <input type="text" data-correct-answer="638" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700">5,15 +</span>
              <span class="text-cyan-500 font-bold">0</span>
              <span class="text-gray-700">=</span>
              <input type="text" data-correct-answer="5,15" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
          </div>
        </div>

        <!-- L'uno -->
        <div class="p-4 bg-cyan-50 rounded-lg">
          <p class="text-gray-800 mb-4">
            Se aggiungi <strong>1</strong> a un <strong>numero intero</strong> ottieni il <strong>numero successivo</strong>. Per questo motivo i numeri sono <strong>infiniti</strong>.<br>
            Nei <strong>numeri decimali non esiste il successivo</strong> perché <strong>tra due numeri decimali ci sono infiniti numeri decimali</strong>.
          </p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700">37 +</span>
            <span class="text-cyan-500 font-bold">1</span>
            <span class="text-gray-700">=</span>
            <input type="text" data-correct-answer="38" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 divide-y-2 md:divide-y-0 md:divide-x-2 divide-pink-400">
        <!-- Esercizio 1 -->
        <div class="p-4">
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(1) %>
            Applica la proprietà commutativa e la proprietà associativa nel modo più conveniente per semplificare i calcoli.<br>
            <span class="font-normal">Segui l'esempio e calcola sul quaderno.</span>
          </p>

          <div class="p-3 bg-cyan-100 rounded-lg mb-4">
            <p class="text-gray-700">
              42 + 37 + 28 = <strong class="text-<%= @pagina.base_color %>-600">42 + 28 + 37 = (42 + 28) + 37 = 70 + 37 = 107</strong>
            </p>
          </div>

          <div class="space-y-2">
            <p class="text-gray-700">189 + 83 + 11 =</p>
            <p class="text-gray-700">205 + 64 + 75 =</p>
            <p class="text-gray-700">127 + 19 + 53 + 21 =</p>
            <p class="text-gray-700">23,8 + 11,6 + 16,2 =</p>
            <p class="text-gray-700">3,18 + 0,67 + 6,82 + 3,13 =</p>
          </div>
        </div>

        <!-- AllenaMente -->
        <div class="p-4">
          <div class="p-4 bg-yellow-200 rounded-lg">
            <p class="font-bold text-red-600 mb-3">AllenaMente!</p>
            <p class="text-gray-800">
              Luigi e Andrea hanno unito i loro risparmi per comprare un regalo al papà: hanno in tutto 80 euro.<br>
              Luigi ha messo 8 euro più di Andrea.<br>
              Quanti soldi ha messo Luigi?<br>
              Come hai fatto a rispondere?
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Quaderno -->
    <div class="p-4 text-right">
      <span class="text-gray-600">Quaderno esercizi →</span>
      <span class="text-<%= @pagina.base_color %>-600 font-bold">pp. 185, 200</span>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
