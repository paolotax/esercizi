<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white font-mono"
     data-controller="exercise-checker fill-blanks auto-advance page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p073/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1 -->
  <div class="p-4 md:p-6 mb-8">
    <div class="flex items-center gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-gray-700"><strong>Leggi, colora il pallino come indicato, poi risolvi sul quaderno.</strong></p>
    </div>

    <!-- Legenda pallini -->
    <div class="p-4 bg-gray-100 rounded mb-6 text-gray-700">
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 rounded-full bg-red-500"></div>
          <span>Se mancano dati (aggiungili tu).</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 rounded-full bg-blue-500"></div>
          <span>Se ci sono dati inutili (sottolineali di blu).</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 rounded-full bg-green-500"></div>
          <span>Se ci sono dati nascosti (sottolineali di verde).</span>
        </div>
      </div>
    </div>

    <div class="space-y-4 text-gray-700">
      <div class="p-4 bg-gray-50 rounded flex items-start gap-3">
        <div class="flex-1">
          <p class="font-bold mb-2">a.</p>
          <p>Sullo scaffale del negozio ci sono 26 scatole, che contengono 14 crostatine ciascuna, e 18 bottiglie d'acqua. Quante crostatine ci sono in tutto?</p>
        </div>
        <div class="w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0"></div>
      </div>

      <div class="p-4 bg-gray-50 rounded flex items-start gap-3">
        <div class="flex-1">
          <p class="font-bold mb-2">b.</p>
          <p>Al cinema "Odeon" ci sono 320 posti. Questa sera ci sono 180 posti liberi. Il biglietto d'ingresso costa 5 euro. Quanti spettatori sono presenti?</p>
        </div>
        <div class="w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0"></div>
      </div>

      <div class="p-4 bg-gray-50 rounded flex items-start gap-3">
        <div class="flex-1">
          <p class="font-bold mb-2">c.</p>
          <p>Edoardo ha 26 pupazzetti. Viviana ne ha la metà. Quanti sono i pupazzetti di Viviana?</p>
        </div>
        <div class="w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0"></div>
      </div>

      <div class="p-4 bg-gray-50 rounded flex items-start gap-3">
        <div class="flex-1">
          <p class="font-bold mb-2">d.</p>
          <p>Faustina ha 165 galline bianche e alcune marroni. Quante galline ha in tutto Faustina?</p>
          <p class="mt-2">Luigi ha 268 galline. Qual è la differenza fra il numero di galline di Faustina e quelle di Luigi?</p>
        </div>
        <div class="w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0"></div>
      </div>

      <div class="p-4 bg-gray-50 rounded flex items-start gap-3">
        <div class="flex-1">
          <p class="font-bold mb-2">e.</p>
          <p>In un castello c'è una grande festa in maschera e vengono accese le candele dei 9 candelabri. Ogni candelabro ha una dozzina di candele. Quante sono le candele accese?</p>
        </div>
        <div class="w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0"></div>
      </div>
    </div>
  </div>

  <!-- Esercizio 2 -->
  <div class="p-4 md:p-6 mb-8">
    <div class="flex items-center gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-gray-700"><strong>Leggi il problema. Per ogni domanda scegli i dati utili e risolvi sul quaderno.</strong></p>
    </div>

    <div class="p-4 bg-gray-50 rounded mb-6 text-gray-700">
      <p>Nel bar sono stati consegnati alcuni cartoni di succo di frutta e 46 confezioni di acqua minerale. Ogni cartone di succo contiene 8 bottiglie: con una bottiglia si possono riempire 3 bicchieri di succo, che vengono venduti a 2 euro ciascuno. Ogni confezione di acqua minerale contiene 6 bottigliette che vengono vendute a 1 euro ciascuna.</p>
    </div>

    <div class="space-y-3 text-gray-700">
      <p><strong>a.</strong> Quante bottigliette d'acqua sono state consegnate complessivamente?</p>
      <p><strong>b.</strong> Quante bottiglie servono per preparare 78 bicchieri di succo?</p>
      <p><strong>c.</strong> Quanto si incassa dalla vendita di 28 confezioni di bottigliette d'acqua?</p>
      <p><strong>d.</strong> Quanto si incassa vendendo il succo di 16 bottiglie?</p>
    </div>

    <div class="mt-6 text-gray-700">
      <p>
        Quale dato del problema è sempre stato inutile?
        <input type="text" class="w-48 px-2 py-1 border-b-2 border-dotted border-gray-400 font-bold bg-white"
               placeholder="alcuni cartoni">
      </p>
      <p class="mt-2">Inventa tu una domanda per utilizzare questo dato e risolvi sul quaderno.</p>
    </div>
  </div>

  <!-- Quaderno link -->
  <div class="p-4 mb-8 text-right">
    <span class="text-gray-600">Quaderno →</span> <%= link_to "pp. 157-158", pagina_path("bus3_mat_p157"), class: "text-cyan-600 font-bold hover:underline" %>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls', color: 'blue' %>
</div>
