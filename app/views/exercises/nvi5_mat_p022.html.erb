<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-purple-50 via-white to-purple-50 rounded-3xl shadow-xl" data-controller="exercise-checker page-viewer" data-page-viewer-image-url-value="<%= asset_path('nvi5_mat/p022/page.png') %>">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-purple-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">
          NUMERI
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-purple-600">OPERARE CON I NUMERI INTERI RELATIVI</h1>
      </div>
      <div class="flex-shrink-0 bg-purple-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl cursor-pointer hover:bg-purple-700 transition-colors"
           data-action="click->page-viewer#openOriginal"
           title="Clicca per vedere la pagina originale">
        22
      </div>
    </div>
  </div>

  <div>

    <!-- Sezione teorica -->
    <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 mb-6 border-4 border-blue-200">
      <p class="text-base md:text-lg text-gray-800 mb-6">
        Con i numeri interi relativi possiamo eseguire <strong>addizioni</strong> e <strong>sottrazioni</strong>. Osserva.
      </p>

      <!-- Esempio 1: Addizione con linea -->
      <div class="bg-blue-50 rounded-lg p-6 mb-6 border-4 border-blue-200">
        <div class="mb-4">
          <p class="text-2xl font-bold text-blue-700 mb-2">â€“ 5 + 9 = + 4</p>
          <p class="text-gray-700">â†’ Parti da <strong class="text-red-600">â€“ 5</strong> e spostati verso <strong class="text-blue-600">destra</strong> di <strong>9 numeri</strong>: arrivi a <strong class="text-blue-600">+ 4</strong>.</p>
        </div>
        <div class="overflow-x-auto">
          <%= image_tag "nvi5_mat/p022/p022_01.jpg", alt: "Linea dei numeri -5 + 9", class: "w-full max-w-3xl mx-auto" %>
        </div>
      </div>

      <!-- Esempio 2: Sottrazione con linea -->
      <div class="bg-red-50 rounded-lg p-6 mb-6 border-4 border-red-200">
        <div class="mb-4">
          <p class="text-2xl font-bold text-red-700 mb-2">+ 4 â€“ 7 = â€“ 3</p>
          <p class="text-gray-700">â†’ Parti da <strong class="text-blue-600">+ 4</strong> e spostati verso <strong class="text-red-600">sinistra</strong> di <strong>7 numeri</strong>: arrivi a <strong class="text-red-600">â€“ 3</strong>.</p>
        </div>
        <div class="overflow-x-auto">
          <%= image_tag "nvi5_mat/p022/p022_02.jpg", alt: "Linea dei numeri +4 - 7", class: "w-full max-w-3xl mx-auto" %>
        </div>
      </div>

      <!-- Box importante -->
      <div class="bg-gradient-to-r from-pink-100 to-purple-100 rounded-lg p-6 mb-8 border-2 border-pink-400">
        <p class="text-xl font-bold text-center text-purple-800">
          Con i numeri interi relativi la sottrazione Ã¨ sempre possibile!
        </p>
      </div>

      <!-- Regole -->
      <p class="text-lg font-bold text-purple-700 mb-6">Leggi e completa.</p>

      <!-- Regola 1: Stesso segno -->
      <div class="bg-green-50 rounded-lg p-6 mb-6 border-4 border-green-200">
        <p class="text-lg font-bold text-gray-800 mb-4">
          â€¢ Se due numeri hanno lo <strong>stesso segno</strong>, anche la somma avrÃ  <strong>lo stesso segno</strong>.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Esempi -->
          <div class="space-y-3">
            <div class="bg-white rounded p-3 border-2 border-green-200">
              <p class="text-xl font-bold text-blue-600">+ 5 + 7 = + 12</p>
            </div>
            <div class="bg-white rounded p-3 border-2 border-green-200">
              <p class="text-xl font-bold text-red-600">â€“ 6 â€“ 5 = â€“ 11</p>
            </div>
          </div>

          <!-- Esercizi -->
          <div class="space-y-3">
            <div class="bg-orange-50 rounded p-3 border-2 border-orange-300">
              <div class="flex items-center gap-3">
                <span class="text-xl font-bold text-blue-600">+ 5 + 2 =</span>
                <input type="text"
                       data-correct-answer="+7"
                       class="flex-1 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center text-xl font-bold"
                       placeholder="...">
              </div>
            </div>
            <div class="bg-orange-50 rounded p-3 border-2 border-orange-300">
              <div class="flex items-center gap-3">
                <span class="text-xl font-bold text-red-600">â€“ 4 â€“ 5 =</span>
                <input type="text"
                       data-correct-answer="-9"
                       class="flex-1 px-3 py-2 border-2 border-red-300 rounded focus:border-red-500 focus:outline-none text-center text-xl font-bold"
                       placeholder="...">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Regola 2: Segno diverso -->
      <div class="bg-yellow-50 rounded-lg p-6 border-4 border-yellow-200">
        <p class="text-lg font-bold text-gray-800 mb-4">
          â€¢ Se devi sommare due numeri che hanno <strong>segno diverso</strong>, prima esegui la <strong>sottrazione</strong> tra il numero piÃ¹ grande e il numero piÃ¹ piccolo, poi scrivi il risultato con davanti il <strong>segno del numero piÃ¹ grande</strong>.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Esempi -->
          <div class="space-y-3">
            <div class="bg-white rounded p-3 border-2 border-yellow-200">
              <p class="text-xl font-bold text-gray-800">+ 8 â€“ 15 = <span class="text-red-600">â€“ 7</span></p>
            </div>
            <div class="bg-white rounded p-3 border-2 border-yellow-200">
              <p class="text-xl font-bold text-gray-800">â€“ 8 + 14 = <span class="text-blue-600">+ 6</span></p>
            </div>
          </div>

          <!-- Esercizi -->
          <div class="space-y-3">
            <div class="bg-orange-50 rounded p-3 border-2 border-orange-300">
              <div class="flex items-center gap-3">
                <span class="text-xl font-bold text-gray-800">+ 3 â€“ 9 =</span>
                <input type="text"
                       data-correct-answer="-6"
                       class="flex-1 px-3 py-2 border-2 border-purple-300 rounded focus:border-purple-500 focus:outline-none text-center text-xl font-bold"
                       placeholder="...">
              </div>
            </div>
            <div class="bg-orange-50 rounded p-3 border-2 border-orange-300">
              <div class="flex items-center gap-3">
                <span class="text-xl font-bold text-gray-800">â€“ 5 + 8 =</span>
                <input type="text"
                       data-correct-answer="+3"
                       class="flex-1 px-3 py-2 border-2 border-purple-300 rounded focus:border-purple-500 focus:outline-none text-center text-xl font-bold"
                       placeholder="...">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="bg-purple-100 rounded-lg p-4">
      <h3 class="text-2xl font-bold text-purple-800">ESERCIZI</h3>
    </div>

    <!-- Exercise 1: Con la linea dei numeri -->
    <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 mb-6 border-4 border-blue-500">
      <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3">
        <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">1</span>
        <span>Disegna sul quaderno una linea dei numeri da â€“ 15 a + 15 e calcola.</span>
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- + 5 - 8 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">+ 5 â€“ 8 =</span>
            <input type="text"
                   data-correct-answer="-3"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- + 10 - 15 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">+ 10 â€“ 15 =</span>
            <input type="text"
                   data-correct-answer="-5"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- - 6 + 6 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">â€“ 6 + 6 =</span>
            <input type="text"
                   data-correct-answer="0"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- - 8 + 2 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">â€“ 8 + 2 =</span>
            <input type="text"
                   data-correct-answer="-6"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- - 12 + 9 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">â€“ 12 + 9 =</span>
            <input type="text"
                   data-correct-answer="-3"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- + 8 - 13 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">+ 8 â€“ 13 =</span>
            <input type="text"
                   data-correct-answer="-5"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- - 4 + 5 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">â€“ 4 + 5 =</span>
            <input type="text"
                   data-correct-answer="+1"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- + 10 - 12 -->
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-bold text-gray-800">+ 10 â€“ 12 =</span>
            <input type="text"
                   data-correct-answer="-2"
                   class="w-16 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold"
                   placeholder="...">
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise 2: Senza linea dei numeri -->
    <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 mb-6 border-4 border-pink-500">
      <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3">
        <span class="bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">2</span>
        <span>Ora calcola senza utilizzare la linea dei numeri.</span>
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- + 7 - 9 -->
        <div class="bg-pink-50 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <span class="text-xl font-bold text-gray-800">+ 7 â€“ 9 =</span>
            <input type="text"
                   data-correct-answer="-2"
                   class="flex-1 px-3 py-3 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center text-xl font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- - 9 + 3 -->
        <div class="bg-pink-50 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <span class="text-xl font-bold text-gray-800">â€“ 9 + 3 =</span>
            <input type="text"
                   data-correct-answer="-6"
                   class="flex-1 px-3 py-3 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center text-xl font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- - 10 + 13 -->
        <div class="bg-pink-50 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <span class="text-xl font-bold text-gray-800">â€“ 10 + 13 =</span>
            <input type="text"
                   data-correct-answer="+3"
                   class="flex-1 px-3 py-3 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center text-xl font-bold"
                   placeholder="...">
          </div>
        </div>

        <!-- + 8 - 11 -->
        <div class="bg-pink-50 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <span class="text-xl font-bold text-gray-800">+ 8 â€“ 11 =</span>
            <input type="text"
                   data-correct-answer="-3"
                   class="flex-1 px-3 py-3 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center text-xl font-bold"
                   placeholder="...">
          </div>
        </div>
      </div>
    </div>

    <!-- AllenaMente: Problema storico -->
    <div class="bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg shadow-lg p-8 border-4 border-cyan-400">
      <div class="flex items-center gap-3 mb-6">
        <div class="bg-cyan-500 text-white rounded-full px-4 py-2 font-bold text-lg">
          AllenaMente!
        </div>
      </div>

      <div class="bg-white rounded-lg p-6 mb-6">
        <p class="text-base md:text-lg text-gray-800 mb-4">
          Usa i numeri interi relativi in <strong>Storia</strong> per calcolare anni e durate. Ricorda: gli anni <strong class="text-red-600">avanti Cristo (a.C.)</strong> corrispondono ai <strong class="text-red-600">numeri negativi</strong>, quelli <strong class="text-blue-600">dopo Cristo (d.C.)</strong> ai <strong class="text-blue-600">numeri positivi</strong>.
        </p>
        <p class="text-base md:text-lg text-gray-800 font-semibold">
          Ottaviano Augusto nacque nel <strong class="text-red-600">63 a.C.</strong>, divenne imperatore nel <strong class="text-red-600">27 a.C.</strong> e morÃ¬ nel <strong class="text-blue-600">14 d.C.</strong>
        </p>
        <p class="text-gray-700 mt-3">
          Inserisci i dati su una linea dei numeri, poi rispondi.
        </p>
      </div>

      <div class="space-y-4">
        <div class="bg-orange-100 rounded-lg p-6 border-2 border-orange-300">
          <div class="flex flex-col md:flex-row md:items-center gap-3">
            <span class="text-lg font-bold text-gray-800 flex-1">â€¢ Quanti anni aveva Ottaviano Augusto quando Ã¨ diventato imperatore?</span>
            <div class="flex items-center gap-2">
              <input type="text"
                     data-correct-answer="36"
                     class="w-20 px-3 py-3 border-2 border-cyan-400 rounded focus:border-cyan-600 focus:outline-none text-center text-xl font-bold"
                     placeholder="...">
              <span class="text-lg font-semibold text-gray-700">anni</span>
            </div>
          </div>
        </div>

        <div class="bg-orange-100 rounded-lg p-6 border-2 border-orange-300">
          <div class="flex flex-col md:flex-row md:items-center gap-3">
            <span class="text-lg font-bold text-gray-800 flex-1">â€¢ Quanti anni aveva quando Ã¨ morto?</span>
            <div class="flex items-center gap-2">
              <input type="text"
                     data-correct-answer="77"
                     class="w-20 px-3 py-3 border-2 border-cyan-400 rounded focus:border-cyan-600 focus:outline-none text-center text-xl font-bold"
                     placeholder="...">
              <span class="text-lg font-semibold text-gray-700">anni</span>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-6 bg-cyan-100 rounded-lg p-4">
        <p class="text-sm text-cyan-900">
          <span class="font-bold">ðŸ’¡ Suggerimento:</span> Per calcolare l'etÃ , sottrai l'anno di nascita dall'anno dell'evento. Ricorda che gli anni a.C. sono numeri negativi!
        </p>
      </div>
    </div>

    <!-- Riferimento al quaderno esercizi -->
    <div class="bg-purple-100 rounded-lg p-4 text-center">
      <p class="text-sm font-semibold text-purple-800">ðŸ““ Quaderno esercizi p. 182</p>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls', color: 'purple', current_page: 'nvi5_mat_p022' %>

  </div>
</div>
