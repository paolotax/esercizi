<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-4xl mx-auto p-3 md:p-6 bg-white font-mono"
     data-controller="exercise-checker page-viewer fill-blanks auto-advance text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p111/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1 -->
  <div class="mb-16">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">1</div>
      <p class="text-gray-700"><strong>Scrivi l'unità di misura della cifra evidenziata in rosso.</strong></p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <p>1<span class="text-red-600 font-bold">2</span> daℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="daℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p>2<span class="text-red-600 font-bold">0</span>14 cℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="ℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p><span class="text-red-600 font-bold">3</span>014 cℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="daℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p><span class="text-red-600 font-bold">6</span>57 dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="daℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p>6<span class="text-red-600 font-bold">1</span> ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="ℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p>2<span class="text-red-600 font-bold">4</span>1 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="daℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p><span class="text-red-600 font-bold">5</span>13 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="hℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
      <p><span class="text-red-600 font-bold">8</span>14 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="hℓ" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></p>
    </div>
  </div>

  <!-- Esercizio 2 -->
  <div class="mb-16">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">2</div>
      <p class="text-gray-700"><strong>Scomponi le misure come nell'esempio.</strong></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="space-y-2">
        <p>254 ℓ = <span class="text-blue-600">2</span> hℓ, <span class="text-blue-600">5</span> daℓ, <span class="text-blue-600">4</span> ℓ</p>
        <p>354 dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="3" class="w-12 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> daℓ, <input type="text" data-fill-blanks-target="input" data-correct-answer="5" class="w-12 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ, <input type="text" data-fill-blanks-target="input" data-correct-answer="4" class="w-12 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ</p>
        <p>210 mℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="2" class="w-12 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ, <input type="text" data-fill-blanks-target="input" data-correct-answer="1" class="w-12 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> cℓ, <input type="text" data-fill-blanks-target="input" data-correct-answer="0" class="w-12 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> mℓ</p>
      </div>
      <div class="space-y-2">
        <p>1900 cℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="1 daℓ 9 ℓ" class="w-48 border-b-2 border-dotted border-gray-400 bg-transparent"></p>
        <p>285 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="2 hℓ 8 daℓ 5 ℓ" class="w-48 border-b-2 border-dotted border-gray-400 bg-transparent"></p>
        <p>182 dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="1 daℓ 8 ℓ 2 dℓ" class="w-48 border-b-2 border-dotted border-gray-400 bg-transparent"></p>
      </div>
    </div>
  </div>

  <!-- Esercizio 3 -->
  <div class="mb-16">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">3</div>
      <p class="text-gray-700"><strong>Componi le misure come negli esempi. Se necessario inserisci gli zero segnaposto.</strong></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="space-y-4 md:space-y-2">
        <p>5 ℓ, 1 cℓ = <span class="text-blue-600">501</span> cℓ</p>
        <p>2 daℓ, 8 ℓ, 3 dℓ, 4 cℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="2834" class="w-20 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> cℓ</p>
        <p>1 hℓ, 6 daℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="16" class="w-20 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> daℓ</p>
        <p>7 hℓ, 5 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="705" class="w-20 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ</p>
        <p>6 daℓ, 9 dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="609" class="w-20 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ</p>
      </div>
      <div class="space-y-4 md:space-y-2">
        <p>3 ℓ, 8 mℓ = <span class="text-blue-600">3000</span> mℓ + <span class="text-blue-600">8</span> mℓ = <span class="text-blue-600">3008</span> mℓ</p>
        <p>2 hℓ, 3 daℓ, 1 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="200" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ + <input type="text" data-fill-blanks-target="input" data-correct-answer="30" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ + <input type="text" data-fill-blanks-target="input" data-correct-answer="1" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="231" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ</p>
        <p>5 cℓ, 3 mℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="50" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> mℓ + <input type="text" data-fill-blanks-target="input" data-correct-answer="3" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> mℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="53" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> mℓ</p>
        <p>9 ℓ, 2 dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="90" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ + <input type="text" data-fill-blanks-target="input" data-correct-answer="2" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="92" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ</p>
        <p>4 hℓ, 8 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="400" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ + <input type="text" data-fill-blanks-target="input" data-correct-answer="8" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="408" class="w-14 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ</p>
      </div>
    </div>
  </div>

  <!-- Esercizio 4 e 5 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <!-- Esercizio 4 -->
    <div>
      <div class="flex items-start gap-3 mb-4">
        <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">4</div>
        <p class="text-gray-700"><strong>Completa la tabella.</strong></p>
      </div>
      <div class="flex justify-center">
        <div class="inline-block">
          <p class="text-center text-pink-500 font-bold mb-1">× 10</p>
          <table class="border-collapse text-center">
            <thead>
              <tr class="text-cyan-500">
                <th class="bg-cyan-100 p-2 border w-24">daℓ</th>
                <th class="bg-cyan-50 p-2 border w-24">ℓ</th>
              </tr>
            </thead>
            <tbody>
              <tr><td class="p-2 border bg-white">102</td><td class="p-2 border bg-white"><input type="text" data-fill-blanks-target="input" data-correct-answer="1020" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></td></tr>
              <tr><td class="p-2 border bg-white">37</td><td class="p-2 border bg-white"><input type="text" data-fill-blanks-target="input" data-correct-answer="370" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></td></tr>
              <tr><td class="p-2 border bg-white"><input type="text" data-fill-blanks-target="input" data-correct-answer="40" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></td><td class="p-2 border bg-white">400</td></tr>
              <tr><td class="p-2 border bg-white"><input type="text" data-fill-blanks-target="input" data-correct-answer="58" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"></td><td class="p-2 border bg-white">580</td></tr>
            </tbody>
          </table>
          <p class="text-center text-green-500 font-bold mt-1">: 10</p>
        </div>
      </div>
    </div>

    <!-- Esercizio 5 -->
    <div>
      <div class="flex items-start gap-3 mb-4">
        <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">5</div>
        <p class="text-gray-700"><strong>Completa le equivalenze.</strong></p>
      </div>
      <div class="space-y-2">
        <p>7 hℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="70" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> daℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="700" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ</p>
        <p>500 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="50" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> daℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="5" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> hℓ</p>
        <p><input type="text" data-fill-blanks-target="input" data-correct-answer="80" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> ℓ = 800 dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="8" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> daℓ</p>
        <p><input type="text" data-fill-blanks-target="input" data-correct-answer="2" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="20" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> cℓ = 200 mℓ</p>
        <p>300 mℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="30" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> cℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="3" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ</p>
        <p><input type="text" data-fill-blanks-target="input" data-correct-answer="180" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> cℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="18" class="w-16 border-b-2 border-dotted border-gray-400 bg-transparent text-center"> dℓ = 18 ℓ</p>
      </div>
    </div>
  </div>

  <!-- Quaderno -->
  <div class="p-4 mb-8 text-right">
    <span class="text-gray-600">Quaderno →</span> <span class="text-blue-600 font-bold">p. 168</span>
  </div>

  <%= render 'shared/exercise_controls' %>
</div>
