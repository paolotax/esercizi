<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Introduzione -->
    <div class="space-y-4">
      <p class="text-gray-700">
        Il valore delle merci e i prezzi vengono espressi con <strong>valute</strong>, cioè con <strong>unità di misura monetarie</strong>,
        che non sono uguali in tutto il mondo. La valuta usata nella maggior parte degli Stati dell'Unione europea,
        compresa l'Italia, è l'<strong>euro</strong>. Il suo simbolo è <strong>€</strong> e <strong>si scrive prima del numero</strong>.
      </p>
      <p class="text-gray-700">
        L'euro ha <strong>multipli</strong> e <strong>sottomultipli</strong>; questi ultimi sono espressi in <strong>centesimi</strong>
        (perciò i prezzi <strong>si indicano con due cifre decimali</strong> e non una).
      </p>
    </div>

    <!-- Tabella Euro -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr>
            <th class="p-3 bg-cyan-500 text-white font-bold border border-gray-300" colspan="4">MULTIPLI</th>
            <th class="p-3 bg-orange-500 text-white font-bold border border-gray-300">EURO (€)</th>
            <th class="p-3 bg-<%= @pagina.base_color %>-500 text-white font-bold border border-gray-300" colspan="3">SOTTOMULTIPLI</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_132_393_81_45.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 200</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_229_390_81_50.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 100</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_326_393_76_49.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 50</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_424_393_71_43.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 20</div>
            </td>
            <td class="p-3 border border-gray-300 text-center align-middle" rowspan="2">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_518_426_59_59.png", class: "h-10 mx-auto" %>
              <div class="font-bold mt-1">€ 1</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_623_390_59_60.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 0,50</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_761_389_56_55.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 0,20</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_905_399_45_45.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 0,10</div>
            </td>
          </tr>
          <tr>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_177_475_76_40.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 10</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_284_476_78_39.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 5</div>
            </td>
            <td class="p-3 border border-gray-300 text-center" colspan="2">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_414_472_40_41.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 2</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_631_473_50_47.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 0,05</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_773_477_42_42.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 0,02</div>
            </td>
            <td class="p-3 border border-gray-300 text-center">
              <%= image_tag "nvi5_mat/p084/output-1715938802084_911_482_38_36.png", class: "h-8 mx-auto" %>
              <div class="font-bold mt-1">€ 0,01</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Regola dell'1-2-5 -->
    <div class="p-4 bg-white rounded-2xl border-2 border-blue-400">
      <p class="text-gray-700">
        Multipli e sottomultipli dell'euro seguono la <strong>regola dell'1-2-5</strong>: ci sono monete da 1-2-5-10-20-50 centesimi,
        tagli da 1-2-5 euro e così via, ma non c'è alcuna moneta o banconota con valore 3 o 4 centesimi, 30 o 40 euro...
      </p>
    </div>

    <!-- Il cambio di moneta -->
    <div class="space-y-4">
      <h2 class="italic text-<%= @pagina.base_color %>-600">Il cambio di moneta</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <p class="text-gray-700">
            Se devi recarti in un Paese dove non si usa l'euro, devi fare un <strong>cambio di valuta</strong>.
            Devi perciò andare in una banca o in un ufficio di cambi, consegnare i tuoi euro e ricevere l'equivalente in valuta del posto.
          </p>
          <p class="text-gray-700">
            Se per esempio devi fare un viaggio in Gran Bretagna e vuoi cambiare 500 euro, quante sterline riceverai?<br>
            Quel giorno un euro vale 0,87 sterline, perciò:
          </p>
          <p class="text-gray-700 font-bold text-center">
            500 × <span class="text-cyan-600">0,87</span> = 435 sterline
          </p>
        </div>

        <div class="p-4">
          <p class="font-bold text-gray-700 mb-3">Per cambiare gli euro in qualunque moneta straniera calcola:</p>
          <div class="flex items-center justify-center gap-2 md:gap-4 flex-wrap">
            <div class="px-3 py-2 bg-cyan-100 rounded-lg border-2 border-cyan-400 font-bold">euro</div>
            <div class="font-bold">×</div>
            <div class="text-gray-600 italic">rapporto di cambio</div>
            <div class="font-bold">=</div>
            <div class="px-3 py-2 bg-orange-100 rounded-lg border-2 border-orange-400 font-bold">moneta straniera</div>
          </div>
          <div class="mt-4 flex items-center justify-center gap-2 md:gap-4 flex-wrap">
            <div class="px-3 py-2 bg-orange-100 rounded-lg border-2 border-orange-400 font-bold">moneta straniera</div>
            <div class="font-bold">:</div>
            <div class="text-gray-600 italic">rapporto di cambio</div>
            <div class="font-bold">=</div>
            <div class="px-3 py-2 bg-cyan-100 rounded-lg border-2 border-cyan-400 font-bold">euro</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:divide-x-2 md:divide-orange-300">
        <!-- Colonna sinistra: Esercizio 1 -->
        <div class="md:pr-4">
          <div>
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(1) %>
              Componi i valori indicati usando il minor numero di banconote e monete.
            </p>

            <div class="space-y-4">
              <div class="flex items-center gap-2 flex-wrap">
                <span class="shrink-0">€ 535 →</span>
                <input type="text" data-correct-answer="2 da 200, 1 da 100, 1 da 20, 1 da 10, 1 da 5" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center bg-transparent">
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="shrink-0">€ 257,70 →</span>
                <input type="text" data-correct-answer="1 da 200, 1 da 50, 1 da 5, 1 da 2, 1 da 0,50, 1 da 0,20" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center bg-transparent">
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="shrink-0">€ 94,20 →</span>
                <input type="text" data-correct-answer="1 da 50, 2 da 20, 2 da 2, 1 da 0,20" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center bg-transparent">
              </div>
            </div>
          </div>
        </div>

        <!-- Colonna destra: AllenaMente -->
        <div class="md:pl-4">
          <div class="p-4 bg-yellow-50 rounded-lg border-2 border-yellow-400">
            <p class="font-bold text-yellow-700 mb-2">AllenaMente!</p>
            <p class="text-gray-700 mb-4">
              Elena vive negli Stati Uniti e vuole tornare in Italia a trovare i parenti.<br>
              Va in banca e cambia 300 dollari in euro.<br>
              Se il cambio di 1 euro equivale a 1,05 dollari, quanti euro riceve?
            </p>
            <div class="flex items-center gap-2">
              <input type="text" data-correct-answer="285,71" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="shrink-0">euro (circa)</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/quaderno_link', pagine: [223, 226, 227] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
