<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-orange-50 via-white to-red-50 rounded-3xl shadow-xl" data-controller="exercise-checker">

  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-orange-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">
          VERIFICA
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-orange-600">Il lessico (Parte 2)</h1>
      </div>
      <div class="flex-shrink-0 bg-orange-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl">
        39
      </div>
    </div>
  </div>

  <!-- Exercise 6: Identify homonyms and grammatical values -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-blue-200 shadow-2xl p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-blue-700 mb-3">
      <span class="font-bold">6</span> Evidenzia gli omonimi e indica per ognuno il valore grammaticale.
    </h2>

    <% homonym_sentences = [
      { text: "Aggiungi il sale all'insalata.", word: "sale", answer: "nome" },
      { text: "Siamo in troppi in ascensore. Chi sale a piedi?", word: "sale", answer: "verbo" },
      { text: "Mei porta i capelli a coda di cavallo.", word: "porta", answer: "verbo" },
      { text: "Ho appeso una cappelliera sopra la porta.", word: "porta", answer: "nome" }
    ] %>

    <div class="space-y-3 text-base md:text-lg">
      <% homonym_sentences.each do |sentence| %>
        <div class="bg-blue-50 border-2 border-blue-200 rounded-xl px-3 py-3">
          <p class="text-gray-700 mb-2"><%= sentence[:text] %></p>
          <input type="text"
                 class="w-full border-b-2 border-blue-500 bg-white rounded px-3 py-1 focus:outline-none focus:border-blue-700"
                 data-fill-blanks-target="input"
                 data-answer="<%= sentence[:answer] %>"
                 data-correct-answer="<%= sentence[:answer] %>"
                 placeholder="..............................................."
                 maxlength="40">
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 7: Identify sector language -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-purple-200 shadow-2xl p-4 md:p-6" data-controller="exercise-group">
    <h2 class="text-lg md:text-xl font-bold text-purple-700 mb-3">
      <span class="font-bold">7</span> Indica se la frase appartiene al linguaggio informatico, meteorologico, politico o dello spettacolo (colora il quadratino).
    </h2>

    <% sector_sentences = [
      { text: "Sono in arrivo venti da ponente.", sector: "meteorologico", color: "blue" },
      { text: "L'opposizione chiede elezioni anticipate.", sector: "politico", color: "red" },
      { text: "Il processore è di ultima generazione.", sector: "informatico", color: "purple" },
      { text: "Dietro il palco ci sono i camerini.", sector: "dello spettacolo", color: "pink" }
    ] %>

    <div class="space-y-3 text-base md:text-lg">
      <% sector_sentences.each_with_index do |sentence, index| %>
        <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-3 py-3">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox"
                   name="sector<%= index %>"
                   data-correct-answer="<%= sentence[:sector] %>"
                   class="w-5 h-5 mt-0.5">
            <span class="text-gray-700"><%= sentence[:text] %></span>
          </label>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 8: Write sentences with proper meaning -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-green-200 shadow-2xl p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-green-700 mb-3">
      <span class="font-bold">8</span> Le parole evidenziate hanno significato figurato. Scrivi una frase in cui la stessa parola è usata nel significato proprio.
    </h2>

    <% figurative_sentences = [
      "La tua proposta è una trappola, l'ho capito.",
      "Seguirò le orme di papà, che è falegname.",
      "Kevin spende tutto, ha le mani bucate.",
      "Il tuo arrivo segna una svolta in ufficio."
    ] %>

    <div class="space-y-3 text-base md:text-lg">
      <% figurative_sentences.each do |sentence| %>
        <div class="bg-green-50 border-2 border-green-200 rounded-xl px-3 py-3">
          <p class="text-gray-700 mb-2 font-semibold"><%= sentence %></p>
          <p class="text-gray-500 text-sm">Scrivi qui la frase con significato proprio: ...............................................</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Le mie competenze section -->
  <div class="mb-6 bg-gradient-to-r from-yellow-100 to-amber-100 rounded-2xl border-4 border-yellow-300 shadow-2xl p-4 md:p-6">
    <h2 class="text-xl md:text-2xl font-bold text-amber-700 mb-4">
      Le mie competenze
    </h2>

    <!-- Exercise 9: Identify metaphor -->
    <div class="mb-6" data-controller="exercise-group">
      <h3 class="text-lg md:text-xl font-bold text-amber-700 mb-3">
        <span class="font-bold">9</span> In quale frase si usa una metafora? (seleziona una risposta)
      </h3>

      <% metaphor_sentences = [
        { text: "La voce di Susanna è dolce come il miele.", is_metaphor: false },
        { text: "Quando danza, Umberto si muove leggero come una piuma.", is_metaphor: false },
        { text: "Luca è forte come un toro, sposta scatoloni su scatoloni.", is_metaphor: false },
        { text: "Davide non aiuta mai nessuno, ha il cuore di pietra.", is_metaphor: true }
      ] %>

      <div class="space-y-3 text-base md:text-lg">
        <% metaphor_sentences.each_with_index do |sentence, index| %>
          <label class="flex items-start gap-3 bg-yellow-50 border-2 border-yellow-200 rounded-xl px-3 py-3 cursor-pointer hover:bg-yellow-100 transition">
            <input type="radio"
                   name="metaphor"
                   value="<%= index %>"
                   data-correct-answer="<%= sentence[:is_metaphor] ? 'true' : 'false' %>"
                   class="w-5 h-5 mt-0.5">
            <span class="text-gray-700"><%= sentence[:text] %></span>
          </label>
        <% end %>
      </div>
    </div>

    <!-- Exercise 10: Identify archaisms and neologisms -->
    <div class="bg-white rounded-xl p-4 md:p-6" data-controller="fill-blanks">
      <h3 class="text-lg md:text-xl font-bold text-amber-700 mb-3">
        <span class="font-bold">10</span> Leggi le frasi, poi esegui e rispondi.
      </h3>

      <% sentences_10 = [
        "Comparve dal folto del bosco una donzella.",
        "Ti orienti, senza navigatore satellitare?",
        "Elisa e Rossella ebbero un alterco.",
        "Riconobbi il tracciato di un sentiero antico."
      ] %>

      <div class="space-y-3 text-base md:text-lg mb-4">
        <% sentences_10.each do |sentence| %>
          <div class="bg-amber-50 border-2 border-amber-200 rounded-xl px-3 py-3">
            <p class="text-gray-700"><%= sentence %></p>
          </div>
        <% end %>
      </div>

      <div class="space-y-3">
        <p class="text-gray-700">- Sottolinea una volta gli arcaismi, due volte il neologismo.</p>
        <div class="flex flex-wrap items-center gap-2">
          <span class="text-gray-700">- Ci sono frasi senza arcaismi né neologismi? Quante?</span>
          <input type="text"
                 class="border-b-2 border-amber-500 bg-transparent px-2 py-1 text-center focus:outline-none focus:border-amber-700 w-24"
                 data-fill-blanks-target="input"
                 data-answer="2"
                 data-correct-answer="2"
                 placeholder=".................."
                 maxlength="5">
        </div>
      </div>
    </div>
  </div>

  <div class="text-right text-sm text-gray-500 mb-6">
    Esercizi p. <%= link_to "144", pagina_path("nvl5_gram_p144"), class: "text-gray-600 hover:text-gray-800 underline" %>
  </div>

  <!-- Exercise Controls -->
  <div class="mt-6">
    <%= render 'shared/exercise_controls', color: 'orange', current_page: 'nvl5_gram_p039' %>
  </div>
</div>
