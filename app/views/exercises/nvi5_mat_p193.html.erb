<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Esercizio 1: IMPARARE TUTTI - Moltiplicazioni in riga -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Colonna sinistra e centrale: esercizi -->
      <div class="md:col-span-2 p-4 bg-white rounded-2xl border-3 border-yellow-400">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          Esegui le moltiplicazioni in riga.<br>
          <span class="font-normal">Segui l'esempio.</span>
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Colonna 1 -->
          <div class="space-y-3">
            <!-- Esempio -->
            <div class="p-2 bg-custom-blue-light rounded">
              <span class="text-gray-700">0,25 × 10 = </span>
              <span class="font-bold text-cyan-600">2,5</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">12,6 × 100 =</span>
              <input type="text" data-correct-answer="1260" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">8,347 × <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="8347" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">14,09 × 100 =</span>
              <input type="text" data-correct-answer="1409" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">76,93 × <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="76930" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>

          <!-- Colonna 2 -->
          <div class="space-y-3">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">0,628 × 100 =</span>
              <input type="text" data-correct-answer="62,8" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">5,731 × 10 =</span>
              <input type="text" data-correct-answer="57,31" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">123,8 × <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="123800" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">0,75 × 10 =</span>
              <input type="text" data-correct-answer="7,5" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">4,9 × 100 =</span>
              <input type="text" data-correct-answer="490" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>
      </div>

      <!-- Box regola moltiplicazione -->
      <div class="p-3 bg-pink-light rounded-3xl">
        <p class="text-gray-700 mb-3">
          <span class="font-bold text-custom-pink">Per moltiplicare un numero decimale per 10, 100, <span class="whitespace-nowrap">1 000</span></span>:
          sposta la virgola verso destra di 1, 2 o 3 posti.<br>
          Se mancano cifre a destra aggiungi gli zeri.
        </p>
        <div class="space-y-1 text-gray-700">
          <p>2,84 <span class="font-bold">× 10</span> = 28<span class="font-bold">,</span>4</p>
          <p>2,84 <span class="font-bold">× 100</span> = 284</p>
          <p>2,84 <span class="font-bold">× <span class="whitespace-nowrap">1 000</span></span> = <span class="whitespace-nowrap">2 84<span class="font-bold">0</span></span></p>
        </div>
      </div>
    </div>

    <!-- Box regola divisione e Esercizio 2 -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Box regola divisione -->
      <div class="p-3 bg-pink-light rounded-3xl">
        <p class="text-gray-700 mb-3">
          <span class="font-bold text-custom-pink">Per dividere un numero decimale per 10, 100, <span class="whitespace-nowrap">1 000</span></span>:
          sposta la virgola verso sinistra di 1, 2 o 3 posti.<br>
          Se mancano cifre a sinistra, aggiungi gli zeri.
        </p>
        <div class="space-y-1 text-gray-700">
          <p>96,3 <span class="font-bold">: 10</span> = 9<span class="font-bold">,</span>63</p>
          <p>96,3 <span class="font-bold">: 100</span> = <span class="font-bold">0,</span>963</p>
          <p>96,3 <span class="font-bold">: <span class="whitespace-nowrap">1 000</span></span> = <span class="font-bold">0,0</span>963</p>
        </div>
      </div>

      <!-- Esercizio 2: Divisioni in riga -->
      <div class="md:col-span-2">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(2) %>
          Esegui le divisioni in riga.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Colonna 1 -->
          <div class="space-y-3">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">25,8 : 100 =</span>
              <input type="text" data-correct-answer="0,258" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">91,7 : 10 =</span>
              <input type="text" data-correct-answer="9,17" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">4 : <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="0,004" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">459,3 : 10 =</span>
              <input type="text" data-correct-answer="45,93" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">12,6 : <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="0,0126" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>

          <!-- Colonna 2 -->
          <div class="space-y-3">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">8,3 : 100 =</span>
              <input type="text" data-correct-answer="0,083" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">24 817,1</span> : 10 =</span>
              <input type="text" data-correct-answer="2481,71" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">566,2 : <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="0,5662" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">4 587,9</span> : 100 =</span>
              <input type="text" data-correct-answer="45,879" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 shrink-0">69,23 : 10 =</span>
              <input type="text" data-correct-answer="6,923" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Completa con il numero mancante -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Completa con il numero mancante.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Colonna 1: moltiplicazioni con incognita a sinistra -->
        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="2,09" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">× 100 = 209</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="0,008" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">× 10 = 0,08</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="0,4" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">× <span class="whitespace-nowrap">1 000</span> = 400</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="0,85" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">× 100 = 85</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="0,3" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">× 10 = 3</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="5,406" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">× <span class="whitespace-nowrap">1 000</span> = <span class="whitespace-nowrap">5 406</span></span>
          </div>
        </div>

        <!-- Colonna 2: divisioni con incognita a sinistra -->
        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="409" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">: <span class="whitespace-nowrap">1 000</span> = 0,409</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="753" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">: 100 = 7,53</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="53" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">: 10 = 5,3</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="84211" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">: 10 = <span class="whitespace-nowrap">8 421,1</span></span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="64" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">: <span class="whitespace-nowrap">1 000</span> = 0,064</span>
          </div>
          <div class="flex items-center gap-2">
            <input type="text" data-correct-answer="72" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">: 100 = 0,72</span>
          </div>
        </div>

        <!-- Colonna 3: operazioni con incognita nel mezzo -->
        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">43,78 ×</span>
            <input type="text" data-correct-answer="10" class="w-14 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">= 437,8</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">0,03 ×</span>
            <input type="text" data-correct-answer="1000" class="w-14 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">= 30</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">0,7 ×</span>
            <input type="text" data-correct-answer="1000" class="w-14 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">= 700</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">46,2 :</span>
            <input type="text" data-correct-answer="100" class="w-14 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">= 0,462</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">195 :</span>
            <input type="text" data-correct-answer="1000" class="w-14 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">= 0,195</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">8 050</span> :</span>
            <input type="text" data-correct-answer="1000" class="w-14 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700 shrink-0">= 8,05</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 4: Colora la casella corretta -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(4) %>
        Colora la casella che contiene il risultato corretto.
      </p>

      <table class="w-full border-collapse">
        <tbody>
          <!-- Riga 1 -->
          <tr>
            <td class="p-3 text-gray-700"><span class="whitespace-nowrap">5 603</span> : <span class="whitespace-nowrap">1 000</span> =</td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r1" class="absolute opacity-0 cursor-pointer" data-correct-answer="false">
                <span>56,03</span>
              </label>
            </td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r1" class="absolute opacity-0 cursor-pointer" data-correct-answer="false">
                <span>5,63</span>
              </label>
            </td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r1" class="absolute opacity-0 cursor-pointer" data-correct-answer="true">
                <span>5,603</span>
              </label>
            </td>
          </tr>
          <!-- Riga 2 -->
          <tr>
            <td class="p-3 text-gray-700">4,972 × 100 =</td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r2" class="absolute opacity-0 cursor-pointer" data-correct-answer="false">
                <span>49,72</span>
              </label>
            </td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r2" class="absolute opacity-0 cursor-pointer" data-correct-answer="false">
                <span><span class="whitespace-nowrap">4 972</span></span>
              </label>
            </td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r2" class="absolute opacity-0 cursor-pointer" data-correct-answer="true">
                <span>497,2</span>
              </label>
            </td>
          </tr>
          <!-- Riga 3 -->
          <tr>
            <td class="p-3 text-gray-700">1,8 : 100 =</td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r3" class="absolute opacity-0 cursor-pointer" data-correct-answer="false">
                <span>0,18</span>
              </label>
            </td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r3" class="absolute opacity-0 cursor-pointer" data-correct-answer="true">
                <span>0,018</span>
              </label>
            </td>
            <td class="p-2">
              <label class="flex items-center justify-center w-full h-10 bg-white border-2 border-cyan-400 rounded cursor-pointer hover:bg-custom-blue-light has-checked:bg-cyan-300">
                <input type="radio" name="es4_r3" class="absolute opacity-0 cursor-pointer" data-correct-answer="false">
                <span>0,0018</span>
              </label>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Esercizio 5: Quale operazione ha il risultato maggiore -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(5) %>
        Quale operazione ha il risultato maggiore?<br>
        <span class="font-normal">Scegli con una <span class="font-bold">X</span>.</span>
      </p>

      <div class="flex flex-wrap gap-4">
        <label class="flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
          <input type="checkbox" class="w-5 h-5" data-correct-answer="false">
          <span class="text-gray-700">63,58 : 100</span>
        </label>
        <label class="flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
          <input type="checkbox" class="w-5 h-5" data-correct-answer="true">
          <span class="text-gray-700">635,8 × 10</span>
        </label>
        <label class="flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
          <input type="checkbox" class="w-5 h-5" data-correct-answer="false">
          <span class="text-gray-700">6,358 × 10</span>
        </label>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
