<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Titolo -->
    <h1 class="text-2xl md:text-3xl font-bold text-center text-cyan-500 dark:text-cyan-400">
      I TRIANGOLI
    </h1>

    <!-- Esercizio 1 IMPARARE TUTTI -->
    <div class="p-5 bg-white dark:bg-gray-800 rounded-2xl border-3 border-yellow-400 dark:border-yellow-500 space-y-4">
      <p class="font-bold text-gray-700 dark:text-gray-200">
        <%= imparare_tutti_badge(1) %>
        Classifica i triangoli rispetto ai lati: collegali al nome e alla giusta definizione. Misura i lati con la riga.
      </p>

      <div class="grid grid-cols-3 gap-4 items-center">
        <!-- Colonna sinistra: nomi -->
        <div class="space-y-6">
          <div class="p-2 border-2 border-cyan-400 dark:border-cyan-600 rounded bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">
            equilatero
          </div>
          <div class="p-2 border-2 border-cyan-400 dark:border-cyan-600 rounded bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">
            scaleno
          </div>
          <div class="p-2 border-2 border-cyan-400 dark:border-cyan-600 rounded bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">
            isoscele
          </div>
        </div>

        <!-- Colonna centrale: triangoli -->
        <div class="flex flex-col items-center gap-4">
          <!-- Triangolo equilatero -->
          <svg viewBox="0 0 100 90" class="w-24 h-20">
            <polygon points="50,5 5,85 95,85" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
          <!-- Triangolo scaleno -->
          <svg viewBox="0 0 100 80" class="w-24 h-16">
            <polygon points="10,70 90,70 60,10" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
          <!-- Triangolo isoscele -->
          <svg viewBox="0 0 100 90" class="w-24 h-20">
            <polygon points="50,5 10,85 90,85" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
        </div>

        <!-- Colonna destra: definizioni -->
        <div class="space-y-6">
          <div class="p-2 border-2 border-cyan-400 dark:border-cyan-600 rounded bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">
            tutti i lati diversi
          </div>
          <div class="p-2 border-2 border-cyan-400 dark:border-cyan-600 rounded bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">
            due lati uguali
          </div>
          <div class="p-2 border-2 border-cyan-400 dark:border-cyan-600 rounded bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">
            tutti i lati uguali
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div class="space-y-4">
      <div class="flex flex-wrap items-start justify-between gap-4">
        <div class="flex-1">
          <p class="font-bold text-gray-700 dark:text-gray-200">
            <%= numero_esercizio_badge(2) %> Misura con il goniometro e scrivi l'ampiezza degli angoli dei triangoli. Poi completa la tabella: classifica i triangoli in base agli angoli.
          </p>
        </div>
        <div class="p-2 bg-cyan-50 dark:bg-cyan-900 rounded text-gray-600 dark:text-gray-300">
          L'angolo si indica così: Â.
        </div>
      </div>

      <!-- Triangoli da misurare -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        <!-- Fig. 1 - Triangolo acutangolo -->
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-center">
          <p class="text-gray-600 dark:text-gray-400 mb-2">fig. 1</p>
          <svg viewBox="0 0 120 100" class="w-full h-24 mx-auto">
            <polygon points="20,80 100,80 60,20" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
            <text x="60" y="15" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">C</text>
            <text x="10" y="85" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">A</text>
            <text x="110" y="85" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">B</text>
          </svg>
        </div>
        <!-- Fig. 2 - Triangolo rettangolo -->
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-center">
          <p class="text-gray-600 dark:text-gray-400 mb-2">fig. 2</p>
          <svg viewBox="0 0 120 100" class="w-full h-24 mx-auto">
            <polygon points="20,80 100,80 20,20" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
            <text x="10" y="15" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">F</text>
            <text x="10" y="90" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">D</text>
            <text x="110" y="90" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">E</text>
          </svg>
        </div>
        <!-- Fig. 3 - Triangolo ottusangolo -->
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-center">
          <p class="text-gray-600 dark:text-gray-400 mb-2">fig. 3</p>
          <svg viewBox="0 0 120 100" class="w-full h-24 mx-auto">
            <polygon points="10,80 110,80 30,30" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
            <text x="25" y="25" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">I</text>
            <text x="5" y="90" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">G</text>
            <text x="115" y="90" text-anchor="middle" class="fill-gray-700 dark:fill-gray-300" style="font-size: 12px">H</text>
          </svg>
        </div>
      </div>

      <!-- Tabella classificazione -->
      <div class="overflow-x-auto">
        <table class="w-full border-collapse border-2 border-cyan-400 dark:border-cyan-600">
          <thead>
            <tr>
              <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-gray-800 dark:text-gray-200"></th>
              <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-gray-800 dark:text-gray-200 font-bold">Misura di ogni angolo</th>
              <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-gray-800 dark:text-gray-200 font-bold">Caratteristiche</th>
              <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-gray-800 dark:text-gray-200 font-bold">Nome del triangolo</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">fig. 1</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <div class="flex items-center justify-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
                  <span>Â =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="60">°
                  <span>B̂ =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="60">°
                  <span>Ĉ =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="60">°
                </div>
              </td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">tre angoli acuti</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="acutangolo">
              </td>
            </tr>
            <tr>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">fig. 2</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <div class="flex items-center justify-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
                  <span>D̂ =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="90">°
                  <span>Ê =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="45">°
                  <span>F̂ =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="45">°
                </div>
              </td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="un angolo retto">
              </td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="rettangolo">
              </td>
            </tr>
            <tr>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center text-gray-700 dark:text-gray-200">fig. 3</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <div class="flex items-center justify-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
                  <span>Ĝ =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="120">°
                  <span>Ĥ =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="30">°
                  <span>Î =</span>
                  <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="30">°
                </div>
              </td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="un angolo ottuso">
              </td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700 text-center">
                <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" data-correct-answer="ottusangolo">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div class="space-y-4">
      <p class="font-bold text-gray-700 dark:text-gray-200">
        <%= numero_esercizio_badge(3) %> Traccia almeno due altezze in ognuno dei seguenti triangoli.
      </p>

      <!-- Box definizione altezza -->
      <div class="p-3 bg-cyan-50 dark:bg-cyan-900 rounded-lg">
        <p class="text-gray-700 dark:text-gray-200">
          L'<span class="font-bold text-cyan-600 dark:text-cyan-400">altezza</span> è il segmento che parte da un vertice e cade perpendicolarmente sul lato opposto. Può essere <span class="font-bold text-cyan-600 dark:text-cyan-400">interna</span> o <span class="font-bold text-cyan-600 dark:text-cyan-400">esterna</span> al triangolo.
        </p>
      </div>

      <!-- Triangoli per altezze -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700">
          <svg viewBox="0 0 100 80" class="w-full h-24">
            <polygon points="50,10 10,70 90,70" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
        </div>
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700">
          <svg viewBox="0 0 100 80" class="w-full h-24">
            <polygon points="20,70 80,70 20,10" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
        </div>
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700">
          <svg viewBox="0 0 100 80" class="w-full h-24">
            <polygon points="10,70 90,70 30,10" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
        </div>
        <div class="border-2 border-cyan-400 dark:border-cyan-600 rounded-lg p-3 bg-white dark:bg-gray-700">
          <svg viewBox="0 0 100 80" class="w-full h-24">
            <polygon points="10,70 90,70 70,10" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700 dark:text-gray-300"/>
          </svg>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
