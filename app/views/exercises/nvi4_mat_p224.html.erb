<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Tabella unità di misura principale -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse border-2 border-cyan-400 dark:border-cyan-600">
        <thead>
          <tr>
            <th colspan="3" class="p-2 bg-cyan-500 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">MULTIPLI</th>
            <th class="p-2 bg-cyan-600 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">UNITÀ FONDAMENTALE</th>
            <th colspan="3" class="p-2 bg-cyan-500 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">SOTTOMULTIPLI</th>
          </tr>
          <tr>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">megagrammo<br><span class="font-bold">Mg</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">centinaia<br>di kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">decine<br>di kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-100 dark:bg-cyan-900 text-gray-700 dark:text-gray-200">chilogrammo<br><span class="font-bold text-cyan-600 dark:text-cyan-400">kg</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">ettogrammo<br><span class="font-bold">hg</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">decagrammo<br><span class="font-bold">dag</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">grammo<br><span class="font-bold">g</span></td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">1 000 kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">100 kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">10 kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/30 font-bold text-cyan-600 dark:text-cyan-400">1 kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,1 kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,01 kg</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,001 kg</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Tabella sottomultipli del grammo -->
    <div class="flex justify-end">
      <div class="overflow-x-auto">
        <table class="border-collapse border-2 border-cyan-400 dark:border-cyan-600">
          <thead>
            <tr>
              <th colspan="4" class="p-2 bg-cyan-500 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">SOTTOMULTIPLI DEL GRAMMO</th>
            </tr>
            <tr>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">grammo<br><span class="font-bold text-cyan-600 dark:text-cyan-400">g</span></td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">decigrammo<br><span class="font-bold">dg</span></td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">centigrammo<br><span class="font-bold">cg</span></td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">milligrammo<br><span class="font-bold">mg</span></td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/30 font-bold text-cyan-600 dark:text-cyan-400">1 g</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,1 g</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,01 g</td>
              <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,001 g</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 1 IMPARARE TUTTI -->
    <div class="p-5 bg-white dark:bg-gray-800 rounded-2xl border-3 border-yellow-400 dark:border-yellow-500">
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= imparare_tutti_badge(1) %>
        Esegui le equivalenze.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="space-y-3">
          <!-- Esempio -->
          <p class="text-gray-700 dark:text-gray-200">
            <span class="font-bold">36,12 kg</span> = <span class="font-bold text-cyan-600 dark:text-cyan-400">36 120</span> g
          </p>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>0,008 Mg =</span>
            <input type="text" data-correct-answer="80" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>dag</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>927 000 mg =</span>
            <input type="text" data-correct-answer="927" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>g</span>
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>174 dg =</span>
            <input type="text" data-correct-answer="1740" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>mg</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>0,483 g =</span>
            <input type="text" data-correct-answer="48,3" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cg</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>0,05 kg =</span>
            <input type="text" data-correct-answer="500" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>dg</span>
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>504 dg =</span>
            <input type="text" data-correct-answer="5,04" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>dag</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>4 285 kg =</span>
            <input type="text" data-correct-answer="4,285" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>Mg</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>607 cg =</span>
            <input type="text" data-correct-answer="6,07" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>g</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 e 3 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Esercizio 2 -->
      <div>
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(2) %>
          Scrivi il valore della cifra evidenziata.
        </p>

        <div class="space-y-3">
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>78<span class="font-bold text-cyan-600 dark:text-cyan-400">4</span> g =</span>
            <input type="text" data-correct-answer="4 g" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>3,20<span class="font-bold text-cyan-600 dark:text-cyan-400">6</span> Mg =</span>
            <input type="text" data-correct-answer="6 kg" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span><span class="font-bold text-cyan-600 dark:text-cyan-400">2</span>,75 hg =</span>
            <input type="text" data-correct-answer="2 hg" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>4,<span class="font-bold text-cyan-600 dark:text-cyan-400">8</span> cg =</span>
            <input type="text" data-correct-answer="8 mg" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>45,8<span class="font-bold text-cyan-600 dark:text-cyan-400">6</span> g =</span>
            <input type="text" data-correct-answer="6 cg" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span><span class="font-bold text-cyan-600 dark:text-cyan-400">2</span>07,9 cg =</span>
            <input type="text" data-correct-answer="2 g" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
      </div>

      <!-- Esercizio 3 -->
      <div>
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(3) %>
          Colora nello stesso modo le misure equivalenti.
        </p>

        <div class="overflow-x-auto">
          <table class="border-collapse border-2 border-cyan-400 dark:border-cyan-600">
            <tbody>
              <tr>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-pink-200 dark:has-[:checked]:bg-pink-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="500g">
                    <span class="text-gray-700 dark:text-gray-200">0,5 kg</span>
                  </label>
                </td>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-green-200 dark:has-[:checked]:bg-green-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="20g">
                    <span class="text-gray-700 dark:text-gray-200">20 g</span>
                  </label>
                </td>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-yellow-200 dark:has-[:checked]:bg-yellow-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="250g">
                    <span class="text-gray-700 dark:text-gray-200">250 g</span>
                  </label>
                </td>
              </tr>
              <tr>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-blue-200 dark:has-[:checked]:bg-blue-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="200g">
                    <span class="text-gray-700 dark:text-gray-200">200 g</span>
                  </label>
                </td>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-yellow-200 dark:has-[:checked]:bg-yellow-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="250g">
                    <span class="text-gray-700 dark:text-gray-200"><%= render 'shared/frazione', num: 1, den: 4 %> di 1 kg</span>
                  </label>
                </td>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-blue-200 dark:has-[:checked]:bg-blue-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="200g">
                    <span class="text-gray-700 dark:text-gray-200">0,2 kg</span>
                  </label>
                </td>
              </tr>
              <tr>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-pink-200 dark:has-[:checked]:bg-pink-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="500g">
                    <span class="text-gray-700 dark:text-gray-200"><%= render 'shared/frazione', num: 1, den: 5 %> di 1 kg</span>
                  </label>
                </td>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-pink-200 dark:has-[:checked]:bg-pink-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="500g">
                    <span class="text-gray-700 dark:text-gray-200">500 g</span>
                  </label>
                </td>
                <td class="p-3 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800">
                  <label class="cursor-pointer block p-2 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/50 has-[:checked]:bg-green-200 dark:has-[:checked]:bg-green-900/50">
                    <input type="checkbox" class="sr-only" data-group="massa-eq" data-value="20g">
                    <span class="text-gray-700 dark:text-gray-200">0,02 kg</span>
                  </label>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Esercizio 4 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(4) %>
        Confronta le seguenti misure e scrivile in ordine crescente.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="p-4 bg-cyan-50 dark:bg-cyan-900/30 rounded-lg">
          <p class="text-gray-700 dark:text-gray-200 mb-3">
            63 hg • 6 105 dg • 7,3 kg • 7 030 g • 5,92 kg • 631 dag • 0,69 Mg
          </p>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <input type="text" data-correct-answer="63 hg < 6 105 dg < 631 dag < 7 030 g < 7,3 kg < 0,69 Mg" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white" placeholder="Scrivi in ordine crescente...">
          </div>
        </div>

        <div class="p-3 bg-white dark:bg-gray-800 border-3 border-dashed border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-500 flex items-center">
          <p class="text-gray-700 dark:text-gray-200">
            Prima ti conviene trasformare sul quaderno tutte le misure in una unica unità, per esempio il kg.
          </p>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
