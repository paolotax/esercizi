<div class="max-w-6xl mx-auto p-3 md:p-8 bg-white" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 5: Pronome personale soggetto sottinteso -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-gray-700 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">5</span>
        <span>Per ciascuna frase scrivi il <span class="text-blue-600 font-bold">pronome personale</span> che corrisponde al soggetto sottinteso.</span>
      </div>
    </h2>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr class="bg-<%= @pagina.base_color %>-100">
            <th class="border-2 border-<%= @pagina.base_color %>-300 px-4 py-3 text-left font-bold text-gray-700">Frase</th>
            <th class="border-2 border-<%= @pagina.base_color %>-300 px-4 py-3 text-center font-bold text-gray-700">Soggetto sottinteso</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Venite a casa subito!</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="voi"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Prendo qualche panino e una bibita?</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="io"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Hai studiato la lezione per domani?</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="tu"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Sono molto spaventati da te.</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="essi/loro"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Danza sempre con grazia.</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="egli/ella/lui/lei"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Guarda là!</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="tu"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Arriverà.</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="egli/ella/lui/lei"
                     placeholder="">
            </td>
          </tr>
          <tr>
            <td class="border-2 border-gray-200 px-4 py-3 bg-white">Alla sera leggi ancora fino a tardi?</td>
            <td class="border-2 border-gray-200 px-4 py-3 bg-gray-50 text-center">
              <input type="text"
                     class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 w-24 text-center"
                     data-fill-blanks-target="input"
                     data-correct-answer="tu"
                     placeholder="">
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Esercizio 6: Completa le frasi -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-gray-700 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">6</span>
        <span>Per ogni frase scrivi un complemento che la completi.</span>
      </div>
    </h2>

    <div class="space-y-3">
      <div class="bg-white rounded-lg p-4">
        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700 text-base md:text-lg">• Elisa ha dimenticato</span>
          <input type="text"
                 class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 flex-1 min-w-[200px]"
                 data-fill-blanks-target="input"
                 data-correct-answer="libera"
                 placeholder="">
        </div>
      </div>

      <div class="bg-white rounded-lg p-4">
        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700 text-base md:text-lg">• Tommaso ha scritto un messaggio</span>
          <input type="text"
                 class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 flex-1 min-w-[200px]"
                 data-fill-blanks-target="input"
                 data-correct-answer="libera"
                 placeholder="">
        </div>
      </div>

      <div class="bg-white rounded-lg p-4">
        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700 text-base md:text-lg">• Eleonora ha messo nell'astuccio</span>
          <input type="text"
                 class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 flex-1 min-w-[200px]"
                 data-fill-blanks-target="input"
                 data-correct-answer="libera"
                 placeholder="">
        </div>
      </div>

      <div class="bg-white rounded-lg p-4">
        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700 text-base md:text-lg">• Andiamo a piedi</span>
          <input type="text"
                 class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 flex-1 min-w-[200px]"
                 data-fill-blanks-target="input"
                 data-correct-answer="libera"
                 placeholder="">
        </div>
      </div>

      <div class="bg-white rounded-lg p-4">
        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700 text-base md:text-lg">• Veniamo</span>
          <input type="text"
                 class="border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-white focus:outline-none focus:border-<%= @pagina.base_color %>-600 px-2 py-1 flex-1 min-w-[200px]"
                 data-fill-blanks-target="input"
                 data-correct-answer="libera"
                 placeholder="">
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 7: Struttura della frase -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 rounded-lg p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="text-lg md:text-xl font-bold text-gray-700 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">7</span>
        <span>Osserva la struttura della seguente frase.</span>
      </div>
    </h2>

    <div class="bg-<%= @pagina.base_color %>-100 rounded-lg p-4 mb-4">
      <p class="text-lg font-bold text-center text-gray-700">"Simone ha rivelato un segreto ad Andrea."</p>
    </div>

    <p class="text-lg font-bold text-gray-700 mb-3">Quale frase ha la stessa struttura?</p>

    <div class="space-y-3">
      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">A.</span>
          <input type="radio"
                 name="question7"
                 data-multiple-choice-target="answer"
                 data-correct-answer="true"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">Gabriele parla di nascosto con Pietro.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">B.</span>
          <input type="radio"
                 name="question7"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">Tu pensi spesso a voce alta.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">C.</span>
          <input type="radio"
                 name="question7"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">I Rossi portano troppe cose al mare.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">D.</span>
          <input type="radio"
                 name="question7"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">Io invierò una cartolina a voi.</span>
      </label>
    </div>
  </div>

  <!-- Esercizio 8: Frase complessa con più frasi semplici -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 rounded-lg p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="text-lg md:text-xl font-bold text-gray-700 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">8</span>
        <span>Quale delle seguenti frasi complesse è formata da più di due frasi semplici?</span>
      </div>
    </h2>

    <div class="space-y-3">
      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">A.</span>
          <input type="radio"
                 name="question8"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">La mia insegnante di danza si chiama Mirta ed è molto giovane.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">B.</span>
          <input type="radio"
                 name="question8"
                 data-multiple-choice-target="answer"
                 data-correct-answer="true"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">Ti ho detto che ti avrei accompagnata e lo farò.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">C.</span>
          <input type="radio"
                 name="question8"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">Leggi tutto quello che è scritto nelle istruzioni del televisore.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50 transition">
        <div class="flex items-center gap-2">
          <span class="font-bold text-gray-700">D.</span>
          <input type="radio"
                 name="question8"
                 data-multiple-choice-target="answer"
                 data-correct-answer="false"
                 class="w-5 h-5">
        </div>
        <span class="text-base md:text-lg">Ho prenotato le vacanze, ma non ci andrò.</span>
      </label>
    </div>
  </div>

  <%= render 'shared/exercise_controls' %>
</div>
