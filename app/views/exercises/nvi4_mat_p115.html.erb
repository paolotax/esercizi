<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Introduzione -->
    <div class="text-gray-700 dark:text-gray-200">
      <p>Le trasformazioni geometriche, come dice il termine stesso, trasformano le figure. Esistono trasformazioni geometriche che non modificano né la forma né le dimensioni delle figure, ma solo la loro <span class="font-bold">posizione sul piano</span>: sono le <span class="font-bold">isometrie</span>. Eccone alcune.</p>
    </div>

    <!-- La simmetria -->
    <div class="space-y-4">
      <h2 class="font-bold italic text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">La simmetria</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="text-gray-700 dark:text-gray-200">
          <p>Negli anni scorsi abbiamo già parlato della simmetria. Ricordi? Esiste una retta, detta <span class="font-bold">asse di simmetria</span>, che individua le parti simmetriche di una figura o due figure simmetriche tra loro. L'asse di simmetria può essere <span class="font-bold">interno</span> oppure <span class="font-bold">esterno</span> alla figura.</p>
        </div>
        <div class="flex justify-center">
          <%= image_tag "nvi4_mat/p115/p115_01.jpg", class: "max-w-full h-auto rounded-lg", alt: "Foto paesaggio con simmetria" %>
        </div>
      </div>

      <!-- Esempi simmetria interna ed esterna -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="p-4 bg-custom-blue dark:bg-cyan-900 rounded-2xl">
          <div class="flex justify-center mb-3">
            <svg viewBox="0 0 300 120" class="w-full max-w-[300px] h-auto">
              <!-- Figura simmetrica con asse interno -->
              <polygon points="50,100 100,30 150,100 130,100 130,60 120,60 120,100 80,100 80,60 70,60 70,100" fill="#F97316" fill-opacity="0.3" stroke="#F97316" stroke-width="2"/>
              <!-- Asse di simmetria (interno) -->
              <line x1="100" y1="20" x2="100" y2="110" stroke="#3B82F6" stroke-width="2" stroke-dasharray="5,5"/>
              <!-- Punti -->
              <circle cx="50" cy="100" r="4" fill="#F97316"/>
              <circle cx="100" cy="30" r="4" fill="#F97316"/>
              <circle cx="150" cy="100" r="4" fill="#F97316"/>
            </svg>
          </div>
          <p class="text-gray-700 dark:text-gray-200 text-center">L'asse di simmetria è <span class="font-bold">interno</span> alla figura e la divide in due parti simmetriche.</p>
        </div>
        <div class="p-4 bg-custom-blue dark:bg-cyan-900 rounded-2xl">
          <div class="flex justify-center mb-3">
            <svg viewBox="0 0 300 120" class="w-full max-w-[300px] h-auto">
              <!-- Due figure simmetriche (volpi stilizzate) -->
              <polygon points="30,100 60,30 90,100 75,100 75,70 60,85 45,70 45,100" fill="#F97316" fill-opacity="0.3" stroke="#F97316" stroke-width="2"/>
              <polygon points="210,100 240,30 270,100 255,100 255,70 240,85 225,70 225,100" fill="#F97316" fill-opacity="0.3" stroke="#F97316" stroke-width="2"/>
              <!-- Asse di simmetria (esterno) -->
              <line x1="150" y1="20" x2="150" y2="110" stroke="#3B82F6" stroke-width="2" stroke-dasharray="5,5"/>
              <!-- Punti -->
              <circle cx="30" cy="100" r="4" fill="#F97316"/>
              <circle cx="60" cy="30" r="4" fill="#F97316"/>
              <circle cx="90" cy="100" r="4" fill="#F97316"/>
              <circle cx="210" cy="100" r="4" fill="#F97316"/>
              <circle cx="240" cy="30" r="4" fill="#F97316"/>
              <circle cx="270" cy="100" r="4" fill="#F97316"/>
            </svg>
          </div>
          <p class="text-gray-700 dark:text-gray-200 text-center">L'asse di simmetria è <span class="font-bold">esterno</span> alla figura e le due figure sono fra loro simmetriche.</p>
        </div>
      </div>

      <p class="text-gray-700 dark:text-gray-200">Possiamo vedere la simmetria anche come la trasformazione che "ribalta" le figure rispetto all'asse di simmetria.</p>
    </div>

    <!-- La traslazione -->
    <div class="space-y-4">
      <h2 class="font-bold italic text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">La traslazione</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="text-gray-700 dark:text-gray-200 space-y-3">
          <p>Osserva il fiore. È stato spostato dalla posizione A alla posizione B.</p>
          <p>Questo spostamento si chiama <span class="font-bold">traslazione</span>.</p>
          <p>La freccia rossa indicata si chiama <span class="font-bold">vettore</span> e rappresenta la traslazione.</p>
          <p>Il vettore indica la <span class="font-bold">direzione</span> dello spostamento, il suo <span class="font-bold">verso</span> e la sua <span class="font-bold">misura</span>, che corrisponde alla lunghezza del vettore.</p>
        </div>
        <div class="p-4 bg-custom-blue dark:bg-cyan-900 rounded-2xl">
          <svg viewBox="0 0 200 150" class="w-full h-auto">
            <!-- Griglia quadrettata -->
            <defs>
              <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#F97316" stroke-width="0.5" stroke-opacity="0.3"/>
              </pattern>
            </defs>
            <rect width="200" height="150" fill="url(#grid)"/>
            <!-- Fiore A -->
            <polygon points="30,80 40,50 50,80 40,70" fill="#10B981" fill-opacity="0.5" stroke="#10B981" stroke-width="2"/>
            <polygon points="30,80 40,110 50,80" fill="#10B981" fill-opacity="0.5" stroke="#10B981" stroke-width="2"/>
            <text x="35" y="45" class="fill-gray-700 dark:fill-gray-300" font-weight="bold">A</text>
            <!-- Fiore B -->
            <polygon points="150,80 160,50 170,80 160,70" fill="#10B981" fill-opacity="0.5" stroke="#10B981" stroke-width="2"/>
            <polygon points="150,80 160,110 170,80" fill="#10B981" fill-opacity="0.5" stroke="#10B981" stroke-width="2"/>
            <text x="155" y="45" class="fill-gray-700 dark:fill-gray-300" font-weight="bold">B</text>
            <!-- Vettore -->
            <line x1="50" y1="130" x2="145" y2="130" stroke="#EF4444" stroke-width="3"/>
            <polygon points="145,130 135,125 135,135" fill="#EF4444"/>
            <text x="85" y="145" fill="#EF4444" font-weight="bold">vettore</text>
          </svg>
          <p class="text-gray-700 dark:text-gray-200 text-center mt-2">Il vettore indica uno spostamento orizzontale verso destra di 6 quadretti.</p>
        </div>
      </div>

      <!-- Domande sulla traslazione -->
      <div class="p-4 bg-orange-100 dark:bg-orange-900/30 rounded-2xl">
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <span class="text-<%= @pagina.base_color %>-500">&#8226;</span> Confronta la figura nelle due posizioni e rispondi.
        </p>
        <div class="space-y-3">
          <div class="flex items-center justify-between gap-4 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">Ha cambiato forma?</span>
            <div class="flex gap-2">
              <label class="relative flex items-center justify-center w-10 h-8 bg-white dark:bg-gray-700 border-2 border-<%= @pagina.base_color %>-500 rounded cursor-pointer hover:bg-<%= @pagina.base_color %>-100 dark:hover:bg-<%= @pagina.base_color %>-900 has-[:checked]:bg-pink-300 dark:has-[:checked]:bg-pink-700">
                <input type="radio" name="forma" class="absolute inset-0 opacity-0 cursor-pointer" data-correct-answer="false">
                <span class="text-gray-700 dark:text-gray-200">Sì</span>
              </label>
              <label class="relative flex items-center justify-center w-10 h-8 bg-white dark:bg-gray-700 border-2 border-<%= @pagina.base_color %>-500 rounded cursor-pointer hover:bg-<%= @pagina.base_color %>-100 dark:hover:bg-<%= @pagina.base_color %>-900 has-[:checked]:bg-pink-300 dark:has-[:checked]:bg-pink-700">
                <input type="radio" name="forma" class="absolute inset-0 opacity-0 cursor-pointer" data-correct-answer="true">
                <span class="text-gray-700 dark:text-gray-200">No</span>
              </label>
            </div>
          </div>
          <div class="flex items-center justify-between gap-4 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">Ha cambiato posizione?</span>
            <div class="flex gap-2">
              <label class="relative flex items-center justify-center w-10 h-8 bg-white dark:bg-gray-700 border-2 border-<%= @pagina.base_color %>-500 rounded cursor-pointer hover:bg-<%= @pagina.base_color %>-100 dark:hover:bg-<%= @pagina.base_color %>-900 has-[:checked]:bg-pink-300 dark:has-[:checked]:bg-pink-700">
                <input type="radio" name="posizione" class="absolute inset-0 opacity-0 cursor-pointer" data-correct-answer="true">
                <span class="text-gray-700 dark:text-gray-200">Sì</span>
              </label>
              <label class="relative flex items-center justify-center w-10 h-8 bg-white dark:bg-gray-700 border-2 border-<%= @pagina.base_color %>-500 rounded cursor-pointer hover:bg-<%= @pagina.base_color %>-100 dark:hover:bg-<%= @pagina.base_color %>-900 has-[:checked]:bg-pink-300 dark:has-[:checked]:bg-pink-700">
                <input type="radio" name="posizione" class="absolute inset-0 opacity-0 cursor-pointer" data-correct-answer="false">
                <span class="text-gray-700 dark:text-gray-200">No</span>
              </label>
            </div>
          </div>
          <div class="flex items-center justify-between gap-4 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">Ha cambiato dimensione?</span>
            <div class="flex gap-2">
              <label class="relative flex items-center justify-center w-10 h-8 bg-white dark:bg-gray-700 border-2 border-<%= @pagina.base_color %>-500 rounded cursor-pointer hover:bg-<%= @pagina.base_color %>-100 dark:hover:bg-<%= @pagina.base_color %>-900 has-[:checked]:bg-pink-300 dark:has-[:checked]:bg-pink-700">
                <input type="radio" name="dimensione" class="absolute inset-0 opacity-0 cursor-pointer" data-correct-answer="false">
                <span class="text-gray-700 dark:text-gray-200">Sì</span>
              </label>
              <label class="relative flex items-center justify-center w-10 h-8 bg-white dark:bg-gray-700 border-2 border-<%= @pagina.base_color %>-500 rounded cursor-pointer hover:bg-<%= @pagina.base_color %>-100 dark:hover:bg-<%= @pagina.base_color %>-900 has-[:checked]:bg-pink-300 dark:has-[:checked]:bg-pink-700">
                <input type="radio" name="dimensione" class="absolute inset-0 opacity-0 cursor-pointer" data-correct-answer="true">
                <span class="text-gray-700 dark:text-gray-200">No</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/quaderno_link', pagine: [238, 239] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
