<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-purple-50 via-white to-violet-50 rounded-3xl shadow-xl" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1: Quali espressioni dal linguaggio figurato -->
  <div class="mb-6 bg-gradient-to-r from-yellow-100 to-amber-100 rounded-2xl border-4 border-yellow-300 shadow-2xl p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="text-lg md:text-xl font-bold text-blue-700 mb-4 flex items-center flex-wrap gap-2">
      <span class="bg-blue-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">1</span>
      <span class="bg-yellow-400 text-blue-900 px-3 py-1 rounded-lg font-bold">IMPARARE TUTTI</span>
      <span>Quale delle seguenti espressioni tratte dal <strong class="text-blue-600">linguaggio figurato</strong> può sostituire le parole evidenziate nelle frasi? Scrivi i numeri corrispondenti.</span>
    </h2>

    <div class="mb-4 grid grid-cols-2 gap-2 text-sm md:text-base">
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg"><span class="text-red-600 font-bold">1</span> gli ha messo la pulce nell'orecchio</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg"><span class="text-red-600 font-bold">2</span> fa orecchie da mercante</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg"><span class="text-red-600 font-bold">3</span> è sulla cresta dell'onda</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg"><span class="text-red-600 font-bold">4</span> ha vuotato il sacco</span>
    </div>

    <div class="space-y-3">
      <label class="flex items-start gap-3 p-3 bg-white rounded-lg border border-gray-200">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Quando la mamma lo chiama, spesso Luca <strong class="text-purple-600">fa finta di non sentire</strong>.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg border border-gray-200">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Il maestro non ci pensava per niente, ma qualcuno <strong class="text-purple-600">l'ha insospettito</strong>.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg border border-gray-200">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Il colpevole è stato interrogato a lungo e alla fine <strong class="text-purple-600">ha detto tutto ciò che sapeva</strong>.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white rounded-lg border border-gray-200">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Quel cantante in questo periodo <strong class="text-purple-600">ha un grandissimo successo</strong>.</span>
      </label>
    </div>
  </div>

  <!-- Esercizio 2: Spiega il significato -->
  <div class="mb-6 bg-white rounded-2xl border-2 border-purple-200 shadow-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-purple-700 mb-4 flex items-center gap-2">
      <span class="bg-purple-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">2</span>
      <span>Spiega il significato di ciascuna <strong class="text-blue-600">espressione figurata</strong> scegliendolo tra i seguenti. Se hai dubbi, confrontati con un compagno o con l'insegnante.</span>
    </h2>

    <div class="mb-4 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg text-center">capire e far finta di niente</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg text-center">essere sul punto di litigare</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg text-center">somigliarsi molto</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg text-center">essere uno spendaccione</span>
      <span class="px-3 py-2 bg-red-50 border border-red-300 rounded-lg text-center">non volersi occupare di qualcosa</span>
    </div>

    <div class="space-y-4">
      <div class="flex items-start gap-3">
        <span class="text-purple-600 font-semibold min-w-fit">• Avere le mani bucate →</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="essere uno spendaccione" data-correct-answer="essere uno spendaccione">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600 font-semibold min-w-fit">• Venire ai ferri corti →</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="essere sul punto di litigare" data-correct-answer="essere sul punto di litigare">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600 font-semibold min-w-fit">• Mangiare la foglia →</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="capire e far finta di niente" data-correct-answer="capire e far finta di niente">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600 font-semibold min-w-fit">• Lavarsene le mani →</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="non volersi occupare di qualcosa" data-correct-answer="non volersi occupare di qualcosa">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600 font-semibold min-w-fit">• Essere due gocce d'acqua →</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="somigliarsi molto" data-correct-answer="somigliarsi molto">
      </div>
    </div>
  </div>

  <!-- Esercizio 3: Parola occhio usata in senso figurato -->
  <div class="mb-6 bg-white rounded-2xl border-2 border-purple-200 shadow-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-purple-700 mb-4 flex items-center gap-2">
      <span class="bg-purple-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">3</span>
      <span>Nelle seguenti frasi la parola <strong class="text-blue-600">occhio</strong> è usata in senso figurato. Prova a spiegare il significato delle espressioni di cui fa parte, come nell'esempio.</span>
    </h2>

    <div class="space-y-4">
      <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
        <p class="text-base">• Ho svolto l'esercizio in un batter d'occhio = <strong class="text-blue-600">in pochissimo tempo</strong></p>
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600">• Quel vestito è molto bello, ma costa un occhio =</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600">• Quei ragazzi vanno tenuti d'occhio =</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600">• A occhio e croce sarà alto un metro e mezzo =</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600">• Il campo di grano si estende a perdita d'occhio =</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600">• Occhio al semaforo! =</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-purple-600">• Ne parleremo a quattr'occhi =</span>
        <input type="text" class="border-b-2 border-purple-500 bg-transparent px-2 py-1 focus:outline-none flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>
    </div>
  </div>

  <%= render 'shared/exercise_controls', color: 'purple' %>

</div>
