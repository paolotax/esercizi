<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1: Quali espressioni dal linguaggio figurato -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 rounded-lg p-4 md:p-6" data-controller="multiple-choice">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-300 mb-4 flex items-center flex-wrap gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">1</span>
      <span class="bg-yellow-400 text-<%= @pagina.base_color %>-900 px-3 py-1 rounded-lg font-bold">IMPARARE TUTTI</span>
      <span>Quale delle seguenti espressioni tratte dal <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">linguaggio figurato</strong> può sostituire le parole evidenziate nelle frasi? Scrivi i numeri corrispondenti.</span>
    </h2>

    <div class="mb-4 grid grid-cols-2 gap-2">
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg"><span class="text-red-600 dark:text-red-400 font-bold">1</span> gli ha messo la pulce nell'orecchio</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg"><span class="text-red-600 dark:text-red-400 font-bold">2</span> fa orecchie da mercante</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg"><span class="text-red-600 dark:text-red-400 font-bold">3</span> è sulla cresta dell'onda</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg"><span class="text-red-600 dark:text-red-400 font-bold">4</span> ha vuotato il sacco</span>
    </div>

    <div class="space-y-3">
      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Quando la mamma lo chiama, spesso Luca <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">fa finta di non sentire</strong>.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Il maestro non ci pensava per niente, ma qualcuno <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">l'ha insospettito</strong>.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Il colpevole è stato interrogato a lungo e alla fine <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">ha detto tutto ciò che sapeva</strong>.</span>
      </label>

      <label class="flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        <input type="checkbox" data-multiple-choice-target="answer" data-correct-answer="false" class="mt-1 w-5 h-5">
        <span>Quel cantante in questo periodo <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">ha un grandissimo successo</strong>.</span>
      </label>
    </div>
  </div>

  <!-- Esercizio 2: Spiega il significato -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-300 mb-4 flex items-center gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">2</span>
      <span>Spiega il significato di ciascuna <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">espressione figurata</strong> scegliendolo tra i seguenti. Se hai dubbi, confrontati con un compagno o con l'insegnante.</span>
    </h2>

    <div class="mb-4 grid grid-cols-2 md:grid-cols-4 gap-2">
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg text-center">capire e far finta di niente</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg text-center">essere sul punto di litigare</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg text-center">somigliarsi molto</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg text-center">essere uno spendaccione</span>
      <span class="px-3 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-700 rounded-lg text-center">non volersi occupare di qualcosa</span>
    </div>

    <div class="space-y-4">
      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-semibold min-w-fit">* Avere le mani bucate -></span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="essere uno spendaccione" data-correct-answer="essere uno spendaccione">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-semibold min-w-fit">* Venire ai ferri corti -></span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="essere sul punto di litigare" data-correct-answer="essere sul punto di litigare">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-semibold min-w-fit">* Mangiare la foglia -></span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="capire e far finta di niente" data-correct-answer="capire e far finta di niente">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-semibold min-w-fit">* Lavarsene le mani -></span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="non volersi occupare di qualcosa" data-correct-answer="non volersi occupare di qualcosa">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-semibold min-w-fit">* Essere due gocce d'acqua -></span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="somigliarsi molto" data-correct-answer="somigliarsi molto">
      </div>
    </div>
  </div>

  <!-- Esercizio 3: Parola occhio usata in senso figurato -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-300 mb-4 flex items-center gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">3</span>
      <span>Nelle seguenti frasi la parola <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">occhio</strong> è usata in senso figurato. Prova a spiegare il significato delle espressioni di cui fa parte, come nell'esempio.</span>
    </h2>

    <div class="space-y-4">
      <div class="bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 border-l-4 border-<%= @pagina.base_color %>-400 p-4 rounded">
        <p class="">* Ho svolto l'esercizio in un batter d'occhio = <strong class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">in pochissimo tempo</strong></p>
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">*</span>
        <span>Quel vestito è molto bello, ma costa un occhio =</span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">*</span>
        <span>Quei ragazzi vanno tenuti d'occhio =</span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">*</span>
        <span>A occhio e croce sarà alto un metro e mezzo =</span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">*</span>
        <span>Il campo di grano si estende a perdita d'occhio =</span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">*</span>
        <span>Occhio al semaforo! =</span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>

      <div class="flex items-start gap-3">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">*</span>
        <span>Ne parleremo a quattr'occhi =</span>
        <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-600 bg-transparent dark:text-white px-2 py-1 focus:outline-none focus:border-<%= @pagina.base_color %>-500 flex-grow" data-fill-blanks-target="input" data-answer="libera" data-correct-answer="libera">
      </div>
    </div>
  </div>

  <%= render 'shared/exercise_controls' %>

</div>
