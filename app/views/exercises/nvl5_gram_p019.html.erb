<div class="max-w-6xl mx-auto p-3 md:p-8 bg-white rounded-lg shadow-lg" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Info Box -->
  <div class="mb-3 md:mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-base md:text-lg leading-relaxed">
    <!-- Discorso diretto -->
    <div class="bg-white rounded-lg p-4 md:p-6">
      <div class="bg-white rounded-lg p-3 mb-3">
        <p class="text-gray-800">
          La nonna domanda a Miriam<strong class="text-cyan-700">:</strong><br>
          <strong class="text-cyan-700">– Vuoi</strong> un'altra fetta di torta?
        </p>
      </div>
      <div class="bg-yellow-100 rounded-lg p-3">
        <p class="text-gray-800">
          Il <strong class="text-cyan-700">discorso diretto</strong> riporta le battute di un dialogo, introdotte dai due punti (<strong class="text-cyan-700">:</strong>) seguiti dalla lineetta (<strong class="text-cyan-700">–</strong>) o dalle virgolette (<strong class="text-cyan-700">" "</strong>).
        </p>
      </div>
    </div>

    <!-- Discorso indiretto -->
    <div class="bg-white rounded-lg p-4 md:p-6">
      <div class="bg-white rounded-lg p-3 mb-3">
        <p class="text-gray-800">
          La nonna domanda a Miriam <strong class="text-red-600">se vuole</strong> un'altra fetta di torta.
        </p>
      </div>
      <div class="bg-yellow-100 rounded-lg p-3">
        <p class="text-gray-800">
          Il <strong class="text-red-600">discorso indiretto</strong> riferisce in terza persona le battute di un dialogo senza riportare le parole precise.
        </p>
      </div>
    </div>
  </div>

  <!-- Regole per passare da diretto a indiretto -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 text-base md:text-lg leading-relaxed">
    <p class="text-gray-800 mb-3">
      Per passare dal <strong class="text-cyan-700">discorso diretto</strong> al <strong class="text-red-600">discorso indiretto</strong>:
    </p>
    <ul class="space-y-2">
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">si elimina la punteggiatura del discorso diretto;</span>
      </li>
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">si cambiano le forme verbali: <strong class="text-cyan-700">vuoi</strong> → <strong class="text-red-600">vuole</strong>;</span>
      </li>
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">si uniscono le frasi con le parole di collegamento → <strong class="text-red-600">se</strong>, <strong class="text-red-600">che</strong>, <strong class="text-red-600">di</strong>;</span>
      </li>
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">si cambiano i pronomi personali e i pronomi o gli aggettivi determinativi.</span>
      </li>
    </ul>
  </div>

  <!-- Exercise 1 -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 border-4 border-yellow-400">
    <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-4 flex flex-wrap items-center gap-2">
      <span class="bg-blue-800 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">1</span>
      <span class="bg-yellow-400 text-blue-800 px-2 py-1 rounded text-sm md:text-base font-bold">IMPARARE TUTTI</span>
      <span>Scrivi le frasi sul quaderno trasformando i <strong class="text-cyan-700">discorsi diretti</strong> in <strong class="text-red-600">discorsi indiretti</strong>.</span>
    </h2>

    <div class="space-y-4 text-base md:text-lg">
      <% exercise_1_phrases = [
        {
          direct: "Il papà disse a Marco: – Stai attento in bicicletta.",
          answer: "Il papà disse a Marco di stare attento in bicicletta."
        },
        {
          direct: "La maestra chiede a Cecilia: – Hai letto il libro di Pinocchio? Ti è piaciuto?",
          answer: "La maestra chiede a Cecilia se ha letto il libro di Pinocchio e se le è piaciuto."
        },
        {
          direct: "Carlotta urlò felice: – Zia, da quanto non ti vedo! Voglio abbracciarti!",
          answer: "Carlotta urlò felice che da quanto non vedeva la zia e che voleva abbracciarla."
        }
      ] %>

      <% exercise_1_phrases.each do |phrase| %>
        <div class="rounded-lg p-4" data-controller="fill-blanks">
          <p class="text-gray-800 mb-3">
            <span class="text-cyan-700 font-bold text-2xl mr-2">•</span> <%= phrase[:direct] %>
          </p>
          <textarea class="w-full border-2 border-dotted border-gray-400 rounded-lg p-3 focus:outline-none text-base md:text-lg"
                    rows="3"
                    data-fill-blanks-target="input"
                    data-correct-answer="<%= phrase[:answer] %>"
                    placeholder="Trasforma il discorso diretto in indiretto..."></textarea>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 2 -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">2</span>
      Osserva il disegno e scrivi <strong class="text-cyan-700">nei fumetti</strong> il dialogo tra i due bambini.
    </h2>

    <div class="mb-4">
      <%= image_tag 'nvl5_gram/p019/p019_01.jpg', alt: 'Disegno con due bambini', class: 'w-full max-w-md mx-auto rounded-lg' %>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <textarea class="w-full border-2 border-dotted border-gray-400 rounded-lg p-3 focus:outline-none text-base md:text-lg"
                rows="3"
                placeholder="Fumetto del bambino a sinistra..."></textarea>
      <textarea class="w-full border-2 border-dotted border-gray-400 rounded-lg p-3 focus:outline-none text-base md:text-lg"
                rows="3"
                placeholder="Risposta del bambino a destra..."></textarea>
    </div>
  </div>

  <!-- Exercise 3 -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">3</span>
      Sul quaderno riporta il dialogo tra i due bambini dell'esercizio 2 usando la punteggiatura del <strong class="text-cyan-700">discorso diretto</strong>. Poi trasformalo in <strong class="text-red-600">discorso indiretto</strong>.
    </h2>

    <div class="space-y-4">
      <div>
        <label class="block text-sm font-semibold text-gray-800 mb-2">
          Dialogo in discorso diretto
        </label>
        <textarea class="w-full border-2 border-dotted border-gray-400 rounded-lg p-3 focus:outline-none text-base md:text-lg"
                  rows="4"
                  placeholder="Usa i due punti, la lineetta e le virgolette per scrivere il dialogo..."></textarea>
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-800 mb-2">
          Dialogo trasformato in discorso indiretto
        </label>
        <textarea class="w-full border-2 border-dotted border-gray-400 rounded-lg p-3 focus:outline-none text-base md:text-lg"
                  rows="4"
                  placeholder="Riscrivi il dialogo trasformandolo in discorso indiretto..."></textarea>
      </div>
    </div>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls', color: 'pink', current_page: 'nvl5_gram_p019' %>
</div>
