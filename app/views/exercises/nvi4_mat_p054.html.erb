<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Colonna sinistra -->
      <div class="space-y-6">

        <!-- Esercizio 1 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(1) %>
            Scrivi un esempio per ogni proprietà.
          </p>
          <div class="space-y-3">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Commutativa dell'addizione</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Associativa dell'addizione</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Invariantiva della sottrazione</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Associativa della moltiplicazione</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Distributiva della moltiplicazione</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Invariantiva della divisione</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
          </div>
        </div>

        <!-- Esercizio 2 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(2) %>
            Calcola in riga.
          </p>
          <div class="grid grid-cols-2 gap-3">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">135 + 263 =</span>
              <input type="text" data-correct-answer="398" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">458 − 235 =</span>
              <input type="text" data-correct-answer="223" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">1 360</span> + 427 =</span>
              <input type="text" data-correct-answer="1787" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">2 785</span> − 403 =</span>
              <input type="text" data-correct-answer="2382" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">2 368</span> + <span class="whitespace-nowrap">2 522</span> =</span>
              <input type="text" data-correct-answer="4890" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">5 682</span> − <span class="whitespace-nowrap">3 267</span> =</span>
              <input type="text" data-correct-answer="2415" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">126 × 3 =</span>
              <input type="text" data-correct-answer="378" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">621 : 3 =</span>
              <input type="text" data-correct-answer="207" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">840 × 10 =</span>
              <input type="text" data-correct-answer="8400" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">37 000</span> : <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="37" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">32 × 20 =</span>
              <input type="text" data-correct-answer="640" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">95 : 5 =</span>
              <input type="text" data-correct-answer="19" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
          </div>
        </div>

        <!-- Esercizio 3 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(3) %>
            Esegui in colonna sul quaderno.
          </p>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">1 576</span> + <span class="whitespace-nowrap">3 420</span> =</p>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">8 576</span> − <span class="whitespace-nowrap">4 035</span> =</p>
              <p class="text-gray-700 dark:text-gray-200">45 × 14 =</p>
              <p class="text-gray-700 dark:text-gray-200">795 : 5 =</p>
            </div>
            <div>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">2 385</span> + <span class="whitespace-nowrap">1 574</span> =</p>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">6 852</span> − <span class="whitespace-nowrap">4 327</span> =</p>
              <p class="text-gray-700 dark:text-gray-200">87 × 32 =</p>
              <p class="text-gray-700 dark:text-gray-200">347 : 8 =</p>
            </div>
            <div>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">2 569</span> + <span class="whitespace-nowrap">5 334</span> =</p>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">5 634</span> − <span class="whitespace-nowrap">2 375</span> =</p>
              <p class="text-gray-700 dark:text-gray-200">175 × 48 =</p>
              <p class="text-gray-700 dark:text-gray-200">299 : 24 =</p>
            </div>
            <div>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">4 579</span> + <span class="whitespace-nowrap">5 863</span> =</p>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">5 000</span> − <span class="whitespace-nowrap">3 472</span> =</p>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">1 256</span> × 24 =</p>
              <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">3 762</span> : 45 =</p>
            </div>
          </div>
        </div>

      </div>

      <!-- Colonna destra -->
      <div class="space-y-6">

        <!-- Esercizio 4 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(4) %>
            Completa con MULTIPLO o DIVISORE.
          </p>
          <div class="space-y-3">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">50 è</span>
              <input type="text" data-correct-answer="multiplo" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">di 10.</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">36 è</span>
              <input type="text" data-correct-answer="multiplo" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">di 9.</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">11 è</span>
              <input type="text" data-correct-answer="divisore" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">di 55.</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">9 è</span>
              <input type="text" data-correct-answer="multiplo" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">di 1.</span>
            </div>
          </div>
        </div>

        <!-- Esercizio 5 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(5) %>
            Scrivi tutti i divisori dei seguenti numeri.
          </p>
          <div class="space-y-3">
            <div class="flex items-center gap-2">
              <span class="text-<%= @pagina.base_color %>-600 font-bold">15</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" data-correct-answer="1, 3, 5, 15" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-<%= @pagina.base_color %>-600 font-bold">24</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" data-correct-answer="1, 2, 3, 4, 6, 8, 12, 24" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-<%= @pagina.base_color %>-600 font-bold">28</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" data-correct-answer="1, 2, 4, 7, 14, 28" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-2">
              <span class="text-<%= @pagina.base_color %>-600 font-bold">32</span>
              <span class="text-<%= @pagina.base_color %>-500">→</span>
              <input type="text" data-correct-answer="1, 2, 4, 8, 16, 32" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
          </div>
        </div>

        <!-- RISOLVI I PROBLEMI -->
        <div>
          <p class="font-bold text-<%= @pagina.base_color %>-600 mb-4">RISOLVI I PROBLEMI</p>

          <!-- Problema 6 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(6) %>
              Luca ha 53 automobiline, ma vuole averne 83 come il suo amico Marco. Quante ne deve comprare per averne lo stesso numero di Marco?
            </p>
            <div class="flex items-center justify-end gap-2">
              <input type="text" data-correct-answer="30" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="shrink-0">automobiline</span>
            </div>
          </div>

          <!-- Problema 7 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(7) %>
              9 bottiglie di succo di frutta da 2 litri costano 36 euro. Quanto costa un litro di succo di frutta?
            </p>
            <div class="flex items-center justify-end gap-2">
              <input type="text" data-correct-answer="2" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="shrink-0">euro</span>
            </div>
          </div>

          <!-- Problema 8 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(8) %>
              Alessia ha comprato delle matite colorate che costano 3 euro ciascuna, ha pagato con una banconota da 20 euro e ha ricevuto 2 euro di resto. Quante matite colorate ha comprato?
            </p>
            <div class="flex items-center justify-end gap-2">
              <input type="text" data-correct-answer="6" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="shrink-0">matite</span>
            </div>
          </div>

          <!-- Problema 9 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(9) %>
              In un laboratorio di pasticceria sono stati preparati <span class="whitespace-nowrap">2 616</span> cioccolatini che vengono confezionati in scatole da 6 cioccolatini ciascuna.
            </p>
            <div class="space-y-2">
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-gray-700 dark:text-gray-200">Quante scatole vengono confezionate?</span>
                <div class="flex items-center gap-2 ml-auto">
                  <input type="text" data-correct-answer="436" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
                </div>
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-gray-700 dark:text-gray-200">Se ogni scatola viene venduta a 9 euro, quanto si incassa dalla vendita di tutte le scatole?</span>
                <div class="flex items-center gap-2 ml-auto">
                  <input type="text" data-correct-answer="3924" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
                  <span class="shrink-0">euro</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Problema 10 -->
          <div>
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(10) %>
              Il giornalaio riceve ogni giorno 450 giornali. Quanti giornali riceve in una settimana? Al termine di una settimana gli sono rimasti 64 giornali. Quanti giornali ha venduto?
            </p>
            <div class="space-y-2">
              <div class="flex items-center justify-end gap-2">
                <span class="shrink-0">Giornali ricevuti in una settimana:</span>
                <input type="text" data-correct-answer="3150" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              </div>
              <div class="flex items-center justify-end gap-2">
                <span class="shrink-0">Giornali venduti:</span>
                <input type="text" data-correct-answer="3086" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
