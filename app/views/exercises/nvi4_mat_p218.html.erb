<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Esercizio 1 IMPARARE TUTTI -->
    <div class="p-5 bg-white dark:bg-gray-800 rounded-2xl border-3 border-yellow-400 dark:border-yellow-500">
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= imparare_tutti_badge(1) %>
        Completa il testo del problema usando le seguenti parole. Poi risolvi sul quaderno.
      </p>

      <div class="mb-4 flex flex-wrap gap-2">
        <span class="px-3 py-1 bg-cyan-100 dark:bg-cyan-900 rounded-full text-gray-700 dark:text-gray-200">complessivamente</span>
        <span class="px-3 py-1 bg-cyan-100 dark:bg-cyan-900 rounded-full text-gray-700 dark:text-gray-200">ciascuna</span>
        <span class="px-3 py-1 bg-cyan-100 dark:bg-cyan-900 rounded-full text-gray-700 dark:text-gray-200">ogni</span>
        <span class="px-3 py-1 bg-cyan-100 dark:bg-cyan-900 rounded-full text-gray-700 dark:text-gray-200 line-through">tutte</span>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="md:col-span-2">
          <div class="p-3 bg-custom-blue dark:bg-cyan-900 rounded-lg">
            <p class="text-gray-700 dark:text-gray-200">
              La squadra di pallavolo di Francesca ha deciso di acquistare le divise nuove per
              <span class="font-bold">tutte</span> le 11 giocatrici:
              <input type="text" data-correct-answer="ogni" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              divisa è composta dalla maglietta, che costa € 18, e dai pantaloncini, che costano € 13.
            </p>
            <p class="text-gray-700 dark:text-gray-200 mt-2">
              Quanto spende per
              <input type="text" data-correct-answer="ciascuna" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              giocatrice?
            </p>
            <p class="text-gray-700 dark:text-gray-200 mt-2">
              Quanto spende
              <input type="text" data-correct-answer="complessivamente" class="w-36 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              la squadra?
            </p>
          </div>
        </div>
        <div class="flex justify-center items-center">
          <%= image_tag "nvi4_mat/p218/output-1715932804218_746_260_230_191.png", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1" %>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(2) %>
        Leggi e segna con una <span class="font-bold">X</span> la domanda o le domande adeguate al testo del problema. Poi risolvi sul quaderno.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="flex justify-center">
          <%= image_tag "nvi4_mat/p218/output-1715932804218_137_552_286_222.png", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1" %>
        </div>

        <div class="md:col-span-2">
          <div class="p-3 bg-custom-blue dark:bg-cyan-900 rounded-lg mb-4">
            <p class="text-gray-700 dark:text-gray-200">
              La famiglia Neri, composta dai genitori e due bambini, va al cinema. Il biglietto intero per gli adulti costa € 9 e quello ridotto per bambini € 6. Il signor Neri paga con una banconota da € 50.
            </p>
          </div>

          <div class="space-y-2">
            <label class="flex items-center gap-3 p-2 rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700">
              <input type="checkbox" class="w-5 h-5" data-correct-answer="false">
              <span class="text-gray-700 dark:text-gray-200"><span class="text-cyan-500">•</span> Quante persone possono sedersi nella sala del cinema?</span>
            </label>
            <label class="flex items-center gap-3 p-2 rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700">
              <input type="checkbox" class="w-5 h-5" data-correct-answer="true">
              <span class="text-gray-700 dark:text-gray-200"><span class="text-cyan-500">•</span> Quanto spende complessivamente la famiglia Neri?</span>
            </label>
            <label class="flex items-center gap-3 p-2 rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700">
              <input type="checkbox" class="w-5 h-5" data-correct-answer="false">
              <span class="text-gray-700 dark:text-gray-200"><span class="text-cyan-500">•</span> Quanto hanno speso gli spettatori della prima fila?</span>
            </label>
            <label class="flex items-center gap-3 p-2 rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700">
              <input type="checkbox" class="w-5 h-5" data-correct-answer="true">
              <span class="text-gray-700 dark:text-gray-200"><span class="text-cyan-500">•</span> Quanto riceve di resto il signor Neri?</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(3) %>
        Leggi i problemi e formula una domanda adeguata per ciascuno di essi. Poi risolvi sul quaderno.
      </p>

      <div class="space-y-4">
        <div class="p-3 bg-cyan-50 dark:bg-cyan-900/30 rounded-lg">
          <p class="text-gray-700 dark:text-gray-200 mb-2">
            <span class="font-bold text-cyan-600 dark:text-cyan-400">a.</span> La pista di atletica della scuola è lunga 500 m. Per la gara di fine anno gli alunni delle classi quarte e quinte devono percorrere 2 500 m.
          </p>
          <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="Formula la domanda...">
        </div>

        <div class="p-3 bg-cyan-50 dark:bg-cyan-900/30 rounded-lg">
          <p class="text-gray-700 dark:text-gray-200 mb-2">
            <span class="font-bold text-cyan-600 dark:text-cyan-400">b.</span> Matteo ha conservato nel salvadanaio i soldi della paghetta settimanale: in 9 settimane ha messo da parte € 90 in banconote e € 22,50 in monete.
          </p>
          <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="Formula la domanda...">
        </div>

        <div class="p-3 bg-cyan-50 dark:bg-cyan-900/30 rounded-lg">
          <p class="text-gray-700 dark:text-gray-200 mb-2">
            <span class="font-bold text-cyan-600 dark:text-cyan-400">c.</span> Una cartiera spedisce 65 scatoloni di carta riciclata agli uffici di una grande azienda. Ogni scatolone contiene 8 risme di carta.
          </p>
          <input type="text" class="w-full border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="Formula la domanda...">
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
