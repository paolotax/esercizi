<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Esercizio 1: IMPARARE TUTTI - Addizioni in colonna -->
    <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
      <p class="font-bold text-gray-700 mb-4">
        <%= imparare_tutti_badge(1) %>
        Esegui le addizioni in colonna.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Colonna sinistra: operazioni -->
        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <span class="text-gray-700">34,89 + 0,543 + 77,1 =</span>
            <input type="text" data-correct-answer="112,533" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700"><span class="whitespace-nowrap">85,906 + 5 928,3 + 46 192</span> =</span>
            <input type="text" data-correct-answer="52206,206" class="w-28 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700"><span class="whitespace-nowrap">7 567,09 + 90 385 + 43,228</span> =</span>
            <input type="text" data-correct-answer="97995,318" class="w-28 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700"><span class="whitespace-nowrap">871,639 + 467 345 + 2,578</span> =</span>
            <input type="text" data-correct-answer="468219,217" class="w-28 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>

        <!-- Colonna destra: riquadro con suggerimento e esempio -->
        <div class="space-y-4">
          <div class="p-3 bg-white border-3 border-cyan-400 rounded">
            <p class="text-gray-600 italic">Ricorda di incolonnare correttamente le cifre rispettando il loro valore e di aggiungere gli zeri segnaposto per facilitare il calcolo.</p>
          </div>

          <!-- Esempio di incolonnamento -->
          <div class="flex justify-center">
            <%= image_tag "nvi5_mat/p184/p184_01.jpg", alt: "Esempio addizione in colonna", class: "max-w-full h-auto" %>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2: Addizioni sul quaderno -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Esegui le addizioni sul quaderno e fai la prova.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Colonna 1: numeri interi grandi -->
        <div class="space-y-2">
          <p class="text-gray-700"><span class="whitespace-nowrap">49 762 + 3 657 128</span> =</p>
          <p class="text-gray-700"><span class="whitespace-nowrap">61 437 892 + 8 204 349</span> =</p>
          <p class="text-gray-700"><span class="whitespace-nowrap">5 084 790 + 7 550 478</span> =</p>
          <p class="text-gray-700"><span class="whitespace-nowrap">997 365 + 76 453</span> =</p>
        </div>

        <!-- Colonna 2: numeri decimali -->
        <div class="space-y-2">
          <p class="text-gray-700">85 + 604,7 + 0,281 =</p>
          <p class="text-gray-700">277,5 + 41,054 =</p>
          <p class="text-gray-700">61,39 + 268,308 =</p>
          <p class="text-gray-700">51,93 + 153,8 + 269 =</p>
        </div>

        <!-- Colonna 3: Prova dell'addizione -->
        <div class="p-3 bg-cyan-50 rounded-lg">
          <p class="font-bold text-cyan-600 mb-2">Prova dell'addizione</p>
          <%= image_tag "nvi5_mat/p184/p184_03.jpg", alt: "Prova dell'addizione", class: "max-w-full h-auto" %>
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Completa con il numero mancante -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Completa con il numero mancante.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex items-center gap-2">
          <span class="text-gray-700 whitespace-nowrap">99 000 +</span>
          <input type="text" data-correct-answer="1000" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          <span class="text-gray-700 whitespace-nowrap">= 100 000</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 whitespace-nowrap">56 000 +</span>
          <input type="text" data-correct-answer="44000" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          <span class="text-gray-700 whitespace-nowrap">= 100 000</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 whitespace-nowrap">64 900 +</span>
          <input type="text" data-correct-answer="35100" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          <span class="text-gray-700 whitespace-nowrap">= 100 000</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 whitespace-nowrap">48 000 +</span>
          <input type="text" data-correct-answer="52000" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          <span class="text-gray-700 whitespace-nowrap">= 100 000</span>
        </div>
      </div>
    </div>

    <!-- Esercizio 4: Addizioni con cifre mancanti -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(4) %>
        Completa le addizioni con le cifre mancanti.
      </p>

      <div class="flex justify-center">
        <%= image_tag "nvi5_mat/p184/p184_02.jpg", alt: "Addizioni con cifre mancanti", class: "max-w-full h-auto" %>
      </div>
    </div>

    <!-- Esercizi 5 e 6 in due colonne -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:divide-x-2 md:divide-cyan-300">
      <!-- Esercizio 5: Calcola con strategia -->
      <div class="md:pr-4">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(5) %>
          Calcola.
        </p>

        <div class="p-3 bg-white border-3 border-cyan-400 rounded mb-4">
          <p class="text-gray-700"><span class="font-bold text-cyan-600">Per aggiungere 9, 99, 999</span>... a un qualsiasi numero aggiungi 10, 100, 1 000... e togli 1.</p>
        </div>

        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <span class="text-gray-700 whitespace-nowrap">23 756 + 9 =</span>
            <input type="text" data-correct-answer="23765" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 whitespace-nowrap">1 680 + 99 =</span>
            <input type="text" data-correct-answer="1779" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 whitespace-nowrap">247 + 999 =</span>
            <input type="text" data-correct-answer="1246" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>
      </div>

      <!-- Esercizio 6: Calcola velocemente -->
      <div class="md:pl-4">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(6) %>
          Calcola velocemente come negli esempi.
        </p>

        <div class="space-y-3">
          <!-- Esempio 1 -->
          <div class="p-2 bg-cyan-50 rounded">
            <p class="text-gray-700"><span class="font-bold">23,5 + 0,9 = (23,5 + 1) − 0,1 = 24,4</span></p>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700">43,7 + 0,9 =</span>
            <input type="text" data-correct-answer="44,6" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700">36,1 + 0,9 =</span>
            <input type="text" data-correct-answer="37" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>

          <!-- Esempio 2 -->
          <div class="p-2 bg-cyan-50 rounded">
            <p class="text-gray-700"><span class="font-bold">15,18 + 0,99 = (15,18 + 1) − 0,01 = 16,17</span></p>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700">0,57 + 0,99 =</span>
            <input type="text" data-correct-answer="1,56" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700">175,23 + 0,99 =</span>
            <input type="text" data-correct-answer="176,22" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
