<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-cyan-50 via-white to-blue-50 rounded-3xl shadow-xl" data-controller="exercise-checker">

  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-cyan-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">
          SINTASSI
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-cyan-600">Il complemento oggetto</h1>
      </div>
      <div class="flex-shrink-0 bg-cyan-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl">
        183
      </div>
    </div>
  </div>

  <!-- Exercise 1: Complete with oggetto -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-yellow-200 shadow-2xl p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-yellow-700 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <div class="flex items-center gap-2">
          <span class="bg-yellow-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0">1</span>
          <span class="bg-yellow-400 text-blue-800 px-2 py-1 rounded text-sm md:text-base font-bold whitespace-nowrap">IMPARARE TUTTI</span>
        </div>
        <span>Completa con un <span class="text-yellow-600 font-bold">complemento oggetto</span> adatto.</span>
      </div>
    </h2>

    <div class="space-y-3 text-base md:text-lg">
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <div class="flex flex-wrap items-center gap-2">
          <span>• Cappuccetto Rosso incontra (<strong>chi?</strong>)</span>
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 focus:outline-none focus:border-yellow-700 flex-1 min-w-[200px]" data-fill-blanks-target="input" placeholder="">
        </div>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <div class="flex flex-wrap items-center gap-2">
          <span>• Il pilota guida (<strong>che cosa?</strong>)</span>
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 focus:outline-none focus:border-yellow-700 flex-1 min-w-[200px]" data-fill-blanks-target="input" placeholder="">
        </div>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <div class="flex flex-wrap items-center gap-2">
          <span>• Il gatto ha rubato (<strong>che cosa?</strong>)</span>
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 focus:outline-none focus:border-yellow-700 flex-1 min-w-[200px]" data-fill-blanks-target="input" placeholder="">
        </div>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <div class="flex flex-wrap items-center gap-2">
          <span>• Vorrei bere (<strong>che cosa?</strong>)</span>
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 focus:outline-none focus:border-yellow-700 flex-1 min-w-[200px]" data-fill-blanks-target="input" placeholder="">
        </div>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <div class="flex flex-wrap items-center gap-2">
          <span>• Abbiamo visto (<strong>chi?</strong>)</span>
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 focus:outline-none focus:border-yellow-700 flex-1 min-w-[200px]" data-fill-blanks-target="input" placeholder="">
        </div>
      </div>
    </div>
  </div>

  <!-- Exercise 2: Identify verb, subject, oggetto -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-purple-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="true">
    <h2 class="text-lg md:text-xl font-bold text-purple-700 mb-3">
      <span class="bg-purple-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0 mr-2">2</span>
      In ogni frase individua il <span class="text-pink-600 font-bold">verbo<span class="inline-block w-6 h-6 bg-pink-300 rounded-full ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="pink" data-action="click->word-highlighter#selectColor"></span></span>, poi il <span class="text-blue-600 font-bold">soggetto<span class="inline-block w-6 h-6 bg-blue-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="blue" data-action="click->word-highlighter#selectColor"></span></span> (se è espresso). Infine individua il <span class="text-purple-600 font-bold">complemento oggetto<span class="inline-block w-6 h-6 bg-purple-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="purple" data-action="click->word-highlighter#selectColor"></span></span> e sottolinealo.
    </h2>

    <div class="space-y-3 text-base md:text-lg cursor-pointer">
      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-3">
        • <span data-word-highlighter-target="word" data-correct-color="pink" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Portiamo</span> in tavola <span data-word-highlighter-target="word" data-correct-color="purple" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">la pasta</span> appena scolata.
      </div>
      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-3">
        • <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">La musica</span> <span data-word-highlighter-target="word" data-correct-color="pink" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">dà</span> <span data-word-highlighter-target="word" data-correct-color="purple" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">gioia</span> a tutti.
      </div>
      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-3">
        • Ieri <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Enrica</span> <span data-word-highlighter-target="word" data-correct-color="pink" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">ha scritto</span> a Rosalba <span data-word-highlighter-target="word" data-correct-color="purple" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">una e-mail</span> di ringraziamento.
      </div>
      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-3">
        • <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Alice</span> <span data-word-highlighter-target="word" data-correct-color="pink" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">traduce</span> <span data-word-highlighter-target="word" data-correct-color="purple" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">un libro</span> dal tedesco all'italiano.
      </div>
      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-3">
        • <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">I bambini</span> <span data-word-highlighter-target="word" data-correct-color="pink" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">hanno</span> <span data-word-highlighter-target="word" data-correct-color="purple" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">i quaderni</span> sul banco.
      </div>
      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-3">
        • <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Mio fratello Luciano</span> <span data-word-highlighter-target="word" data-correct-color="pink" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">ripete</span> <span data-word-highlighter-target="word" data-correct-color="purple" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">la filastrocca</span> da ore.
      </div>
    </div>
  </div>

  <!-- Exercise 3: Underline complemento oggetto with partitivi -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-green-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="false">
    <h2 class="text-lg md:text-xl font-bold text-green-700 mb-3">
      <span class="bg-green-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0 mr-2">3</span>
      Sottolinea, quando c'è, il <span class="text-green-600 font-bold">complemento oggetto<span class="inline-block w-6 h-6 bg-green-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="green" data-action="click->word-highlighter#selectColor"></span></span>.
    </h2>

    <div class="bg-blue-50 border-2 border-blue-200 rounded-xl px-4 py-3 mb-4 text-sm md:text-base">
      Ricorda che <strong>del, dello, della, dei...</strong> possono essere <strong>articoli partitivi</strong> che introducono un <strong>soggetto</strong> o un <strong>complemento oggetto</strong>.
    </div>

    <div class="space-y-3 text-base md:text-lg cursor-pointer">
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • A colazione ho bevuto <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">latte e orzo</span>.
      </div>
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • Lin parte per le vacanze domattina alle sei.
      </div>
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • Oussama è andato in Marocco con l'aereo.
      </div>
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • Versami <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">dell'acqua</span>, per favore.
      </div>
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • Hai letto <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">l'ultimo libro</span> di Harry Potter?
      </div>
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • Ho sentito <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">dei rumori</span> strani.
      </div>
      <div class="bg-green-50 border-2 border-green-200 rounded-xl px-4 py-3">
        • Dei bambini simpatici ci prestano <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">il pallone</span>.
      </div>
    </div>
  </div>

  <!-- Exercise 4: Underline oggetto with pronomi -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-red-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="false">
    <h2 class="text-lg md:text-xl font-bold text-red-700 mb-3">
      <span class="bg-red-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0 mr-2">4</span>
      Sottolinea il <span class="text-red-600 font-bold">complemento oggetto<span class="inline-block w-6 h-6 bg-red-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="red" data-action="click->word-highlighter#selectColor"></span></span>.
    </h2>

    <div class="bg-blue-50 border-2 border-blue-200 rounded-xl px-4 py-3 mb-4 text-sm md:text-base">
      Il complemento oggetto di solito segue il verbo, ma lo precede quando è espresso da un pronome (<strong>lo, la, li, le, mi, ti...</strong>): Ho incontrato gli amici e <strong>li</strong> ho salutati.
    </div>

    <div class="space-y-3 text-base md:text-lg cursor-pointer">
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • Leggo spesso <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">i fumetti</span> giapponesi.
      </div>
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • Luigi <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">mi</span> ha invitato al suo compleanno.
      </div>
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • Ho comprato <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">una torta</span> per la festa.
      </div>
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">Ti</span> ho visto ieri al cinema.
      </div>
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • La neve ha imbiancato <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">i campi</span>.
      </div>
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • Io <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">lo</span> chiamerò.
      </div>
      <div class="bg-red-50 border-2 border-red-200 rounded-xl px-4 py-3">
        • Noi invitiamo spesso <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">gli zii</span> a pranzo.
      </div>
    </div>
  </div>

  <div class="text-right text-sm text-gray-500 mb-6">
    Grammatica p. <%= link_to "106", pagina_path("nvl5_gram_p106"), class: "text-red-600 hover:text-red-800 underline font-bold" %>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls', color: 'cyan', current_page: 'nvl5_gram_p183' %>
</div>
