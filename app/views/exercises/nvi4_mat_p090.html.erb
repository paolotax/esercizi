<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Problema 1: La piscina -->
    <div class="p-4 md:p-6">
      <div class="p-4 bg-custom-blue dark:bg-cyan-900/30 mb-4">
        <p class="text-gray-700 dark:text-gray-200">
          <strong class="text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-400">La piscina</strong>
          <span class="text-<%= @pagina.base_color %>-500">•</span>
          Gianni vuole costruire nel suo giardino una piccola piscina. Il geometra gli presenta questo progetto.
        </p>
      </div>

      <!-- Area griglia con piscina disegnata -->
      <div class="flex justify-center mb-4">
        <div class="relative">
          <div class="w-full max-w-lg h-40 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded" style="background-image: linear-gradient(#e5e5e5 1px, transparent 1px), linear-gradient(90deg, #e5e5e5 1px, transparent 1px); background-size: 20px 20px;">
            <!-- Piscina esempio (forma a L) -->
            <div class="absolute top-4 left-20 w-16 h-24 bg-pink-300 dark:bg-pink-600 border border-pink-500"></div>
            <div class="absolute top-4 left-36 w-8 h-12 bg-pink-300 dark:bg-pink-600 border border-pink-500"></div>
          </div>
        </div>
      </div>

      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-<%= @pagina.base_color %>-500">•</span>
        Gianni è soddisfatto della superficie, ma non della forma della piscina. Sai trovare almeno altre 3 soluzioni con forma diversa ma con lo stesso numero di quadretti? Disegnale.
      </p>

      <!-- Area per disegnare altre soluzioni -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="w-full h-32 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded" style="background-image: linear-gradient(#e5e5e5 1px, transparent 1px), linear-gradient(90deg, #e5e5e5 1px, transparent 1px); background-size: 20px 20px;"></div>
        <div class="w-full h-32 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded" style="background-image: linear-gradient(#e5e5e5 1px, transparent 1px), linear-gradient(90deg, #e5e5e5 1px, transparent 1px); background-size: 20px 20px;"></div>
        <div class="w-full h-32 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded" style="background-image: linear-gradient(#e5e5e5 1px, transparent 1px), linear-gradient(90deg, #e5e5e5 1px, transparent 1px); background-size: 20px 20px;"></div>
      </div>
    </div>

    <!-- Problema 2: In biblioteca -->
    <div class="p-4 md:p-6">
      <div class="p-4 bg-custom-blue dark:bg-cyan-900/30 mb-4">
        <p class="text-gray-700 dark:text-gray-200">
          <strong class="text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-400">In biblioteca</strong>
          <span class="text-<%= @pagina.base_color %>-500">•</span>
          Matteo sistema in uno scaffale della biblioteca i libri che sono arrivati il giorno prima. Osserva che 8 hanno la copertina verde e che 5 sono di fantascienza.
          Quanti libri sono arrivati in biblioteca?
        </p>
      </div>

      <p class="text-gray-700 dark:text-gray-200 mb-4">
        Una possibile soluzione è questa.
      </p>

      <!-- Immagine soluzione esempio -->
      <div class="flex justify-center mb-4">
        <%= image_tag "nvi4_mat/p090/p090_01.jpg", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1" %>
      </div>

      <div class="p-3 bg-pink-light dark:bg-pink-900/40 rounded-xl w-fit mb-4">
        <p class="text-gray-700 dark:text-gray-200">
          Molte volte possono esistere <strong>più soluzioni tutte corrette</strong> per lo stesso problema.
        </p>
      </div>

      <div class="flex items-center gap-2 flex-wrap mb-6">
        <span class="font-bold text-gray-700 dark:text-gray-200">Risposta:</span>
        <span class="text-gray-700 dark:text-gray-200">Sono arrivati</span>
        <input type="text" data-correct-answer="13" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
        <span class="text-gray-700 dark:text-gray-200">libri.</span>
      </div>

      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-<%= @pagina.base_color %>-500">•</span>
        Trova altre soluzioni possibili e rappresentale.
      </p>

      <!-- Area per disegnare altre soluzioni -->
      <div class="w-full h-40 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded" style="background-image: linear-gradient(#e5e5e5 1px, transparent 1px), linear-gradient(90deg, #e5e5e5 1px, transparent 1px); background-size: 20px 20px;"></div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
