<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Sezione ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <h2 class="font-bold text-pink-600 mb-6">ESERCIZI</h2>

      <div class="space-y-6">
        <!-- Exercise 5: Scrivi in lettere decimali -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(5) %>
              Scrivi in lettere sul quaderno i seguenti numeri decimali.
            </p>
          </div>
          <div>
            <div class="flex flex-wrap gap-3 justify-center">
              <% ["23,04", "5,02", "0,6", "57,8", "62,71", "18,09", "1,65", "0,12", "0,03", "1,05"].each_with_index do |num, i| %>
                <span class="bg-white px-3 py-1 font-bold text-cyan-500 rounded border-2 border-cyan-300"><%= num %></span>
                <% unless i == 9 %><span class="text-pink-600">&#8226;</span><% end %>
              <% end %>
            </div>
          </div>
        </div>

        <!-- Exercise 6: Confronta numeri -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(6) %>
              Confronta i numeri decimali e inserisci i segni &lt; oppure &gt;.
            </p>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <% [
              { left: "13,4", right: "13,14", answer: ">" },
              { left: "0,5", right: "0,51", answer: "<" },
              { left: "8,09", right: "8,9", answer: "<" },
              { left: "26,2", right: "26,7", answer: "<" },
              { left: "34,5", right: "34,52", answer: "<" },
              { left: "1,1", right: "0,568", answer: ">" },
              { left: "8,88", right: "8,8", answer: ">" },
              { left: "3,7", right: "3,54", answer: ">" },
              { left: "12,5", right: "12,49", answer: ">" },
              { left: "6", right: "6,9", answer: "<" },
              { left: "3,02", right: "3,2", answer: "<" },
              { left: "8,2", right: "8,22", answer: "<" },
              { left: "12,3", right: "13,2", answer: "<" },
              { left: "1,2", right: "1,32", answer: "<" },
              { left: "6,527", right: "6,327", answer: ">" }
            ].each do |item| %>
              <div class="flex items-center justify-center gap-2">
                <span class="font-bold text-gray-700"><%= item[:left] %></span>
                <input type="text" data-correct-answer="<%= item[:answer] %>" class="w-10 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" maxlength="1">
                <span class="font-bold text-gray-700"><%= item[:right] %></span>
              </div>
            <% end %>
          </div>
        </div>

        <!-- Exercise 7: Ordine decrescente -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(7) %>
              Scrivi i seguenti numeri decimali in ordine decrescente.
            </p>
          </div>
          <div>
            <div class="flex flex-wrap gap-3 justify-center mb-4">
              <% ["0,14", "0,04", "2,1", "2,15", "1,04", "1,14"].each_with_index do |num, i| %>
                <span class="bg-white px-3 py-1 font-bold text-cyan-500 rounded border-2 border-cyan-300"><%= num %></span>
                <% unless i == 5 %><span class="text-pink-600">&#8226;</span><% end %>
              <% end %>
            </div>
            <input type="text" data-correct-answer="2,15; 2,1; 1,14; 1,04; 0,14; 0,04" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent py-2">
          </div>
        </div>

        <!-- Exercise 8: Calcola le potenze -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(8) %>
              Calcola le seguenti potenze come nell'esempio.
            </p>
          </div>
          <!-- Esempio -->
          <div class="p-4 bg-white rounded-lg mb-4">
            <p class="font-bold text-gray-800">
              2<sup>3</sup> = <span class="text-cyan-500">2 × 2 × 2 = 8</span>
            </p>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <% [
              { pot: "5<sup>2</sup>", answer: "5 × 5 = 25" },
              { pot: "4<sup>1</sup>", answer: "4" },
              { pot: "3<sup>2</sup>", answer: "3 × 3 = 9" },
              { pot: "12<sup>1</sup>", answer: "12" },
              { pot: "10<sup>0</sup>", answer: "1" },
              { pot: "3<sup>0</sup>", answer: "1" },
              { pot: "10<sup>6</sup>", answer: "10 × 10 × 10 × 10 × 10 × 10 = 1000000" },
              { pot: "6<sup>2</sup>", answer: "6 × 6 = 36" },
              { pot: "10<sup>1</sup>", answer: "10" },
              { pot: "2<sup>4</sup>", answer: "2 × 2 × 2 × 2 = 16" },
              { pot: "3<sup>2</sup>", answer: "3 × 3 = 9" },
              { pot: "4<sup>2</sup>", answer: "4 × 4 = 16" }
            ].each do |item| %>
              <div class="flex items-center gap-2">
                <span class="font-bold text-gray-700"><%= item[:pot].html_safe %> =</span>
                <input type="text" data-correct-answer="<%= item[:answer] %>" class="flex-1 min-w-0 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>
            <% end %>
          </div>
        </div>

        <!-- Exercise 9: Polinomi numerici -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(9) %>
              Scrivi i seguenti numeri come polinomi numerici. Segui l'esempio ed esegui sul quaderno.
            </p>
          </div>
          <!-- Esempio -->
          <div class="p-4 bg-white rounded-lg mb-4">
            <p class="font-bold text-gray-800">
              <span class="whitespace-nowrap">3 629</span> = <span class="text-cyan-500">3 × 10<sup>3</sup> + 6 × 10<sup>2</sup> + 2 × 10<sup>1</sup> + 9 × 10<sup>0</sup></span>
            </p>
          </div>
          <div class="flex flex-wrap gap-3 justify-center">
            <% ["6 781", "12 520", "1 345 354", "4 650 899", "134 641", "56 731", "4 087", "12 967 110", "54 061 287"].each_with_index do |num, i| %>
              <span class="bg-white px-3 py-1 font-bold text-cyan-500 rounded border-2 border-cyan-300 whitespace-nowrap"><%= num %></span>
              <% unless i == 8 %><span class="text-pink-600">&#8226;</span><% end %>
            <% end %>
          </div>
        </div>

        <!-- Exercise 10: Dal polinomio al numero -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(10) %>
              Scrivi in cifre il numero che corrisponde al polinomio numerico, poi scrivi il numero in lettere. Segui l'esempio.
            </p>
          </div>
          <!-- Esempio -->
          <div class="p-4 bg-white rounded-lg mb-4">
            <p class="font-bold text-gray-800 mb-2">
              2 × 10<sup>3</sup> + 4 × 10<sup>2</sup> + 7 × 10<sup>1</sup> + 6 × 10<sup>0</sup> <span class="text-pink-600">→</span> <span class="text-cyan-500 whitespace-nowrap font-bold">2 476</span>
            </p>
            <p class="italic text-cyan-500 font-bold">duemilaquattrocentosettantasei</p>
          </div>

          <!-- Esercizi -->
          <div class="space-y-4">
            <% [
              { expr: "4 × 10<sup>5</sup> + 6 × 10<sup>4</sup> + 5 × 10<sup>3</sup> + 2 × 10<sup>2</sup>" },
              { expr: "1 × 10<sup>6</sup> + 8 × 10<sup>5</sup> + 3 × 10<sup>4</sup> + 5 × 10<sup>3</sup> + 9 × 10<sup>2</sup> + 3 × 10<sup>1</sup> + 3 × 10<sup>0</sup>" },
              { expr: "7 × 10<sup>7</sup> + 3 × 10<sup>6</sup> + 8 × 10<sup>4</sup> + 1 × 10<sup>3</sup> + 9 × 10<sup>2</sup> + 2 × 10<sup>1</sup>" },
              { expr: "6 × 10<sup>6</sup> + 8 × 10<sup>5</sup> + 5 × 10<sup>4</sup> + 1 × 10<sup>3</sup> + 3 × 10<sup>2</sup> + 6 × 10<sup>1</sup> + 8 × 10<sup>0</sup>" }
            ].each do |item| %>
              <div class="flex items-center gap-3 flex-wrap">
                <span class="font-bold text-gray-800"><%= item[:expr].html_safe %></span>
                <span class="text-pink-600">→</span>
                <span class="text-gray-400">.................................................................</span>
              </div>
              <div class="text-gray-400">.................................................................</div>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
