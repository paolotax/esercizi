<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI -->
    <div class="p-3 bg-orange-100 rounded-lg">
      <!-- Esercizi IMPARARE TUTTI -->
      <div class="p-4 bg-white rounded-2xl -mx-3 -mt-3 mb-4 border-3 border-blue-500">
        <!-- Esercizio 1 -->
        <div class="mb-6">
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= imparare_tutti_badge(1) %>
              Completa le due frazioni e cerchia la maggiore.
            </p>
          </div>
          <div class="flex items-center gap-6 justify-center flex-wrap">
            <div class="flex items-center gap-2">
              <div class="flex gap-0.5">
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
              </div>
              <%= render 'shared/frazione', num: nil, den: 6, num_answer: "5" %>
            </div>
            <div class="flex items-center gap-2">
              <div class="flex gap-0.5">
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
              </div>
              <%= render 'shared/frazione', num: nil, den: 6, num_answer: "3" %>
            </div>
          </div>
        </div>

        <!-- Esercizio 2 -->
        <div>
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= imparare_tutti_badge(2) %>
              Completa le due frazioni e cerchia la minore.
            </p>
          </div>
          <div class="flex items-center gap-6 justify-center flex-wrap">
            <div class="flex items-center gap-2">
              <div class="flex gap-0.5">
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
              </div>
              <%= render 'shared/frazione', num: 6, den: nil, den_answer: "8" %>
            </div>
            <div class="flex items-center gap-2">
              <div class="flex gap-0.5">
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-pink-400 border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
                <div class="w-4 h-8 bg-white border border-gray-400"></div>
              </div>
              <%= render 'shared/frazione', num: nil, den: nil, num_answer: "5", den_answer: "8" %>
            </div>
          </div>
        </div>
      </div>

      <!-- Grid per Esercizi 3 e 4 -->
      <div class="grid grid-cols-1 md:grid-cols-2 divide-y-2 md:divide-y-0 md:divide-x-2 divide-pink-300 mb-4">
        <!-- Esercizio 3 -->
        <div class="p-4">
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(3) %>
              Confronta le frazioni e inserisci i simboli <span class="text-pink-600">&gt;</span> oppure <span class="text-pink-600">&lt;</span>.
            </p>
          </div>

          <div class="space-y-4">
            <div>
              <p class="font-bold text-gray-600 mb-2">a)</p>
              <div class="grid grid-cols-3 gap-2">
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 4, den: 9 %>
                  <input type="text" data-correct-answer="<" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 5, den: 9 %>
                </div>
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 3, den: 7 %>
                  <input type="text" data-correct-answer=">" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 2, den: 7 %>
                </div>
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 2, den: 5 %>
                  <input type="text" data-correct-answer=">" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 1, den: 5 %>
                </div>
              </div>
            </div>

            <div>
              <p class="font-bold text-gray-600 mb-2">b)</p>
              <div class="grid grid-cols-3 gap-2">
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 1, den: 5 %>
                  <input type="text" data-correct-answer=">" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 1, den: 7 %>
                </div>
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 2, den: 9 %>
                  <input type="text" data-correct-answer="<" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 2, den: 8 %>
                </div>
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 3, den: 9 %>
                  <input type="text" data-correct-answer="<" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 3, den: 7 %>
                </div>
              </div>
            </div>

            <div>
              <p class="font-bold text-gray-600 mb-2">c)</p>
              <div class="grid grid-cols-3 gap-2">
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 3, den: 4 %>
                  <input type="text" data-correct-answer=">" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 1, den: 2 %>
                </div>
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 4, den: 5 %>
                  <input type="text" data-correct-answer="<" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 6, den: 7 %>
                </div>
                <div class="flex items-center justify-center gap-1">
                  <%= render 'shared/frazione', num: 2, den: 3 %>
                  <input type="text" data-correct-answer=">" class="w-8 px-1 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                  <%= render 'shared/frazione', num: 5, den: 8 %>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Esercizio 4 -->
        <div class="p-4">
          <div class="mb-4">
            <p class="font-bold text-gray-700">
              <%= numero_esercizio_badge(4) %>
              Calcola.
            </p>
          </div>
          <div class="space-y-3">
            <div class="flex items-center gap-2 min-w-0">
              <%= render 'shared/frazione', num: 1, den: 6 %> <span class="whitespace-nowrap">di 480</span> <span class="text-pink-600 font-bold">→</span>
              <input type="text" data-correct-answer="80" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2 min-w-0">
              <%= render 'shared/frazione', num: 2, den: 9 %> <span class="whitespace-nowrap">di 432</span> <span class="text-pink-600 font-bold">→</span>
              <input type="text" data-correct-answer="96" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2 min-w-0">
              <%= render 'shared/frazione', num: 8, den: 15 %> <span class="whitespace-nowrap">di 3000</span> <span class="text-pink-600 font-bold">→</span>
              <input type="text" data-correct-answer="1600" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-2 min-w-0">
              <%= render 'shared/frazione', num: 7, den: 20 %> <span class="whitespace-nowrap">di 2400</span> <span class="text-pink-600 font-bold">→</span>
              <input type="text" data-correct-answer="840" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 5 -->
      <div class="p-4 mb-4">
        <div class="mb-4">
          <p class="font-bold text-gray-700">
            <%= numero_esercizio_badge(5) %>
            Calcola l'intero conoscendo il valore della frazione.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="flex items-center gap-2 min-w-0">
            <%= render 'shared/frazione', num: 7, den: 11 %> <span class="whitespace-nowrap">corrisponde a 42</span> <span class="text-pink-600 font-bold">→</span>
            <input type="text" data-correct-answer="66" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2 min-w-0">
            <%= render 'shared/frazione', num: 9, den: 13 %> <span class="whitespace-nowrap">corrisponde a 45</span> <span class="text-pink-600 font-bold">→</span>
            <input type="text" data-correct-answer="65" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2 min-w-0">
            <%= render 'shared/frazione', num: 3, den: 8 %> <span class="whitespace-nowrap">corrisponde a 27</span> <span class="text-pink-600 font-bold">→</span>
            <input type="text" data-correct-answer="72" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2 min-w-0">
            <%= render 'shared/frazione', num: 8, den: 15 %> <span class="whitespace-nowrap">corrisponde a 48</span> <span class="text-pink-600 font-bold">→</span>
            <input type="text" data-correct-answer="90" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
          </div>
        </div>
      </div>

      <!-- RISOLVI I PROBLEMI -->
      <div class="p-4">
        <h3 class="font-bold text-pink-600 mb-4">RISOLVI I PROBLEMI</h3>
        <div class="flex flex-col md:flex-row md:divide-x-2 divide-pink-300">
          <!-- Colonna 1: problemi 6 e 7 -->
          <div class="md:w-2/5 space-y-4 pr-4">
            <div class="pb-4">
              <p class="text-gray-700 mb-2">
                <%= numero_esercizio_badge(6) %>
                Luca ha ricevuto in regalo un libro di 144 pagine. Lunedì ha letto
                <%= render 'shared/frazione', num: 5, den: 9 %>
                del libro, martedì
                <%= render 'shared/frazione', num: 3, den: 9 %>
                del libro. Quante pagine deve ancora leggere?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="16" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
              </div>
            </div>
            <div class="pt-4">
              <p class="text-gray-700 mb-2">
                <%= numero_esercizio_badge(7) %>
                Lia deve recarsi a Milano per lavoro. Ha percorso 114 km, che corrispondono a
                <%= render 'shared/frazione', num: 2, den: 5 %>
                dell'intero tragitto. Quanto dista la casa di Lia da Milano?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="285" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
              </div>
            </div>
          </div>
          <!-- Colonna 2: problemi 8 e 9 -->
          <div class="md:w-3/5 space-y-4 pl-4">
            <div class="pb-4">
              <p class="text-gray-700 mb-2">
                <%= numero_esercizio_badge(8) %>
                In un caseificio si producono giornalmente 750 mozzarelle, che vengono consegnate in diversi negozi.
                <%= render 'shared/frazione', num: 3, den: 15 %>
                delle mozzarelle vengono trasportate con il camion di Angelo,
                <%= render 'shared/frazione', num: 7, den: 15 %>
                con il camion di Paolo e le rimanenti con il camion di Luisa. Quante mozzarelle trasporta Luisa con il suo camion?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="250" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
              </div>
            </div>
            <div class="pt-4">
              <p class="text-gray-700 mb-2">
                <%= numero_esercizio_badge(9) %>
                In una botte ci sono 60 litri di acqua, che corrispondono a
                <%= render 'shared/frazione', num: 3, den: 5 %>
                della sua capacità. Quanta acqua può contenere in tutto la botte?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="100" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dashed border-gray-400 font-bold bg-transparent">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
