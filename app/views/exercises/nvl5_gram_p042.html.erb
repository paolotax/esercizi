<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Introduction -->
  <div class="bg-white dark:bg-gray-800 p-4 md:p-6 pb-8">
    <p class="text-gray-700 dark:text-gray-200 font-semibold mb-3">
      <span class="text-<%= @pagina.base_color %>-500">•</span> A seconda del genere, i nomi si distinguono in:
    </p>
    <div class="space-y-2 text-gray-700 dark:text-gray-200 ml-6">
      <p><span class="text-<%= @pagina.base_color %>-500">•</span> <strong>maschili</strong> → cuoco, avvocato, pittore...</p>
      <p><span class="text-<%= @pagina.base_color %>-500">•</span> <strong>femminili</strong> → cuoca, avvocatessa, pittrice...</p>
      <p><span class="text-<%= @pagina.base_color %>-500">•</span> <strong>indipendenti</strong>: forme diverse per maschile e femminile → fratello / sorella...</p>
    </div>

    <div class="mt-4 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-3">
      <p class="text-gray-700 dark:text-gray-200 mb-2 font-semibold">
        <span class="text-<%= @pagina.base_color %>-500">•</span> Alcuni nomi hanno la stessa forma al maschile e al femminile:
      </p>
      <div class="space-y-2 text-gray-700 dark:text-gray-200 ml-6">
        <p><span class="text-<%= @pagina.base_color %>-500">•</span> <strong>genere comune</strong> (persone) → il cantante / la cantante</p>
        <p><span class="text-<%= @pagina.base_color %>-500">•</span> <strong>genere promiscuo</strong> (animali) → la giraffa maschio / la giraffa femmina</p>
      </div>
    </div>
  </div>

  <!-- Exercise 1: Volgi al maschile -->
  <div class="bg-white dark:bg-gray-800 p-4 md:p-6 pb-8" data-controller="fill-blanks">
    <h2 class="font-bold mb-4 flex items-center gap-2">
      <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">1</span>
      Volgi al maschile.
    </h2>

    <% feminine_words = [
      { fem: "alunna", masc: "alunno" },
      { fem: "nonna", masc: "nonno" },
      { fem: "madre", masc: "padre" },
      { fem: "contessa", masc: "conte" },
      { fem: "nuotatrice", masc: "nuotatore" }
    ] %>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr>
            <th class="bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 border border-<%= @pagina.base_color %>-200 px-3 py-2 text-<%= @pagina.base_color %>-700 font-bold">Femminile</th>
            <% feminine_words.each do |word| %>
              <td class="bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 border border-<%= @pagina.base_color %>-200 px-3 py-2 text-center"><%= word[:fem] %></td>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 px-3 py-2 text-gray-700 dark:text-gray-200 font-bold">Maschile</th>
            <% feminine_words.each do |word| %>
              <td class="border border-<%= @pagina.base_color %>-200 px-3 py-2">
                <input type="text"
                       class="w-full border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-transparent dark:text-white text-center focus:outline-none focus:border-<%= @pagina.base_color %>-700"
                       data-fill-blanks-target="input"
                       data-answer="<%= word[:masc] %>"
                       data-correct-answer="<%= word[:masc] %>"
                       maxlength="20">
              </td>
            <% end %>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Exercise 2: Volgi al femminile -->
  <div class="bg-white dark:bg-gray-800 p-4 md:p-6 pb-8" data-controller="fill-blanks">
    <h2 class="font-bold mb-4 flex items-center gap-2">
      <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">2</span>
      Volgi al femminile.
    </h2>

    <% masculine_words = [
      { masc: "giornalaio", fem: "giornalaia" },
      { masc: "attore", fem: "attrice" },
      { masc: "violinista", fem: "violinista" },
      { masc: "marito", fem: "moglie" },
      { masc: "studente", fem: "studentessa" }
    ] %>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr>
            <th class="bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 px-3 py-2 text-gray-700 dark:text-gray-200 font-bold">Maschile</th>
            <% masculine_words.each do |word| %>
              <td class="border border-<%= @pagina.base_color %>-200 px-3 py-2 text-center"><%= word[:masc] %></td>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 border border-<%= @pagina.base_color %>-200 px-3 py-2 text-<%= @pagina.base_color %>-700 font-bold">Femminile</th>
            <% masculine_words.each do |word| %>
              <td class="bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 border border-<%= @pagina.base_color %>-200 px-3 py-2">
                <input type="text"
                       class="w-full border-b-2 border-dotted border-<%= @pagina.base_color %>-500 bg-transparent dark:text-white text-center focus:outline-none focus:border-<%= @pagina.base_color %>-700"
                       data-fill-blanks-target="input"
                       data-answer="<%= word[:fem] %>"
                       data-correct-answer="<%= word[:fem] %>"
                       maxlength="20">
              </td>
            <% end %>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="text-right text-gray-500 dark:text-gray-400 mb-6">
    Esercizi pp. <%= link_to "146", pagina_path("nvl5_gram_p146"), class: "text-gray-600 hover:text-gray-800 underline" %>, <%= link_to "147", pagina_path("nvl5_gram_p147"), class: "text-gray-600 hover:text-gray-800 underline" %>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls' %>
</div>
