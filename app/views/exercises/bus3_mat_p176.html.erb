<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white font-mono text-base lg:text-lg xl:text-xl"
     data-controller="exercise-checker page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p176/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Colonna sinistra -->
    <div>
      <!-- Esercizio 7 -->
      <div class="mb-10">
        <div class="flex items-start gap-3 mb-4">
          <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
            7
          </div>
          <p class="text-gray-700">
            <strong>Completa con le cifre mancanti.</strong>
          </p>
        </div>

        <div class="flex justify-center">
          <%= image_tag "bus3_mat/p176/p176_01.jpg", alt: "Moltiplicazioni con cifre mancanti", class: "max-w-full rounded" %>
        </div>
      </div>

      <!-- Esercizio 8 -->
      <div class="mb-10">
        <div class="flex items-start gap-3 mb-4">
          <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
            8
          </div>
          <p class="text-gray-700">
            <strong>Calcola in colonna sul quaderno. Poi colora allo stesso modo le moltiplicazioni con lo stesso prodotto.</strong>
          </p>
        </div>

        <div class="grid grid-cols-3 gap-4">
          <div class="border border-gray-400 p-3 text-center">45 × 80 =</div>
          <div class="border border-gray-400 p-3 text-center">72 × 34 =</div>
          <div class="border border-gray-400 p-3 text-center">54 × 63 =</div>
          <div class="border border-gray-400 p-3 text-center">51 × 48 =</div>
          <div class="border border-gray-400 p-3 text-center">81 × 42 =</div>
          <div class="border border-gray-400 p-3 text-center">48 × 75 =</div>
        </div>
      </div>

      <!-- Esercizio 9 -->
      <div class="mb-10" data-controller="fill-blanks auto-advance">
        <div class="flex items-start gap-3 mb-4">
          <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
            9
          </div>
          <p class="text-gray-700">
            <strong>Completa.</strong>
          </p>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <p>63 × <input type="text" data-fill-blanks-target="input" data-correct-answer="100"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> = 6 300</p>
          <p><input type="text" data-fill-blanks-target="input" data-correct-answer="55"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> × 100 = 5500</p>
          <p>123 × <input type="text" data-fill-blanks-target="input" data-correct-answer="1"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> = 123</p>
          <p>96 × <input type="text" data-fill-blanks-target="input" data-correct-answer="100"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> = 9 600</p>
          <p>48 × 10 = <input type="text" data-fill-blanks-target="input" data-correct-answer="480"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"></p>
          <p>939 × 0 = <input type="text" data-fill-blanks-target="input" data-correct-answer="0"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"></p>
          <p>1 000 × <input type="text" data-fill-blanks-target="input" data-correct-answer="7"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> = 7 000</p>
          <p><input type="text" data-fill-blanks-target="input" data-correct-answer="10"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> × 81 = 810</p>
          <p><input type="text" data-fill-blanks-target="input" data-correct-answer="0"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> × 487 = 0</p>
          <p>1 × <input type="text" data-fill-blanks-target="input" data-correct-answer="635"
                 class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> = 635</p>
        </div>
      </div>

      <!-- Esercizio 10 -->
      <div class="mb-10" data-controller="card-selector">
        <div class="flex items-start gap-3 mb-4">
          <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
            10
          </div>
          <p class="text-gray-700">
            <strong>Quale numero moltiplicato per 27 dà 1 026?</strong><br>
            Indica con una <span class="text-red-500">X</span> la tua scelta, poi verifica con il calcolo sul quaderno.
          </p>
        </div>

        <div class="flex gap-4">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q10" data-card-selector-target="card" class="w-5 h-5">
            <span>18</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q10" data-card-selector-target="card" data-correct="true" class="w-5 h-5">
            <span>38</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q10" data-card-selector-target="card" class="w-5 h-5">
            <span>58</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Colonna destra -->
    <div>
      <!-- Esercizio 11 -->
      <div class="mb-10">
        <div class="flex items-start gap-3 mb-4">
          <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
            11
          </div>
          <p class="text-gray-700">
            <strong>Risolvi sul quaderno.</strong>
          </p>
        </div>

        <div class="space-y-6">
          <div>
            <p class="text-cyan-600 font-bold">a.</p>
            <p>Un aereo di linea può trasportare 198 passeggeri. Se viaggia sempre completo, quanti passeggeri trasporta dopo aver percorso 8 volte la rotta?</p>
          </div>
          <div>
            <p class="text-cyan-600 font-bold">b.</p>
            <p>Il cartolaio ha ordinato 14 barattoli che contengono ciascuno 24 penne a sfera. Quante penne a sfera ha ordinato?</p>
          </div>
          <div>
            <p class="text-cyan-600 font-bold">c.</p>
            <p>Marco si allena ogni giorno in una piscina lunga 25 metri. Nuota per 56 vasche. Quanti metri percorre complessivamente?</p>
          </div>
          <div>
            <p class="text-cyan-600 font-bold">d.</p>
            <p>La maestra di matematica ha preparato esercizi per i 45 alunni. Ognuno dovrà svolgere 12 esercizi. Quanti esercizi dovrà correggere in tutto la maestra?</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls' %>
</div>
