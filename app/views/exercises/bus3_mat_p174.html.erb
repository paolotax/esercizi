<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white font-mono text-base lg:text-lg xl:text-xl"
     data-controller="exercise-checker page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p174/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 9 -->
  <div class="mb-10">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        9
      </div>
      <p class="text-gray-700">
        <strong>Calcola in colonna sul quaderno e verifica il risultato con la prova.</strong>
      </p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 text-sm">
      <div>
        <p class="text-cyan-600 font-bold mb-2">a.</p>
        <p>98 − 67 =</p>
        <p>43 − 31 =</p>
        <p>56 − 34 =</p>
      </div>
      <div>
        <p class="text-cyan-600 font-bold mb-2">b.</p>
        <p>52 − 34 =</p>
        <p>75 − 37 =</p>
        <p>40 − 29 =</p>
      </div>
      <div>
        <p class="text-cyan-600 font-bold mb-2">c.</p>
        <p>288 − 176 =</p>
        <p>345 − 217 =</p>
        <p>671 − 439 =</p>
      </div>
      <div>
        <p class="text-cyan-600 font-bold mb-2">d.</p>
        <p>954 − 844 =</p>
        <p>706 − 354 =</p>
        <p>630 − 521 =</p>
      </div>
      <div>
        <p class="text-cyan-600 font-bold mb-2">e.</p>
        <p>600 − 571 =</p>
        <p>750 − 437 =</p>
        <p>834 − 623 =</p>
      </div>
    </div>
  </div>

  <!-- Esercizio 10 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        10
      </div>
      <p class="text-gray-700">
        <strong>Calcola a mente e completa le tabelle.</strong>
      </p>
    </div>

    <div class="overflow-x-auto">
      <div class="grid grid-cols-5 gap-4 min-w-max">
        <!-- + 11 -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 mb-2">+ 11 →</p>
          <div class="space-y-2">
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">118</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="129"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">105</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="116"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">169</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="180"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
          </div>
        </div>

        <!-- - 9 -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 mb-2">− 9 →</p>
          <div class="space-y-2">
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">165</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="156"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">480</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="471"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">546</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="537"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
          </div>
        </div>

        <!-- - 21 -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 mb-2">− 21 →</p>
          <div class="space-y-2">
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">133</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="112"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">88</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="67"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">310</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="289"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
          </div>
        </div>

        <!-- + 9 -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 mb-2">+ 9 →</p>
          <div class="space-y-2">
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">206</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="215"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">90</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="99"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">625</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="634"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
          </div>
        </div>

        <!-- - 19 -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 mb-2">− 19 →</p>
          <div class="space-y-2">
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">328</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="309"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">263</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="244"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
            <div class="flex items-center gap-1">
              <span class="border border-gray-400 px-3 py-1 bg-white w-16 text-center">155</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="136"
                     class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 11 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        11
      </div>
      <p class="text-gray-700">
        <strong>Completa con i numeri mancanti.</strong>
      </p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <p><input type="text" data-fill-blanks-target="input" data-correct-answer="35"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> + 23 = 58</p>
      <p><input type="text" data-fill-blanks-target="input" data-correct-answer="69"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> + 94 = 163</p>
      <p><input type="text" data-fill-blanks-target="input" data-correct-answer="48"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> − 18 = 30</p>
      <p><input type="text" data-fill-blanks-target="input" data-correct-answer="122"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> − 94 = 28</p>
      <p>354 + <input type="text" data-fill-blanks-target="input" data-correct-answer="76"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> = 430</p>
      <p>225 + <input type="text" data-fill-blanks-target="input" data-correct-answer="55"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> = 280</p>
      <p>600 − <input type="text" data-fill-blanks-target="input" data-correct-answer="400"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> = 200</p>
      <p>108 − <input type="text" data-fill-blanks-target="input" data-correct-answer="38"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> = 70</p>
      <p>182 + <input type="text" data-fill-blanks-target="input" data-correct-answer="94"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> = 276</p>
      <p><input type="text" data-fill-blanks-target="input" data-correct-answer="117"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> + 39 = 156</p>
      <p>56 − <input type="text" data-fill-blanks-target="input" data-correct-answer="31"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> = 25</p>
      <p><input type="text" data-fill-blanks-target="input" data-correct-answer="46"
             class="w-16 px-2 py-1 border border-gray-400 text-center bg-white" inputmode="numeric"> − 14 = 32</p>
    </div>
  </div>

  <!-- Esercizio 12 -->
  <div class="mb-10">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        12
      </div>
      <p class="text-gray-700">
        <strong>Risolvi i problemi sul quaderno.</strong>
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="space-y-4">
        <div>
          <p class="text-cyan-600 font-bold">a.</p>
          <p>Federico ha perso 19 biglie. Ora ne ha 15. Quante biglie aveva prima?</p>
        </div>
        <div>
          <p class="text-cyan-600 font-bold">b.</p>
          <p>Sara ha 12 peluche, cioè 7 meno di Viola. Quanti peluche ha Viola?</p>
        </div>
      </div>
      <div>
        <p class="text-cyan-600 font-bold">c.</p>
        <p>Kimi ha 26 anni meno di sua mamma e 3 anni più di sua sorella Lin, che ne ha 5. Quanti anni ha Kimi? E la mamma di Kimi?</p>
      </div>
    </div>
  </div>

  <!-- Esercizio 13 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        13
      </div>
      <p class="text-gray-700">
        <strong>Calcola e completa la catena di operazioni.</strong>
      </p>
    </div>

    <div class="flex justify-center">
      <%= image_tag "bus3_mat/p174/p174_01.jpg", alt: "Catena di operazioni", class: "max-w-full rounded" %>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls' %>
</div>
