<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white dark:bg-gray-900 text-black dark:text-white transition-colors duration-300 font-mono"
     data-controller="exercise-checker fill-blanks auto-advance page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p074/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1 - Leggi e rispondi -->
  <div class="bg-[#C7EAFB] dark:bg-cyan-900/40 p-4 md:p-6 -ml-3 md:-ml-0 -mr-3 md:mr-0 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        Leggi: fai attenzione alle parole in colore. Poi rispondi.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <!-- Scenario 1: Biscotto -->
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md">
        <div class="mb-4">
          <p class="text-gray-700 dark:text-gray-200 leading-relaxed mb-2" data-text-toggle-target="content">
            Un <span class="text-cyan-600 dark:text-cyan-400 font-bold">terzo</span> del biscotto è <span class="text-cyan-600 dark:text-cyan-400 font-bold">alla fragola</span>.
          </p>
        </div>

        <div class="flex justify-center mb-4">
          <div class="dark:bg-white rounded-xl p-1">
            <%= image_tag "p074_01.png",
                alt: "Biscotto alla fragola",
                class: "w-32 h-auto" %>
          </div>
        </div>

        <div class="mb-4">
          <p class="font-semibold text-gray-800 dark:text-gray-100 mb-3" data-text-toggle-target="content">Il biscotto è tutto alla fragola?</p>
          <div class="flex gap-3 justify-center">
            <button type="button"
                    data-question="domanda1"
                    data-answer="si"
                    data-correct-answer="false"
                    data-action="click->exercise-checker#selectAnswer"
                    class="px-6 py-2 rounded-lg font-bold border-2 transition hover:scale-105 bg-transparent border-gray-300">
              <span data-text-toggle-target="content">Sì</span>
            </button>
            <button type="button"
                    data-question="domanda1"
                    data-answer="no"
                    data-correct-answer="true"
                    data-action="click->exercise-checker#selectAnswer"
                    class="px-6 py-2 rounded-lg font-bold border-2 transition hover:scale-105 bg-transparent border-gray-300">
              <span data-text-toggle-target="content">No</span>
            </button>
          </div>
        </div>

        <div class="bg-cyan-50 dark:bg-cyan-900/30 rounded-lg p-3 border-l-4 border-cyan-400 dark:border-cyan-500">
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
            <span class="text-cyan-600 dark:text-cyan-400 font-bold">Un terzo</span> è una parte del biscotto.
          </p>
        </div>
      </div>

      <!-- Scenario 2: Chitarra -->
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md">
        <div class="mb-4">
          <p class="text-gray-700 dark:text-gray-200 leading-relaxed mb-2" data-text-toggle-target="content">
            La lezione di chitarra dura <span class="text-cyan-600 dark:text-cyan-400 font-bold">tre quarti</span> d'ora.
          </p>
        </div>

        <div class="flex justify-center mb-4">
          <div class="dark:bg-white rounded-xl p-1">
            <%= image_tag "p074_02.png",
                alt: "Lezione di chitarra",
                class: "w-32 h-auto" %>
          </div>
        </div>

        <div class="mb-4">
          <p class="font-semibold text-gray-800 dark:text-gray-100 mb-3" data-text-toggle-target="content">La lezione dura più di un'ora?</p>
          <div class="flex gap-3 justify-center">
            <button type="button"
                    data-question="domanda2"
                    data-answer="si"
                    data-correct-answer="false"
                    data-action="click->exercise-checker#selectAnswer"
                    class="px-6 py-2 rounded-lg font-bold border-2 transition hover:scale-105 bg-transparent border-gray-300">
              <span data-text-toggle-target="content">Sì</span>
            </button>
            <button type="button"
                    data-question="domanda2"
                    data-answer="no"
                    data-correct-answer="true"
                    data-action="click->exercise-checker#selectAnswer"
                    class="px-6 py-2 rounded-lg font-bold border-2 transition hover:scale-105 bg-transparent border-gray-300">
              <span data-text-toggle-target="content">No</span>
            </button>
          </div>
        </div>

        <div class="bg-cyan-50 dark:bg-cyan-900/30 rounded-lg p-3 border-l-4 border-cyan-400 dark:border-cyan-500">
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
            <span class="text-cyan-600 dark:text-cyan-400 font-bold">Tre quarti</span> d'ora sono meno di un'ora, sono una parte.
          </p>
        </div>
      </div>

      <!-- Scenario 3: Biglietto -->
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md">
        <div class="mb-4">
          <p class="text-gray-700 dark:text-gray-200 leading-relaxed mb-2" data-text-toggle-target="content">
            Il biglietto dell'autobus costa <span class="text-cyan-600 dark:text-cyan-400 font-bold">1 euro</span> e <span class="text-cyan-600 dark:text-cyan-400 font-bold">venti centesimi</span>.
          </p>
        </div>

        <div class="flex justify-center mb-4">
          <div class="dark:bg-white rounded-xl p-1">
            <%= image_tag "p074_03.png",
                alt: "Biglietto autobus",
                class: "w-32 h-auto" %>
          </div>
        </div>

        <div class="mb-4">
          <p class="font-semibold text-gray-800 dark:text-gray-100 mb-3" data-text-toggle-target="content">Il biglietto costa meno di 2 euro?</p>
          <div class="flex gap-3 justify-center">
            <button type="button"
                    data-question="domanda3"
                    data-answer="si"
                    data-correct-answer="true"
                    data-action="click->exercise-checker#selectAnswer"
                    class="px-6 py-2 rounded-lg font-bold border-2 transition hover:scale-105 bg-transparent border-gray-300">
              <span data-text-toggle-target="content">Sì</span>
            </button>
            <button type="button"
                    data-question="domanda3"
                    data-answer="no"
                    data-correct-answer="false"
                    data-action="click->exercise-checker#selectAnswer"
                    class="px-6 py-2 rounded-lg font-bold border-2 transition hover:scale-105 bg-transparent border-gray-300">
              <span data-text-toggle-target="content">No</span>
            </button>
          </div>
        </div>

        <div class="bg-cyan-50 dark:bg-cyan-900/30 rounded-lg p-3 border-l-4 border-cyan-400 dark:border-cyan-500">
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
            <span class="text-cyan-600 dark:text-cyan-400 font-bold">Venti centesimi</span> sono meno di 1 euro, sono una parte.
          </p>
        </div>
      </div>
    </div>

    <!-- Box informativo -->
    <div class="p-4 bg-[#FFF9E6] dark:bg-yellow-900/30 border-l-4 border-yellow-400 dark:border-yellow-500">
      <p class="font-semibold text-gray-800 dark:text-gray-100" data-text-toggle-target="content">
        Un terzo, tre quarti, venti centesimi... indicano <span class="text-cyan-600 dark:text-cyan-400 font-bold">una parte</span> di qualcosa.
      </p>
    </div>
  </div>

  <!-- Esercizio 2 - Osserva i disegni e completa -->
  <div class="p-4 md:p-6 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
        Osserva i disegni e completa.
      </p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-5 gap-6 mb-6">
      <!-- Pizza intera -->
      <div class="flex flex-col items-center gap-3">
        <div class="dark:bg-white rounded-xl p-1">
          <%= image_tag "p074_04.png",
              alt: "Pizza intera",
              class: "w-32 h-32 object-contain" %>
        </div>
        <div class="text-center">
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">una pizza intera</p>
          <p class="text-gray-600 dark:text-gray-400" data-text-toggle-target="content">(un <span class="text-cyan-600 dark:text-cyan-400 font-bold">intero</span>)</p>
        </div>
      </div>

      <!-- Pizza divisa in 4 -->
      <div class="flex flex-col items-center gap-3">
        <div class="dark:bg-white rounded-xl p-1">
          <%= image_tag "p074_06.png",
              alt: "Pizza divisa in 4",
              class: "w-32 h-32 object-contain" %>
        </div>
        <div class="text-center">
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">una pizza divisa</p>
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
            in
            <input type="text"
                   data-correct-answer="4"
                   class="w-12 px-2 py-1 border-2 border-cyan-300 dark:border-cyan-500 rounded text-center font-bold mx-1 bg-white dark:bg-gray-700 dark:text-white"
                   placeholder="..." />
            <span class="text-cyan-600 dark:text-cyan-400 font-bold">parti uguali</span>
          </p>
        </div>
      </div>

      <!-- Un quarto -->
      <div class="flex flex-col items-center gap-3">
        <div class="dark:bg-white rounded-xl p-1">
          <%= image_tag "p074_05.png",
              alt: "Un quarto di pizza",
              class: "w-32 h-32 object-contain" %>
        </div>
        <div class="text-center">
          <p class="text-cyan-600 dark:text-cyan-400 font-bold" data-text-toggle-target="content">un quarto</p>
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">di pizza</p>
        </div>
      </div>

      <!-- Due quarti -->
      <div class="flex flex-col items-center gap-3">
        <div class="dark:bg-white rounded-xl p-1">
          <%= image_tag "p074_07.png",
              alt: "Due quarti di pizza",
              class: "w-32 h-32 object-contain" %>
        </div>
        <div class="text-center">
          <p class="text-cyan-600 dark:text-cyan-400 font-bold" data-text-toggle-target="content">due quarti</p>
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">di pizza</p>
        </div>
      </div>

      <!-- Tre quarti -->
      <div class="flex flex-col items-center gap-3">
        <div class="dark:bg-white rounded-xl p-1">
          <%= image_tag "p074_08.png",
              alt: "Tre quarti di pizza",
              class: "w-32 h-32 object-contain" %>
        </div>
        <div class="text-center">
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
            tre
            <input type="text"
                   data-correct-answer="quarti"
                   class="w-20 px-2 py-1 border-2 border-cyan-300 dark:border-cyan-500 rounded text-center font-bold mx-1 bg-white dark:bg-gray-700 dark:text-white"
                   placeholder="..." />
          </p>
          <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">di pizza</p>
        </div>
      </div>
    </div>

    <!-- Box informativo -->
    <div class="p-4 bg-[#FFF9E6] dark:bg-yellow-900/30 border-l-4 border-yellow-400 dark:border-yellow-500">
      <p class="font-semibold text-gray-800 dark:text-gray-100 mb-2" data-text-toggle-target="content">
        Le frazioni (un quarto, due quarti...) sono le parti che si formano quando <span class="text-cyan-600 dark:text-cyan-400 font-bold">dividi un intero</span> in <span class="text-cyan-600 dark:text-cyan-400 font-bold">parti uguali</span>.
      </p>
      <p class="text-gray-700 dark:text-gray-200" data-text-toggle-target="content">
        Un <span class="text-cyan-600 dark:text-cyan-400 font-bold">intero</span> è qualsiasi elemento a cui non manca nessuna parte.
      </p>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls', color: 'blue' %>
</div>
