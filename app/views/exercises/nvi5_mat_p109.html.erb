<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Sezione ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <!-- Esercizi 1 e 2 affiancati -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <!-- Esercizio 1 - IMPARARE TUTTI -->
        <div class="p-4 bg-white rounded-2xl border-3 border-blue-500">
          <p class="font-bold text-gray-700 mb-4">
            <%= imparare_tutti_badge(1) %>
            Colora di rosso gli angoli interni di questi poligoni. Segui l'esempio.
          </p>
          <div class="flex justify-center">
            <%= image_tag "nvi5_mat/p109/output-1715938802109_144_276_362_178.png", class: "max-w-full", alt: "Poligoni con angoli interni" %>
          </div>
        </div>

        <!-- Esercizio 2 -->
        <div>
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(2) %>
            Colora di rosso i poligoni convessi e di giallo i poligoni concavi.
          </p>
          <div class="flex justify-center">
            <%= image_tag "nvi5_mat/p109/output-1715938802109_572_273_413_193.png", class: "max-w-full", alt: "Poligoni convessi e concavi" %>
          </div>
        </div>
      </div>

      <!-- Esercizio 3 - immagine a sinistra, tabella a destra -->
      <div class="mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(3) %>
          Osserva questi triangoli e classificali completando la tabella con le lettere corrispondenti.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
          <div class="flex justify-center">
            <%= image_tag "nvi5_mat/p109/p109_01.jpg", class: "max-w-full", alt: "Triangoli A-G" %>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full border-collapse border border-gray-300">
              <thead>
                <tr>
                  <th class="border border-gray-300 p-2 bg-gray-100"></th>
                  <th class="border border-gray-300 p-2 bg-gray-100 font-bold">acutangolo</th>
                  <th class="border border-gray-300 p-2 bg-gray-100 font-bold">rettangolo</th>
                  <th class="border border-gray-300 p-2 bg-gray-100 font-bold">ottusangolo</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border border-gray-300 p-2 font-bold bg-white">scaleno</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="B" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="F" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="G" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                </tr>
                <tr>
                  <td class="border border-gray-300 p-2 font-bold bg-white">isoscele</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="D" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="E" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="A" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                </tr>
                <tr>
                  <td class="border border-gray-300 p-2 font-bold bg-white">equilatero</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">
                    <input type="text" data-correct-answer="C" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="border border-gray-300 p-2 text-center bg-white">–</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">–</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Esercizi 4 e 5 affiancati -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <!-- Esercizio 4 -->
        <div>
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(4) %>
            Osserva la tabella e rispondi.
          </p>
          <div class="overflow-x-auto mb-4">
            <table class="w-full border-collapse border border-gray-300">
              <thead>
                <tr>
                  <th class="border border-gray-300 p-2 bg-gray-100"></th>
                  <th class="border border-gray-300 p-2 bg-gray-100 font-bold">lato 1</th>
                  <th class="border border-gray-300 p-2 bg-gray-100 font-bold">lato 2</th>
                  <th class="border border-gray-300 p-2 bg-gray-100 font-bold">lato 3</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border border-gray-300 p-2 font-bold bg-white">triangolo A</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">25 cm</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">23 cm</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">37 cm</td>
                </tr>
                <tr>
                  <td class="border border-gray-300 p-2 font-bold bg-white">triangolo B</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">15 m</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">18 m</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">21 m</td>
                </tr>
                <tr>
                  <td class="border border-gray-300 p-2 font-bold bg-white">triangolo C</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">45 mm</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">85 mm</td>
                  <td class="border border-gray-300 p-2 text-center bg-white">24 mm</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="text-gray-700">
            Quale triangolo non si può costruire? Il triangolo
            <input type="text" data-correct-answer="C" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>

        <!-- Esercizio 5 -->
        <div>
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(5) %>
            Calcola l'ampiezza degli angoli mancanti di ciascuno dei seguenti triangoli.
          </p>
          <div class="space-y-3">
            <div class="text-gray-700">
              triangolo A: 70° • 55° •
              <input type="text" data-correct-answer="55" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">°
            </div>
            <div class="text-gray-700">
              triangolo B: 63° •
              <input type="text" data-correct-answer="19" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">° • 98°
            </div>
            <div class="text-gray-700">
              triangolo C:
              <input type="text" data-correct-answer="45" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">° • 90° • 45°
            </div>
            <div class="text-gray-700">
              triangolo D: 120° • 30° •
              <input type="text" data-correct-answer="30" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">°
            </div>
            <div class="text-gray-700">
              triangolo equilatero:
              <input type="text" data-correct-answer="60" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">° •
              <input type="text" data-correct-answer="60" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">° •
              <input type="text" data-correct-answer="60" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">°
            </div>
          </div>
        </div>
      </div>

      <!-- AllenaMente - sfondo bianco, bordo blu -->
      <div class="p-4 bg-white rounded-2xl border-3 border-blue-400">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <p class="font-bold text-gray-800 mb-2">
              <span class="bg-yellow-400 px-2 py-1 rounded">AllenaMente!</span>
            </p>
            <p class="text-gray-700">
              Segna con una <strong>X</strong> le figure che si trovano nell'insieme sbagliato e spiega il perché della tua scelta.
            </p>
          </div>
          <div class="md:col-span-2 flex justify-center">
            <%= image_tag "nvi5_mat/p109/p109_02.jpg", class: "max-w-full", alt: "Insiemi di quadrilateri" %>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
