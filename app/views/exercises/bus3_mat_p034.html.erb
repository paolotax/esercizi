<% content_for :titolo, "Calcoli Veloci - Pagina 34" %>

<div class="max-w-7xl mx-auto p-6 bg-gradient-to-b from-blue-50 to-white" data-controller="exercise-checker">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-center gap-4 mb-4">
      <div class="bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-6 py-3 rounded-lg font-bold text-xl shadow-lg">
        ADDIZIONE E SOTTRAZIONE
      </div>
      <h1 class="text-3xl font-bold text-blue-600">CALCOLI VELOCI</h1>
      <div class="ml-auto bg-red-600 text-white rounded-full w-14 h-14 flex items-center justify-center font-bold text-2xl shadow-lg">
        34
      </div>
    </div>
  </div>

  <!-- Esercizio 1 - Scomporre usando decine e centinaia -->
  <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-lg text-gray-700">
        Leggi le indicazioni di tutti delle casette. Poi calcola come indicato in freccia e in esempio.
      </p>
    </div>

    <!-- Immagine dell'esercizio con casette -->
    <div class="mb-6">
      <%= image_tag "bus3_mat_p034_esercizio1.png",
          alt: "Esercizio 1: Casette con decine e centinaia",
          class: "w-full h-auto" %>
    </div>

    <!-- Esercizi interattivi -->
    <div class="space-y-8 mb-8">
      <!-- Sezione decine -->
      <div class="bg-white p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>2</span><span class="text-red-600 font-bold">3</span><span>3</span> + 40 =
            </span>
            <input type="text" data-correct-answer="273" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>5</span><span class="text-red-600 font-bold">3</span><span>8</span> + 50 =
            </span>
            <input type="text" data-correct-answer="588" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>6</span><span class="text-red-600 font-bold">8</span><span>5</span> − 80 =
            </span>
            <input type="text" data-correct-answer="605" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>4</span><span class="text-red-600 font-bold">2</span><span>7</span> + 30 =
            </span>
            <input type="text" data-correct-answer="457" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>7</span><span class="text-red-600 font-bold">1</span><span>6</span> + 60 =
            </span>
            <input type="text" data-correct-answer="776" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>2</span><span class="text-red-600 font-bold">4</span><span>1</span> + 30 =
            </span>
            <input type="text" data-correct-answer="271" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>8</span><span class="text-red-600 font-bold">4</span><span>2</span> − 20 =
            </span>
            <input type="text" data-correct-answer="822" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span>3</span><span class="text-red-600 font-bold">6</span><span>7</span> − 50 =
            </span>
            <input type="text" data-correct-answer="317" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

        </div>

        <!-- Box Che cosa noti? -->
        <div class="mt-6 bg-white rounded-lg p-4">
          <p class="text-lg">
            <span class="inline-block w-3 h-3 bg-red-600 rounded-full mr-2 align-middle"></span>
            <span class="font-semibold text-gray-700">Che cosa noti?</span>
            <span class="text-gray-600 ml-2">Quando aggiungi o togli decine, se non c'è il cambio, le centinaia e le unità non cambiano.</span>
          </p>
        </div>
      </div>

      <!-- Immagine 1bis -->
      <div class="mb-6">
        <%= image_tag "bus3_mat_p034_esercizio1bis.png",
            alt: "Esercizio 1bis: Esempio intermedio",
            class: "w-full h-auto" %>
      </div>

      <!-- Sezione centinaia -->
      <div class="bg-white p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">5</span><span>4</span><span>6</span> − 200 =
            </span>
            <input type="text" data-correct-answer="346" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">3</span><span>2</span><span>7</span> − 100 =
            </span>
            <input type="text" data-correct-answer="227" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">4</span><span>1</span><span>8</span> − 300 =
            </span>
            <input type="text" data-correct-answer="118" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">2</span><span>7</span><span>3</span> + 400 =
            </span>
            <input type="text" data-correct-answer="673" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">4</span><span>5</span><span>8</span> + 300 =
            </span>
            <input type="text" data-correct-answer="758" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">6</span><span>2</span><span>1</span> − 500 =
            </span>
            <input type="text" data-correct-answer="121" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">7</span><span>3</span><span>4</span> + 200 =
            </span>
            <input type="text" data-correct-answer="934" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>

          <div class="flex items-center gap-2">
            <span class="text-lg font-semibold min-w-[120px]">
              <span class="text-green-600 font-bold">8</span><span>1</span><span>9</span> − 400 =
            </span>
            <input type="text" data-correct-answer="419" class="min-w-[80px] w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
          </div>
        </div>

        <!-- Box Che cosa noti? -->
        <div class="mt-6 bg-white rounded-lg p-4">
          <p class="text-lg">
            <span class="inline-block w-3 h-3 bg-red-600 rounded-full mr-2 align-middle"></span>
            <span class="font-semibold text-gray-700">Che cosa noti?</span>
            <span class="text-gray-600 ml-2">Quando aggiungi o togli centinaia, se non c'è il cambio, le decine e le unità non cambiano.</span>
          </p>
        </div>
      </div>
    </div>

    <!-- Sezione con casette rosse/rosa (nascoste) -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 hidden">
      <!-- Esempio con casette decine -->
      <div class="bg-gradient-to-br from-pink-50 to-red-50 rounded-xl p-6 border-4 border-red-300">
        <p class="font-semibold text-red-700 mb-4">aggiungi decine</p>
        <div class="flex flex-col gap-4">
          <div class="flex items-center justify-center gap-3">
            <div class="bg-yellow-100 rounded-lg px-4 py-3 border-2 border-yellow-400">
              <span class="text-2xl font-bold">40</span>
            </div>
            <div class="flex flex-col gap-2">
              <div class="bg-red-400 text-white rounded-lg px-4 py-2 font-bold text-center">3</div>
              <div class="bg-red-400 text-white rounded-lg px-4 py-2 font-bold text-center">2</div>
              <div class="bg-red-400 text-white rounded-lg px-4 py-2 font-bold text-center">8</div>
            </div>
          </div>

          <div class="space-y-3 mt-4">
            <div class="flex items-center gap-2">
              <span class="text-lg font-semibold">233 + 40 =</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" placeholder="233" />
              <span>+</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" placeholder="30" />
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" placeholder="+10" />
              <span>=</span>
              <input type="text" class="w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
            </div>

            <div class="flex items-center gap-2">
              <span class="text-lg font-semibold">538 + 50 =</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>+</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>=</span>
              <input type="text" class="w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
            </div>

            <div class="flex items-center gap-2">
              <span class="text-lg font-semibold">685 − 80 =</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>−</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>=</span>
              <input type="text" class="w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
            </div>
          </div>
        </div>

        <div class="mt-6 bg-white rounded-lg p-4">
          <p class="font-semibold text-gray-700 mb-2">• Che cosa noti?</p>
          <p class="text-gray-600 mb-3">Quando aggiungi o togli decine, se non c'è il cambio, cambiano...</p>
          <textarea class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg resize-none" rows="2" placeholder="Scrivi cosa noti..."></textarea>
        </div>
      </div>

      <!-- Esempio con casette centinaia -->
      <div class="bg-gradient-to-br from-pink-50 to-red-50 rounded-xl p-6 border-4 border-red-300">
        <p class="font-semibold text-red-700 mb-4">aggiungi centinaia</p>
        <div class="flex flex-col gap-4">
          <div class="flex items-center justify-center gap-3">
            <div class="bg-yellow-100 rounded-lg px-4 py-3 border-2 border-yellow-400">
              <span class="text-2xl font-bold">300</span>
            </div>
            <div class="flex flex-col gap-2">
              <div class="bg-red-400 text-white rounded-lg px-4 py-2 font-bold text-center">0</div>
              <div class="bg-red-400 text-white rounded-lg px-4 py-2 font-bold text-center">9</div>
              <div class="bg-red-400 text-white rounded-lg px-4 py-2 font-bold text-center">7</div>
            </div>
          </div>

          <div class="space-y-3 mt-4">
            <div class="flex items-center gap-2">
              <span class="text-lg font-semibold">397 − 500 =</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>−</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>=</span>
              <input type="text" class="w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
            </div>

            <div class="flex items-center gap-2">
              <span class="text-lg font-semibold">185 − 300 =</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>−</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>=</span>
              <input type="text" class="w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
            </div>

            <div class="flex items-center gap-2">
              <span class="text-lg font-semibold">546 − 200 =</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>−</span>
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <input type="text" class="w-16 px-2 py-2 border-2 border-blue-300 rounded text-center" />
              <span>=</span>
              <input type="text" class="w-20 px-2 py-2 border-2 border-green-300 rounded text-center font-bold" />
            </div>
          </div>
        </div>

        <div class="mt-6 bg-white rounded-lg p-4">
          <p class="font-semibold text-gray-700 mb-2">• Che cosa noti?</p>
          <p class="text-gray-600 mb-3">Quando aggiungi o togli centinaia, se non c'è il cambio, cambiano...</p>
          <textarea class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg resize-none" rows="2" placeholder="Scrivi cosa noti..."></textarea>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 2 - Per fare addizioni veloci -->
  <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-lg text-gray-700">
        Per fare addizioni veloci, puoi scomporre i numeri. Osserva e completa.
      </p>
    </div>

    <!-- Immagine dell'esercizio 2 -->
    <div class="mb-6">
      <%= image_tag "bus3_mat_p034_esercizio2.png",
          alt: "Esercizio 2: Scomposizione dei numeri",
          class: "w-full h-auto" %>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls', color: 'blue', current_page: 'bus3_mat_p034' %>
</div>
