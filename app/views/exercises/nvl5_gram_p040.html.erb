<div class="max-w-6xl mx-auto p-3 md:p-8 bg-white">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="bg-white p-4 md:p-6 pb-8">
    <p class="text-base md:text-lg text-gray-700">
      <span class="text-<%= @pagina.base_color %>-500">•</span> Osserva l'immagine della palestra e tocca i cartellini per ascoltare la parola corretta.
    </p>
  </div>

  <!-- Interactive Image -->
  <div class="relative rounded-lg overflow-hidden"
       data-controller="hotspot-editor"
       data-hotspot-editor-target="container">
    <%= image_tag "nvl5_gram/p040/p040_01.jpg",
        alt: "Palestra con cartellini: tabellone, canestro, muri, spalliera, pioli, quadro svedese, pallone, materassaccio, cerchio, tuta da ginnastica, materassone, materassino, clavette, corda e trave",
        class: "w-full h-full object-cover select-none pointer-events-none" %>

    <div class="absolute inset-0">
      <% hotspots = [
        { label: "Tabellone", top: "19.0041%", left: "7.58161%", width: "9.05015%", height: "3.5%" },
        { label: "Canestro", top: "32.882%", left: "11.7866%", width: "10%", height: "3.5%" },
        { label: "Muri", top: "43.2592%", left: "9.3117%", width: "6.5%", height: "3.5%" },
        { label: "Spalliera", top: "26.8802%", left: "37.9351%", width: "10%", height: "3.5%" },
        { label: "Pioli", top: "34.7568%", left: "43.41%", width: "7%", height: "3.5%" },
        { label: "Quadro svedese", top: "14.2527%", left: "80.115%", width: "15%", height: "3.5%" },
        { label: "Pallone", top: "60.0136%", left: "5.91839%", width: "9.5%", height: "3.5%" },
        { label: "Materassaccio", top: "56.6382%", left: "22.0334%", width: "15%", height: "3.5%" },
        { label: "Cerchio", top: "66.5154%", left: "53.8515%", width: "9%", height: "3.5%" },
        { label: "Tuta da ginnastica", top: "74.6423%", left: "37.1337%", width: "18%", height: "3.5%" },
        { label: "Materassòne", top: "54.0136%", left: "75.0521%", width: "14.5%", height: "3.5%" },
        { label: "Materassino", top: "65.8896%", left: "71.3953%", width: "14%", height: "3.5%" },
        { label: "Clavette", top: "73.3885%", left: "72.5084%", width: "9.5%", height: "3.5%" },
        { label: "Corda", top: "83.8944%", left: "5.21337%", width: "8%", height: "3.5%" },
        { label: "Trave", top: "85.0195%", left: "47.3451%", width: "7%", height: "3.5%" }
      ] %>

      <% hotspots.each do |hotspot| %>
        <button type="button"
                class="absolute rounded-lg bg-<%= @pagina.base_color %>-500/10 hover:bg-<%= @pagina.base_color %>-500/25 border-2 border-transparent hover:border-<%= @pagina.base_color %>-500 focus:border-<%= @pagina.base_color %>-600 focus:outline-none transition cursor-move"
                style="top: <%= hotspot[:top] %>; left: <%= hotspot[:left] %>; width: <%= hotspot[:width] %>; height: <%= hotspot[:height] %>;"
                aria-label="Leggi: <%= hotspot[:label] %>"
                data-controller="image-speech"
                data-hotspot-editor-target="hotspot"
                data-image-speech-word-value="<%= hotspot[:label] %>"
                data-image-speech-lang-value="it-IT"
                data-action="mousedown->hotspot-editor#startDrag click->image-speech#speak">
          <span class="sr-only"><%= hotspot[:label] %></span>
        </button>
      <% end %>
    </div>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls' %>
</div>
