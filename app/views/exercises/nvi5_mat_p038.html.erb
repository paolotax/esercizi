<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Problema introduttivo -->
    <div class="p-4 md:p-6">
      <div class="p-4 bg-cyan-100 mb-4">
        <p class="text-gray-800 mb-3">
          L'insegnante ha proposto un quesito alla classe: – Si ottiene un risultato maggiore dividendo 12 per 0,5 o moltiplicandolo per 0,5?
        </p>
        <p class="text-gray-800 mb-3">
          Lorenzo risponde: – Moltiplicandolo per 0,5. Nella moltiplicazione il prodotto è sempre maggiore dei fattori! Ho mille esempi che lo dimostrano.
        </p>
        <p class="text-gray-800">
          Giorgia risponde: – Dividendolo per 0,5. Dividere per 0,5 fa raddoppiare il risultato! Anche io ho esempi che lo dimostrano.
        </p>
      </div>
    </div>

    <!-- Chi ha ragione? -->
    <div class="p-4 md:p-6 bg-white border-3 border-<%= @pagina.base_color %>-400 rounded-2xl">
      <h2 class="font-bold mb-4">
        <span class="text-pink-600">•</span> Chi ha ragione? Riflettiamo insieme.
      </h2>

      <ul class="text-gray-800 space-y-4 list-disc ml-4 mb-6">
        <li>
          Lorenzo pensa alle moltiplicazioni fra numeri naturali e alle moltiplicazioni con i numeri con la virgola in cui i fattori sono entrambi maggiori di 1. Per esempio:
          <div class="grid grid-cols-3 gap-4 mt-2 ml-4">
            <p class="font-bold text-<%= @pagina.base_color %>-600">12 × 4 = 48</p>
            <p class="font-bold text-<%= @pagina.base_color %>-600">15 × 15 = 225</p>
            <p class="font-bold text-<%= @pagina.base_color %>-600">1,25 × 1,2 = 1,5</p>
          </div>
        </li>
        <li>
          Giorgia pensa: «Se devo dividere 12 litri d'olio in bottiglie da 0,5 litri, mi servono 24 bottiglie».
        </li>
      </ul>

      <h3 class="font-bold text-<%= @pagina.base_color %>-600 mb-4">Verifichiamo quale dei due bambini ha ragione.</h3>
      <div class="flex justify-center mb-4">
        <%= image_tag "nvi5_mat/p038/p038_01.jpg", class: "mx-auto" %>
      </div>

      <div class="p-4 bg-pink-100 rounded-lg">
        <p class="text-gray-800">
          Come puoi vedere, non sempre in una moltiplicazione il prodotto è maggiore dei fattori e non sempre in una divisione il quoziente è minore del dividendo e del divisore.
        </p>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <!-- Esercizio 1 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(1) %>
          Calcola in colonna sul quaderno e riporta qui i risultati.
        </p>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>8 : 0,4 =</span>
              <input type="text" data-correct-answer="20" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
            <div class="flex items-center gap-2">
              <span>8 × 0,4 =</span>
              <input type="text" data-correct-answer="3,2" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>16 : 0,25 =</span>
              <input type="text" data-correct-answer="64" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
            <div class="flex items-center gap-2">
              <span>16 × 0,25 =</span>
              <input type="text" data-correct-answer="4" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>30 : 0,15 =</span>
              <input type="text" data-correct-answer="200" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
            <div class="flex items-center gap-2">
              <span>30 × 0,15 =</span>
              <input type="text" data-correct-answer="4,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(2) %>
          Completa con «: 0,5» o «× 0,5».
        </p>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>4</span>
              <input type="text" data-correct-answer=": 0,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 8</span>
            </div>
            <div class="flex items-center gap-2">
              <span>4</span>
              <input type="text" data-correct-answer="× 0,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 2</span>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>16,4</span>
              <input type="text" data-correct-answer=": 0,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 32,8</span>
            </div>
            <div class="flex items-center gap-2">
              <span>16,4</span>
              <input type="text" data-correct-answer="× 0,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 8,2</span>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>6,2</span>
              <input type="text" data-correct-answer="× 0,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 3,1</span>
            </div>
            <div class="flex items-center gap-2">
              <span>6,2</span>
              <input type="text" data-correct-answer=": 0,5" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 12,4</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 3 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(3) %>
          Completa con «: 0,25» o «× 0,25».
        </p>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>12</span>
              <input type="text" data-correct-answer=": 0,25" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 48</span>
            </div>
            <div class="flex items-center gap-2">
              <span>12</span>
              <input type="text" data-correct-answer="× 0,25" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 3</span>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>20</span>
              <input type="text" data-correct-answer="× 0,25" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 5</span>
            </div>
            <div class="flex items-center gap-2">
              <span>20</span>
              <input type="text" data-correct-answer=": 0,25" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 80</span>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>30</span>
              <input type="text" data-correct-answer=": 0,25" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 120</span>
            </div>
            <div class="flex items-center gap-2">
              <span>30</span>
              <input type="text" data-correct-answer="× 0,25" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>= 7,5</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 4 -->
      <div class="p-4">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(4) %>
          Leggi, completa e rispondi.
        </p>
        <div class="space-y-3">
          <div class="flex items-center gap-2 flex-wrap">
            <span>30 : 0,25 =</span>
            <input type="text" data-correct-answer="120" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap">
            <span>30 × 4 =</span>
            <input type="text" data-correct-answer="120" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap mt-4">
            <span>Una delle due operazioni dà un risultato maggiore?</span>
            <label class="inline-flex items-center gap-1 cursor-pointer">
              <input type="radio" name="es4_risposta" value="si" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="inline-flex items-center gap-1 cursor-pointer">
              <input type="radio" name="es4_risposta" value="no" data-correct-answer="no" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Quaderno -->
    <div class="p-4 text-right">
      <span class="text-gray-600">Quaderno esercizi →</span>
      <span class="text-<%= @pagina.base_color %>-600 font-bold">pp. 189, 191</span>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
