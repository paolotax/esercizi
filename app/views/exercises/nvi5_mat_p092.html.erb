<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Esercizio 1 - Completa la tabella -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <div class="p-4 bg-white rounded-2xl -mx-4 md:-mx-6 -mt-4 md:-mt-6 mb-6 border-3 border-blue-500">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          Completa la tabella con gli elementi dati.
        </p>

        <p class="text-gray-700 mb-4">
          Mg • <span class="whitespace-nowrap">1 000</span> • hℓ • 0,01 • hm • cm • mm • ℓ • dg • dℓ • dam • cℓ • 100 • mℓ • dag • 0,001 • g
        </p>

        <div class="overflow-x-auto">
          <table class="w-full border-collapse border border-gray-300">
            <thead>
              <tr>
                <th class="border border-gray-300 px-1 py-1 bg-white" rowspan="2"></th>
                <th class="border border-gray-300 px-1 py-1 bg-green-100 text-green-700 font-bold" colspan="3">multipli</th>
                <th class="border border-gray-300 px-1 py-1 bg-red-500 text-white font-bold">unità<br>fondamentale</th>
                <th class="border border-gray-300 px-1 py-1 bg-custom-blue-light-light text-cyan-700 font-bold" colspan="7">sottomultipli</th>
              </tr>
              <tr>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>× 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>× 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>× 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
                <th class="border border-gray-300 px-1 py-1 text-center bg-white">
                  <div class="flex flex-col items-center">
                    <span>: 10</span>
                    <span>↔</span>
                  </div>
                </th>
              </tr>
              <tr>
                <th class="border border-gray-300 px-1 py-1 bg-white"></th>
                <th class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="1000" class="w-full border-none text-center font-bold bg-transparent">
                </th>
                <th class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="100" class="w-full border-none text-center font-bold bg-transparent">
                </th>
                <th class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">10</th>
                <th class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">1</th>
                <th class="border border-gray-300 px-1 py-1 bg-white text-center">0,1</th>
                <th class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="0,01" class="w-full border-none text-center font-bold bg-transparent">
                </th>
                <th class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="0,001" class="w-full border-none text-center font-bold bg-transparent">
                </th>
                <th class="border border-gray-300 px-1 py-1 bg-white text-center">0,0001</th>
                <th class="border border-gray-300 px-1 py-1 bg-white text-center">0,00001</th>
                <th class="border border-gray-300 px-1 py-1 bg-white text-center">0,000001</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="border border-gray-300 px-1 py-1 bg-white">lunghezza</td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">km</td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="hm" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="dam" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">m</td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">dm</td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="cm" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="mm" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-1 py-1 bg-white">capacità</td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="hℓ" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">daℓ</td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="ℓ" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="dℓ" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="cℓ" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="mℓ" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
                <td class="border border-gray-300 px-1 py-1 bg-white"></td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-1 py-1 bg-white">massa</td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="Mg" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center">100 kg</td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center">10 kg</td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center text-red-600 font-bold">kg</td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center">hg</td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="dag" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="g" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white">
                  <input type="text" data-correct-answer="dg" class="w-full border-none text-center font-bold bg-transparent">
                </td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center">cg</td>
                <td class="border border-gray-300 px-1 py-1 bg-white text-center">mg</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:divide-x-2 md:divide-orange-300">
        <!-- Colonna sinistra -->
        <div class="md:pr-4 space-y-6">
          <!-- Esercizio 2 - Ordine decrescente -->
          <div>
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(2) %>
              Riscrivi le misure in ordine decrescente.
            </p>

            <div class="space-y-4">
              <div>
                <p class="text-gray-700 mb-2">87 m • 8,8 dam • 0,86 hm • <span class="whitespace-nowrap">8 300 cm</span></p>
                <input type="text" data-correct-answer="0,86 hm • 87 m • 8,8 dam • 8 300 cm" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>

              <div>
                <p class="text-gray-700 mb-2">65 ℓ • 16,05 daℓ • 1,64 hℓ • <span class="whitespace-nowrap">1 630 dℓ</span></p>
                <input type="text" data-correct-answer="1,64 hℓ • 1 630 dℓ • 16,05 daℓ • 65 ℓ" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>

              <div>
                <p class="text-gray-700 mb-2">0,9 Mg • <span class="whitespace-nowrap">9 100 kg</span> • 940 hg • <span class="whitespace-nowrap">903 000 dag</span></p>
                <input type="text" data-correct-answer="9 100 kg • 903 000 dag • 0,9 Mg • 940 hg" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>
            </div>
          </div>

          <!-- Esercizio 3 - Tabella ricavo/spesa -->
          <div>
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(3) %>
              Completa la tabella.
            </p>

            <div class="overflow-x-auto">
              <table class="w-full border-collapse border border-gray-300">
                <thead>
                  <tr>
                    <th class="border border-gray-300 px-2 py-2 bg-pink-200 text-pink-700 font-bold">ricavo</th>
                    <th class="border border-gray-300 px-2 py-2 bg-cyan-200 text-cyan-700 font-bold">spesa</th>
                    <th class="border border-gray-300 px-2 py-2 bg-green-200 text-green-700 font-bold">guadagno</th>
                    <th class="border border-gray-300 px-2 py-2 bg-red-200 text-red-700 font-bold">perdita</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="border border-gray-300 px-2 py-2 bg-white">
                      <div class="flex items-center gap-1">
                        <span>€</span>
                        <input type="text" data-correct-answer="16,85" class="w-full border-none text-center font-bold bg-transparent">
                      </div>
                    </td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">€ 12,50</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">€ 4,35</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">–</td>
                  </tr>
                  <tr>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">€ 18</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white">
                      <div class="flex items-center gap-1">
                        <span>€</span>
                        <input type="text" data-correct-answer="9,80" class="w-full border-none text-center font-bold bg-transparent">
                      </div>
                    </td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">€ 8,20</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">–</td>
                  </tr>
                  <tr>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">€ 120</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">€ 135,50</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white text-center">–</td>
                    <td class="border border-gray-300 px-2 py-2 bg-white">
                      <div class="flex items-center gap-1">
                        <span>€</span>
                        <input type="text" data-correct-answer="15,50" class="w-full border-none text-center font-bold bg-transparent">
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Esercizio 4 - Operazioni sul quaderno -->
          <div>
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(4) %>
              Esegui le operazioni sul quaderno.
            </p>

            <div class="space-y-2">
              <div class="flex items-center gap-2 flex-wrap">
                <span class="shrink-0">1 h 45 min 24 s + 2 h 45 min 23 s =</span>
                <input type="text" data-correct-answer="4 h 30 min 47 s" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="shrink-0">6 h 48 min 27 s – 4 h 34 min 56 s =</span>
                <input type="text" data-correct-answer="2 h 13 min 31 s" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>
            </div>
          </div>
        </div>

        <!-- Colonna destra -->
        <div class="md:pl-4 space-y-4">
          <h3 class="font-bold text-<%= @pagina.base_color %>-700">RISOLVI I PROBLEMI</h3>

          <!-- Problema 5 -->
          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(5) %>
              Annalisa fa un viaggio di 570 km in 3 tappe. Nella prima percorre <span class="whitespace-nowrap">1 230 hm</span>, nella seconda <span class="whitespace-nowrap">14 700 dam</span>. Quanti chilometri mancano all'arrivo?
            </p>
            <div class="flex items-center gap-2">
              <input type="text" data-correct-answer="100" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="shrink-0">km</span>
            </div>
          </div>

          <!-- Problema 6 -->
          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(6) %>
              Una damigiana di vino ha la capacità di 1,5 hℓ, ma è piena solo a metà. Quante bottiglie della capacità di 1,5 ℓ si possono riempire?
            </p>
            <div class="flex items-center gap-2">
              <input type="text" data-correct-answer="50" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="shrink-0">bottiglie</span>
            </div>
          </div>

          <!-- Problema 7 -->
          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(7) %>
              Un'azienda deve spedire 250 cassette di mele. Ogni cassetta vuota pesa 650 g e viene riempita con 12 kg di mele. Qual è il peso totale delle cassette piene? Per il trasporto l'azienda spende € 1,50 al chilogrammo. Qual è la spesa totale?
            </p>
            <div class="space-y-2">
              <div class="flex items-center gap-2">
                <span class="shrink-0">Peso totale:</span>
                <input type="text" data-correct-answer="3162,5" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">kg</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="shrink-0">Spesa totale: €</span>
                <input type="text" data-correct-answer="4743,75" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              </div>
            </div>
          </div>

          <!-- Problema 8 -->
          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(8) %>
              Alla fine della stagione invernale, in un negozio di abbigliamento restano invenduti 7 maglioni. Il negoziante decide di venderli a € 94,50 l'uno. Se la spesa unitaria era stata di € 102,50, a quanto ammonta la perdita complessiva?
            </p>
            <div class="flex items-center gap-2">
              <span class="shrink-0">€</span>
              <input type="text" data-correct-answer="56" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>

          <!-- Problema 9 -->
          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(9) %>
              Luca acquista 23 divise da calcio a € 31,40 ciascuna e le rivende a € 60 l'una. Se riuscirà a vendere tutte le divise, quanto guadagnerà in tutto?
            </p>
            <div class="flex items-center gap-2">
              <span class="shrink-0">€</span>
              <input type="text" data-correct-answer="657,80" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
