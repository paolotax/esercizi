<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-cyan-50 via-white to-blue-50 rounded-3xl shadow-xl" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Exercise 1: Fill articles -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-yellow-200 shadow-2xl p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-yellow-700 mb-3">
      <div class="flex items-center gap-2 flex-wrap">
        <div class="flex items-center gap-2">
          <span class="bg-yellow-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0">1</span>
          <span class="bg-yellow-400 text-blue-800 px-2 py-1 rounded text-sm md:text-base font-bold whitespace-nowrap">IMPARARE TUTTI</span>
        </div>
        <span>Scrivi in maniera opportuna gli <span class="text-yellow-600 font-bold underline">articoli determinativi, indeterminativi o partitivi</span>. Poi cerchiali con tre colori diversi.</span>
      </div>
    </h2>

    <div class="space-y-3 text-base md:text-lg">
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <p class="text-gray-700">
          • Ai giardini ho incontrato
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-20 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="delle" placeholder="....">
          bambine molto simpatiche.
        </p>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <p class="text-gray-700">
          •
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="Il" placeholder="....">
          Monte Bianco è
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="il" placeholder="....">
          monte più alto d'Italia.
        </p>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <p class="text-gray-700">
          •
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="Il" placeholder="....">
          mio sport preferito è
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="la" placeholder="....">
          pallavolo.
        </p>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <p class="text-gray-700">
          • In quella pasticceria fanno
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-20 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="dei" placeholder="....">
          biscotti al cioccolato molto buoni.
        </p>
      </div>
      <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl px-4 py-3">
        <p class="text-gray-700">
          •
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="La" placeholder="....">
          casa era avvolta in
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="uno" placeholder="....">
          strano silenzio: si udiva solo
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="lo" placeholder="....">
          sgocciolare di
          <input type="text" class="border-b-2 border-yellow-500 bg-transparent px-2 py-1 w-16 focus:outline-none focus:border-yellow-700 mx-1" data-fill-blanks-target="input" data-answer="un" placeholder="....">
          rubinetto.
        </p>
      </div>
    </div>
  </div>

  <!-- Exercise 2: Abstract nouns -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-purple-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="false">
    <h2 class="text-lg md:text-xl font-bold text-purple-700 mb-3 flex items-center gap-2">
      <span class="bg-purple-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0">2</span>
      <span>Sottolinea i <span class="text-purple-600 font-bold underline">nomi astratti<span class="inline-block w-6 h-6 bg-purple-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="purple" data-action="click->word-highlighter#selectColor"></span></span>.</span>
    </h2>

    <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-4 text-base md:text-lg text-gray-700 leading-relaxed">
      <p>
        <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">libertà</span> • caminetto • fratello • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">fratellanza</span> • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">chiarore</span> • cielo • aria • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">silenzio</span> • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">simpatia</span> • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">amicizia</span> • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">astronomia</span> • pianeta • stella • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">grammatica</span> • <span data-word-highlighter-target="word" data-correct="true" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">perdono</span>
      </p>
    </div>
  </div>

  <!-- Exercise 3: Compound nouns -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-green-200 shadow-2xl p-4 md:p-6" data-controller="card-selector">
    <h2 class="text-lg md:text-xl font-bold text-green-700 mb-4 flex items-start gap-2">
      <span class="bg-green-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0">3</span>
      <span>Colora i cartellini con i <span class="text-green-600 font-bold underline">nomi composti</span>.</span>
    </h2>

    <% nouns = [
      { word: "caporale", compound: true },
      { word: "capostazione", compound: true },
      { word: "appuntamento", compound: false },
      { word: "doposcuola", compound: true },
      { word: "temperamatite", compound: true },
      { word: "autorimessa", compound: true },
      { word: "autorità", compound: false },
      { word: "bisbiglio", compound: false },
      { word: "pianoforte", compound: true },
      { word: "stuzzicadenti", compound: true },
      { word: "tritaghiaccio", compound: true },
      { word: "spremiagrumi", compound: true }
    ] %>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 text-base md:text-lg">
      <% nouns.each do |noun| %>
        <div class="border-2 border-gray-300 rounded-xl px-4 py-3 text-center cursor-pointer transition-all hover:shadow-md"
             data-card-selector-target="card"
             data-correct="<%= noun[:compound] %>"
             data-action="click->card-selector#toggle">
          <span class="font-semibold text-gray-700"><%= noun[:word] %></span>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 4: Write sentences -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-orange-200 shadow-2xl p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-orange-700 mb-4 flex items-start gap-2">
      <span class="bg-orange-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0">4</span>
      <span>Per ciascuno di questi nomi scrivi una frase.</span>
    </h2>

    <div class="bg-orange-50 border-2 border-orange-200 rounded-xl px-4 py-3 mb-4 text-center">
      <span class="font-bold text-orange-700">bracci • braccia • muri • mura</span>
    </div>

    <div class="space-y-3 text-base md:text-lg">
      <% 4.times do |i| %>
        <div class="bg-orange-50 border-2 border-orange-200 rounded-xl px-4 py-3">
          <input type="text" class="w-full bg-transparent border-b border-orange-300 focus:outline-none focus:border-orange-500 py-2" placeholder="Scrivi qui la tua frase...">
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 5: Primitive, derived, altered -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-blue-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="true">
    <h2 class="text-lg md:text-xl font-bold text-blue-700 mb-3 flex items-start gap-2">
      <span class="bg-blue-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center flex-shrink-0">5</span>
      <span>Sottolinea in rosso i <span class="text-red-600 font-bold underline">nomi primitivi<span class="inline-block w-6 h-6 bg-red-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="red" data-action="click->word-highlighter#selectColor"></span></span>, in blu i <span class="text-blue-600 font-bold underline">nomi derivati<span class="inline-block w-6 h-6 bg-blue-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="blue" data-action="click->word-highlighter#selectColor"></span></span>, in verde i <span class="text-green-600 font-bold underline">nomi alterati<span class="inline-block w-6 h-6 bg-green-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="green" data-action="click->word-highlighter#selectColor"></span></span>.</span>
    </h2>

    <div class="bg-blue-50 border-2 border-blue-200 rounded-xl px-4 py-4 text-base md:text-lg text-gray-700 leading-relaxed">
      <p>
        <span data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">bocca</span> •
        <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">boccale</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">monticello</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">muretto</span> •
        <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">muratore</span> •
        <span data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">porta</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">coltellino</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">boccuccia</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">piumetta</span> •
        <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">pastificio</span> •
        <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">barista</span> •
        <span data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">camicia</span> •
        <span data-word-highlighter-target="word" data-correct-color="blue" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">pizzaiolo</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">scatolone</span> •
        <span data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#toggleHighlight" class="px-1 rounded">paperella</span>
      </p>
    </div>
  </div>

  <div class="text-right text-sm text-gray-500 mb-6">
    Grammatica pp. <%= link_to "44", pagina_path("nvl5_gram_p044"), class: "text-red-600 hover:text-red-800 underline font-bold" %>, <%= link_to "45", pagina_path("nvl5_gram_p045"), class: "text-red-600 hover:text-red-800 underline font-bold" %>, <%= link_to "46", pagina_path("nvl5_gram_p046"), class: "text-red-600 hover:text-red-800 underline font-bold" %>, <%= link_to "47", pagina_path("nvl5_gram_p047"), class: "text-red-600 hover:text-red-800 underline font-bold" %>, <%= link_to "48", pagina_path("nvl5_gram_p048"), class: "text-red-600 hover:text-red-800 underline font-bold" %>, <%= link_to "49", pagina_path("nvl5_gram_p049"), class: "text-red-600 hover:text-red-800 underline font-bold" %>
  </div>

  <!-- Exercise Controls -->
  <div class="mt-6">
    <%= render 'shared/exercise_controls', color: 'cyan', current_page: 'nvl5_gram_p153' %>
  </div>
</div>
