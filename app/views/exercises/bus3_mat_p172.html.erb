<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white dark:bg-gray-900 text-black dark:text-white font-mono transition-colors duration-300"
     data-controller="exercise-checker page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p172/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 7 -->
  <div class="mb-12" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        7
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Scrivi i numeri in <span class="text-red-500">ordine decrescente</span>.</strong>
      </p>
    </div>

    <p class="mb-4 text-center">2009 • 1994 • 2310 • 2554 • 2545 • 2090</p>

    <div class="flex flex-wrap items-center justify-center gap-2">
      <input type="text" data-fill-blanks-target="input" data-correct-answer="2554"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white" inputmode="numeric">
      <span class="text-red-500">&gt;</span>
      <input type="text" data-fill-blanks-target="input" data-correct-answer="2545"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white" inputmode="numeric">
      <span class="text-red-500">&gt;</span>
      <input type="text" data-fill-blanks-target="input" data-correct-answer="2310"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white" inputmode="numeric">
      <span class="text-red-500">&gt;</span>
      <input type="text" data-fill-blanks-target="input" data-correct-answer="2090"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white" inputmode="numeric">
      <span class="text-red-500">&gt;</span>
      <input type="text" data-fill-blanks-target="input" data-correct-answer="2009"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white" inputmode="numeric">
      <span class="text-red-500">&gt;</span>
      <input type="text" data-fill-blanks-target="input" data-correct-answer="1994"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white" inputmode="numeric">
    </div>
  </div>

  <!-- Esercizio 8 -->
  <div class="mb-12" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        8
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Scrivi sulla linea i numeri mancanti.</strong>
      </p>
    </div>

    <!-- Prima linea dei numeri -->
    <div class="mb-6">
      <div class="flex items-center justify-center gap-1 flex-wrap border-b-4 border-yellow-400 dark:border-yellow-600 pb-2">
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">1096</span>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="1097"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">1098</span>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="1099"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <input type="text" data-fill-blanks-target="input" data-correct-answer="1100"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <input type="text" data-fill-blanks-target="input" data-correct-answer="1101"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">1102</span>
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">1103</span>
      </div>
    </div>

    <!-- Seconda linea dei numeri -->
    <div class="mb-6">
      <div class="flex items-center justify-center gap-1 flex-wrap border-b-4 border-yellow-400 dark:border-yellow-600 pb-2">
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">2060</span>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="2070"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">2080</span>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="2090"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <input type="text" data-fill-blanks-target="input" data-correct-answer="2100"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <input type="text" data-fill-blanks-target="input" data-correct-answer="2110"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <input type="text" data-fill-blanks-target="input" data-correct-answer="2120"
               class="w-16 px-2 py-1 border border-gray-300 text-center bg-white" inputmode="numeric">
        <span class="px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">2130</span>
      </div>
    </div>
  </div>

  <!-- Esercizio 9 -->
  <div class="mb-12" data-controller="card-selector">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        9
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Indica con una <span class="text-red-500">X</span> la risposta giusta.</strong>
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Domanda 1 -->
      <div>
        <p class="mb-2">• Quale numero completa la sequenza?</p>
        <p class="mb-3">1325 • 1327 • 1329 • <strong>?</strong> • 1333 • 1335</p>
        <div class="flex gap-4">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9a" data-card-selector-target="card" class="w-5 h-5">
            <span>1330</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9a" data-card-selector-target="card" data-correct="true" class="w-5 h-5">
            <span>1331</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9a" data-card-selector-target="card" class="w-5 h-5">
            <span>1332</span>
          </label>
        </div>
      </div>

      <!-- Domanda 2 -->
      <div>
        <p class="mb-2">• A quale numero corrisponde la scomposizione 8 h, 3 da, 2 k, 7 u?</p>
        <div class="flex gap-4 mt-3">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9b" data-card-selector-target="card" class="w-5 h-5">
            <span>8327</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9b" data-card-selector-target="card" data-correct="true" class="w-5 h-5">
            <span>2837</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9b" data-card-selector-target="card" class="w-5 h-5">
            <span>8732</span>
          </label>
        </div>
      </div>

      <!-- Domanda 3 -->
      <div>
        <p class="mb-2">• Qual è il precedente di 2 k?</p>
        <div class="flex gap-4 mt-3">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9c" data-card-selector-target="card" data-correct="true" class="w-5 h-5">
            <span>1999</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9c" data-card-selector-target="card" class="w-5 h-5">
            <span>2000</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9c" data-card-selector-target="card" class="w-5 h-5">
            <span>2001</span>
          </label>
        </div>
      </div>

      <!-- Domanda 4 -->
      <div>
        <p class="mb-2">• Se aggiungi 1 h a 2984 ottieni...</p>
        <div class="flex gap-4 mt-3">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9d" data-card-selector-target="card" class="w-5 h-5">
            <span>2994</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9d" data-card-selector-target="card" class="w-5 h-5">
            <span>3984</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="q9d" data-card-selector-target="card" data-correct="true" class="w-5 h-5">
            <span>3084</span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 10 -->
  <div class="mb-12" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        10
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Osserva l'albero genealogico della famiglia di Simona e rispondi.</strong>
      </p>
    </div>

    <!-- Albero genealogico con immagine -->
    <div class="flex justify-center mb-6">
      <div class="dark:bg-white dark:rounded-xl dark:p-2 inline-block">
        <%= image_tag "bus3_mat/p172/p172_02.jpg", alt: "Albero genealogico", class: "max-w-full rounded" %>
      </div>
    </div>

    <!-- Domande -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <p class="mb-2">• È nato prima Gino o Ahmed?</p>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="Gino"
               class="w-32 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white">
      </div>
      <div>
        <p class="mb-2">• È più giovane Gianni o Aida?</p>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="Aida"
               class="w-32 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white">
      </div>
      <div>
        <p class="mb-2">• Chi è nato 20 anni prima di Gianni?</p>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="Aisha"
               class="w-32 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white">
      </div>
      <div>
        <p class="mb-2">• Chi è maggiore tra Franca e Aisha?</p>
        <input type="text" data-fill-blanks-target="input" data-correct-answer="Franca"
               class="w-32 px-2 py-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center bg-white dark:bg-gray-700 dark:text-white">
      </div>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls' %>
</div>
