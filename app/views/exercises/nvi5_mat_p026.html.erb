<div class="max-w-7xl mx-auto p-4 md:p-8" 
     data-controller="exercise-checker">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div  class="space-y-8">

    <!-- Esercizio 1 -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">1</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Scrivi i numeri sul quaderno come somma di valori, somma di addendi e somma di prodotti.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <p class="text-gray-700 flex flex-wrap gap-2">
          <span class="whitespace-nowrap">2 834 657</span>
          <span>•</span>
          <span class="whitespace-nowrap">82 372 630</span>
          <span>•</span>
          <span class="whitespace-nowrap">3 645 732 198</span>
          <span>•</span>
          <span class="whitespace-nowrap">483 200 574 120</span>
          <span>•</span>
          <span class="whitespace-nowrap">24 734 700 371</span>
        </p>
        <p class="text-purple-600 font-medium italic">→ vedi p. seguente</p>
      </div>
    </div>

    <!-- Esercizio 2: Collegamenti con linee interattive -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg" data-controller="flower-matcher">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">2</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Collega ogni potenza al suo risultato. <span class="text-purple-600">Attenzione: per due potenze c'è lo stesso risultato.</span></p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 relative">
        <!-- SVG Canvas for drawing lines -->
        <svg class="absolute top-0 left-0 w-full h-full pointer-events-none z-30"
              data-flower-matcher-target="canvas">
        </svg>

        <div class="flex justify-around mb-16 relative z-20">
          <div class="bg-white border-2 border-purple-400 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="pow-2-5"
                data-pair="p32">2<sup>5</sup></div>
          <div class="bg-white border-2 border-purple-400 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="pow-5-1"
                data-pair="p5">5<sup>1</sup></div>
          <div class="bg-white border-2 border-purple-400 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="pow-9-0"
                data-pair="p1">9<sup>0</sup></div>
          <div class="bg-white border-2 border-purple-400 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="pow-3-3"
                data-pair="p27">3<sup>3</sup></div>
          <div class="bg-white border-2 border-purple-400 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="pow-4-2"
                data-pair="p16">4<sup>2</sup></div>
          <div class="bg-white border-2 border-purple-400 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="pow-1-8"
                data-pair="p1">1<sup>8</sup></div>
        </div>

        <div class="flex justify-around relative z-20">
          <div class="bg-purple-100 border-2 border-purple-500 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="res-5"
                data-pair="p5">5</div>
          <div class="bg-purple-100 border-2 border-purple-500 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="res-27"
                data-pair="p27">27</div>
          <div class="bg-purple-100 border-2 border-purple-500 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="res-32"
                data-pair="p32">32</div>
          <div class="bg-purple-100 border-2 border-purple-500 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="res-1"
                data-pair="p1">1</div>
          <div class="bg-purple-100 border-2 border-purple-500 rounded-lg px-4 py-3 lg:px-6 lg:py-4 text-lg sm:text-2xl text-center font-bold cursor-pointer hover:bg-purple-50 transition"
                data-action="click->flower-matcher#selectFlower"
                data-flower-matcher-target="flower"
                data-flower-id="res-16"
                data-pair="p16">16</div>
        </div>

        <!-- Control buttons -->
        <div class="mt-8 flex gap-3 items-center">
          <button class="bg-purple-500 hover:bg-purple-600 text-white font-bold rounded-full shadow-lg transition transform hover:scale-105 flex items-center justify-center w-12 h-12"
                  data-action="click->flower-matcher#reset"
                  title="Ricomincia collegamenti">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
          </button>
          <button class="bg-green-500 hover:bg-green-600 text-white font-bold rounded-full shadow-lg transition transform hover:scale-105 flex items-center justify-center w-12 h-12"
                  data-action="click->flower-matcher#showSolutions"
                  title="Mostra soluzioni">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Vero o Falso -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">3</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Vero o falso? Indica con una X.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <% [
          {text: "10² = 20", v: false, f: true},
          {text: "10⁴ = 10 000", v: true, f: false},
          {text: "4³ = 64", v: true, f: false},
          {text: "10⁶ = 100 000", v: false, f: true},
          {text: "5² = 50", v: false, f: true},
          {text: "10⁰ = 0", v: false, f: true},
          {text: "2⁷ = 128", v: true, f: false},
          {text: "10³ = 1 000", v: true, f: false},
          {text: "10¹ = 10", v: true, f: false},
          {text: "3⁵ = 243", v: true, f: false}
        ].each do |item| %>
          <div class="flex items-center justify-between bg-white p-2 md:p-3 rounded">
            <span class="text-gray-700"><%= item[:text] %></span>
            <div class="flex gap-6">
              <label class="flex items-center gap-2">
                <span class="text-sm font-medium">V</span>
                <input type="checkbox" <%= 'checked' if item[:v] %> class="w-5 h-5" disabled>
              </label>
              <label class="flex items-center gap-2">
                <span class="text-sm font-medium">F</span>
                <input type="checkbox" <%= 'checked' if item[:f] %> class="w-5 h-5" disabled>
              </label>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 4 -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">4</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Scrivi i numeri sul quaderno come polinomio numerico.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <p class="text-gray-700 flex flex-wrap gap-2">
          <span class="whitespace-nowrap">63 253</span>
          <span>•</span>
          <span class="whitespace-nowrap">832 904 368</span>
          <span>•</span>
          <span class="whitespace-nowrap">3 729 456</span>
          <span>•</span>
          <span class="whitespace-nowrap">27 349 900 473</span>
          <span>•</span>
          <span class="whitespace-nowrap">273 480</span>
          <span>•</span>
          <span class="whitespace-nowrap">17 238 004</span>
        </p>
        <p class="text-purple-600 font-medium italic">→ vedi p. seguente</p>
      </div>
    </div>

    <!-- Esercizio 5: Decimali in cifre -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">5</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Scrivi in cifre i seguenti numeri decimali.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <% [
          {text: "trenta e otto decimi", answer: "30,8"},
          {text: "quarantaquattro centesimi", answer: "0,44"},
          {text: "due e ventisei centesimi", answer: "2,26"},
          {text: "centosessantadue millesimi", answer: "0,162"},
          {text: "uno e cinque centesimi", answer: "1,05"},
          {text: "nove millesimi", answer: "0,009"}
        ].each do |item| %>
          <div class="flex items-center gap-4 bg-white p-2 md:p-3 rounded">
            <span class="flex-1 text-gray-700"><%= item[:text] %></span>
            <span class="text-xl">→</span>
            <span class="font-bold text-purple-600"><%= item[:answer] %></span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 6: Scomposizione -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">6</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Scomponi i numeri decimali come nell'esempio.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <% [
          {num: "13,26", dec: "1 da, 3 u, 2 d, 6 c"},
          {num: "40,157", dec: "4 da, 1 d, 5 c, 7 m"},
          {num: "0,945", dec: "9 d, 4 c, 5 m"},
          {num: "81,03", dec: "8 da, 1 u, 3 c"},
          {num: "27,108", dec: "2 da, 7 u, 1 d, 8 m"},
          {num: "106,92", dec: "1 h, 6 u, 9 d, 2 c"}
        ].each do |item| %>
          <div class="bg-white p-3 rounded">
            <span class="font-bold text-gray-800"><%= item[:num] %></span> =
            <span class="text-purple-600"><%= item[:dec] %></span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 7: Composizione -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">7</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Componi i seguenti numeri decimali.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <% [
          {dec: "7 da, 8 u, 1 d, 4 c", num: "78,14"},
          {dec: "6 u, 5 c, 4 m", num: "6,054"},
          {dec: "2 da, 9 d, 3 m", num: "20,903"},
          {dec: "3 da, 8 d, 9 c, 2 m", num: "30,892"},
          {dec: "3 h, 5 u, 1 c, 6 m", num: "305,016"},
          {dec: "4 u, 7 c, 1 m", num: "4,071"}
        ].each do |item| %>
          <div class="bg-white p-3 rounded">
            <span class="text-gray-700"><%= item[:dec] %></span> =
            <span class="font-bold text-purple-600"><%= item[:num] %></span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 8: Ordine decrescente -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">8</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Scrivi i numeri in ordine decrescente.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <div class="bg-white p-2 md:p-3 rounded">
          <p class="text-gray-600 mb-2 flex flex-wrap gap-2">
            <span class="whitespace-nowrap">6,5</span>
            <span>•</span>
            <span class="whitespace-nowrap">6,005</span>
            <span>•</span>
            <span class="whitespace-nowrap">0,65</span>
            <span>•</span>
            <span class="whitespace-nowrap">6,05</span>
            <span>•</span>
            <span class="whitespace-nowrap">5,6</span>
          </p>
          <p class="font-bold text-purple-600 flex flex-wrap gap-2">
            <span class="whitespace-nowrap">6,5</span>
            <span>•</span>
            <span class="whitespace-nowrap">6,05</span>
            <span>•</span>
            <span class="whitespace-nowrap">6,005</span>
            <span>•</span>
            <span class="whitespace-nowrap">5,6</span>
            <span>•</span>
            <span class="whitespace-nowrap">0,65</span>
          </p>
        </div>
      </div>
    </div>

    <!-- Esercizio 9: Ordine crescente -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">9</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Scrivi i numeri in ordine crescente.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <div class="bg-white p-2 md:p-3 rounded">
          <p class="text-gray-600 mb-2 flex flex-wrap gap-2">
            <span class="whitespace-nowrap">1,07</span>
            <span>•</span>
            <span class="whitespace-nowrap">10,7</span>
            <span>•</span>
            <span class="whitespace-nowrap">0,17</span>
            <span>•</span>
            <span class="whitespace-nowrap">1,7</span>
            <span>•</span>
            <span class="whitespace-nowrap">107</span>
          </p>
          <p class="font-bold text-purple-600 flex flex-wrap gap-2">
            <span class="whitespace-nowrap">0,17</span>
            <span>•</span>
            <span class="whitespace-nowrap">1,07</span>
            <span>•</span>
            <span class="whitespace-nowrap">1,7</span>
            <span>•</span>
            <span class="whitespace-nowrap">10,7</span>
            <span>•</span>
            <span class="whitespace-nowrap">107</span>
          </p>
        </div>
      </div>
    </div>

    <!-- Esercizio 10: Confronto -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">10</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Confronta i numeri e inserisci i segni < oppure >.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
        <% [
          {a: "– 7", sign: "<", b: "+ 5"},
          {a: "+ 9", sign: ">", b: "– 10"},
          {a: "– 6", sign: "<", b: "– 4"},
          {a: "– 9", sign: "<", b: "+ 3"},
          {a: "– 5", sign: ">", b: "– 8"},
          {a: "– 17", sign: "<", b: "0"}
        ].each do |item| %>
          <div class="bg-white p-3 rounded flex items-center justify-center gap-4">
            <span class="font-bold text-gray-800"><%= item[:a] %></span>
            <span class="text-2xl text-purple-600 font-bold"><%= item[:sign] %></span>
            <span class="font-bold text-gray-800"><%= item[:b] %></span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 11: Operazioni -->
    <div class="exercise-block bg-purple-50 p-4 md:p-6 rounded-lg">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">11</div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">Esegui le operazioni.</p>
        </div>
      </div>
      <div class="ml-0 md:ml-11 grid grid-cols-2 gap-x-3 gap-y-2 sm:gap-x-4">
        <% [
          {op: "– 7 – 15", result: "–22"},
          {op: "– 6 + 20", result: "+14"},
          {op: "+ 10 – 22", result: "–12"},
          {op: "+ 5 – 7", result: "–2"}
        ].each do |item| %>
          <div class="bg-white p-3 rounded">
            <span class="text-gray-800"><%= item[:op] %></span> =
            <span class="font-bold text-purple-600"><%= item[:result] %></span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- MODELLO INVALSI -->
    <div class="mt-8 border-t-4 border-purple-300 pt-8">
      <div class="flex items-center justify-between mb-6">
        <div class="inline-block bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 md:px-6 py-2 rounded-full text-xs md:text-sm font-bold">
          MODELLO INVALSI
        </div>
        <h2 class="text-xl md:text-2xl font-bold text-purple-600">I NUMERI</h2>
      </div>
      <p class="text-gray-700 mb-6 font-medium">Segna con una X le risposte corrette.</p>

      <div class="space-y-6">
        <!-- Domanda 1 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">1</div>
            <p class="font-medium text-gray-800">Qual è la cifra delle decine di milioni nel numero 657 324 791?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "La cifra 6.", correct: false},
              {text: "La cifra 7.", correct: false},
              {text: "La cifra 5.", correct: true},
              {text: "La cifra 3.", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 2 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">2</div>
            <p class="font-medium text-gray-800">Quale numero è formato da: 102 uM + 65 uk + 12 da + 15 u?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "102 065 153", correct: false},
              {text: "102 651 225", correct: false},
              {text: "12 065 135", correct: false},
              {text: "102 065 135", correct: true}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 3 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">3</div>
            <p class="font-medium text-gray-800">Quale numero è formato da 60 unità e 74 millesimi?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "60,74", correct: false},
              {text: "600,74", correct: false},
              {text: "60,074", correct: true},
              {text: "6,074", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 4 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">4</div>
            <p class="font-medium text-gray-800">Quale delle seguenti uguaglianze non è corretta?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "50 decimi = 5 unità", correct: false},
              {text: "6 millesimi = 0,6 centesimi", correct: true},
              {text: "20 decine = 20 000 millesimi", correct: false},
              {text: "7 000 millesimi = 7 unità", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 5 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">5</div>
            <div>
              <p class="font-medium text-gray-800 mb-2">L'insegnante ha chiesto di arrotondare ai decimi il numero 12,28. Luca, Martina, Giorgio e Manuela danno quattro risposte diverse.</p>
              <ul class="text-gray-600 text-sm space-y-1 mb-3">
                <li>• Luca ha scritto: 12,5.</li>
                <li>• Martina ha scritto: 12,2.</li>
                <li>• Giorgio ha scritto: 12,3.</li>
                <li>• Manuela ha scritto: 12.</li>
              </ul>
              <p class="font-medium text-gray-800">Chi ha dato la risposta corretta?</p>
            </div>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "Luca", correct: false},
              {text: "Martina", correct: false},
              {text: "Giorgio", correct: true},
              {text: "Manuela", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 6 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">6</div>
            <p class="font-medium text-gray-800">Nell'armadio di José ci sono 2 cassetti, ognuno dei quali ha 2 scomparti. Ogni scomparto contiene 2 paia di calzini. Quanti calzini in tutto?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "6", correct: false},
              {text: "8", correct: false},
              {text: "12", correct: false},
              {text: "16", correct: true}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 7 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">7</div>
            <p class="font-medium text-gray-800">Quale delle seguenti potenze corrisponde a un milione?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "10⁵", correct: false},
              {text: "10⁶", correct: true},
              {text: "10⁷", correct: false},
              {text: "10⁸", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 8 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">8</div>
            <p class="font-medium text-gray-800">In quale caso il numero 130 000 000 è stato scritto in modo corretto?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "13 × 10⁵", correct: false},
              {text: "13 × 10⁷", correct: true},
              {text: "13 × 10⁶", correct: false},
              {text: "13 × 10⁸", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 9 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">9</div>
            <p class="font-medium text-gray-800">Quale tra i seguenti numeri rende vera l'uguaglianza: 5 × 100 000 < 5 × ...?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "10³", correct: false},
              {text: "10⁴", correct: false},
              {text: "10⁵", correct: false},
              {text: "10⁶", correct: true}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 10 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">10</div>
            <p class="font-medium text-gray-800">Qual è il risultato di + 17 – 22?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "+ 5", correct: false},
              {text: "– 5", correct: true},
              {text: "+ 39", correct: false},
              {text: "– 39", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 11 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">11</div>
            <p class="font-medium text-gray-800">Se a + 5 togli 11 e poi aggiungi 2, quale numero ottieni?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "– 4", correct: true},
              {text: "+ 5", correct: false},
              {text: "– 6", correct: false},
              {text: "– 9", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Domanda 12 -->
        <div class="bg-purple-50 p-4 md:p-6 rounded-lg">
          <div class="flex items-start gap-3 mb-4">
            <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">12</div>
            <p class="font-medium text-gray-800">In quale gruppo i numeri sono in ordine crescente?</p>
          </div>
          <div class="ml-0 md:ml-11 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6">
            <% [
              {text: "– 6 • – 4 • 0 • + 4 • + 3", correct: false},
              {text: "– 6 • – 7 • 0 • + 3 • + 8", correct: false},
              {text: "– 6 • – 4 • 0 • + 3 • + 8", correct: true},
              {text: "– 4 • – 6 • 0 • + 3 • + 8", correct: false}
            ].each do |opt| %>
              <label class="flex items-center gap-3 bg-white p-2 md:p-3 rounded <%= opt[:correct] ? 'border-2 border-green-500' : '' %>">
                <input type="checkbox" <%= 'checked' if opt[:correct] %> class="w-5 h-5" disabled>
                <span class="text-gray-700"><%= opt[:text] %></span>
              </label>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <%= render "shared/exercise_controls", color: 'purple' %>

  </div>

</div>

