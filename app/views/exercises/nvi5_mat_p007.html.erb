<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Box Ricorda! -->
    <div class="p-4 md:p-6 bg-custom-blue rounded-2xl">
      <h3 class="font-bold text-pink-600 italic mb-4">Ricorda!</h3>
      <p class="text-gray-700 leading-relaxed mb-4">
        Il <span class="font-bold">poligono</span> è la parte di piano delimitata da una linea spezzata semplice chiusa.
      </p>
      <!-- Diagramma del poligono -->
      <div class="flex justify-center mb-4">
        <%= image_tag "nvi5_mat/p007/p007_01.jpg", alt: "Poligono con etichette", class: "max-w-md w-full" %>
      </div>
      <p class="text-gray-700 leading-relaxed">
        I <span class="font-bold">poligoni regolari</span> hanno tutti i lati e tutti gli angoli congruenti fra loro.
      </p>
    </div>

    <!-- Esercizio 1: Colora i poligoni -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-6">
        <%= numero_esercizio_badge(1) %>
        Colora di rosso i poligoni, poi indica il nome di ciascuno. Scrivi nel quadratino la lettera giusta.
      </p>

      <!-- Legenda nomi -->
      <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-6 text-gray-700">
        <div><span class="font-bold text-custom-sky">A</span> triangolo isoscele</div>
        <div><span class="font-bold text-custom-sky">B</span> rombo</div>
        <div><span class="font-bold text-custom-sky">C</span> quadrato</div>
        <div><span class="font-bold text-custom-sky">D</span> trapezio rettangolo</div>
        <div><span class="font-bold text-custom-sky">E</span> ottagono</div>
        <div><span class="font-bold text-custom-sky">F</span> parallelogramma</div>
      </div>

      <!-- Griglia figure -->
      <div class="flex justify-center">
        <%= image_tag "nvi5_mat/p007/output-1715938802007_128_643_829_260.png", alt: "Figure geometriche esercizio 1", class: "w-full max-w-4xl" %>
      </div>

      <!-- Input per le risposte -->
      <div class="grid grid-cols-5 md:grid-cols-10 gap-2 mt-4 max-w-4xl mx-auto">
        <% [
          { answer: "B", label: "1" },
          { answer: "F", label: "2" },
          { answer: "", label: "3", disabled: true },
          { answer: "", label: "4", disabled: true },
          { answer: "A", label: "5" },
          { answer: "E", label: "6" },
          { answer: "D", label: "7" },
          { answer: "", label: "8", disabled: true },
          { answer: "C", label: "9" },
          { answer: "", label: "10", disabled: true }
        ].each do |item| %>
          <div class="flex flex-col items-center">
            <span class="text-xs text-gray-500 mb-1"><%= item[:label] %></span>
            <% if item[:disabled] %>
              <div class="w-10 h-10 bg-gray-100 rounded"></div>
            <% else %>
              <input type="text"
                     class="w-10 h-10 text-center font-bold border-b-2 border-dotted border-gray-400 bg-transparent focus:border-pink-500 focus:outline-none uppercase"
                     data-correct-answer="<%= item[:answer] %>"
                     maxlength="1">
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 2: Poligoni regolari -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-6">
        <%= numero_esercizio_badge(2) %>
        Quali dei poligoni dell'esercizio precedente sono poligoni regolari? Scrivi le lettere.
      </p>
      <div class="flex items-center gap-4 p-4">
        <input type="text"
               class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent focus:border-pink-500 focus:outline-none uppercase"
               data-correct-answer="C"
               maxlength="1">
        <span class="text-gray-700">e</span>
        <input type="text"
               class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent focus:border-pink-500 focus:outline-none uppercase"
               data-correct-answer="E"
               maxlength="1">
      </div>
      <p class="text-gray-600 italic mt-2">
        <span class="font-bold">Suggerimento:</span> I poligoni regolari hanno tutti i lati e tutti gli angoli uguali tra loro.
      </p>
    </div>

    <!-- Esercizio 3: Formule perimetro -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-6">
        <%= numero_esercizio_badge(3) %>
        Associa a ogni poligono la formula per calcolare il suo perimetro.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Trapezio -->
        <div class="flex flex-col items-center gap-4">
          <%= image_tag "nvi5_mat/p007/output-1715938802007_227_1031_99_98.png", alt: "Trapezio", class: "h-24" %>
          <select class="w-full px-4 py-3 text-center border-b-2 border-dotted border-gray-400 bg-white focus:border-pink-500 focus:outline-none font-bold cursor-pointer"
                  data-correct-answer="P = B + b + ℓ₁ + ℓ₂">
            <option value="">Scegli la formula...</option>
            <option value="P = ℓ × 4">P = ℓ × 4</option>
            <option value="P = B + b + ℓ₁ + ℓ₂">P = B + b + ℓ₁ + ℓ₂</option>
            <option value="P = ℓ₁ + ℓ₂ + ℓ₃">P = ℓ₁ + ℓ₂ + ℓ₃</option>
          </select>
        </div>

        <!-- Triangolo -->
        <div class="flex flex-col items-center gap-4">
          <%= image_tag "nvi5_mat/p007/output-1715938802007_453_1031_177_99.png", alt: "Triangolo", class: "h-24" %>
          <select class="w-full px-4 py-3 text-center border-b-2 border-dotted border-gray-400 bg-white focus:border-pink-500 focus:outline-none font-bold cursor-pointer"
                  data-correct-answer="P = ℓ₁ + ℓ₂ + ℓ₃">
            <option value="">Scegli la formula...</option>
            <option value="P = ℓ × 4">P = ℓ × 4</option>
            <option value="P = B + b + ℓ₁ + ℓ₂">P = B + b + ℓ₁ + ℓ₂</option>
            <option value="P = ℓ₁ + ℓ₂ + ℓ₃">P = ℓ₁ + ℓ₂ + ℓ₃</option>
          </select>
        </div>

        <!-- Quadrato -->
        <div class="flex flex-col items-center gap-4">
          <%= image_tag "nvi5_mat/p007/output-1715938802007_744_1032_186_99.png", alt: "Quadrato", class: "h-24" %>
          <select class="w-full px-4 py-3 text-center border-b-2 border-dotted border-gray-400 bg-white focus:border-pink-500 focus:outline-none font-bold cursor-pointer"
                  data-correct-answer="P = ℓ × 4">
            <option value="">Scegli la formula...</option>
            <option value="P = ℓ × 4">P = ℓ × 4</option>
            <option value="P = B + b + ℓ₁ + ℓ₂">P = B + b + ℓ₁ + ℓ₂</option>
            <option value="P = ℓ₁ + ℓ₂ + ℓ₃">P = ℓ₁ + ℓ₂ + ℓ₃</option>
          </select>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
