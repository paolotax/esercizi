<div class="max-w-6xl mx-auto p-3 md:p-8 bg-white rounded-lg shadow-lg" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Info Box -->
  <div class="mb-6 md:mb-8 bg-yellow-100 rounded-lg p-4 md:p-6 text-base md:text-lg leading-relaxed">
    <p class="mb-3">
      L’<span class="font-bold text-cyan-700">elisione</span> è l’eliminazione della vocale finale di una parola davanti a un’altra che inizia per vocale.
      Al posto della vocale eliminata si scrive <span class="font-bold">l'apostrofo</span>:
      un<span class="font-bold text-cyan-700">a</span> idea <span class="font-bold text-cyan-700">→</span> un<span class="font-bold text-cyan-700">'</span>idea</span>.
    </p>
    <p class="text-gray-800 mb-3">Si usa l'apostrofo:</p>
    <ul class="space-y-2">
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">con gli articoli <strong class="text-cyan-700">lo, la, una  →  l'</strong>albero, <strong class="text-cyan-700">l'</strong>entrata, <strong class="text-cyan-700">un'</strong>amica;</span>
      </li>
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">con alcuni aggettivi 
        <strong class="text-cyan-700"> →  quest'</strong> anno, 
        <strong class="text-cyan-700">quell'</strong> idea, 
        <strong class="text-cyan-700">bell'</strong> amico;
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">con <strong class="text-cyan-700">mi, ti, ci, si, vi</strong> + verbo essere 
        <strong class="text-cyan-700"> →  m'</strong>è sembrato, <strong class="text-cyan-700">c'</strong>era;</span>
      </li>
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">con <strong class="text-cyan-700">come, dove</strong> + verbo essere
        <strong class="text-cyan-700"> →  com'</strong>è, <strong class="text-cyan-700">dov'</strong>era;</span></li>
      <li class="flex items-start">
        <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
        <span class="text-gray-800">in espressioni 
        <strong class="text-cyan-700"> →  senz'</strong>altro, <strong class="text-cyan-700">mezz'</strong>ora, <strong class="text-cyan-700">d'</strong>accordo, <strong class="text-cyan-700">tutt'</strong>altro…</span></li>
    </ul>
  </div>

  <!-- Exercise 1 -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 border-4 border-yellow-400" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-4 flex flex-wrap items-center gap-2">
      <span class="bg-blue-700 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">1</span>
      <span class="bg-yellow-400 text-blue-800 px-2 py-1 rounded text-sm md:text-base font-bold">IMPARARE TUTTI</span>
      <span>Scrivi inserendo l’<span class="font-bold text-cyan-700">elisione</span>, come nell’esempio.</span>
    </h2>

    <div class="space-y-4 text-base md:text-lg leading-relaxed">
      <div class="p-3 rounded-lg flex flex-wrap items-center gap-2">
        <span class="font-bold text-cyan-700">Esempio:</span>
        <span>mezza ora → <span class="font-bold text-cyan-700">mezz'ora</span></span>
      </div>

      <% exercise_1_pairs = [
        { prompt: 'di accordo', answer: 'd\'accordo' },
        { prompt: 'lo altro ieri', answer: 'l\'altro ieri' },
        { prompt: 'allo interno', answer: 'all\'interno' },
        { prompt: 'bravo uomo', answer: 'brav\'uomo' },
        { prompt: 'cento anni', answer: 'cent\'anni' }
      ] %>

      <% exercise_1_pairs.each do |item| %>
        <div class="px-3 py-1 rounded-lg flex flex-wrap items-center gap-2">
          <span class="text-gray-700"><span class="text-cyan-700 font-bold text-2xl mr-2">•</span> <%= item[:prompt] %> →</span>
          <input type="text"
                 class="border-b-2 border-pink-500 bg-white w-40 md:w-56 text-center focus:outline-none focus:border-pink-700"
                 data-fill-blanks-target="input"
                 data-answer="<%= item[:answer] %>"
                 data-correct-answer="<%= item[:answer] %>"
                 maxlength="20">
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 2 -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">2</span>
      Sottolinea l’espressione cui può essere applicata l’<span class="font-bold text-cyan-700">elisione</span> e scrivila con l’<span class="font-bold">apostrofo</span>.
    </h2>

    <% exercise_2_sentences = [
      [
        'Perché il film non ',
        { answer: 't\'è' },
        ' piaciuto? È stato divertente.'
      ],
      [
        'Raya ',
        { answer: 's\'era' },
        ' presentata puntualmente agli allenamenti, come ogni sera.'
      ],
      [
        'Allora ci vediamo alle cinque. Verrò ',
        { answer: 'senz\'altro' },
        '!'
      ],
      [
        'Meglio parlarne a quattro occhi, ',
        { answer: 'd\'accordo' },
        '. È un argomento importante.'
      ],
      [
        '',
        { answer: 'quell\'albero' },
        ' è il primo a fiorire, ',
        { answer: 'all\'inizio' },
        ' di marzo.'
      ]
    ] %>

    <div class="sm:ml-7 space-y-0 text-base md:text-lg leading-relaxed">
      <% exercise_2_sentences.each do |sentence| %>
        <div class="px-3 py-1 rounded-lg flex flex-wrap items-center gap-1">
          <span class="text-cyan-700 font-bold text-2xl mr-2">•</span>
          <% sentence.each do |part| %>
            <% if part.is_a?(Hash) %>
              <input type="text"
                     class="border-b-2 border-pink-500 bg-white w-40 md:w-56 text-center focus:outline-none focus:border-pink-700"
                     data-fill-blanks-target="input"
                     data-answer="<%= part[:answer] %>"
                     data-correct-answer="<%= part[:answer] %>"
                     maxlength="20">
            <% else %>
              <span><%= part %></span>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 3 -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">3</span>
      Scrivi sul quaderno una frase con ciascuna espressione.
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <% [
        { label: 'mezz’ora', color: 'from-pink-100 to-pink-50' },
        { label: 'd’ora in poi', color: 'from-blue-100 to-blue-50' },
        { label: 'd’altronde', color: 'from-purple-100 to-purple-50' }
      ].each do |item| %>
        <div class="bg-gradient-to-br <%= item[:color] %> border-2 border-pink-200 rounded-lg p-4">
          <div class="text-sm font-bold text-pink-700 uppercase tracking-wide mb-2"><%= item[:label] %></div>
          <textarea class="w-full border-2 border-pink-300 rounded-lg p-3 focus:outline-none focus:border-pink-600 text-base md:text-lg"
                    rows="3"
                    placeholder="Scrivi qui la tua frase..."></textarea>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls', color: 'pink', current_page: 'nvl5_gram_p016' %>
</div>

