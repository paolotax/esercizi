<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Esercizio 1: IMPARARE TUTTI - Moltiplicazioni -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          Esegui le moltiplicazioni sul quaderno e riporta qui i risultati.
        </p>

        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">160 × 7 =</span>
            <input type="text" data-correct-answer="1120" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">323 × 8 =</span>
            <input type="text" data-correct-answer="2584" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">415 × 6 =</span>
            <input type="text" data-correct-answer="2490" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">580 × 4 =</span>
            <input type="text" data-correct-answer="2320" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">3 123</span> × 4 =</span>
            <input type="text" data-correct-answer="12492" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>
      </div>

      <!-- Esercizio 2: IMPARARE TUTTI - Divisioni -->
      <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(2) %>
          Esegui le divisioni sul quaderno e riporta qui i risultati.
        </p>

        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">208 : 2 =</span>
            <input type="text" data-correct-answer="104" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">128 : 4 =</span>
            <input type="text" data-correct-answer="32" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">117 : 9 =</span>
            <input type="text" data-correct-answer="13" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">91 : 7 =</span>
            <input type="text" data-correct-answer="13" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">475 : 5 =</span>
            <input type="text" data-correct-answer="95" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Moltiplicazioni veloci -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Calcola velocemente le seguenti moltiplicazioni come nell'esempio.
      </p>

      <div class="space-y-3">
        <!-- Esempio -->
        <div class="p-2 bg-custom-blue-light-light rounded">
          <p class="text-gray-700"><span class="font-bold">32 × 21 =</span> <span class="text-cyan-600 font-bold">(32 × 20) + 32 = 640 + 32 = 672</span></p>
        </div>

        <div class="flex items-center gap-2">
          <span class="text-gray-700 shrink-0">26 × 41 =</span>
          <input type="text" data-correct-answer="(26 × 40) + 26 = 1040 + 26 = 1066" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 shrink-0">65 × 11 =</span>
          <input type="text" data-correct-answer="(65 × 10) + 65 = 650 + 65 = 715" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 shrink-0">44 × 31 =</span>
          <input type="text" data-correct-answer="(44 × 30) + 44 = 1320 + 44 = 1364" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 shrink-0">37 × 61 =</span>
          <input type="text" data-correct-answer="(37 × 60) + 37 = 2220 + 37 = 2257" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <div class="flex items-center gap-2">
          <span class="text-gray-700 shrink-0">78 × 51 =</span>
          <input type="text" data-correct-answer="(78 × 50) + 78 = 3900 + 78 = 3978" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
      </div>
    </div>

    <!-- Esercizio 4: Operazioni in riga -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(4) %>
        Esegui in riga le operazioni.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Colonna a: Moltiplicazioni -->
        <div class="space-y-3">
          <p class="font-bold text-cyan-600">a.</p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">160 × 30 =</span>
            <input type="text" data-correct-answer="4800" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">472 × 60 =</span>
            <input type="text" data-correct-answer="28320" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">225 × 20 =</span>
            <input type="text" data-correct-answer="4500" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">490 × 50 =</span>
            <input type="text" data-correct-answer="24500" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">251 × 80 =</span>
            <input type="text" data-correct-answer="20080" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>

        <!-- Colonna b: Divisioni -->
        <div class="space-y-3">
          <p class="font-bold text-cyan-600">b.</p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">192 : 3 =</span>
            <input type="text" data-correct-answer="64" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">4 866</span> : 6 =</span>
            <input type="text" data-correct-answer="811" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">4 705</span> : 5 =</span>
            <input type="text" data-correct-answer="941" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">5 286</span> : 3 =</span>
            <input type="text" data-correct-answer="1762" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">609 : 7 =</span>
            <input type="text" data-correct-answer="87" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 5: Calcola sul quaderno e fai la prova -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(5) %>
        Calcola sul quaderno e fai la prova.
      </p>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <!-- Colonna a -->
        <div class="space-y-3">
          <p class="font-bold text-cyan-600">a.</p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">196 × 243 =</span>
            <input type="text" data-correct-answer="47628" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0">745 × 328 =</span>
            <input type="text" data-correct-answer="244360" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">1 389</span> × 765 =</span>
            <input type="text" data-correct-answer="1062585" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">4 668</span> × 433 =</span>
            <input type="text" data-correct-answer="2021244" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>

        <!-- Colonna b -->
        <div class="space-y-3">
          <p class="font-bold text-cyan-600">b.</p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">9 562</span> × 473 =</span>
            <input type="text" data-correct-answer="4522826" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">16 805</span> × 729 =</span>
            <input type="text" data-correct-answer="12250845" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">32 677</span> × 176 =</span>
            <input type="text" data-correct-answer="5751152" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">4 065</span> × 567 =</span>
            <input type="text" data-correct-answer="2304855" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>

        <!-- Colonna c -->
        <div class="space-y-3">
          <p class="font-bold text-cyan-600">c.</p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">100 794</span> : 21 =</span>
            <input type="text" data-correct-answer="4799 resto 15" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">35 009</span> : 143 =</span>
            <input type="text" data-correct-answer="244 resto 117" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">37 678</span> : 167 =</span>
            <input type="text" data-correct-answer="225 resto 103" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">100 567</span> : 32 =</span>
            <input type="text" data-correct-answer="3142 resto 23" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>

        <!-- Colonna d -->
        <div class="space-y-3">
          <p class="font-bold text-cyan-600">d.</p>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">129 116</span> : 52 =</span>
            <input type="text" data-correct-answer="2483" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">148 357</span> : 117 =</span>
            <input type="text" data-correct-answer="1268 resto 1" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">165 553</span> : 207 =</span>
            <input type="text" data-correct-answer="799 resto 160" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-700 shrink-0"><span class="whitespace-nowrap">119 542</span> : 675 =</span>
            <input type="text" data-correct-answer="177 resto 67" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        </div>
      </div>
    </div>

    <!-- Box informativi: Prova della moltiplicazione e divisione -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Prova della moltiplicazione -->
      <div class="p-4 bg-custom-blue-light rounded-lg">
        <p class="font-bold text-gray-800 mb-4">Prova della moltiplicazione</p>
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p188/p188_01.jpg", alt: "Prova della moltiplicazione", class: "max-w-full h-auto" %>
        </div>
      </div>

      <!-- Prova della divisione -->
      <div class="p-4 bg-custom-blue-light rounded-lg">
        <p class="font-bold text-gray-800 mb-4">Prova della divisione</p>
        <div class="grid grid-cols-2 gap-4">
          <!-- Senza resto -->
          <div>
            <p class="font-bold text-gray-700 mb-2">senza resto</p>
            <p class="text-gray-700">192 : 12 = <span class="font-bold text-cyan-600">16</span></p>
            <p class="text-gray-700"><span class="font-bold text-cyan-600">16</span> × 12 = 192</p>
          </div>

          <!-- Con resto -->
          <div>
            <p class="font-bold text-gray-700 mb-2">con resto</p>
            <p class="text-gray-700">194 : 12 = <span class="font-bold text-cyan-600">16</span> resto <span class="font-bold text-cyan-600 underline">2</span></p>
            <p class="text-gray-700">(<span class="font-bold text-cyan-600">16</span> × 12) + <span class="font-bold text-cyan-600 underline">2</span> = 194</p>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
