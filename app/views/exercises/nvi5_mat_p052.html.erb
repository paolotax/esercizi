<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <!-- Esercizio 1 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(1) %>
          Calcola in colonna sul quaderno, poi verifica i risultati con la prova.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="p-3 bg-white rounded-lg space-y-2">
            <p class="font-bold text-<%= @pagina.base_color %>-600">a)</p>
            <p>3 864 + 934,208 =</p>
            <p>32,179 + 0,8 + 37,96 =</p>
          </div>
          <div class="p-3 bg-white rounded-lg space-y-2">
            <p class="font-bold text-<%= @pagina.base_color %>-600">b)</p>
            <p>1 586 – 934,28 =</p>
            <p>1 926,5 – 749,198 =</p>
          </div>
          <div class="p-3 bg-white rounded-lg space-y-2">
            <p class="font-bold text-<%= @pagina.base_color %>-600">c)</p>
            <p>5 739 × 4,5 =</p>
            <p>327,38 × 0,64 =</p>
          </div>
          <div class="p-3 bg-white rounded-lg space-y-2">
            <p class="font-bold text-<%= @pagina.base_color %>-600">d)</p>
            <p>1 750 : 2,5 =</p>
            <p>108,72 : 36 =</p>
            <p>42,683 : 0,28 =</p>
            <p>32 : 50 =</p>
          </div>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(2) %>
          Applica la proprietà invariantiva ed esegui le sottrazioni sul quaderno.
        </p>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
          <p class="p-2 bg-white rounded">276 – 32 =</p>
          <p class="p-2 bg-white rounded">1 734 – 229 =</p>
          <p class="p-2 bg-white rounded">198,5 – 58,5 =</p>
          <p class="p-2 bg-white rounded">456,37 – 12,99 =</p>
        </div>
      </div>

      <!-- Esercizio 3 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(3) %>
          Applica la proprietà distributiva ed esegui le moltiplicazioni sul quaderno.
        </p>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
          <p class="p-2 bg-white rounded">45 × 8 =</p>
          <p class="p-2 bg-white rounded">480 × 7 =</p>
          <p class="p-2 bg-white rounded">180 × 20 =</p>
          <p class="p-2 bg-white rounded">450 × 15 =</p>
        </div>
      </div>

      <!-- Esercizio 4 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(4) %>
          Applica la proprietà invariantiva ed esegui i calcoli sul quaderno.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="p-3 bg-white rounded-lg space-y-2">
            <p class="font-bold text-<%= @pagina.base_color %>-600">a)</p>
            <p>7,2 : 2,4 =</p>
            <p>180 : 45 =</p>
            <p>250 : 25 =</p>
            <p>43,2 : 2,4 =</p>
            <p>540 : 36 =</p>
            <p>210 : 35 =</p>
          </div>
          <div class="p-3 bg-white rounded-lg space-y-2">
            <p class="font-bold text-<%= @pagina.base_color %>-600">b)</p>
            <p>740 : 20 =</p>
            <p>4 260 : 60 =</p>
            <p>3 500 : 500 =</p>
            <p>962,5 : 2,5 =</p>
            <p>1 800 : 90 =</p>
            <p>2 400 : 300 =</p>
          </div>
        </div>
      </div>

      <!-- Esercizio 5 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(5) %>
          Calcola il valore di queste espressioni.
        </p>
        <div class="space-y-2 p-3 bg-white rounded-lg">
          <p>(9 – 2 + 5) × 4 – 3 × 5 + (8 – 3 + 7) =</p>
          <p>23 – 3 × 5 + (5 + 4 – 6) × (8 + 12) =</p>
          <p>(9 × 2 – 6 – 3 × 4) × (8 + 7 + 24) =</p>
          <p>7 × 9 – (6 × 5 – 16) × 2 + 2 =</p>
          <p>(16 – 5) × (9 – 3 × 2) + 15 : 3 =</p>
          <p>27 – (11 – 5) × (20 – 2 × 8) : 3 =</p>
        </div>
      </div>

      <!-- Esercizio 6 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(6) %>
          Calcola il valore di queste espressioni.
        </p>
        <div class="space-y-2 p-3 bg-white rounded-lg">
          <p>5 × 13 – [(5 × 6 – 3 × 2 × 4 – 5) × 19 – 7 × 2] =</p>
          <p>3 + 5 × [8 × 6 – (7 + 5 – 4) × 5 + 7] + 10 =</p>
          <p>17 × 8 – [(8 × 5 – 29) × 3 + 2 × 7] + 2 × 3 =</p>
          <p>5 + [(9 × 5 – 7 × 4 – 9) × 4 – 3 × 8] + 16 : 4 =</p>
          <p>28 – (10 × 2 – 14) : [11 – (12 : 3 × 2)] =</p>
        </div>
      </div>

      <!-- Esercizio 7 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(7) %>
          Calcola il valore di queste espressioni.
        </p>
        <div class="space-y-2 p-3 bg-white rounded-lg">
          <p>{320 – [12 × (4 × 3 – 5) + 8]} =</p>
          <p>{8 + 4 + [3 × (18 – 7 × 2) + 5] × 2 + 6} =</p>
          <p>{95 – 2 × [(7 × 11 – 5 × 14) × 5 + 1]} + 7 =</p>
          <p>{3 + 4 × [5 + 6 × (7 + 2 × 3) – 80] + 1} =</p>
          <p>6 + {13 – 2 × [18 : (15 – 3 × 2)] – 5} =</p>
        </div>
      </div>

      <!-- Esercizio 8 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(8) %>
          Cerchia i numeri divisibili...
        </p>
        <div class="space-y-3">
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-<%= @pagina.base_color %>-600 mb-2">per 2:</p>
            <div class="flex flex-wrap gap-2">
              <% [27, 148, 22, 43, 2480, 45, 49, 2346].each do |num| %>
                <% div_by_2 = num % 2 == 0 %>
                <span class="bg-white border-2 border-pink-400 px-3 py-1 rounded font-bold cursor-pointer hover:bg-pink-100 transition"
                      data-controller="word-highlighter"
                      data-action="click->word-highlighter#toggleHighlight"
                      data-correct-value="<%= div_by_2 ? 'true' : 'false' %>"><%= num.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\1 ').reverse %></span>
              <% end %>
            </div>
          </div>
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-<%= @pagina.base_color %>-600 mb-2">per 4:</p>
            <div class="flex flex-wrap gap-2">
              <% [1200, 426, 95, 812, 123000, 323, 528].each do |num| %>
                <% div_by_4 = num % 4 == 0 %>
                <span class="bg-white border-2 border-pink-400 px-3 py-1 rounded font-bold cursor-pointer hover:bg-pink-100 transition"
                      data-controller="word-highlighter"
                      data-action="click->word-highlighter#toggleHighlight"
                      data-correct-value="<%= div_by_4 ? 'true' : 'false' %>"><%= num.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\1 ').reverse %></span>
              <% end %>
            </div>
          </div>
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-<%= @pagina.base_color %>-600 mb-2">per 5:</p>
            <div class="flex flex-wrap gap-2">
              <% [465, 3400, 573, 1345, 27000, 132].each do |num| %>
                <% div_by_5 = num % 5 == 0 %>
                <span class="bg-white border-2 border-pink-400 px-3 py-1 rounded font-bold cursor-pointer hover:bg-pink-100 transition"
                      data-controller="word-highlighter"
                      data-action="click->word-highlighter#toggleHighlight"
                      data-correct-value="<%= div_by_5 ? 'true' : 'false' %>"><%= num.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\1 ').reverse %></span>
              <% end %>
            </div>
          </div>
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-<%= @pagina.base_color %>-600 mb-2">per 9:</p>
            <div class="flex flex-wrap gap-2">
              <% [349, 8991, 1999, 108, 67, 990, 4500].each do |num| %>
                <% div_by_9 = num % 9 == 0 %>
                <span class="bg-white border-2 border-pink-400 px-3 py-1 rounded font-bold cursor-pointer hover:bg-pink-100 transition"
                      data-controller="word-highlighter"
                      data-action="click->word-highlighter#toggleHighlight"
                      data-correct-value="<%= div_by_9 ? 'true' : 'false' %>"><%= num.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\1 ').reverse %></span>
              <% end %>
            </div>
          </div>
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-<%= @pagina.base_color %>-600 mb-2">per 10:</p>
            <div class="flex flex-wrap gap-2">
              <% [120, 345, 67, 9000, 2400, 432, 505].each do |num| %>
                <% div_by_10 = num % 10 == 0 %>
                <span class="bg-white border-2 border-pink-400 px-3 py-1 rounded font-bold cursor-pointer hover:bg-pink-100 transition"
                      data-controller="word-highlighter"
                      data-action="click->word-highlighter#toggleHighlight"
                      data-correct-value="<%= div_by_10 ? 'true' : 'false' %>"><%= num.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\1 ').reverse %></span>
              <% end %>
            </div>
          </div>
        </div>
      </div>

      <!-- RISOLVI I PROBLEMI CON LE ESPRESSIONI -->
      <div class="p-4">
        <h3 class="font-bold text-<%= @pagina.base_color %>-600 mb-4">RISOLVI I PROBLEMI CON LE ESPRESSIONI</h3>
        <div class="space-y-4">
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-gray-700 mb-2"><%= numero_esercizio_badge(9) %></p>
            <p class="text-gray-800 mb-3">
              Giorgio acquista 2 magliette a 18,50 euro l'una e un paio di pantaloni a 33 euro. Se paga con una banconota da 100 euro, quanto riceve di resto?
            </p>
            <div class="flex items-center gap-2">
              <span class="font-semibold">Risposta:</span>
              <input type="text" data-correct-answer="30" class="w-16 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>euro</span>
            </div>
          </div>
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-gray-700 mb-2"><%= numero_esercizio_badge(10) %></p>
            <p class="text-gray-800 mb-3">
              Due sorelle hanno nel salvadanaio 25 banconote da 10 euro, 8 da 20 euro e 6 da 50 euro. Se a ogni sorella spetta la metà dei soldi, quanto possiede ciascuna di loro?
            </p>
            <div class="flex items-center gap-2">
              <span class="font-semibold">Risposta:</span>
              <input type="text" data-correct-answer="355" class="w-16 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>euro</span>
            </div>
          </div>
          <div class="p-3 bg-white rounded-lg">
            <p class="font-bold text-gray-700 mb-2"><%= numero_esercizio_badge(11) %></p>
            <p class="text-gray-800 mb-3">
              Il papà di Matteo ha comprato un'automobile che costa 18 500 euro. Ha già versato al concessionario un acconto di 2 000 euro e pagherà il resto in 30 rate mensili. Qual è la cifra che il papà di Matteo deve pagare ogni mese?
            </p>
            <div class="flex items-center gap-2">
              <span class="font-semibold">Risposta:</span>
              <input type="text" data-correct-answer="550" class="w-16 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              <span>euro</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
