<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI - Layout a due colonne con divider -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 divide-y-2 md:divide-y-0 md:divide-x-2 divide-custom-pink">
        <!-- Colonna sinistra: esercizi 1-5 -->
        <div class="pb-4 md:pb-0 md:pr-6 space-y-6">
          <!-- Esercizio 1 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(1) %>
              Calcola in colonna sul quaderno, poi verifica i risultati con la prova.
            </p>
            <div class="space-y-1">
              <p><strong class="text-custom-pink">a)</strong> <span class="whitespace-nowrap">3 864</span> + 934,208 = <span class="ml-4">32,179 + 0,8 + 37,96 =</span></p>
              <p><strong class="text-custom-pink">b)</strong> <span class="whitespace-nowrap">1 586</span> – 934,28 = <span class="ml-4"><span class="whitespace-nowrap">1 926,5</span> – 749,198 =</span></p>
              <p><strong class="text-custom-pink">c)</strong> <span class="whitespace-nowrap">5 739</span> × 4,5 = <span class="ml-4">327,38 × 0,64 =</span></p>
              <p><strong class="text-custom-pink">d)</strong> <span class="whitespace-nowrap">1 750</span> : 2,5 = <span class="ml-4">42,683 : 0,28 =</span></p>
              <p class="ml-4">108,72 : 36 = <span class="ml-4">32 : 50 =</span></p>
            </div>
          </div>

          <!-- Esercizio 2 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(2) %>
              Applica la proprietà invariantiva ed esegui le sottrazioni sul quaderno.
            </p>
            <div class="grid grid-cols-2 gap-2">
              <p>276 – 32 =</p>
              <p>198,5 – 58,5 =</p>
              <p><span class="whitespace-nowrap">1 734</span> – 229 =</p>
              <p>456,37 – 12,99 =</p>
            </div>
          </div>

          <!-- Esercizio 3 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(3) %>
              Applica la proprietà distributiva ed esegui le moltiplicazioni sul quaderno.
            </p>
            <div class="grid grid-cols-2 gap-2">
              <p>45 × 8 =</p>
              <p>180 × 20 =</p>
              <p>480 × 7 =</p>
              <p>450 × 15 =</p>
            </div>
          </div>

          <!-- Esercizio 4 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(4) %>
              Applica la proprietà invariantiva ed esegui i calcoli sul quaderno.
            </p>
            <div class="grid grid-cols-2 gap-2">
              <div class="space-y-1">
                <p><strong class="text-custom-pink">a)</strong> 7,2 : 2,4 =</p>
                <p class="ml-4">180 : 45 =</p>
                <p class="ml-4">250 : 25 =</p>
                <p class="ml-4">43,2 : 2,4 =</p>
                <p class="ml-4">540 : 36 =</p>
                <p class="ml-4">210 : 35 =</p>
              </div>
              <div class="space-y-1">
                <p><strong class="text-custom-pink">b)</strong> 740 : 20 =</p>
                <p class="ml-4"><span class="whitespace-nowrap">4 260</span> : 60 =</p>
                <p class="ml-4"><span class="whitespace-nowrap">3 500</span> : 500 =</p>
                <p class="ml-4">962,5 : 2,5 =</p>
                <p class="ml-4"><span class="whitespace-nowrap">1 800</span> : 90 =</p>
                <p class="ml-4"><span class="whitespace-nowrap">2 400</span> : 300 =</p>
              </div>
            </div>
          </div>

          <!-- Esercizio 5 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(5) %>
              Calcola il valore di queste espressioni.
            </p>
            <div class="space-y-1">
              <p>(9 – 2 + 5) × 4 – 3 × 5 + (8 – 3 + 7) =</p>
              <p>23 – 3 × 5 + (5 + 4 – 6) × (8 + 12) =</p>
              <p>(9 × 2 – 6 – 3 × 4) × (8 + 7 + 24) =</p>
              <p>7 × 9 – (6 × 5 – 16) × 2 + 2 =</p>
              <p>(16 – 5) × (9 – 3 × 2) + 15 : 3 =</p>
              <p>27 – (11 – 5) × (20 – 2 × 8) : 3 =</p>
            </div>
          </div>
        </div>

        <!-- Colonna destra: esercizi 6-11 -->
        <div class="pt-4 md:pt-0 md:pl-6 space-y-6">
          <!-- Esercizio 6 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(6) %>
              Calcola il valore di queste espressioni.
            </p>
            <div class="space-y-1">
              <p>5 × 13 – [(5 × 6 – 3 × 2 × 4 – 5) × 19 – 7 × 2] =</p>
              <p>3 + 5 × [8 × 6 – (7 + 5 – 4) × 5 + 7] + 10 =</p>
              <p>17 × 8 – [(8 × 5 – 29) × 3 + 2 × 7] + 2 × 3 =</p>
              <p>5 + [(9 × 5 – 7 × 4 – 9) × 4 – 3 × 8] + 16 : 4 =</p>
              <p>28 – (10 × 2 – 14) : [11 – (12 : 3 × 2)] =</p>
            </div>
          </div>

          <!-- Esercizio 7 -->
          <div>
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(7) %>
              Calcola il valore di queste espressioni.
            </p>
            <div class="space-y-1">
              <p>{320 – [12 × (4 × 3 – 5) + 8]} =</p>
              <p>{8 + 4 + [3 × (18 – 7 × 2) + 5] × 2 + 6} =</p>
              <p>{95 – 2 × [(7 × 11 – 5 × 14) × 5 + 1]} + 7 =</p>
              <p>{3 + 4 × [5 + 6 × (7 + 2 × 3) – 80] + 1} =</p>
              <p>6 + {13 – 2 × [18 : (15 – 3 × 2)] – 5} =</p>
            </div>
          </div>

          <!-- Esercizio 8 -->
          <div data-controller="word-highlighter">
            <p class="font-bold text-gray-700 mb-3">
              <%= numero_esercizio_badge(8) %>
              Cerchia i numeri divisibili…
            </p>
            <div class="space-y-2">
              <p><strong class="text-custom-pink">per 2:</strong>
                <% [27, 148, 22, 43, 2480, 45, 49, 2346].each do |num| %>
                  <span data-word-highlighter-target="word"
                        data-correct="<%= num % 2 == 0 %>"
                        data-action="click->word-highlighter#toggleHighlight"
                        class="cursor-pointer hover:opacity-80"><%= number_with_delimiter(num, delimiter: ' ') %></span> •
                <% end %>
              </p>
              <p><strong class="text-custom-pink">per 4:</strong>
                <% [1200, 426, 95, 812, 123000, 323, 528].each do |num| %>
                  <span data-word-highlighter-target="word"
                        data-correct="<%= num % 4 == 0 %>"
                        data-action="click->word-highlighter#toggleHighlight"
                        class="cursor-pointer hover:opacity-80"><%= number_with_delimiter(num, delimiter: ' ') %></span> •
                <% end %>
              </p>
              <p><strong class="text-custom-pink">per 5:</strong>
                <% [465, 3400, 573, 1345, 27000, 132].each do |num| %>
                  <span data-word-highlighter-target="word"
                        data-correct="<%= num % 5 == 0 %>"
                        data-action="click->word-highlighter#toggleHighlight"
                        class="cursor-pointer hover:opacity-80"><%= number_with_delimiter(num, delimiter: ' ') %></span> •
                <% end %>
              </p>
              <p><strong class="text-custom-pink">per 9:</strong>
                <% [349, 8991, 1999, 108, 67, 990, 4500].each do |num| %>
                  <span data-word-highlighter-target="word"
                        data-correct="<%= num % 9 == 0 %>"
                        data-action="click->word-highlighter#toggleHighlight"
                        class="cursor-pointer hover:opacity-80"><%= number_with_delimiter(num, delimiter: ' ') %></span> •
                <% end %>
              </p>
              <p><strong class="text-custom-pink">per 10:</strong>
                <% [120, 345, 67, 9000, 2400, 432, 505].each do |num| %>
                  <span data-word-highlighter-target="word"
                        data-correct="<%= num % 10 == 0 %>"
                        data-action="click->word-highlighter#toggleHighlight"
                        class="cursor-pointer hover:opacity-80"><%= number_with_delimiter(num, delimiter: ' ') %></span> •
                <% end %>
              </p>
            </div>
          </div>

          <!-- RISOLVI I PROBLEMI CON LE ESPRESSIONI -->
          <div>
            <h3 class="font-bold text-custom-pink mb-3 italic">RISOLVI I PROBLEMI CON LE ESPRESSIONI</h3>

            <div class="space-y-4">
              <div>
                <p class="text-gray-800">
                  <%= numero_esercizio_badge(9) %>
                  Giorgio acquista 2 magliette a 18,50 euro l'una e un paio di pantaloni a 33 euro. Se paga con una banconota da 100 euro, quanto riceve di resto?
                </p>
              </div>

              <div>
                <p class="text-gray-800">
                  <%= numero_esercizio_badge(10) %>
                  Due sorelle hanno nel salvadanaio 25 banconote da 10 euro, 8 da 20 euro e 6 da 50 euro. Se a ogni sorella spetta la metà dei soldi, quanto possiede ciascuna di loro?
                </p>
              </div>

              <div>
                <p class="text-gray-800">
                  <%= numero_esercizio_badge(11) %>
                  Il papà di Matteo ha comprato un'automobile che costa <span class="whitespace-nowrap">18 500</span> euro. Ha già versato al concessionario un acconto di <span class="whitespace-nowrap">2 000</span> euro e pagherà il resto in 30 rate mensili. Qual è la cifra che il papà di Matteo deve pagare ogni mese?
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quaderno -->
    <div class="p-4 text-right">
      <span class="text-gray-600">Quaderno esercizi →</span>
      <span class="text-<%= @pagina.base_color %>-600 font-bold">pp. 199, 201</span>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
