<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Sezione: DIVERSE SCRITTURE DEI NUMERI -->
    <div class="p-4 md:p-6">

      <p class="text-gray-700 mb-6">È possibile rappresentare e scrivere i numeri in diversi modi. Osserva.</p>

      <div class="grid grid-cols-[auto_auto_1fr] gap-x-3 gap-y-2 text-gray-700 items-start">
        <!-- Con l'abaco -->
        <span><span class="text-pink-600">&#8226;</span> Con l'<span class="font-bold">abaco</span></span>
        <span class="text-pink-600">→</span>
        <div>
          <%= image_tag "nvi5_mat/p011/p011_01.jpg", alt: "Abaco con numero 31 520 869", class: "max-w-md w-full" %>
        </div>

        <!-- In cifre -->
        <span><span class="text-pink-600">&#8226;</span> In <span class="font-bold">cifre</span></span>
        <span class="text-pink-600">→</span>
        <span class="font-bold text-custom-sky whitespace-nowrap">31 520 869</span>

        <!-- In parola -->
        <span><span class="text-pink-600">&#8226;</span> In <span class="font-bold">parola</span></span>
        <span class="text-pink-600">→</span>
        <div class="overflow-x-auto">
          <span class="font-bold whitespace-nowrap">trentun<span class="text-custom-sky">MILIONI</span>cinquecentoventi<span class="text-custom-sky">MILA</span>ottocentosessantanove</span>
        </div>

        <!-- Come somma di valori -->
        <span><span class="text-pink-600">&#8226;</span> Come <span class="font-bold">somma di valori</span></span>
        <span class="text-pink-600">→</span>
        <div class="overflow-x-auto">
          <span class="font-bold text-custom-sky whitespace-nowrap">3 daM + 1 uM + 5 hk + 2 dak + 0 uk + 8 h + 6 da + 9 u</span>
        </div>

        <!-- Come somma di addendi -->
        <span><span class="text-pink-600">&#8226;</span> Come <span class="font-bold">somma di addendi</span></span>
        <span class="text-pink-600">→</span>
        <div class="overflow-x-auto">
          <span class="font-bold text-custom-sky whitespace-nowrap">30 000 000 + 1 000 000 + 500 000 + 20 000 + 0 + 800 + 60 + 9</span>
        </div>

        <!-- Come somma di prodotti -->
        <span><span class="text-pink-600">&#8226;</span> Come <span class="font-bold">somma di prodotti</span></span>
        <span class="text-pink-600">→</span>
        <div class="overflow-x-auto">
          <span class="font-bold text-custom-sky whitespace-nowrap">3 × 10 000 000 + 1 × 1 000 000 + 5 × 100 000 + 2 × 10 000 + 0 × 1 000 + 8 × 100 + 6 × 10 + 9 × 1</span>
        </div>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <h2 class="font-bold text-pink-600 mb-4">ESERCIZI</h2>

      <!-- Esercizio 1 -->
      <div class="mb-6">
        <div class="flex items-start gap-3 mb-4">
          <%= numero_esercizio_badge(1) %>
          <p class="text-gray-700">Attribuisci a ogni cifra il suo valore, come nell'esempio.</p>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full border-collapse bg-white">
            <thead>
              <tr>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200"></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center"><span class="text-teal-600">h</span><span class="text-teal-600">M</span></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center"><span class="text-pink-500">da</span><span class="text-teal-600">M</span></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center"><span class="text-sky-500">u</span><span class="text-teal-600">M</span></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center"><span class="text-teal-600">h</span><span class="text-pink-500">k</span></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center"><span class="text-pink-500">da</span><span class="text-pink-500">k</span></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center"><span class="text-sky-500">u</span><span class="text-pink-500">k</span></th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center text-teal-600">h</th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center text-pink-500">da</th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200 text-center text-sky-500">u</th>
                <th class="border border-gray-300 py-2 px-2 bg-pink-200"></th>
              </tr>
            </thead>
            <tbody>
              <!-- Esempio -->
              <tr>
                <td class="border border-gray-300 py-2 px-2 font-bold text-gray-700 whitespace-nowrap">23 560 344</td>
                <td class="border border-gray-300 py-2 px-2 text-center text-gray-700"></td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">2</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">3</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">5</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">6</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">0</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">3</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">4</td>
                <td class="border border-gray-300 py-2 px-2 text-center font-bold text-gray-700">4</td>
                <td class="border border-gray-300 py-2 px-2 text-gray-700">2 daM + 3 uM + 5 hk + 6 dak + 0 uk + 3 h + 4 da + 4 u</td>
              </tr>
              <!-- Esercizio 1 -->
              <tr>
                <td class="border border-gray-300 py-2 px-2 font-bold text-gray-700 whitespace-nowrap">2 176 981</td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer=""></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer=""></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="2"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="1"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="7"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="6"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="9"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="8"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="1"></td>
                <td class="border border-gray-300 py-2 px-2">
                  <input type="text" class="w-full px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent" placeholder="..." data-correct-answer="2 uM + 1 hk + 7 dak + 6 uk + 9 h + 8 da + 1 u">
                </td>
              </tr>
              <!-- Esercizio 2 -->
              <tr>
                <td class="border border-gray-300 py-2 px-2 font-bold text-gray-700 whitespace-nowrap">351 403 600</td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="3"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="5"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="1"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="4"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="0"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="3"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="6"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="0"></td>
                <td class="border border-gray-300 py-2 px-2"><input type="text" class="w-8 px-1 py-1 text-center border-b-2 border-dotted border-gray-400 bg-transparent font-bold" data-correct-answer="0"></td>
                <td class="border border-gray-300 py-2 px-2">
                  <input type="text" class="w-full px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent" placeholder="..." data-correct-answer="3 hM + 5 daM + 1 uM + 4 hk + 0 dak + 3 uk + 6 h + 0 da + 0 u">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Esercizi 2 e 3 affiancati -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <!-- Esercizio 2 -->
        <div>
          <div class="flex items-start gap-3 mb-3">
            <%= numero_esercizio_badge(2) %>
            <p class="text-gray-700">Scrivi in lettere i seguenti numeri, poi scrivili come somma di addendi. Esegui sul quaderno.</p>
          </div>
          <p class="font-bold text-gray-700 ml-11">
            <span class="whitespace-nowrap">165 857</span> &#8226; <span class="whitespace-nowrap">134 769 031</span> &#8226; <span class="whitespace-nowrap">6 908 233</span> &#8226; <span class="whitespace-nowrap">4 128 768 211</span>
          </p>
        </div>

        <!-- Esercizio 3 -->
        <div>
          <div class="flex items-start gap-3 mb-3">
            <%= numero_esercizio_badge(3) %>
            <p class="text-gray-700">Scrivi in lettere i seguenti numeri, poi scrivili come somma di prodotti. Esegui sul quaderno.</p>
          </div>
          <p class="font-bold text-gray-700 ml-11">
            <span class="whitespace-nowrap">12 354 675</span> &#8226; <span class="whitespace-nowrap">7 208 108</span> &#8226; <span class="whitespace-nowrap">64 531 092 275</span>
          </p>
        </div>
      </div>

      <!-- Esercizio 4 -->
      <div>
        <div class="flex items-start gap-3 mb-4">
          <%= numero_esercizio_badge(4) %>
          <p class="text-gray-700">Osserva e completa.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Tabella -->
          <div>
            <table class="border-collapse bg-white">
              <thead>
                <tr>
                  <th class="border border-gray-300 py-2 px-3 bg-pink-200 text-center"><span class="text-teal-600">h</span><span class="text-pink-500">k</span></th>
                  <th class="border border-gray-300 py-2 px-3 bg-pink-200 text-center"><span class="text-pink-500">da</span><span class="text-pink-500">k</span></th>
                  <th class="border border-gray-300 py-2 px-3 bg-pink-200 text-center"><span class="text-sky-500">u</span><span class="text-pink-500">k</span></th>
                  <th class="border border-gray-300 py-2 px-3 bg-pink-200 text-center text-teal-600">h</th>
                  <th class="border border-gray-300 py-2 px-3 bg-pink-200 text-center text-pink-500">da</th>
                  <th class="border border-gray-300 py-2 px-3 bg-pink-200 text-center text-sky-500">u</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border border-gray-300 py-2 px-3 text-center font-bold text-gray-700">1</td>
                  <td class="border border-gray-300 py-2 px-3 text-center font-bold text-gray-700">2</td>
                  <td class="border border-gray-300 py-2 px-3 text-center font-bold text-gray-700">3</td>
                  <td class="border border-gray-300 py-2 px-3 text-center font-bold text-gray-700">6</td>
                  <td class="border border-gray-300 py-2 px-3 text-center font-bold text-gray-700">5</td>
                  <td class="border border-gray-300 py-2 px-3 text-center font-bold text-gray-700">4</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Domande colonna 1 -->
          <div class="space-y-3 text-gray-700">
            <div>
              <span class="text-pink-600">&#8226;</span> Quante unità ci sono nel numero <span class="whitespace-nowrap">123 654</span>?
              <span class="font-bold text-custom-sky ml-2 whitespace-nowrap">123 654</span>
            </div>
            <div>
              <span class="text-pink-600">&#8226;</span> Quante decine?
              <span class="font-bold text-custom-sky ml-2 whitespace-nowrap">12 365</span>
            </div>
            <div>
              <span class="text-pink-600">&#8226;</span> Quante centinaia?
              <span class="font-bold text-custom-sky ml-2 whitespace-nowrap">1 236</span>
            </div>
          </div>

          <!-- Domande colonna 2 -->
          <div class="space-y-3 text-gray-700">
            <div class="flex items-center gap-2">
              <span><span class="text-pink-600">&#8226;</span> Quante unità di migliaia?</span>
              <input type="text" class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="123" placeholder="...">
            </div>
            <div class="flex items-center gap-2">
              <span><span class="text-pink-600">&#8226;</span> Quante decine di migliaia?</span>
              <input type="text" class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="12" placeholder="...">
            </div>
            <div class="flex items-center gap-2">
              <span><span class="text-pink-600">&#8226;</span> Quante centinaia di migliaia?</span>
              <input type="text" class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="1" placeholder="...">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quaderno link -->
    <div class="p-4 text-right">
      <span class="text-gray-600">Quaderno esercizi →</span>
      <%= link_to "p. 176", pagina_path("nvi5_mat_p176"), class: "text-red-600 font-bold hover:underline" %>,
      <%= link_to "177", pagina_path("nvi5_mat_p177"), class: "text-red-600 font-bold hover:underline" %>,
      <%= link_to "178", pagina_path("nvi5_mat_p178"), class: "text-red-600 font-bold hover:underline" %>,
      <%= link_to "183", pagina_path("nvi5_mat_p183"), class: "text-red-600 font-bold hover:underline" %>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls' %>
  </div>
</div>
