<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white dark:bg-gray-900 text-black dark:text-white transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 3 -->
  <div class="p-4 md:p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        3
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Per fare sottrazioni veloci, puoi scomporre il sottraendo.</strong> Osserva e completa.
      </p>
    </div>

    <!-- Immagine dell'esercizio -->
    <div class="mb-6">
      <div class="bg-white rounded-xl p-2 inline-block">
        <%= image_tag "bus3_mat_p035_esercizio3.png",
            alt: "Esercizio 3: Scomposizione del sottraendo",
            class: "w-full h-auto" %>
      </div>
    </div>

    <!-- Tre riquadri con scomposizione (nascosti) -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 hidden">
      <!-- Riquadro 1: Esempio completato -->
      <div class="bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl p-6 border-4 border-yellow-400">
        <div class="space-y-3">
          <!-- Riga 1 -->
          <div class="flex items-center justify-center font-bold">
            <span class="w-16 text-right">88</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">56</span>
          </div>

          <!-- Frecce rosse -->
          <div class="flex items-center justify-center font-semibold">
            <span class="text-red-600">↓</span>
          </div>

          <!-- Riga 2 -->
          <div class="flex items-center justify-center font-bold">
            <span class="w-16 text-right">88</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">50 <span class="text-blue-600 ml-2">6</span></span>
          </div>

          <!-- Frecce -->
          <div class="flex items-center justify-center">
            <span class="text-red-600">↓</span>
          </div>

          <!-- Riga 3 -->
          <div class="flex items-center justify-center font-bold">
            <span class="w-16 text-right">38</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left"><span class="text-blue-600">6</span> = <span class="text-green-600">32</span></span>
          </div>
        </div>
      </div>

      <!-- Riquadro 2: Da completare -->
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border-4 border-gray-300 dark:border-gray-600">
        <div class="space-y-3">
          <!-- Riga 1 -->
          <div class="flex items-center justify-center font-bold">
            <span class="w-16 text-right">97</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">35</span>
          </div>

          <!-- Frecce -->
          <div class="flex items-center justify-center">
            <span class="text-red-600">↓</span>
          </div>

          <!-- Riga 2 -->
          <div class="flex items-center justify-center font-semibold">
            <span class="w-16 text-right">97</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">30 <input type="text" class="w-12 px-1 py-1 border-2 border-blue-300 rounded text-center ml-2" /></span>
          </div>

          <!-- Frecce -->
          <div class="flex items-center justify-center">
            <span class="text-red-600">↓</span>
          </div>

          <!-- Riga 3 -->
          <div class="flex items-center justify-center font-semibold">
            <input type="text" class="w-16 px-2 py-1 border-2 border-blue-300 rounded text-center" />
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">
              <input type="text" class="w-12 px-1 py-1 border-2 border-blue-300 rounded text-center" />
              <span class="ml-2">=</span>
              <input type="text" class="w-16 px-2 py-1 border-2 border-green-300 rounded text-center font-bold ml-2" />
            </span>
          </div>
        </div>
      </div>

      <!-- Riquadro 3: Da completare -->
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border-4 border-gray-300 dark:border-gray-600">
        <div class="space-y-3">
          <!-- Riga 1 -->
          <div class="flex items-center justify-center font-bold">
            <span class="w-16 text-right">126</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">73</span>
          </div>

          <!-- Frecce -->
          <div class="flex items-center justify-center">
            <span class="text-red-600">↓</span>
          </div>

          <!-- Riga 2 -->
          <div class="flex items-center justify-center font-semibold">
            <span class="w-16 text-right">126</span>
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">
              <input type="text" class="w-12 px-1 py-1 border-2 border-blue-300 rounded text-center" />
              <input type="text" class="w-12 px-1 py-1 border-2 border-blue-300 rounded text-center ml-2" />
            </span>
          </div>

          <!-- Frecce -->
          <div class="flex items-center justify-center">
            <span class="text-red-600">↓</span>
          </div>

          <!-- Riga 3 -->
          <div class="flex items-center justify-center font-semibold">
            <input type="text" class="w-16 px-2 py-1 border-2 border-blue-300 rounded text-center" />
            <span class="w-8 text-center">−</span>
            <span class="flex-1 text-left">
              <input type="text" class="w-12 px-1 py-1 border-2 border-blue-300 rounded text-center" />
              <span class="ml-2">=</span>
              <input type="text" class="w-16 px-2 py-1 border-2 border-green-300 rounded text-center font-bold ml-2" />
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 4 -->
  <div class="p-4 md:p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        4
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Per aggiungere 9, 19, 29... 99... prima aggiungi 10, 20, 30... e poi togli 1.</strong> Osserva e completa.
      </p>
    </div>

    <!-- Esercizi da completare -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Prima colonna -->
      <div class="space-y-6">
        <!-- Esempio completato: 57 + 9 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">57 + 9 =</span>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">57</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">67</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">66</span>
          </div>
        </div>

        <!-- 43 + 19 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">43 + 19 =</span>
            <input type="text" data-correct-answer="43" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+20</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="63" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="62" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 62 + 29 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">62 + 29 =</span>
            <input type="text" data-correct-answer="62" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+30</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="92" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="91" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>

      <!-- Seconda colonna -->
      <div class="space-y-6">
        <!-- 137 + 9 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">137 + 9 =</span>
            <input type="text" data-correct-answer="137" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="147" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="146" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 184 + 99 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">184 + 99 =</span>
            <input type="text" data-correct-answer="184" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">+100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="284" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="283" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 219 + 99 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">219 + 99 =</span>
            <input type="text" data-correct-answer="219" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">+100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="319" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="318" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 5 -->
  <div class="p-4 md:p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        5
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Per togliere 9, 19, 29... 99... prima togli 10, 20, 30... e poi aggiungi 1.</strong> Osserva e completa.
      </p>
    </div>

    <!-- Esercizi da completare -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Prima colonna -->
      <div class="space-y-6">
        <!-- Esempio completato: 73 - 9 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">73 - 9 =</span>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">73</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">63</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">64</span>
          </div>
        </div>

        <!-- 86 - 19 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">86 - 19 =</span>
            <input type="text" data-correct-answer="86" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-20</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="66" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="67" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 54 - 29 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">54 - 29 =</span>
            <input type="text" data-correct-answer="54" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-30</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="24" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="25" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>

      <!-- Seconda colonna -->
      <div class="space-y-6">
        <!-- 227 - 9 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">227 - 9 =</span>
            <input type="text" data-correct-answer="227" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="217" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="218" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 315 - 99 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">315 - 99 =</span>
            <input type="text" data-correct-answer="315" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">-100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="215" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="216" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 237 - 99 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">237 - 99 =</span>
            <input type="text" data-correct-answer="237" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">-100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="137" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="138" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 6 -->
  <div class="p-4 md:p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        6
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Per aggiungere 11, 21, 31... 101... prima aggiungi 10, 20, 30... e poi ancora 1.</strong> Osserva e completa.
      </p>
    </div>

    <!-- Esercizi da completare -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Prima colonna -->
      <div class="space-y-6">
        <!-- Esempio completato: 48 + 11 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">48 + 11 =</span>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">48</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">58</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">59</span>
          </div>
        </div>

        <!-- 92 + 21 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">92 + 21 =</span>
            <input type="text" data-correct-answer="92" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+20</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="112" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="113" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 85 + 31 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">85 + 31 =</span>
            <input type="text" data-correct-answer="85" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+30</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="115" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="116" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>

      <!-- Seconda colonna -->
      <div class="space-y-6">
        <!-- 167 + 11 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">167 + 11 =</span>
            <input type="text" data-correct-answer="167" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">+10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="177" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="178" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 223 + 101 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">223 + 101 =</span>
            <input type="text" data-correct-answer="223" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">+100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="323" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="324" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 307 + 101 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">307 + 101 =</span>
            <input type="text" data-correct-answer="307" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">+100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="407" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">+1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="408" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 7 -->
  <div class="p-4 md:p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        7
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        <strong>Per togliere 11, 21, 31... 101... prima togli 10, 20, 30... e poi ancora 1.</strong> Osserva e completa.
      </p>
    </div>

    <!-- Esercizi da completare -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Prima colonna -->
      <div class="space-y-6">
        <!-- Esempio completato: 64 - 11 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">64 - 11 =</span>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[80px] w-20 text-center">64</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[3rem] text-center">54</span>
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <span class="text-blue-600 font-bold border-b-2 border-dotted border-blue-600 pb-1 min-w-[3rem] text-center">53</span>
          </div>
        </div>

        <!-- 73 - 21 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">73 - 21 =</span>
            <input type="text" data-correct-answer="73" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-20</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="53" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="52" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 36 - 31 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">36 - 31 =</span>
            <input type="text" data-correct-answer="36" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-30</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="6" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="5" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>

      <!-- Seconda colonna -->
      <div class="space-y-6">
        <!-- 152 - 11 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">152 - 11 =</span>
            <input type="text" data-correct-answer="152" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-red-600 font-bold">-10</span>
              <span class="text-red-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="142" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="141" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 223 - 101 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">223 - 101 =</span>
            <input type="text" data-correct-answer="223" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">-100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="123" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="122" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>

        <!-- 307 - 101 -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="font-semibold dark:text-white">307 - 101 =</span>
            <input type="text" data-correct-answer="307" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-green-600 font-bold">-100</span>
              <span class="text-green-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="207" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
            <div class="flex flex-col items-center leading-tight">
              <span class="text-blue-600 font-bold">-1</span>
              <span class="text-blue-600 -mt-1">→</span>
            </div>
            <input type="text" data-correct-answer="206" class="min-w-[80px] w-20 px-2 py-2 border-b-2 border-dotted border-blue-600 rounded-none bg-transparent text-center text-blue-600 font-bold focus:outline-none focus:border-blue-800" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls' %>
</div>
