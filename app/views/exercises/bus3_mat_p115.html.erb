<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-4xl mx-auto p-3 md:p-6 bg-white dark:bg-gray-900 text-black dark:text-white font-mono transition-colors duration-300"
     data-controller="exercise-checker page-viewer fill-blanks auto-advance text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p115/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1 -->
  <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg mb-8">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">1</div>
      <p class="text-gray-700 dark:text-gray-200"><strong>Osserva e leggi.</strong></p>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse text-center">
        <thead>
          <tr class="text-blue-600 dark:text-blue-400 font-bold">
            <th class="bg-pink-200 dark:bg-pink-900/40 p-3 border">PESO LORDO</th>
            <th class="bg-cyan-200 dark:bg-cyan-900/40 p-3 border">TARA</th>
            <th class="bg-green-200 dark:bg-green-900/40 p-3 border">PESO NETTO</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="p-3 border dark:bg-gray-800">550 g</td>
            <td class="p-3 border dark:bg-gray-800">150 g</td>
            <td class="p-3 border dark:bg-gray-800">400 g</td>
          </tr>
          <tr>
            <td class="p-3 border dark:bg-gray-800">È il peso della merce e del contenitore insieme.</td>
            <td class="p-3 border dark:bg-gray-800">È il peso del contenitore.</td>
            <td class="p-3 border dark:bg-gray-800">È il peso della sola merce contenuta.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Esercizio 2 -->
  <div class="mb-16">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">2</div>
      <p class="text-gray-700 dark:text-gray-200"><strong>Calcola e completa i diagrammi con i dati indicati.</strong></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Diagramma 1: PL - T = PN -->
      <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg text-center">
        <div class="grid grid-cols-2 gap-2 mb-2">
          <div class="bg-pink-200 dark:bg-pink-900/40 p-2 rounded"><span class="">PESO LORDO</span><br>300 g</div>
          <div class="bg-cyan-200 dark:bg-cyan-900/40 p-2 rounded"><span class="">TARA</span><br>50 g</div>
        </div>
        <div class="mb-2">−</div>
        <div class="bg-green-200 dark:bg-green-900/40 p-2 rounded"><span class="">PESO NETTO</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="250" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
      </div>

      <!-- Diagramma 2: PL - PN = T -->
      <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg text-center">
        <div class="grid grid-cols-2 gap-2 mb-2">
          <div class="bg-pink-200 dark:bg-pink-900/40 p-2 rounded"><span class="">PESO LORDO</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="500" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
          <div class="bg-green-200 dark:bg-green-900/40 p-2 rounded"><span class="">PESO NETTO</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="400" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
        </div>
        <div class="mb-2">−</div>
        <div class="bg-cyan-200 dark:bg-cyan-900/40 p-2 rounded"><span class="">TARA</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="100" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
      </div>

      <!-- Diagramma 3: PN + T = PL -->
      <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg text-center">
        <div class="grid grid-cols-2 gap-2 mb-2">
          <div class="bg-green-200 dark:bg-green-900/40 p-2 rounded"><span class="">PESO NETTO</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="350" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
          <div class="bg-cyan-200 dark:bg-cyan-900/40 p-2 rounded"><span class="">TARA</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="50" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
        </div>
        <div class="mb-2">+</div>
        <div class="bg-pink-200 dark:bg-pink-900/40 p-2 rounded"><span class="">PESO LORDO</span><br><input type="text" data-fill-blanks-target="input" data-correct-answer="400" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white text-center"> g</div>
      </div>
    </div>
  </div>

  <!-- Esercizio 3 -->
  <div class="mb-16">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">3</div>
      <p class="text-gray-700 dark:text-gray-200"><strong>Risolvi sul quaderno.</strong></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="space-y-3">
        <p><strong>a.</strong> Il peso lordo di un camioncino carico di sabbia è 2000 kg. Il camioncino vuoto pesa 1350 kg. Quanto pesa solo la sabbia?</p>
        <p><strong>b.</strong> Un cestino vuoto pesa 250 g e i limoni che sono dentro pesano 860 g. Qual è il peso lordo del cestino pieno?</p>
      </div>
      <div class="space-y-3">
        <p><strong>c.</strong> Una cassa di meloni pesa 15 kg. I meloni pesano 13 kg. Qual è la tara?</p>
        <p><strong>d.</strong> Il peso lordo di un vasetto pieno di miele è 850 g. Il peso netto del miele è 680 g. Quanto pesa il vasetto vuoto?</p>
      </div>
    </div>
  </div>

  <%= render 'shared/exercise_controls' %>
</div>
