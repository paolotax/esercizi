<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">

      <!-- Esercizio 1 - IMPARARE TUTTI -->
      <div class="p-4 bg-white rounded-2xl -mx-6 -mt-6 border-3 border-blue-500">
        <div class="flex items-start lg:items-center gap-3 mb-4">
          
          <p class="font-bold text-gray-700">
            <%= imparare_tutti_badge(1) %>
            Trasforma le percentuali in frazioni decimali come nell'esempio.
          </p>
        </div>

        <div class="flex flex-wrap items-center gap-4 justify-center">
          <div class="p-3">
            <div class="flex items-center gap-2">
              <span>12% →</span>
              <%= render 'shared/frazione', num: 12, den: 100 %>
            </div>
          </div>

          <div class="flex items-center gap-2">
            <span>45% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "45" %>
          </div>

          <div class="flex items-center gap-2">
            <span>6% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "6" %>
          </div>

          <div class="flex items-center gap-2">
            <span>50% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "50" %>
          </div>

          <div class="flex items-center gap-2">
            <span>22% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "22" %>
          </div>

          <div class="flex items-center gap-2">
            <span>41% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "41" %>
          </div>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div class="p-4 mb-6">
        <div class="mb-4">
          <p class="font-bold text-gray-700">
            <%= numero_esercizio_badge(2) %> 
            Calcola il valore delle percentuali come nell'esempio.
          </p>
        </div>

        <div class="p-3 mb-4">
          <span>3% di 150 → <span class="text-<%= @pagina.base_color %>-700">(150 : 100) × 3 = 1,5 × 3 = 4,5</span></span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="flex items-center gap-3">
            <span>18% di 350 →</span>
            <input type="text" data-correct-answer="63" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>50% di 2300 →</span>
            <input type="text" data-correct-answer="1150" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>24% di 1200 →</span>
            <input type="text" data-correct-answer="288" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>15% di 600 →</span>
            <input type="text" data-correct-answer="90" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>6% di 850 →</span>
            <input type="text" data-correct-answer="51" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>48% di 1400 →</span>
            <input type="text" data-correct-answer="672" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3 md:col-span-2 justify-center">
            <span>7% di 1750 →</span>
            <input type="text" data-correct-answer="122,5" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>

      <!-- Esercizio 3 -->
      <div class="p-4 mb-6">
        <div class="mb-4">
          <p class="font-bold text-gray-700">
            <%= numero_esercizio_badge(3) %> 
            Calcola l'intero conoscendo il valore delle percentuali come nell'esempio.</p>
        </div>

        <div class="p-3 mb-4">
          <span>25 è il 5% di? → <span class="text-<%= @pagina.base_color %>-700">(25 : 5) × 100 = 5 × 100 = 500</span></span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="flex items-center gap-3">
            <span>180 è il 3% di? →</span>
            <input type="text" data-correct-answer="6000" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>680 è il 10% di? →</span>
            <input type="text" data-correct-answer="6800" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>1500 è il 25% di? →</span>
            <input type="text" data-correct-answer="6000" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>1350 è il 75% di? →</span>
            <input type="text" data-correct-answer="1800" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>810 è il 90% di? →</span>
            <input type="text" data-correct-answer="900" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>1280 è il 40% di? →</span>
            <input type="text" data-correct-answer="3200" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3 md:col-span-2 justify-center">
            <span>138 è il 6% di? →</span>
            <input type="text" data-correct-answer="2300" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>

      <!-- Esercizio 4 -->
      <div class="p-4 mb-6">
        <div class="flex items-start md:items-center mb-4">
            <p class="font-bold text-gray-700">
            <%= numero_esercizio_badge(4) %> 
            Trasforma le frazioni in percentuali. Segui l'esempio.
          </p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div class="p-3">
            <div class="flex items-center gap-2 flex-wrap">
              <%= render 'shared/frazione', num: 1, den: 2 %>
              <span>→ 1 : 2 = 0,5 → <strong>50%</strong></span>
            </div>
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 3, den: 5 %>
            <span>→</span>
            <input type="text" data-correct-answer="60%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 2, den: 8 %>
            <span>→</span>
            <input type="text" data-correct-answer="25%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 9, den: 12 %>
            <span>→</span>
            <input type="text" data-correct-answer="75%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 28, den: 40 %>
            <span>→</span>
            <input type="text" data-correct-answer="70%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 3, den: 6 %>
            <span>→</span>
            <input type="text" data-correct-answer="50%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 12, den: 15 %>
            <span>→</span>
            <input type="text" data-correct-answer="80%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 24, den: 50 %>
            <span>→</span>
            <input type="text" data-correct-answer="48%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 12, den: 80 %>
            <span>→</span>
            <input type="text" data-correct-answer="15%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>

      <!-- RISOLVI I PROBLEMI -->
      <div class="p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Esercizio 5 -->
          <div class="space-y-3">
            <p class="text-gray-700">
              <%= numero_esercizio_badge(5) %>
              Lucia ha un barattolo con 30 caramelle di tre gusti diversi: 12 caramelle sono alla fragola, 3 caramelle sono alla menta, le altre sono al limone.
            </p>
            <div class="ml-11 space-y-2">
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-gray-700">Quante sono le caramelle al limone?</span>
                <input type="text" data-correct-answer="15" class="w-16 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-gray-700">Quale percentuale rappresentano?</span>
                <input type="text" data-correct-answer="50%" class="w-16 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              </div>
            </div>
          </div>

          <!-- Esercizio 6 -->
          <div class="space-y-3">
            <p class="text-gray-700">
              <%= numero_esercizio_badge(6) %>
              In una scatola di 35 cioccolatini, 7 cioccolatini sono al caffè.
            </p>
            <div class="ml-11 space-y-2">
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-gray-700">Quale frazione rappresentano?</span>
                <%= render 'shared/frazione', num: nil, den: nil, num_answer: "1", den_answer: "5" %>
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-gray-700">Quale percentuale rappresentano?</span>
                <input type="text" data-correct-answer="20%" class="w-16 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
              </div>
            </div>
          </div>

          <!-- Esercizio 7 -->
          <div class="md:col-span-2 space-y-3">
            <p class="text-gray-700">
              <%= numero_esercizio_badge(7) %>
              Per i saldi di fine stagione, in un negozio di abbigliamento viene applicato uno sconto del 25% su tutta la merce: Pantaloni: € 120 • Gonne: € 95 • Camicie: € 80 • Maglioni: € 180.<br>
              Elena compra un paio di pantaloni, due camicie e un maglione.
            </p>
            <div class="ml-11 flex flex-wrap gap-4">
              <div class="flex items-center gap-2">
                <span class="text-gray-700">Quanto spende?</span>
                <input type="text" data-correct-answer="345" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                <span class="text-gray-700">€</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="text-gray-700">Quanto risparmia?</span>
                <input type="text" data-correct-answer="115" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
                <span class="text-gray-700">€</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
