<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <h2 class="inline-block px-3 py-1 bg-pink-600 text-white font-bold rounded mb-4">ESERCIZI</h2>

      <!-- Esercizio 1 - IMPARARE TUTTI -->
      <div class="p-4 mb-6">
        <div class="flex items-start gap-3 mb-4">
          <%= numero_esercizio_badge(1, colore: "cyan-700") %>
          <span class="inline-block px-2 py-1 bg-yellow-400 text-gray-800 font-bold text-sm rounded mr-2">IMPARARE TUTTI</span>
          <p class="font-bold text-gray-700">Trasforma le percentuali in frazioni decimali come nell'esempio.</p>
        </div>

        <div class="flex flex-wrap items-center gap-4 justify-center">
          <div class="p-3 bg-green-100 rounded-lg">
            <div class="flex items-center gap-2">
              <span>12% →</span>
              <%= render 'shared/frazione', num: 12, den: 100 %>
            </div>
          </div>

          <div class="flex items-center gap-2">
            <span>45% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "45" %>
          </div>

          <div class="flex items-center gap-2">
            <span>6% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "6" %>
          </div>

          <div class="flex items-center gap-2">
            <span>50% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "50" %>
          </div>

          <div class="flex items-center gap-2">
            <span>22% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "22" %>
          </div>

          <div class="flex items-center gap-2">
            <span>41% →</span>
            <%= render 'shared/frazione', num: nil, den: 100, num_answer: "41" %>
          </div>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div class="p-4 mb-6">
        <div class="flex items-start gap-3 mb-4">
          <%= numero_esercizio_badge(2, colore: "cyan-700") %>
          <p class="font-bold text-gray-700">Calcola il valore delle percentuali come nell'esempio.</p>
        </div>

        <div class="p-3 bg-green-100 rounded-lg mb-4">
          <span>3% di 150 → <span class="text-<%= @pagina.base_color %>-700">(150 : 100) × 3 = 1,5 × 3 = 4,5</span></span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="flex items-center gap-3">
            <span>18% di 350 →</span>
            <input type="text" data-correct-answer="63" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>50% di 2300 →</span>
            <input type="text" data-correct-answer="1150" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>24% di 1200 →</span>
            <input type="text" data-correct-answer="288" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>15% di 600 →</span>
            <input type="text" data-correct-answer="90" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>6% di 850 →</span>
            <input type="text" data-correct-answer="51" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>48% di 1400 →</span>
            <input type="text" data-correct-answer="672" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3 md:col-span-2 justify-center">
            <span>7% di 1750 →</span>
            <input type="text" data-correct-answer="122,5" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>

      <!-- Esercizio 3 -->
      <div class="p-4 mb-6">
        <div class="flex items-start gap-3 mb-4">
          <%= numero_esercizio_badge(3, colore: "cyan-700") %>
          <p class="font-bold text-gray-700">Calcola l'intero conoscendo il valore delle percentuali come nell'esempio.</p>
        </div>

        <div class="p-3 bg-green-100 rounded-lg mb-4">
          <span>25 è il 5% di? → <span class="text-<%= @pagina.base_color %>-700">(25 : 5) × 100 = 5 × 100 = 500</span></span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="flex items-center gap-3">
            <span>180 è il 3% di? →</span>
            <input type="text" data-correct-answer="6000" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>680 è il 10% di? →</span>
            <input type="text" data-correct-answer="6800" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>1500 è il 25% di? →</span>
            <input type="text" data-correct-answer="6000" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>1350 è il 75% di? →</span>
            <input type="text" data-correct-answer="1800" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>810 è il 90% di? →</span>
            <input type="text" data-correct-answer="900" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3">
            <span>1280 è il 40% di? →</span>
            <input type="text" data-correct-answer="3200" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
          <div class="flex items-center gap-3 md:col-span-2 justify-center">
            <span>138 è il 6% di? →</span>
            <input type="text" data-correct-answer="2300" class="w-24 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>

      <!-- Esercizio 4 -->
      <div class="p-4 mb-6">
        <div class="flex items-start gap-3 mb-4">
          <%= numero_esercizio_badge(4, colore: "cyan-700") %>
          <p class="font-bold text-gray-700">Trasforma le frazioni in percentuali. Segui l'esempio.</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div class="p-3 bg-green-100 rounded-lg">
            <div class="flex items-center gap-2 flex-wrap">
              <%= render 'shared/frazione', num: 1, den: 2 %>
              <span>→ 1 : 2 = 0,5 → <strong>50%</strong></span>
            </div>
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 3, den: 5 %>
            <span>→</span>
            <input type="text" data-correct-answer="60%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 2, den: 8 %>
            <span>→</span>
            <input type="text" data-correct-answer="25%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 9, den: 12 %>
            <span>→</span>
            <input type="text" data-correct-answer="75%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 28, den: 40 %>
            <span>→</span>
            <input type="text" data-correct-answer="70%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 3, den: 6 %>
            <span>→</span>
            <input type="text" data-correct-answer="50%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 12, den: 15 %>
            <span>→</span>
            <input type="text" data-correct-answer="80%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 24, den: 50 %>
            <span>→</span>
            <input type="text" data-correct-answer="48%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>

          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 12, den: 80 %>
            <span>→</span>
            <input type="text" data-correct-answer="15%" class="w-20 px-2 py-1 border-2 border-pink-400 rounded text-center font-bold bg-white">
          </div>
        </div>
      </div>

      <!-- RISOLVI I PROBLEMI -->
      <div class="p-4">
        <h3 class="font-bold text-pink-600 mb-4">RISOLVI I PROBLEMI</h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="p-4 bg-cyan-50 rounded-lg">
            <div class="flex items-start gap-3 mb-2">
              <%= numero_esercizio_badge(5, colore: "cyan-700") %>
            </div>
            <p class="text-gray-700 text-sm">Lucia ha un barattolo con 30 caramelle di tre gusti diversi: 12 caramelle sono alla fragola, 3 caramelle sono alla menta, le altre sono al limone. Quante sono le caramelle al limone? Quale percentuale dell'intero barattolo rappresentano le caramelle al limone?</p>
          </div>

          <div class="p-4 bg-cyan-50 rounded-lg">
            <div class="flex items-start gap-3 mb-2">
              <%= numero_esercizio_badge(7, colore: "cyan-700") %>
            </div>
            <p class="text-gray-700 text-sm">Per i saldi di fine stagione, in un negozio di abbigliamento viene applicato uno sconto del 25% su tutta la merce: Pantaloni: € 120 • Gonne: € 95 • Camicie: € 80 • Maglioni: € 180. Elena compra un paio di pantaloni, due camicie e un maglione. Quanto spende? Quanto risparmia?</p>
          </div>

          <div class="p-4 bg-cyan-50 rounded-lg md:col-span-2">
            <div class="flex items-start gap-3 mb-2">
              <%= numero_esercizio_badge(6, colore: "cyan-700") %>
            </div>
            <p class="text-gray-700 text-sm">In una scatola di 35 cioccolatini, 7 cioccolatini sono al caffè. Quale frazione rappresenta il numero dei cioccolatini al caffè rispetto al totale dei cioccolatini della scatola? Quale percentuale dell'intera scatola rappresentano i cioccolatini al caffè?</p>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
