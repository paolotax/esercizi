<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-pink-50 to-red-50 rounded-lg shadow-lg"
     data-controller="exercise-checker">

  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-pink-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">
          ORTOGRAFIA
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-pink-600">In biblioteca</h1>
      </div>
      <div class="flex-shrink-0 bg-red-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl">
        1
      </div>
    </div>
  </div>

  <!-- Exercise 1: Library vocabulary with illustrations -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">1</span>
      Osserva e completa i nomi nella biblioteca.
    </h2>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6">
      <div class="text-center">
        <div class="bg-pink-100 rounded-lg p-4 mb-2 min-h-16 flex items-center justify-center">
          <span class="text-2xl">ðŸ“š</span>
        </div>
        <input type="text" placeholder="l__bro" class="w-full border-b-2 border-pink-500 bg-transparent text-center focus:outline-none focus:border-pink-700 text-sm font-semibold" value="libro">
      </div>
      <div class="text-center">
        <div class="bg-pink-100 rounded-lg p-4 mb-2 min-h-16 flex items-center justify-center">
          <span class="text-2xl">ðŸ’¡</span>
        </div>
        <input type="text" placeholder="l__mpada" class="w-full border-b-2 border-pink-500 bg-transparent text-center focus:outline-none focus:border-pink-700 text-sm font-semibold" value="lampada">
      </div>
      <div class="text-center">
        <div class="bg-pink-100 rounded-lg p-4 mb-2 min-h-16 flex items-center justify-center">
          <span class="text-2xl">ðŸª‘</span>
        </div>
        <input type="text" placeholder="s__dia" class="w-full border-b-2 border-pink-500 bg-transparent text-center focus:outline-none focus:border-pink-700 text-sm font-semibold" value="sedia">
      </div>
      <div class="text-center">
        <div class="bg-pink-100 rounded-lg p-4 mb-2 min-h-16 flex items-center justify-center">
          <span class="text-2xl">ðŸªŸ</span>
        </div>
        <input type="text" placeholder="fin__stra" class="w-full border-b-2 border-pink-500 bg-transparent text-center focus:outline-none focus:border-pink-700 text-sm font-semibold" value="finestra">
      </div>
      <div class="text-center">
        <div class="bg-pink-100 rounded-lg p-4 mb-2 min-h-16 flex items-center justify-center">
          <span class="text-2xl">ðŸŽ¨</span>
        </div>
        <input type="text" placeholder="t__volo" class="w-full border-b-2 border-pink-500 bg-transparent text-center focus:outline-none focus:border-pink-700 text-sm font-semibold" value="tavolo">
      </div>
      <div class="text-center">
        <div class="bg-pink-100 rounded-lg p-4 mb-2 min-h-16 flex items-center justify-center">
          <span class="text-2xl">ðŸ“–</span>
        </div>
        <input type="text" placeholder="c__scino" class="w-full border-b-2 border-pink-500 bg-transparent text-center focus:outline-none focus:border-pink-700 text-sm font-semibold" value="cuscino">
      </div>
    </div>
  </div>

  <!-- Exercise 2: Syllable division -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">2</span>
      Cerchia le parole divise correttamente in sillabe.
    </h2>

    <div class="space-y-3" data-controller="multiple-choice">
      <div class="p-3 bg-pink-50 rounded-lg flex items-center justify-between">
        <span class="font-bold text-gray-800">SCALA:</span>
        <div class="flex gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="scala" class="w-4 h-4" value="sca/la">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">sca/la</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="scala" class="w-4 h-4" value="sc/ala">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">sc/ala</span>
          </label>
        </div>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex items-center justify-between">
        <span class="font-bold text-gray-800">LIBRO:</span>
        <div class="flex gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="libro" class="w-4 h-4" value="lib/ro">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">lib/ro</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="libro" class="w-4 h-4" value="li/bro">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">li/bro</span>
          </label>
        </div>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex items-center justify-between">
        <span class="font-bold text-gray-800">TAVOLO:</span>
        <div class="flex gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="tavolo" class="w-4 h-4" value="tav/o/lo">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">tav/o/lo</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="tavolo" class="w-4 h-4" value="ta/vo/lo">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">ta/vo/lo</span>
          </label>
        </div>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex items-center justify-between">
        <span class="font-bold text-gray-800">CARRELLO:</span>
        <div class="flex gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="carrello" class="w-4 h-4" value="car/rel/lo">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">car/rel/lo</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="carrello" class="w-4 h-4" value="carr/el/lo">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">carr/el/lo</span>
          </label>
        </div>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex items-center justify-between">
        <span class="font-bold text-gray-800">LAMPADA:</span>
        <div class="flex gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="lampada" class="w-4 h-4" value="la/mpa/da">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">la/mpa/da</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="lampada" class="w-4 h-4" value="lam/pa/da">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">lam/pa/da</span>
          </label>
        </div>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex items-center justify-between">
        <span class="font-bold text-gray-800">FINESTRA:</span>
        <div class="flex gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="finestra" class="w-4 h-4" value="fi/ne/stra">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">fi/ne/stra</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="finestra" class="w-4 h-4" value="fi/nes/tra">
            <span class="hover:bg-pink-100 px-2 py-1 rounded">fi/nes/tra</span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Exercise 3: Alphabetical order -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">3</span>
      Quali parole sono in ordine alfabetico? Indica con una X.
    </h2>

    <div class="space-y-3">
      <label class="flex items-center gap-3 p-3 bg-pink-50 rounded-lg cursor-pointer hover:bg-pink-100 transition">
        <input type="checkbox" class="w-5 h-5 text-pink-600">
        <span class="text-base md:text-lg font-semibold">finestra - bibliotecaria - carrello - cuscino</span>
      </label>
      <label class="flex items-center gap-3 p-3 bg-pink-50 rounded-lg cursor-pointer hover:bg-pink-100 transition">
        <input type="checkbox" class="w-5 h-5 text-pink-600" checked>
        <span class="text-base md:text-lg font-semibold">bibliotecaria - carrello - cuscino - finestra</span>
      </label>
      <label class="flex items-center gap-3 p-3 bg-pink-50 rounded-lg cursor-pointer hover:bg-pink-100 transition">
        <input type="checkbox" class="w-5 h-5 text-pink-600">
        <span class="text-base md:text-lg font-semibold">lampada - sedia - tavolo - tappeto</span>
      </label>
      <label class="flex items-center gap-3 p-3 bg-pink-50 rounded-lg cursor-pointer hover:bg-pink-100 transition">
        <input type="checkbox" class="w-5 h-5 text-pink-600" checked>
        <span class="text-base md:text-lg font-semibold">lampada - sedia - tappeto - tavolo</span>
      </label>
    </div>
  </div>

  <!-- Exercise 4: CU and QU completion -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">4</span>
      Completa con <span class="underline">CU</span> o <span class="underline">QU</span>.
    </h2>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-4" data-controller="fill-blanks">
      <% completions = [
        {text: 'cuscino', answer: 'cu'},
        {text: 'quaderno', answer: 'qu'},
        {text: 'cuore', answer: 'cu'},
        {text: 'culla', answer: 'cu'},
        {text: 'scuola', answer: 'cu'},
        {text: 'aquilone', answer: 'qu'}
      ] %>

      <% completions.each do |item| %>
        <div class="p-2 bg-pink-50 rounded text-center">
          <p class="text-sm md:text-base font-bold text-gray-800 mb-2"><%= item[:text] %></p>
          <input type="text"
                 class="border-b-3 border-pink-500 bg-transparent w-12 text-center focus:outline-none focus:border-pink-700"
                 data-fill-blanks-target="input"
                 data-answer="<%= item[:answer] %>"
                 data-correct-answer="<%= item[:answer] %>"
                 maxlength="2">
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls', color: 'pink' %>
</div>
