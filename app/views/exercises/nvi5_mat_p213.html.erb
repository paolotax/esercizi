<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria -->
    <div class="p-4 bg-custom-blue-light rounded-2xl">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="p-3 bg-white border-2 border-cyan-400 rounded">
          <p class="font-bold text-cyan-600 mb-2">Dalla frazione decimale al numero decimale</p>
          <p class="text-gray-700 flex items-center gap-2">
            <%= render 'shared/frazione', num: 4, den: 10 %> = 4 : 10 = 0,<span class="font-bold">4</span>
          </p>
        </div>
        <div class="p-3 bg-white border-2 border-cyan-400 rounded">
          <p class="font-bold text-cyan-600 mb-2">Dal numero decimale alla frazione decimale</p>
          <p class="text-gray-700 flex items-center gap-2">
            2,<span class="font-bold">45</span> = <%= render 'shared/frazione', num: 245, den: 100 %>
          </p>
        </div>
      </div>
    </div>

    <!-- Esercizio 1: IMPARARE TUTTI -->
    <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
      <p class="font-bold text-gray-700 mb-4">
        <%= imparare_tutti_badge(1) %>
        Scrivi sotto forma di numero decimale o di frazione decimale.
      </p>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <!-- Riga 1 -->
        <div class="flex items-center gap-2">
          <%= render 'shared/frazione', num: 4, den: 100 %> =
          <span class="font-bold text-cyan-600">0,04</span>
        </div>
        <div class="flex items-center gap-2">
          5,7 = <%= render 'shared/frazione', num: 57, den: nil, den_answer: "10" %>
        </div>
        <div class="flex items-center gap-2">
          <%= render 'shared/frazione', num: 162, den: 10 %> =
          <input type="text" data-correct-answer="16,2" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <div class="flex items-center gap-2">
          <%= render 'shared/frazione', num: 275, den: 100 %> =
          <input type="text" data-correct-answer="2,75" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>

        <!-- Riga 2 -->
        <div class="flex items-center gap-2">
          0,359 = <%= render 'shared/frazione', num: nil, den: nil, num_answer: "359", den_answer: "1000" %>
        </div>
        <div class="flex items-center gap-2">
          <%= render 'shared/frazione', num: 23, den: 1000 %> =
          <input type="text" data-correct-answer="0,023" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <div class="flex items-center gap-2">
          4,86 = <%= render 'shared/frazione', num: nil, den: nil, num_answer: "486", den_answer: "100" %>
        </div>
        <div class="flex items-center gap-2">
          2,091 = <%= render 'shared/frazione', num: nil, den: nil, num_answer: "2091", den_answer: "1000" %>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Trasforma le frazioni date in frazioni decimali equivalenti.
      </p>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div class="flex flex-col items-center gap-2">
          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 8, den: 25 %> =
            <%= render 'shared/frazione', num: nil, den: nil, num_answer: "32", den_answer: "100" %>
          </div>
          <p class="text-gray-500 italic">(× 4)</p>
        </div>
        <div class="flex flex-col items-center gap-2">
          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 9, den: 50 %> =
            <%= render 'shared/frazione', num: nil, den: nil, num_answer: "18", den_answer: "100" %>
          </div>
          <p class="text-gray-500 italic">(× 2)</p>
        </div>
        <div class="flex flex-col items-center gap-2">
          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 3, den: 5 %> =
            <%= render 'shared/frazione', num: nil, den: nil, num_answer: "6", den_answer: "10" %>
          </div>
          <p class="text-gray-500 italic">(× 2)</p>
        </div>
        <div class="flex flex-col items-center gap-2">
          <div class="flex items-center gap-2">
            <%= render 'shared/frazione', num: 12, den: 20 %> =
            <%= render 'shared/frazione', num: nil, den: nil, num_answer: "60", den_answer: "100" %>
          </div>
          <p class="text-gray-500 italic">(× 5)</p>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Trasforma le frazioni in numeri decimali e poi in frazioni decimali. Segui l'esempio.
      </p>

      <div class="space-y-4">
        <!-- Esempio -->
        <div class="flex items-center gap-2 flex-wrap bg-custom-blue-light p-2 rounded">
          <%= render 'shared/frazione', num: 6, den: 12 %> =
          <span class="font-bold text-cyan-600">6</span> :
          <span class="font-bold text-cyan-600">12</span> =
          <span class="font-bold text-cyan-600">0,5</span> =
          <%= render 'shared/frazione', num: 5, den: 10 %>
        </div>

        <!-- 7/56 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 7, den: 56 %> =
          <input type="text" data-correct-answer="7" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> :
          <input type="text" data-correct-answer="56" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <input type="text" data-correct-answer="0,125" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <%= render 'shared/frazione', num: nil, den: nil, num_answer: "125", den_answer: "1000" %>
        </div>

        <!-- 9/60 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 9, den: 60 %> =
          <input type="text" data-correct-answer="9" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> :
          <input type="text" data-correct-answer="60" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <input type="text" data-correct-answer="0,15" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <%= render 'shared/frazione', num: nil, den: nil, num_answer: "15", den_answer: "100" %>
        </div>

        <!-- 8/32 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 8, den: 32 %> =
          <input type="text" data-correct-answer="8" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> :
          <input type="text" data-correct-answer="32" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <input type="text" data-correct-answer="0,25" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <%= render 'shared/frazione', num: nil, den: nil, num_answer: "25", den_answer: "100" %>
        </div>

        <!-- 5/25 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 5, den: 25 %> =
          <input type="text" data-correct-answer="5" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> :
          <input type="text" data-correct-answer="25" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <input type="text" data-correct-answer="0,2" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <%= render 'shared/frazione', num: nil, den: nil, num_answer: "2", den_answer: "10" %>
        </div>

        <!-- 18/30 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 18, den: 30 %> =
          <input type="text" data-correct-answer="18" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> :
          <input type="text" data-correct-answer="30" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <input type="text" data-correct-answer="0,6" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> =
          <%= render 'shared/frazione', num: nil, den: nil, num_answer: "6", den_answer: "10" %>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
