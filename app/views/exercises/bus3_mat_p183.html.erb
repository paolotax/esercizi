<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white font-mono text-base lg:text-lg xl:text-xl"
     data-controller="exercise-checker page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p183/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-gray-700">
        <strong>Scrivi l'unità di misura di peso adeguata, come nell'esempio.</strong>
      </p>
    </div>

    <div class="grid grid-cols-4 gap-4 text-center">
      <div>
        <p class="mb-2">formica</p>
        <p>5 <span class="text-cyan-600 font-bold">mg</span></p>
      </div>
      <div>
        <p class="mb-2">gatto</p>
        <p>4 <input type="text" data-fill-blanks-target="input" data-correct-answer="kg"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
      <div>
        <p class="mb-2">mela</p>
        <p>120 <input type="text" data-fill-blanks-target="input" data-correct-answer="g"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
      <div>
        <p class="mb-2">pallone</p>
        <p>450 <input type="text" data-fill-blanks-target="input" data-correct-answer="g"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
      <div>
        <p class="mb-2">hamburger</p>
        <p>1 <input type="text" data-fill-blanks-target="input" data-correct-answer="hg"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
      <div>
        <p class="mb-2">maglione</p>
        <p>200 <input type="text" data-fill-blanks-target="input" data-correct-answer="g"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
      <div>
        <p class="mb-2">mucca</p>
        <p>700 <input type="text" data-fill-blanks-target="input" data-correct-answer="kg"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
      <div>
        <p class="mb-2">bicicletta</p>
        <p>10 <input type="text" data-fill-blanks-target="input" data-correct-answer="kg"
               class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      </div>
    </div>
  </div>

  <!-- Esercizio 2 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-gray-700">
        <strong>Scrivi il valore della cifra in <span class="text-red-500">rosso</span>, come nell'esempio.</strong>
      </p>
    </div>

    <div class="grid grid-cols-3 gap-4">
      <p>12<span class="text-red-500 font-bold">6</span>5 mm <span class="text-red-500">→</span> <span class="text-cyan-600 font-bold">6 cm</span></p>
      <p>8 0<span class="text-red-500 font-bold">0</span>0 cm <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="0 dm"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p>8<span class="text-red-500 font-bold">9</span> dag <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="9 dag"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p>3<span class="text-red-500 font-bold">2</span>7 ℓ <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="2 daℓ"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p>8,<span class="text-red-500 font-bold">3</span>2 dℓ <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="3 cℓ"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p><span class="text-red-500 font-bold">5</span>2,9 dg <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="5 g"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p><span class="text-red-500 font-bold">9</span>8,3 g <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="9 dag"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p><span class="text-red-500 font-bold">9</span>8 hm <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="9 km"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p><span class="text-red-500 font-bold">1</span>27 mℓ <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="1 cℓ"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
    </div>
  </div>

  <!-- Esercizio 3 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        3
      </div>
      <p class="text-gray-700">
        <strong>Scomponi le misure, come nell'esempio.</strong>
      </p>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <p>92,6 dag <span class="text-red-500">→</span> <span class="text-cyan-600 font-bold">9 hg, 2 dag, 6 g</span></p>
      <p>7 003 dm <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="7 km, 3 dm"
             class="w-40 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p>137 ℓ <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="1 hℓ, 3 daℓ, 7 ℓ"
             class="w-48 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
      <p>7 803 dg <span class="text-red-500">→</span> <input type="text" data-fill-blanks-target="input" data-correct-answer="7 hg, 8 dag, 3 dg"
             class="w-48 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white"></p>
    </div>
  </div>

  <!-- Esercizio 4 -->
  <div class="mb-10" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        4
      </div>
      <p class="text-gray-700">
        <strong>Esegui le equivalenze.</strong>
      </p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <p>10 hg = <input type="text" data-fill-blanks-target="input" data-correct-answer="1000"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> g</p>
      <p>7 kg = <input type="text" data-fill-blanks-target="input" data-correct-answer="70"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> hg</p>
      <p>170 g = <input type="text" data-fill-blanks-target="input" data-correct-answer="17"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> dag</p>
      <p>150 m = <input type="text" data-fill-blanks-target="input" data-correct-answer="1500"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> dm</p>
      <p>1 km = <input type="text" data-fill-blanks-target="input" data-correct-answer="1000"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> m</p>
      <p>2 hℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="200"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> ℓ</p>
      <p>600 mℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="6"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> dℓ</p>
      <p>130 ℓ = <input type="text" data-fill-blanks-target="input" data-correct-answer="13"
             class="w-20 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center bg-white" inputmode="numeric"> daℓ</p>
    </div>
  </div>

  <!-- Esercizio 5 -->
  <div class="mb-10">
    <div class="flex items-start gap-3 mb-4">
      <div class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        5
      </div>
      <p class="text-gray-700">
        <strong>Colora allo stesso modo le coppie di cartellini che contengono misure equivalenti.</strong>
      </p>
    </div>

    <div class="grid grid-cols-6 gap-2 text-center text-sm mb-4">
      <div class="border border-gray-400 p-2">5 000 kg</div>
      <div class="border border-gray-400 p-2">72 dag</div>
      <div class="border border-gray-400 p-2">360 hg</div>
      <div class="border border-gray-400 p-2">5 dg</div>
      <div class="border border-gray-400 p-2">720 dag</div>
      <div class="border border-gray-400 p-2">5 Mg</div>
    </div>
    <div class="grid grid-cols-6 gap-2 text-center text-sm">
      <div class="border border-gray-400 p-2">50 hg</div>
      <div class="border border-gray-400 p-2">36 kg</div>
      <div class="border border-gray-400 p-2">50 cg</div>
      <div class="border border-gray-400 p-2">72 hg</div>
      <div class="border border-gray-400 p-2">500 dag</div>
      <div class="border border-gray-400 p-2">720 g</div>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls' %>
</div>
