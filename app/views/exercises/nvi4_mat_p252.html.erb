<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Box formule trapezio -->
    <div class="p-4 bg-custom-blue dark:bg-cyan-900 rounded-2xl">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <!-- Trapezio scaleno -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 dark:text-cyan-400 mb-2">Trapezio scaleno e rettangolo</p>
          <p class="text-gray-700 dark:text-gray-200">P = B + b + <span class="italic">ℓ</span><sub>1</sub> + <span class="italic">ℓ</span><sub>2</sub></p>
        </div>
        <!-- Trapezio isoscele -->
        <div class="text-center">
          <p class="font-bold text-cyan-600 dark:text-cyan-400 mb-2">Trapezio isoscele</p>
          <p class="text-gray-700 dark:text-gray-200">P = B + b + (<span class="italic">ℓ</span> × 2)</p>
        </div>
      </div>

      <!-- Formule triangoli -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-cyan-300 dark:border-cyan-700">
        <div class="text-center">
          <p class="font-bold text-cyan-600 dark:text-cyan-400 mb-2">Triangolo equilatero</p>
          <p class="text-gray-700 dark:text-gray-200">P = <span class="italic">ℓ</span> × 3</p>
        </div>
        <div class="text-center">
          <p class="font-bold text-cyan-600 dark:text-cyan-400 mb-2">Triangolo isoscele</p>
          <p class="text-gray-700 dark:text-gray-200">P = <span class="italic">ℓ</span><sub>1</sub> + (<span class="italic">ℓ</span><sub>2</sub> × 2)</p>
        </div>
        <div class="text-center">
          <p class="font-bold text-cyan-600 dark:text-cyan-400 mb-2">Triangolo scaleno</p>
          <p class="text-gray-700 dark:text-gray-200">P = <span class="italic">ℓ</span><sub>1</sub> + <span class="italic">ℓ</span><sub>2</sub> + <span class="italic">ℓ</span><sub>3</sub></p>
        </div>
      </div>
    </div>

    <!-- Esercizio 1 IMPARARE TUTTI - Trapezi -->
    <div class="p-5 bg-white dark:bg-gray-800 rounded-2xl border-3 border-yellow-400 dark:border-yellow-500 space-y-4">
      <p class="font-bold text-gray-700 dark:text-gray-200">
        <%= imparare_tutti_badge(1) %>
        Scrivi il nome dei trapezi, poi misura i lati e calcola il perimetro.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Trapezio 1 -->
        <div class="space-y-2">
          <div class="flex justify-center">
            <%= image_tag "nvi4_mat/p252/p252_02.jpg", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1", alt: "Trapezio ABCD" %>
          </div>
          <div class="space-y-1 text-gray-700 dark:text-gray-200">
            <div class="flex items-center gap-1">
              <span>trapezio</span>
              <input type="text" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
            </div>
            <div class="flex gap-2">
              <span>AB =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>BC =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex gap-2">
              <span>CD =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>DA =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span>P =</span>
              <input type="text" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
            </div>
          </div>
        </div>

        <!-- Trapezio 2 -->
        <div class="space-y-2">
          <div class="flex justify-center">
            <%= image_tag "nvi4_mat/p252/p252_03.jpg", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1", alt: "Trapezio EFGH" %>
          </div>
          <div class="space-y-1 text-gray-700 dark:text-gray-200">
            <div class="flex items-center gap-1">
              <span>trapezio</span>
              <input type="text" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
            </div>
            <div class="flex gap-2">
              <span>EF =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>FG =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex gap-2">
              <span>GH =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>HE =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span>P =</span>
              <input type="text" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
            </div>
          </div>
        </div>

        <!-- Trapezio 3 -->
        <div class="space-y-2">
          <div class="flex justify-center">
            <%= image_tag "nvi4_mat/p252/p252_04.jpg", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1", alt: "Trapezio ILMN" %>
          </div>
          <div class="space-y-1 text-gray-700 dark:text-gray-200">
            <div class="flex items-center gap-1">
              <span>trapezio</span>
              <input type="text" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
            </div>
            <div class="flex gap-2">
              <span>IL =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>LM =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex gap-2">
              <span>MN =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>NI =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span>P =</span>
              <input type="text" class="flex-1 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 IMPARARE TUTTI - Triangoli -->
    <div class="p-5 bg-white dark:bg-gray-800 rounded-2xl border-3 border-yellow-400 dark:border-yellow-500 space-y-4">
      <p class="font-bold text-gray-700 dark:text-gray-200">
        <%= imparare_tutti_badge(2) %>
        Misura con la riga la lunghezza dei lati dei seguenti triangoli e calcola il perimetro.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Triangolo scaleno -->
        <div class="space-y-2">
          <div class="flex justify-center">
            <%= image_tag "nvi4_mat/p252/output-1715932804252_141_918_350_83.png", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1", alt: "Triangolo scaleno" %>
          </div>
          <div class="space-y-1 text-gray-700 dark:text-gray-200">
            <div class="flex flex-wrap gap-2">
              <span class="italic">ℓ</span><sub>1</sub><span>=</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>cm</span>
              <span class="italic">ℓ</span><sub>2</sub><span>=</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>cm</span>
              <span class="italic">ℓ</span><sub>3</sub><span>=</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>cm</span>
            </div>
            <div class="flex items-center gap-1">
              <span>P =</span>
              <input type="text" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
              <span>cm</span>
            </div>
          </div>
        </div>

        <!-- Triangolo equilatero -->
        <div class="space-y-2">
          <div class="flex justify-center">
            <%= image_tag "nvi4_mat/p252/output-1715932804252_538_880_138_119.png", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1", alt: "Triangolo equilatero" %>
          </div>
          <div class="space-y-1 text-gray-700 dark:text-gray-200">
            <div class="flex items-center gap-1">
              <span class="italic">ℓ</span><span>=</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>cm</span>
            </div>
            <div class="flex items-center gap-1">
              <span>P =</span>
              <input type="text" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
              <span>cm</span>
            </div>
          </div>
        </div>

        <!-- Triangolo isoscele -->
        <div class="space-y-2">
          <div class="flex justify-center">
            <%= image_tag "nvi4_mat/p252/output-1715932804252_784_857_113_143.png", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-1", alt: "Triangolo isoscele" %>
          </div>
          <div class="space-y-1 text-gray-700 dark:text-gray-200">
            <div class="flex flex-wrap gap-2">
              <span class="italic">ℓ</span><sub>1</sub><span>=</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>cm</span>
              <span class="italic">ℓ</span><sub>2</sub><span>=</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span>cm</span>
            </div>
            <div class="flex items-center gap-1">
              <span>P =</span>
              <input type="text" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 font-bold bg-transparent dark:text-white" placeholder="...">
              <span>cm</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div class="space-y-3">
      <p class="font-bold text-gray-700 dark:text-gray-200">
        <%= numero_esercizio_badge(3) %>
        Calcola sul quaderno.
      </p>

      <div class="p-3 bg-custom-blue-light dark:bg-cyan-900 rounded-lg">
        <p class="text-gray-700 dark:text-gray-200">
          In un trapezio isoscele la base maggiore misura 12,8 m, la base minore 8,4 m e il lato obliquo 45 dm. Calcola il perimetro.
        </p>
      </div>

      <div class="flex items-center gap-2">
        <span class="text-gray-700 dark:text-gray-200 font-bold">P =</span>
        <input type="text" data-correct-answer="30,2 m" class="w-32 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
