<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white font-mono"
     data-controller="exercise-checker fill-blanks auto-advance page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p079/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1: Giorgio aiuta la nonna - box azzurro -->
  <div class="bg-[#C7EAFB] p-4 md:p-6 -ml-3 md:-ml-0 -mr-3 md:mr-0 mb-8">
    <div class="flex items-center gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-gray-700">
        <strong>Giorgio aiuta la nonna a riporre 12 tazze nella credenza formando pile uguali.</strong> Osserva e completa.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
      <div class="space-y-4">
        <p class="text-gray-700">
          Le 12 tazze sono divise in
          <input type="text" data-fill-blanks-target="input" data-correct-answer="3"
                 class="w-12 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-white"
                 maxlength="1" inputmode="numeric">
          gruppi uguali.
        </p>

        <p class="text-gray-700">
          Ogni gruppo è
          <span class="inline-flex flex-col items-center mx-1">
            <span class="border-b border-gray-800 px-1">1</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="3"
                   class="w-8 text-center font-bold bg-transparent"
                   maxlength="1" inputmode="numeric">
          </span>
          delle tazze.
        </p>

        <p class="text-gray-700">
          12 : 3 =
          <input type="text" data-fill-blanks-target="input" data-correct-answer="4"
                 class="w-12 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-white"
                 maxlength="1" inputmode="numeric">
        </p>

        <p class="text-gray-700">
          Ogni gruppo contiene
          <input type="text" data-fill-blanks-target="input" data-correct-answer="4"
                 class="w-12 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-white"
                 maxlength="1" inputmode="numeric">
          tazze.
        </p>

        <div class="mt-4 p-3 bg-white/50">
          <p class="text-gray-700">
            L'intero (12 tazze) è stato frazionato in 3 parti <span class="text-cyan-600 font-bold">equinumerose</span>,
            cioè formate dalla <span class="text-cyan-600 font-bold">stessa quantità</span> (4 tazze).
          </p>
          <p class="text-gray-700 mt-2">Ogni parte è un terzo dell'intero.</p>
        </div>
      </div>

      <div class="flex justify-center">
        <%= image_tag "bus3_mat/p079/p79_01.jpg", alt: "12 tazze divise in 3 gruppi" %>
      </div>
    </div>

    <!-- Box regola -->
    <div class="mt-6 p-4 bg-[#FFF9E6] border-l-4 border-yellow-400">
      <p class="text-gray-700 font-bold">
        Ogni volta che frazioni <span class="text-cyan-600 font-bold">un intero che contiene più elementi</span>, tutte le parti devono contenere lo stesso numero di elementi, cioè essere <span class="text-cyan-600 font-bold">equinumerose</span>.
      </p>
    </div>
  </div>

  <!-- Esercizio 2: Osserva e completa (teiere) -->
  <div class="p-4 md:p-6 mb-8">
    <div class="flex items-center gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-gray-700"><strong>Osserva e completa.</strong></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="space-y-6">
        <div>
          <p class="text-gray-700 mb-3"><span class="text-red-500 font-bold">•</span> Da quante teiere è formato l'intero?</p>
          <div class="flex gap-4">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="teiere_intero" value="2" data-correct-answer="false" class="w-5 h-5">
              <span>2</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="teiere_intero" value="4" data-correct-answer="false" class="w-5 h-5">
              <span>4</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="teiere_intero" value="6" data-correct-answer="true" class="w-5 h-5">
              <span>6</span>
            </label>
          </div>
        </div>

        <div>
          <p class="text-gray-700 mb-3"><span class="text-red-500 font-bold">•</span> Quale frazione è un gruppo di 2 teiere?</p>
          <div class="flex gap-4">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="frazione_teiere" value="1/6" data-correct-answer="false" class="w-5 h-5">
              <span class="inline-flex flex-col items-center"><span class="border-b border-gray-800 px-1">1</span><span>6</span></span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="frazione_teiere" value="1/3" data-correct-answer="true" class="w-5 h-5">
              <span class="inline-flex flex-col items-center"><span class="border-b border-gray-800 px-1">1</span><span>3</span></span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="frazione_teiere" value="1/2" data-correct-answer="false" class="w-5 h-5">
              <span class="inline-flex flex-col items-center"><span class="border-b border-gray-800 px-1">1</span><span>2</span></span>
            </label>
          </div>
        </div>

        <div class="flex gap-8 mt-4">
          <div class="text-center">
            <span class="inline-flex flex-col items-center">
              <span class="border-b border-gray-800 px-2">1</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="3"
                     class="w-8 text-center font-bold bg-transparent" maxlength="1" inputmode="numeric">
            </span>
          </div>
          <div class="text-center">
            <span class="inline-flex flex-col items-center">
              <span class="border-b border-gray-800 px-2">1</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="3"
                     class="w-8 text-center font-bold bg-transparent" maxlength="1" inputmode="numeric">
            </span>
          </div>
          <div class="text-center">
            <span class="inline-flex flex-col items-center">
              <span class="border-b border-gray-800 px-2">1</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="3"
                     class="w-8 text-center font-bold bg-transparent" maxlength="1" inputmode="numeric">
            </span>
          </div>
        </div>
      </div>

      <div>
        <%= image_tag "bus3_mat/p079/p79_03.jpg", alt: "6 teiere colorate", style: "width: 100%; max-width: 120%; height: auto;" %>
      </div>
    </div>
  </div>

  <!-- Esercizio 3: Dividi 10 cucchiaini -->
  <div class="p-4 md:p-6 mb-8">
    <div class="flex items-center gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        3
      </div>
      <p class="text-gray-700"><strong>Dividi 10 cucchiaini in 5 gruppi uguali. Poi completa.</strong></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="space-y-4">
        <p class="text-gray-700">
          10 : 5 =
          <input type="text" data-fill-blanks-target="input" data-correct-answer="2"
                 class="w-12 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center font-bold"
                 maxlength="1" inputmode="numeric">
        </p>

        <div class="space-y-3 text-gray-700">
          <p>
            <span class="text-red-500 font-bold">•</span> Quanti cucchiaini in ogni gruppo?
            <input type="text" data-fill-blanks-target="input" data-correct-answer="2"
                   class="w-12 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center font-bold"
                   maxlength="1" inputmode="numeric">
          </p>
          <p>
            <span class="text-red-500 font-bold">•</span> Quanti gruppi equinumerosi hai formato?
            <input type="text" data-fill-blanks-target="input" data-correct-answer="5"
                   class="w-12 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center font-bold"
                   maxlength="1" inputmode="numeric">
          </p>
          <p>
            <span class="text-red-500 font-bold">•</span> Quale frazione corrisponde a ogni gruppo?
            <span class="inline-flex flex-col items-center mx-1">
              <span class="border-b border-gray-800 px-1">1</span>
              <input type="text" data-fill-blanks-target="input" data-correct-answer="5"
                     class="w-8 text-center font-bold bg-transparent" maxlength="1" inputmode="numeric">
            </span>
          </p>
        </div>
      </div>

      <div>
        <%= image_tag "bus3_mat/p079/output-1743504902079_615_1023_369_109.png", alt: "10 cucchiaini colorati", style: "width: 100%; max-width: 120%; height: auto;" %>
      </div>
    </div>
  </div>

  <!-- Quaderno link allineato a destra -->
  <div class="p-4 mb-8 text-right">
    <span class="text-gray-600">Quaderno →</span> <%= link_to "p. 159", pagina_path("bus3_mat_p159"), class: "text-cyan-600 font-bold hover:underline" %> - <%= link_to "160", pagina_path("bus3_mat_p160"), class: "text-cyan-600 font-bold hover:underline" %>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls', color: 'blue' %>
</div>
