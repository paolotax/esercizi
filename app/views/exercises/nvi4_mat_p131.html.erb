<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Immagine poligoni -->
    <div class="flex justify-center">
      <%= image_tag "nvi4_mat/p131/p131_01.jpg", class: "max-w-full h-auto dark:bg-white dark:rounded-lg dark:p-2", alt: "Poligoni A, B, C, D, E, F su griglia" %>
    </div>

    <!-- Istruzioni e Tabella -->
    <div class="flex gap-4">
      <div class="flex-1 text-gray-700 dark:text-gray-200 space-y-2">
        <p>• Misura il contorno dei poligoni (<span class="font-bold">perimetro</span>) usando come unità di misura il lato del quadretto e riporta le misure nella tabella.</p>
        <p>• Misura la superficie dei poligoni (<span class="font-bold">area</span>) usando come unità di misura il quadretto □ e riporta le misure nella tabella.</p>
      </div>

      <!-- Tabella misure -->
      <div class="shrink-0">
        <table class="border-collapse">
          <thead>
            <tr class="bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/30">
              <th class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-gray-700 dark:text-gray-200">FIGURA</th>
              <th class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-gray-700 dark:text-gray-200">PERIMETRO IN <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">—</span></th>
              <th class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-gray-700 dark:text-gray-200">AREA IN □</th>
            </tr>
          </thead>
          <tbody>
            <% [
              ['A', '12', '5'],
              ['B', '12', '9'],
              ['C', '14', '12'],
              ['D', '16', '12'],
              ['E', '16', '16'],
              ['F', '16', '16']
            ].each do |row| %>
              <tr>
                <td class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-center font-bold text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800"><%= row[0] %></td>
                <td class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-center bg-white dark:bg-gray-800">
                  <input type="text" data-correct-answer="<%= row[1] %>" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
                </td>
                <td class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-center bg-white dark:bg-gray-800">
                  <input type="text" data-correct-answer="<%= row[2] %>" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <p class="font-bold text-gray-700 dark:text-gray-200">• Ora confronta le coppie di figure e rispondi.</p>

    <!-- Sezione A e B - Isoperimetriche -->
    <div class="flex gap-4">
      <div class="w-2/3 space-y-3">
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>I poligoni A e B hanno la <span class="font-bold">stessa forma</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="ab_forma" value="si" data-correct-answer="no" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="ab_forma" value="no" data-correct-answer="no" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>Hanno lo <span class="font-bold">stesso perimetro</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="ab_perimetro" value="si" data-correct-answer="si" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="ab_perimetro" value="no" data-correct-answer="si" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>Hanno la <span class="font-bold">stessa area</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="ab_area" value="si" data-correct-answer="no" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="ab_area" value="no" data-correct-answer="no" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <p class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">I poligoni A e B sono isoperimetrici.</p>
      </div>
      <div class="w-1/3 p-3 bg-pink-light dark:bg-pink-900/40 rounded-2xl h-fit">
        <p class="text-gray-700 dark:text-gray-200">
          Le <span class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">figure isoperimetriche</span> hanno lo <span class="font-bold">stesso perimetro</span>,<br>ma possono non avere la stessa forma e la stessa area.
        </p>
      </div>
    </div>

    <!-- Sezione C e D - Equiestese -->
    <div class="flex gap-4">
      <div class="w-2/3 space-y-3">
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>I poligoni C e D hanno la <span class="font-bold">stessa forma</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="cd_forma" value="si" data-correct-answer="no" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="cd_forma" value="no" data-correct-answer="no" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>Hanno lo <span class="font-bold">stesso perimetro</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="cd_perimetro" value="si" data-correct-answer="no" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="cd_perimetro" value="no" data-correct-answer="no" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>Hanno la <span class="font-bold">stessa area</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="cd_area" value="si" data-correct-answer="si" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="cd_area" value="no" data-correct-answer="si" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <p class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">I poligoni C e D sono equiestesi.</p>
      </div>
      <div class="w-1/3 p-3 bg-pink-light dark:bg-pink-900/40 rounded-2xl h-fit">
        <p class="text-gray-700 dark:text-gray-200">
          Le <span class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">figure equiestese</span> hanno la <span class="font-bold">stessa superficie</span>,<br>ma possono non avere la stessa forma e lo stesso perimetro.
        </p>
      </div>
    </div>

    <!-- Sezione E e F - Congruenti -->
    <div class="flex gap-4">
      <div class="w-2/3 space-y-3">
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>I poligoni E ed F hanno la <span class="font-bold">stessa forma</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="ef_forma" value="si" data-correct-answer="si" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="ef_forma" value="no" data-correct-answer="si" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>Hanno lo <span class="font-bold">stesso perimetro</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="ef_perimetro" value="si" data-correct-answer="si" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="ef_perimetro" value="no" data-correct-answer="si" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <div class="flex items-center gap-4 text-gray-700 dark:text-gray-200">
          <span>Hanno la <span class="font-bold">stessa area</span>?</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-1">
              <input type="radio" name="ef_area" value="si" data-correct-answer="si" class="form-radio">
              <span>Sì</span>
            </label>
            <label class="flex items-center gap-1">
              <input type="radio" name="ef_area" value="no" data-correct-answer="si" class="form-radio">
              <span>No</span>
            </label>
          </div>
        </div>
        <p class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">I poligoni E ed F sono congruenti.</p>
      </div>
      <div class="w-1/3 p-3 bg-pink-light dark:bg-pink-900/40 rounded-2xl h-fit">
        <p class="text-gray-700 dark:text-gray-200">
          Le <span class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400">figure congruenti</span> hanno la <span class="font-bold">stessa forma</span>,<br>la <span class="font-bold">stessa area</span> e lo <span class="font-bold">stesso perimetro</span>.<br>
          Se sovrapposte l'una all'altra coincidono esattamente,<br>quindi sono equiestese e isoperimetriche.
        </p>
      </div>
    </div>

    <%= render 'shared/quaderno_link', pagine: [245, 246] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
