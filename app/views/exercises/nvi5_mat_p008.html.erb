<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-purple-50 via-white to-purple-50 rounded-3xl shadow-xl" data-controller="exercise-checker page-viewer" data-page-viewer-image-url-value="<%= asset_path('nvi5_mat/p008/page.png') %>">
  <!-- Header --><div class="space-y-6">
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Interactive Image -->
    <div class="relative rounded-2xl overflow-hidden border-4 border-blue-200 shadow-2xl"
        data-controller="hotspot-editor"
        data-hotspot-editor-target="container">
      <%= image_tag "nvi5_mat/p008/p008_01.jpg",
          alt: "Supermercato con cartellini: frigorifero, cartello del reparto, lampadario, scaffale, flaconi, espositore, caporeparto, cassa, scatole, cliente, cestino, bilancia, cassetta, borse, banco, carrello e corsia",
          class: "w-full h-full object-cover select-none pointer-events-none" %>

      <div class="absolute inset-0">
        <% hotspots = [
          { label: "POTENZE", top: "8.58117%", left: "34.5076%", width: "28.6737%", height: "6.06406%" },
          { label: "ESPONENTE", top: "20.9246%", left: "47.6976%", width: "21.8701%", height: "5.83096%" },
          { label: "BASE", top: "34.2737%", left: "47.2502%", width: "13.4169%", height: "5.59786%" },
          { label: "6 per 6 per 6", top: "71.2637%", left: "8.78187%", width: "26.7737%", height: "12.1246%" },
          { label: "SEI ALLA TERZA", top: "69.2306%", left: "61.6888%", width: "22.6483%", height: "6.29715%" },
          { label: "SEI ELEVATO ALLA TERZA", top: "80.3487%", left: "56.9154%", width: "32.2523%", height: "5.13167%" }
        ] %>

        <% hotspots.each do |hotspot| %>
          <button type="button"
                  class="absolute rounded-xl bg-blue-500/0 hover:bg-blue-500/25 border-2 border-transparent hover:border-blue-500 focus:border-blue-600 focus:outline-none transition shadow-sm cursor-move"
                  style="top: <%= hotspot[:top] %>; left: <%= hotspot[:left] %>; width: <%= hotspot[:width] %>; height: <%= hotspot[:height] %>;"
                  aria-label="Leggi: <%= hotspot[:label] %>"
                  data-controller="image-speech"
                  data-hotspot-editor-target="hotspot"
                  data-image-speech-word-value="<%= hotspot[:label] %>"
                  data-image-speech-lang-value="it-IT"
                  data-action="mousedown->hotspot-editor#startDrag click->image-speech#speak">
            <span class="sr-only"><%= hotspot[:label] %></span>
          </button>
        <% end %>
      </div>
    </div>

    <!-- Esercizio COLLEGA -->
    <div class="bg-white rounded-2xl border-4 border-pink-200 shadow-xl p-6">
      <h2 class="text-2xl font-bold text-pink-600 mb-6 flex items-center gap-3">
        <span class="text-pink-500">♥</span>
        Collega.
      </h2>

      <div class="space-y-4">
        <!-- L'ESPONENTE indica -->
        <div class="bg-yellow-50 rounded-lg p-4">
          <div class="flex flex-col md:flex-row items-start md:items-center gap-3">
            <span class="text-lg flex-shrink-0">• L'<span class="font-bold text-pink-600">ESPONENTE</span> indica</span>
            <select class="flex-1 px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 focus:outline-none text-gray-700"
                    data-correct-answer="quante volte la base va moltiplicata per se stessa">
              <option value="">Scegli...</option>
              <option value="quante volte la base va moltiplicata per se stessa">quante volte la base va moltiplicata per se stessa</option>
              <option value="il numero da moltiplicare">il numero da moltiplicare</option>
              <option value="6 × 6 × 6">6 × 6 × 6</option>
            </select>
          </div>
        </div>

        <!-- La BASE indica -->
        <div class="bg-yellow-50 rounded-lg p-4">
          <div class="flex flex-col md:flex-row items-start md:items-center gap-3">
            <span class="text-lg flex-shrink-0">• La <span class="font-bold text-pink-600">BASE</span> indica</span>
            <select class="flex-1 px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 focus:outline-none text-gray-700"
                    data-correct-answer="il numero da moltiplicare">
              <option value="">Scegli...</option>
              <option value="quante volte la base va moltiplicata per se stessa">quante volte la base va moltiplicata per se stessa</option>
              <option value="il numero da moltiplicare">il numero da moltiplicare</option>
              <option value="6 × 6 × 6">6 × 6 × 6</option>
            </select>
          </div>
        </div>

        <!-- La POTENZA 6³ significa -->
        <div class="bg-yellow-50 rounded-lg p-4">
          <div class="flex flex-col md:flex-row items-start md:items-center gap-3">
            <span class="text-lg flex-shrink-0">• La <span class="font-bold text-pink-600">POTENZA</span> 6³ significa</span>
            <select class="flex-1 px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 focus:outline-none text-gray-700"
                    data-correct-answer="6 × 6 × 6">
              <option value="">Scegli...</option>
              <option value="quante volte la base va moltiplicata per se stessa">quante volte la base va moltiplicata per se stessa</option>
              <option value="il numero da moltiplicare">il numero da moltiplicare</option>
              <option value="6 × 6 × 6">6 × 6 × 6</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio SCEGLI -->
    <div class="bg-white rounded-2xl border-4 border-pink-200 shadow-xl p-6">
      <h2 class="text-2xl font-bold text-pink-600 mb-6 flex items-center gap-3">
        <span class="text-pink-500">♥</span>
        Scegli.
      </h2>

      <div class="space-y-6">
        <!-- La POTENZA 5⁴ si legge -->
        <div class="space-y-3">
          <p class="text-lg font-medium">• La <span class="font-bold text-pink-600">POTENZA</span> 5⁴ si legge:</p>

          <div class="ml-6 space-y-3">
            <label class="flex items-center gap-3 bg-pink-50 p-4 rounded-lg cursor-pointer hover:bg-pink-100 transition-colors">
              <input type="radio" name="potenza_5_4" value="quattro alla quinta" class="w-5 h-5 text-pink-600">
              <span class="text-lg font-bold text-pink-600">QUATTRO ALLA QUINTA</span>
            </label>

            <label class="flex items-center gap-3 bg-pink-50 p-4 rounded-lg cursor-pointer hover:bg-pink-100 transition-colors">
              <input type="radio" name="potenza_5_4" value="cinque alla quarta" class="w-5 h-5 text-pink-600" data-correct-answer="true">
              <span class="text-lg font-bold text-pink-600">CINQUE ALLA QUARTA</span>
            </label>
          </div>
        </div>

        <!-- OTTO ELEVATO ALLA SECONDA corrisponde -->
        <div class="space-y-3">
          <p class="text-lg font-medium">• <span class="font-bold text-pink-600">OTTO ELEVATO ALLA SECONDA</span> corrisponde:</p>

          <div class="ml-6 space-y-3">
            <label class="flex items-center gap-3 bg-pink-50 p-4 rounded-lg cursor-pointer hover:bg-pink-100 transition-colors">
              <input type="radio" name="otto_seconda" value="8²" class="w-5 h-5 text-pink-600" data-correct-answer="true">
              <span class="text-lg">alla <span class="font-bold text-pink-600">POTENZA</span> 8²</span>
            </label>

            <label class="flex items-center gap-3 bg-pink-50 p-4 rounded-lg cursor-pointer hover:bg-pink-100 transition-colors">
              <input type="radio" name="otto_seconda" value="2⁸" class="w-5 h-5 text-pink-600">
              <span class="text-lg">alla <span class="font-bold text-pink-600">POTENZA</span> 2⁸</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls', color: 'pink', current_page: 'nvi5_mat_p008' %>

  </div>
</div>
