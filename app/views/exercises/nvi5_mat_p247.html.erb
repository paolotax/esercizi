<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria: Formule dei poligoni regolari -->
    <div class="p-4 bg-custom-blue-light rounded-2xl w-fit mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
        <!-- Immagine pentagono -->
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p247/p247_01.jpg", alt: "Pentagono", class: "max-w-sm" %>
        </div>

        <!-- Formule -->
        <div class="md:col-span-2">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="font-bold text-cyan-600 mb-1">Perimetro</p>
              <p class="text-gray-700">P = ℓ × numero dei lati</p>
              <p class="text-gray-700 mt-3"><span class="font-bold text-cyan-600">Apotema</span></p>
              <p class="text-gray-700">a = ℓ × numero fisso</p>
              <p class="text-gray-700 mt-2">Formule inverse:</p>
              <p class="text-gray-700">ℓ = a : numero fisso</p>
              <p class="text-gray-700">numero fisso = a : ℓ</p>
            </div>
            <div>
              <p class="font-bold text-cyan-600 mb-1">Area</p>
              <p class="text-gray-700">A = (P × a) : 2</p>
              <p class="text-gray-700">oppure:</p>
              <p class="text-gray-700">A = (P : 2) × a</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 1 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(1) %>
        In ciascuno dei seguenti poligoni traccia e calcola l'apotema. Aiutati con la tabella.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="grid grid-cols-3 gap-4">
          <!-- Pentagono -->
          <div class="text-center space-y-2">
            <%= image_tag "nvi5_mat/p247/output-1715938802247_177_500_130_126.png", alt: "Pentagono", class: "mx-auto max-w-[80px]" %>
            <p class="text-gray-700">2 cm</p>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">a =</span>
              <input type="text" data-correct-answer="1,376" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>

          <!-- Esagono -->
          <div class="text-center space-y-2">
            <%= image_tag "nvi5_mat/p247/output-1715938802247_378_499_144_127.png", alt: "Esagono", class: "mx-auto max-w-[80px]" %>
            <p class="text-gray-700">2 cm</p>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">a =</span>
              <input type="text" data-correct-answer="1,732" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>

          <!-- Ottagono -->
          <div class="text-center space-y-2">
            <%= image_tag "nvi5_mat/p247/output-1715938802247_596_499_127_126.png", alt: "Ottagono", class: "mx-auto max-w-[80px]" %>
            <p class="text-gray-700">2 cm</p>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">a =</span>
              <input type="text" data-correct-answer="2,414" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>

        <!-- Tabella numeri fissi -->
        <div class="overflow-x-auto flex justify-center">
          <table class="border-collapse border border-cyan-400">
            <thead>
              <tr>
                <th class="p-2 border border-cyan-400 bg-custom-blue-light text-center text-gray-800 font-bold">Poligono</th>
                <th class="p-2 border border-cyan-400 bg-custom-blue-light text-center text-gray-800 font-bold">Numero fisso</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="p-2 border border-cyan-400 bg-white text-center">Pentagono</td>
                <td class="p-2 border border-cyan-400 bg-white text-center">0,688</td>
              </tr>
              <tr>
                <td class="p-2 border border-cyan-400 bg-white text-center">Esagono</td>
                <td class="p-2 border border-cyan-400 bg-white text-center">0,866</td>
              </tr>
              <tr>
                <td class="p-2 border border-cyan-400 bg-white text-center">Ottagono</td>
                <td class="p-2 border border-cyan-400 bg-white text-center">1,207</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Ora calcola il perimetro e l'area dei poligoni dell'esercizio 1.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- Pentagono -->
        <div class="p-3">
          <p class="font-bold text-center text-cyan-600 mb-2">Pentagono</p>
          <div class="space-y-2">
            <div class="flex items-center justify-center gap-2">
              <span class="text-gray-700">Perimetro</span>
              <input type="text" data-correct-answer="10" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm</span>
            </div>
            <div class="flex items-center justify-center gap-2">
              <span class="text-gray-700">Area</span>
              <input type="text" data-correct-answer="6,88" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm²</span>
            </div>
          </div>
        </div>

        <!-- Esagono -->
        <div class="p-3">
          <p class="font-bold text-center text-cyan-600 mb-2">Esagono</p>
          <div class="space-y-2">
            <div class="flex items-center justify-center gap-2">
              <span class="text-gray-700">Perimetro</span>
              <input type="text" data-correct-answer="12" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm</span>
            </div>
            <div class="flex items-center justify-center gap-2">
              <span class="text-gray-700">Area</span>
              <input type="text" data-correct-answer="10,392" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm²</span>
            </div>
          </div>
        </div>

        <!-- Ottagono -->
        <div class="p-3">
          <p class="font-bold text-center text-cyan-600 mb-2">Ottagono</p>
          <div class="space-y-2">
            <div class="flex items-center justify-center gap-2">
              <span class="text-gray-700">Perimetro</span>
              <input type="text" data-correct-answer="16" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm</span>
            </div>
            <div class="flex items-center justify-center gap-2">
              <span class="text-gray-700">Area</span>
              <input type="text" data-correct-answer="19,312" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm²</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Calcola sul quaderno l'area delle seguenti figure, composte da poligoni regolari.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Figura 1: due esagoni -->
        <div class="text-center space-y-3 p-4">
          <%= image_tag "nvi5_mat/p247/output-1715938802247_350_929_113_247.png", alt: "Due esagoni", class: "mx-auto max-w-[80px]" %>
          <p class="text-gray-700">ℓ = 6 m</p>
          <div class="flex items-center justify-center gap-1">
            <span class="text-gray-700">A =</span>
            <input type="text" data-correct-answer="187,056" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700">m²</span>
          </div>
        </div>

        <!-- Figura 2: tre esagoni -->
        <div class="text-center space-y-3 p-4">
          <%= image_tag "nvi5_mat/p247/output-1715938802247_539_930_139_247.png", alt: "Tre esagoni", class: "mx-auto max-w-[100px]" %>
          <p class="text-gray-700">ℓ = 3,5 dm</p>
          <div class="flex items-center justify-center gap-1">
            <span class="text-gray-700">A =</span>
            <input type="text" data-correct-answer="95,3505" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700">dm²</span>
          </div>
        </div>

        <!-- Figura 3: esagoni multipli -->
        <div class="text-center space-y-3 p-4">
          <%= image_tag "nvi5_mat/p247/output-1715938802247_733_929_235_232.png", alt: "Esagoni multipli", class: "mx-auto max-w-[150px]" %>
          <p class="text-gray-700">ℓ = 4 cm</p>
          <div class="flex items-center justify-center gap-1">
            <span class="text-gray-700">A =</span>
            <input type="text" data-correct-answer="249,408" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="text-gray-700">cm²</span>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
