<div class="max-w-7xl mx-auto p-6">
  <div class="mb-8">
    <div class="flex items-center gap-4 mb-4">
      <div class="bg-blue-500 text-white px-4 py-2 rounded-lg font-bold text-xl">
        ESERCIZI
      </div>
      <h1 class="text-3xl font-bold text-blue-600">PROPRIETÀ DELL'ADDIZIONE</h1>
      <div class="ml-auto bg-red-600 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold text-xl">
        144
      </div>
    </div>
  </div>

  <div class="space-y-8">

    <!-- Exercise 1: Proprietà associativa -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <div class="flex items-start gap-3 mb-6">
        <div class="bg-cyan-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
          1
        </div>
        <div>
          <div class="flex items-center gap-2 mb-2">
            <span class="bg-yellow-300 text-black px-3 py-1 rounded font-bold">IMPARARE TUTTI</span>
          </div>
          <h2 class="text-xl font-bold text-gray-800">Applica la <span class="text-cyan-600">proprietà associativa</span> e calcola. Segui l'esempio.</h2>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-8">
        <div class="space-y-4">
          <!-- Esempio -->
          <div class="bg-cyan-50 p-4 rounded-lg border-2 border-cyan-200">
            <div class="flex items-center gap-2 text-xl">
              <span>36 + 4 + 17 =</span>
              <span class="text-cyan-600 font-bold">(40 + 17)</span>
              <span>=</span>
              <span class="text-cyan-600 font-bold">57</span>
            </div>
          </div>
          
          <!-- Esercizio -->
          <div class="bg-gray-50 p-4 rounded-lg">
            <div class="flex items-center gap-2 text-xl flex-wrap">
              <span>6 + 8 + 12 =</span>
              <input type="text" class="w-32 px-3 py-2 border-2 border-gray-300 rounded text-center" placeholder="...">
              <span>=</span>
              <input type="text" class="w-20 px-3 py-2 border-2 border-gray-300 rounded text-center" placeholder="...">
            </div>
          </div>
        </div>

        <div class="space-y-4">
          <!-- Esercizio -->
          <div class="bg-gray-50 p-4 rounded-lg">
            <div class="flex items-center gap-2 text-xl flex-wrap">
              <span>20 + 13 + 17 =</span>
              <input type="text" class="w-32 px-3 py-2 border-2 border-gray-300 rounded text-center" placeholder="...">
              <span>=</span>
              <input type="text" class="w-20 px-3 py-2 border-2 border-gray-300 rounded text-center" placeholder="...">
            </div>
          </div>

          <!-- Esercizio -->
          <div class="bg-gray-50 p-4 rounded-lg">
            <div class="flex items-center gap-2 text-xl flex-wrap">
              <span>31 + 9 + 46 =</span>
              <input type="text" class="w-32 px-3 py-2 border-2 border-gray-300 rounded text-center" placeholder="...">
              <span>=</span>
              <input type="text" class="w-20 px-3 py-2 border-2 border-gray-300 rounded text-center" placeholder="...">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise 2: Proprietà commutativa -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <div class="flex items-start gap-3 mb-6">
        <div class="bg-cyan-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
          2
        </div>
        <h2 class="text-xl font-bold text-gray-800">Calcola in colonna, poi fai la prova applicando la <span class="text-cyan-600">proprietà commutativa</span>.</h2>
      </div>

      <div class="grid grid-cols-4 gap-4">
        <!-- Riga 1 -->
        <%= render 'shared/column_addition', 
              operation: "542 + 107",
            show_addends: true
        %>
        <%= render 'shared/column_addition',
          operation: "107 + 542",
          show_exercise: true
        %>

        <%= render 'shared/column_addition', 
          operation: "789 + 167",
          show_addends: true
        %>
        <%= render 'shared/column_addition',
          operation: "167 + 789",
          show_exercise: true
        %>
      </div>

      <div class="grid grid-cols-4 gap-4 mt-6">
        <!-- Riga 2 -->
        <%= render 'shared/column_addition', 
          operation: "208 + 435",
          show_addends: true
        %>
        <%= render 'shared/column_addition',
          operation: "435 + 208",
          show_exercise: true
        %>

        <%= render 'shared/column_addition', 
          operation: "135 + 97",
          show_addends: true
        %>
        <%= render 'shared/column_addition',
          operation: "97 + 135",
          show_exercise: true
        %>

      </div>
    </div>

    <!-- Exercise 3: Identificare proprietà -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <div class="flex items-start gap-3 mb-6">
        <div class="bg-cyan-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
          3
        </div>
        <h2 class="text-xl font-bold text-gray-800">
          Quali proprietà sono state applicate? Scrivi 
          <span class="text-cyan-600 font-bold">A</span> (associativa), 
          <span class="text-orange-600 font-bold">C</span> (commutativa) o 
          <span class="text-purple-600 font-bold">E</span> (entrambe).
        </h2>
      </div>

      <div class="space-y-4">
        <!-- Example 1 -->
        <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
          <div class="flex-1 text-lg">
            26 + 12 + 14 = (26 + 14) + 12 = 40 + 12 = 52
          </div>
          <input type="text" class="w-16 h-16 text-3xl text-center border-4 border-cyan-400 rounded-lg font-bold" maxlength="1" placeholder="...">
        </div>

        <!-- Example 2 -->
        <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
          <div class="flex-1 text-lg">
            107 + 3 + 17 = 110 + 17 = 127
          </div>
          <input type="text" class="w-16 h-16 text-3xl text-center border-4 border-cyan-400 rounded-lg font-bold" maxlength="1" placeholder="...">
        </div>

        <!-- Example 3 -->
        <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
          <div class="flex-1 text-lg">
            32 + 128 + 2 = 32 + 130 = 162
          </div>
          <input type="text" class="w-16 h-16 text-3xl text-center border-4 border-cyan-400 rounded-lg font-bold" maxlength="1" placeholder="...">
        </div>

        <!-- Example 4 -->
        <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
          <div class="flex-1 text-lg">
            115 + 5 + 45 = 45 + 5 + 115 = 165
          </div>
          <input type="text" class="w-16 h-16 text-3xl text-center border-4 border-cyan-400 rounded-lg font-bold" maxlength="1" placeholder="...">
        </div>

        <!-- Example 5 -->
        <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
          <div class="flex-1 text-lg">
            135 + 19 + 5 = (135 + 5) + 19 = 140 + 19 = 159
          </div>
          <input type="text" class="w-16 h-16 text-3xl text-center border-4 border-cyan-400 rounded-lg font-bold" maxlength="1" placeholder="...">
        </div>
      </div>

      <!-- Farfalle decorative -->
      <div class="flex justify-end gap-8 mt-6">
        <svg class="w-20 h-20 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
        </svg>
        <svg class="w-20 h-20 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
        </svg>
      </div>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls', color: 'cyan', current_page: 'bus3_mat_p144' %>

    <!-- Page numbers -->
    <div class="flex justify-end mb-6 mt-6">
      <!-- Current page (144) -->
      <div class="bg-cyan-600 text-white font-bold text-3xl px-6 py-3 rounded-l-full flex items-center gap-2">
        <div class="bg-white text-cyan-600 rounded-full p-2 flex items-center justify-center ml-2">
          144
        </div>
      </div>
    </div>
  </div>
</div>
