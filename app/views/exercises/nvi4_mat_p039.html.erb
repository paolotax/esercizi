<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Box teoria principale -->
    <div class="p-4 md:p-6 bg-custom-blue rounded-2xl">
      <p class="font-bold text-gray-700 mb-4">
        <span class="text-<%= @pagina.base_color %>-500">•</span> Leggi e osserva.
      </p>

      <!-- IN RIGA -->
      <div class="mb-6">
        <h2 class="font-bold italic text-<%= @pagina.base_color %>-600 mb-4">IN RIGA</h2>
        <div class="flex flex-wrap items-center gap-4 p-4 bg-white rounded-lg">
          <!-- Pallini rappresentativi -->
          <div class="flex flex-col gap-1">
            <div class="flex gap-1">
              <% 8.times do %>
                <div class="w-4 h-4 bg-cyan-500 rounded-full"></div>
              <% end %>
            </div>
            <div class="flex gap-1">
              <% 8.times do %>
                <div class="w-4 h-4 bg-cyan-500 rounded-full"></div>
              <% end %>
            </div>
          </div>
          <div class="space-y-1">
            <p class="text-gray-700">2 + 2 + 2 + 2 + 2 + 2 + 2 + 2 <span class="text-<%= @pagina.base_color %>-500">→</span> <span class="font-bold text-<%= @pagina.base_color %>-600">2 &times; 8 = 16</span></p>
            <p class="text-gray-700"><span class="text-cyan-600 font-bold">8</span> + <span class="text-cyan-600 font-bold">8</span> <span class="text-<%= @pagina.base_color %>-500">→</span> <span class="font-bold text-<%= @pagina.base_color %>-600">8 &times; 2 = 16</span></p>
          </div>
        </div>
      </div>

      <!-- IN COLONNA CON UNA CIFRA AL MOLTIPLICATORE -->
      <div class="mb-6">
        <h2 class="font-bold italic text-<%= @pagina.base_color %>-600 mb-4">IN COLONNA CON UNA CIFRA AL MOLTIPLICATORE</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-white rounded-lg">
          <div class="text-center">
            <div class="inline-block">
              <div class="text-cyan-600 font-bold">da u</div>
              <div class="flex items-center justify-end gap-1">
                <span class="text-red-500 font-bold align-super">1</span>
                <span class="font-bold">2</span>
                <span class="font-bold text-cyan-600">3</span>
                <span>&times;</span>
              </div>
              <div class="flex items-center justify-end gap-1">
                <span class="font-bold text-cyan-600">4</span>
                <span>=</span>
              </div>
              <div class="border-t-2 border-gray-800 flex justify-end gap-1">
                <span class="text-red-500 font-bold">1</span>
                <span class="font-bold">2</span>
              </div>
            </div>
            <p class="text-gray-600 mt-2">Moltiplica il secondo fattore per le unit&agrave; del primo fattore e scrivi il riporto.</p>
          </div>
          <div class="flex items-center gap-4">
            <span class="text-<%= @pagina.base_color %>-500 text-2xl">→</span>
            <div class="text-center">
              <div class="inline-block">
                <div class="text-cyan-600 font-bold">da u</div>
                <div class="flex items-center justify-end gap-1">
                  <span class="text-red-500 font-bold align-super">1</span>
                  <span class="font-bold">2</span>
                  <span class="font-bold text-cyan-600">3</span>
                  <span>&times;</span>
                </div>
                <div class="flex items-center justify-end gap-1">
                  <span class="font-bold text-cyan-600">4</span>
                  <span>=</span>
                </div>
                <div class="border-t-2 border-gray-800 flex justify-end gap-1">
                  <span class="font-bold">9</span>
                  <span class="font-bold">2</span>
                </div>
              </div>
              <p class="text-gray-600 mt-2">Moltiplica il secondo fattore per le decine del primo fattore e aggiungi il riporto.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- IN COLONNA CON DUE CIFRE AL MOLTIPLICATORE -->
      <div>
        <h2 class="font-bold italic text-<%= @pagina.base_color %>-600 mb-4">IN COLONNA CON DUE CIFRE AL MOLTIPLICATORE</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-white rounded-lg">
          <div class="text-center">
            <div class="inline-block font-mono">
              <div class="text-cyan-600 font-bold">h da u</div>
              <div class="text-right">
                <span class="text-cyan-600">(</span><span class="font-bold">2</span> <span class="font-bold">7</span><span class="text-cyan-600">)</span> &times;
              </div>
              <div class="text-right">
                <span class="text-cyan-600">(</span><span class="font-bold">1</span><span class="text-cyan-600">)</span> <span class="font-bold">4</span> =
              </div>
              <div class="border-t-2 border-gray-800 text-right">
                <span class="font-bold text-<%= @pagina.base_color %>-600">1 0 8</span>
              </div>
            </div>
            <p class="text-gray-600 mt-2">Moltiplica le unit&agrave; del secondo fattore per tutte le cifre del primo fattore. Scrivi il prodotto parziale.</p>
            <p class="text-gray-500 italic mt-1">prodotto <span class="text-<%= @pagina.base_color %>-500">→</span> parziale</p>
          </div>

          <div class="text-center">
            <div class="inline-block font-mono">
              <div class="text-cyan-600 font-bold">h da u</div>
              <div class="text-right">
                <span class="text-cyan-600">(</span><span class="font-bold">2</span> <span class="font-bold">7</span><span class="text-cyan-600">)</span> &times;
              </div>
              <div class="text-right">
                <span class="text-cyan-600">(</span><span class="font-bold">1</span><span class="text-cyan-600">)</span> <span class="font-bold">4</span> =
              </div>
              <div class="border-t-2 border-gray-800 text-right">
                <span class="font-bold">1 0 8</span>
              </div>
              <div class="text-right">
                <span class="font-bold text-<%= @pagina.base_color %>-600">2 7 0</span> <span class="text-gray-500">&larr;</span>
              </div>
            </div>
            <p class="text-gray-600 mt-2">Scrivi zero al posto delle unit&agrave;, perch&eacute; moltiplichi le decine del secondo fattore (1 <span class="font-bold text-cyan-600">da</span>, cio&egrave; 10 <span class="font-bold text-cyan-600">u</span>).</p>
            <p class="text-gray-600 mt-1">Moltiplica le decine del secondo fattore per tutte le cifre del primo fattore. Scrivi il prodotto parziale.</p>
          </div>

          <div class="text-center">
            <div class="inline-block font-mono">
              <div class="text-cyan-600 font-bold">h da u</div>
              <div class="text-right">
                <span class="font-bold">2</span> <span class="font-bold">7</span> &times;
              </div>
              <div class="text-right">
                <span class="font-bold">1</span> <span class="font-bold">4</span> =
              </div>
              <div class="border-t-2 border-gray-800 text-right">
                <span class="font-bold">1 0 8</span> +
              </div>
              <div class="text-right">
                <span class="font-bold">2 7 0</span> =
              </div>
              <div class="border-t-2 border-gray-800 text-right font-bold text-<%= @pagina.base_color %>-600">
                3 7 8
              </div>
            </div>
            <p class="text-gray-600 mt-2">Addiziona i prodotti parziali.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-2xl">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:divide-x-2 md:divide-orange-300">

        <!-- Esercizio 1 -->
        <div class="md:pr-4">
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(1) %>
            Calcola in riga.
          </p>
          <div class="grid grid-cols-3 gap-3">
            <div class="flex items-center gap-1">
              <span class="text-gray-700">5 &times; 6 =</span>
              <input type="text" data-correct-answer="30" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700">4 &times; 8 =</span>
              <input type="text" data-correct-answer="32" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700">12 &times; 3 =</span>
              <input type="text" data-correct-answer="36" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700">9 &times; 7 =</span>
              <input type="text" data-correct-answer="63" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700">20 &times; 4 =</span>
              <input type="text" data-correct-answer="80" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700">33 &times; 2 =</span>
              <input type="text" data-correct-answer="66" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>

        <!-- Esercizio 2 -->
        <div class="md:pl-4">
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(2) %>
            Calcola in colonna sul quaderno.
          </p>
          <div class="grid grid-cols-2 gap-3">
            <p class="text-gray-700">43 &times; 37 =</p>
            <p class="text-gray-700">56 &times; 26 =</p>
            <p class="text-gray-700">78 &times; 17 =</p>
            <p class="text-gray-700">95 &times; 48 =</p>
            <p class="text-gray-700">279 &times; 74 =</p>
            <p class="text-gray-700">150 &times; 59 =</p>
            <p class="text-gray-700">359 &times; 37 =</p>
            <p class="text-gray-700">168 &times; 69 =</p>
          </div>
        </div>
      </div>

    </div>

    <%= render 'shared/quaderno_link', pagine: [188] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
