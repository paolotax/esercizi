<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Introduzione -->
    <div class="text-gray-700 dark:text-gray-200">
      <p class="mb-4">
        In un numero la posizione delle cifre è organizzata in classi e ordini. Ogni <span class="font-bold">classe</span> è suddivisa in tre ordini: <span class="font-bold text-green-600 dark:text-green-400">unità</span>, <span class="font-bold text-blue-600 dark:text-blue-400">decine</span>, <span class="font-bold text-red-600 dark:text-red-400">centinaia</span>. Ogni ordine vale 10 volte di più del precedente.
      </p>
      <p>Osserva.</p>
    </div>

    <!-- Tabella classi e ordini -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr>
            <th colspan="3" class="p-2 bg-<%= @pagina.base_color %>-500 text-white border-2 border-<%= @pagina.base_color %>-500 font-bold">CLASSE DELLE MIGLIAIA</th>
            <th colspan="3" class="p-2 bg-cyan-500 text-white border-2 border-cyan-500 font-bold">CLASSE DELLE UNITÀ SEMPLICI</th>
          </tr>
          <tr>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 dark:text-gray-200">ordine delle centinaia di migliaia</td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 dark:text-gray-200">ordine delle decine di migliaia</td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 dark:text-gray-200">ordine delle unità di migliaia</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-100 dark:bg-cyan-900/40 dark:text-gray-200">ordine delle centinaia</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-100 dark:bg-cyan-900/40 dark:text-gray-200">ordine delle decine</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-100 dark:bg-cyan-900/40 dark:text-gray-200">ordine delle unità</td>
          </tr>
          <tr>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/40 font-bold text-red-600 dark:text-red-400">hk</td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/40 font-bold text-blue-600 dark:text-blue-400">dak</td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/40 font-bold text-green-600 dark:text-green-400">uk</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/40 font-bold text-red-600 dark:text-red-400">h</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/40 font-bold text-blue-600 dark:text-blue-400">da</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/40 font-bold text-green-600 dark:text-green-400">u</td>
          </tr>
          <tr>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200"><span class="whitespace-nowrap">100 000</span></td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200"><span class="whitespace-nowrap">10 000</span></td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200"><span class="whitespace-nowrap">1 000</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">100</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">10</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">1</td>
          </tr>
          <tr>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">centomila</td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">diecimila</td>
            <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 dark:border-<%= @pagina.base_color %>-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">mille</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">cento</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">dieci</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 dark:text-gray-200">uno</td>
          </tr>
        </thead>
      </table>
    </div>

    <!-- Sezione Completa -->
    <div class="mb-8">
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-<%= @pagina.base_color %>-500">•</span>
        Completa.
      </p>

      <!-- Tabella formano -->
      <div class="bg-white dark:bg-gray-800 overflow-hidden border-2 border-cyan-400 dark:border-cyan-600 mb-6" data-controller="fill-blanks">
        <table class="w-full border-collapse">
          <tbody>
            <tr class="border-b-2 border-cyan-400 dark:border-cyan-600">
              <td class="p-3 border-r-2 border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200"><span class="font-bold text-cyan-600 dark:text-cyan-400">10</span> <span class="font-bold text-cyan-600 dark:text-cyan-400">unità</span> formano <span class="font-bold text-cyan-600 dark:text-cyan-400">1 decina</span></td>
              <td class="p-3 bg-orange-100 dark:bg-orange-900/40 dark:text-gray-200">10 u = <span class="font-bold text-cyan-600 dark:text-cyan-400">1 da</span></td>
            </tr>
            <tr class="border-b-2 border-cyan-400 dark:border-cyan-600">
              <td class="p-3 border-r-2 border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
                <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>10</span>" }, "decine formano", { html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>1</span>" }, { answer: "centinaio" }] %>
              </td>
              <td class="p-3 bg-orange-100 dark:bg-orange-900/40 dark:text-gray-200">10 da = <span class="font-bold text-cyan-600 dark:text-cyan-400">1 h</span></td>
            </tr>
            <tr class="border-b-2 border-cyan-400 dark:border-cyan-600">
              <td class="p-3 border-r-2 border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
                <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>10</span>" }, { answer: "centinaia" }, "formano", { html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>1</span>" }, { answer: "migliaio" }] %>
              </td>
              <td class="p-3 bg-orange-100 dark:bg-orange-900/40 dark:text-gray-200">10 h = <span class="font-bold text-cyan-600 dark:text-cyan-400">1 uk</span></td>
            </tr>
            <tr class="border-b-2 border-cyan-400 dark:border-cyan-600">
              <td class="p-3 border-r-2 border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
                <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>10</span>" }, { answer: "migliaia" }, "formano", { html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>1</span>" }, { answer: "decina di migliaia" }] %>
              </td>
              <td class="p-3 bg-orange-100 dark:bg-orange-900/40 dark:text-gray-200">10 uk = <span class="font-bold text-cyan-600 dark:text-cyan-400">1 dak</span></td>
            </tr>
            <tr>
              <td class="p-3 border-r-2 border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
                <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>10</span>" }, { answer: "decine di migliaia" }, "formano", { html: "<span class='font-bold text-cyan-600 dark:text-cyan-400'>1</span>" }, { answer: "centinaio di migliaia" }] %>
              </td>
              <td class="p-3 bg-orange-100 dark:bg-orange-900/40 dark:text-gray-200">10 dak = <span class="font-bold text-cyan-600 dark:text-cyan-400">1 hk</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Equivalenze -->
      <div class="space-y-3 text-gray-700 dark:text-gray-200" data-controller="fill-blanks">
        <p><span class="font-bold">1 u</span> = 1</p>
        <p><span class="font-bold">1 da</span> = 10 u</p>
        <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold'>1 h</span>" }, "= 10 da =", { answer: "100" }, "u"] %>
        <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold'>1 uk</span>" }, "= 10 h =", { answer: "100" }, "da =", { answer: "1000" }, "u"] %>
        <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold'>1 dak</span>" }, "= 10 uk =", { answer: "100" }, "h =", { answer: "1000" }, "da =", { answer: "10000" }, "u"] %>
        <%= render 'shared/fill_item', color: "cyan", segments: [{ html: "<span class='font-bold'>1 hk</span>" }, "= 10 dak =", { answer: "100" }, "uk =", { answer: "1000" }, "h =", { answer: "10000" }, "da =", { answer: "100000" }, "u"] %>
      </div>
    </div>

    <!-- Container ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 dark:bg-orange-900/30 rounded-2xl">

      <!-- Sezione ESERCIZI -->
      <div class="bg-<%= @pagina.base_color %>-600 text-white px-4 py-2 rounded-lg inline-block font-bold mb-4">
        ESERCIZI
      </div>

      <!-- Esercizio 1: Valore posizionale della cifra 8 -->
      <div>
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(1) %>
          Indica il valore posizionale della cifra <span class="font-bold">8</span> nei seguenti numeri. Segui l'esempio.
        </p>

        <!-- Esempio -->
        <div class="flex items-center gap-2 mb-4 text-gray-700 dark:text-gray-200">
          <span class="font-bold whitespace-nowrap">5 864</span>
          <span class="text-<%= @pagina.base_color %>-500">→</span>
          <span class="font-bold text-<%= @pagina.base_color %>-600">8 h</span>
        </div>

        <%= render 'shared/fill_list',
            color: @pagina.base_color,
            arrow: true,
            container_class: "grid grid-cols-2 md:grid-cols-4 gap-4 text-gray-700 dark:text-gray-200",
            items: [
              { segments: [{ html: "20<span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span>" }, { answer: "u" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'><span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span>5 721</span>" }, { answer: "dak" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'>1 7<span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span>6</span>" }, { answer: "da" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'>1<span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span> 524</span>" }, { answer: "uk" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'>27 <span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span>65</span>" }, { answer: "h" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'><span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span>05 472</span>" }, { answer: "hk" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'>9<span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span> 235</span>" }, { answer: "uk" }] },
              { segments: [{ html: "<span class='whitespace-nowrap'>2<span class='font-bold text-#{@pagina.base_color}-600 dark:text-#{@pagina.base_color}-400'>8</span>4 126</span>" }, { answer: "dak" }] }
            ] %>
      </div>

    </div>

    <%= render 'shared/quaderno_link', pagine: [172, 173, 174, 175, 176] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
