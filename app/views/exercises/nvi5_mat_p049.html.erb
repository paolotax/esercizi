<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <!-- Esercizio 1 - IMPARARE TUTTI -->
      <div class="-mx-4 md:-mx-6 -mt-4 md:-mt-6 p-4 bg-white rounded-2xl border-3 border-blue-500 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          Calcola sul quaderno il valore delle seguenti espressioni. Segui l'esempio.
        </p>
        <p class="font-bold text-custom-pink mb-4">6 : 2 + 25 × 2 = 3 + 50 = 53</p>
        <div class="grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-4">
          <div class="flex items-center gap-2">
            <span class="text-gray-800">25 × 4 + 12 × 3 =</span>
            <input type="text" data-correct-answer="136" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-800">(126 + 4) : (5 × 2) =</span>
            <input type="text" data-correct-answer="13" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
          </div>
          <div class="flex items-center gap-2">
            <span class="text-gray-800">6 × (100 : 2) =</span>
            <input type="text" data-correct-answer="300" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
          </div>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div class="p-4 mb-6">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(2) %>
          Calcola il valore delle seguenti espressioni, poi rispondi.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="space-y-2">
            <div class="flex items-center gap-2 flex-wrap">
              <span>8 + (16 × 2) − 9 =</span>
              <input type="text" data-correct-answer="31" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
            </div>
            <div class="flex items-center gap-2 flex-wrap">
              <span>(8 + 16) × 2 − 9 =</span>
              <input type="text" data-correct-answer="39" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2 flex-wrap">
              <span>96 − (18 : 3) + 6 =</span>
              <input type="text" data-correct-answer="96" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
            </div>
            <div class="flex items-center gap-2 flex-wrap">
              <span>96 − 18 : (3 + 6) =</span>
              <input type="text" data-correct-answer="94" class="w-16 px-2 py-1 border-b-2 border-dotted text-center font-bold">
            </div>
          </div>
        </div>
        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700">Che cosa noti?</span>
          <input type="text" class="flex-1 px-2 py-1 border-b-2 border-dotted">
        </div>
      </div>

      <!-- Esercizi 3, 4 e 5 in due colonne -->
      <div class="grid grid-cols-1 md:grid-cols-2 md:divide-x-2 md:divide-custom-pink">
        <!-- Colonna sinistra: Ex 3 e 4 -->
        <div class="md:pr-6">
          <!-- Esercizio 3 -->
          <div class="p-4 mb-4" data-controller="word-highlighter">
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(3) %>
              Cancella i numeri non divisibili per 3.
            </p>
            <div class="flex flex-wrap gap-3">
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">726</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">215</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">1 367</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">89</span>
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">27</span>
            </div>
            <div class="flex flex-wrap gap-3 mt-3">
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">156</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">428</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">8 522</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">2 639</span>
            </div>
          </div>

          <!-- Esercizio 4 -->
          <div class="p-4" data-controller="word-highlighter">
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(4) %>
              Cancella i numeri non divisibili per 4.
            </p>
            <div class="flex flex-wrap gap-3">
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">208</span>
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">2 728</span>
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">524</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">1 322</span>
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">518</span>
            </div>
            <div class="flex flex-wrap gap-3 mt-3">
              <span data-word-highlighter-target="word" data-correct="true"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">73</span>
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80">872</span>
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">1 636</span>
              <span data-word-highlighter-target="word" data-correct="false"
                    data-action="click->word-highlighter#toggleHighlight"
                    class="bg-white border-2 border-custom-sky px-4 py-2 rounded font-bold cursor-pointer hover:opacity-80 whitespace-nowrap">1 200</span>
            </div>
          </div>
        </div>

        <!-- Colonna destra: Ex 5 -->
        <div class="md:pl-6 mt-4 md:mt-0">
          <div class="p-4">
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(5) %>
              Indica con una <strong>X</strong> vero (V) o falso (F).
            </p>
            <div class="space-y-3">
              <div class="flex items-center justify-between gap-2">
                <span class="text-gray-800"><span class="text-custom-pink font-bold">•</span> Ogni numero naturale pari è divisibile per 2.</span>
                <div class="flex gap-2">
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_1" data-correct-answer="true" class="w-4 h-4"> V
                  </label>
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_1" class="w-4 h-4"> F
                  </label>
                </div>
              </div>
              <div class="flex items-center justify-between gap-2">
                <span class="text-gray-800"><span class="text-custom-pink font-bold">•</span> Ogni numero naturale dispari è divisibile per 3.</span>
                <div class="flex gap-2">
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_2" class="w-4 h-4"> V
                  </label>
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_2" data-correct-answer="true" class="w-4 h-4"> F
                  </label>
                </div>
              </div>
              <div class="flex items-center justify-between gap-2">
                <span class="text-gray-800"><span class="text-custom-pink font-bold">•</span> Ogni numero naturale che termina per 5 è divisibile per 5.</span>
                <div class="flex gap-2">
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_3" data-correct-answer="true" class="w-4 h-4"> V
                  </label>
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_3" class="w-4 h-4"> F
                  </label>
                </div>
              </div>
              <div class="flex items-center justify-between gap-2">
                <span class="text-gray-800"><span class="text-custom-pink font-bold">•</span> Ogni numero naturale è divisibile per 1.</span>
                <div class="flex gap-2">
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_4" data-correct-answer="true" class="w-4 h-4"> V
                  </label>
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_4" class="w-4 h-4"> F
                  </label>
                </div>
              </div>
              <div class="flex items-center justify-between gap-2">
                <span class="text-gray-800"><span class="text-custom-pink font-bold">•</span> Ogni numero naturale che termina per 9 è divisibile per 9.</span>
                <div class="flex gap-2">
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_5" class="w-4 h-4"> V
                  </label>
                  <label class="flex items-center gap-1 border border-gray-400 px-2 py-1">
                    <input type="radio" name="es5_5" data-correct-answer="true" class="w-4 h-4"> F
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 6 -->
      <div class="p-4" data-controller="word-highlighter">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(6) %>
          Colora le caselle dei numeri primi.
        </p>
        <div class="flex flex-wrap gap-2">
          <span data-word-highlighter-target="word" data-correct="false"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">36</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">37</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">41</span>
          <span data-word-highlighter-target="word" data-correct="false"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">42</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">61</span>
          <span data-word-highlighter-target="word" data-correct="false"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">65</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">67</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">71</span>
          <span data-word-highlighter-target="word" data-correct="false"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">75</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">79</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">83</span>
          <span data-word-highlighter-target="word" data-correct="false"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">85</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">89</span>
          <span data-word-highlighter-target="word" data-correct="false"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">90</span>
          <span data-word-highlighter-target="word" data-correct="true"
                data-action="click->word-highlighter#toggleHighlight"
                class="bg-white border-2 border-custom-sky px-3 py-2 rounded font-bold cursor-pointer hover:opacity-80">97</span>
        </div>
      </div>

      <!-- Esercizio 7 -->
      <div class="p-4">
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(7) %>
          Scomponi i numeri in fattori primi e scrivili sotto forma di potenza.
        </p>
        <%= image_tag "nvi5_mat/p049/p049_01.jpg", class: "mx-auto max-w-full", alt: "Scomposizione in fattori primi" %>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
