<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Tabella unità di misura -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse border-2 border-cyan-400 dark:border-cyan-600">
        <thead>
          <tr>
            <th colspan="2" class="p-2 bg-cyan-500 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">MULTIPLI</th>
            <th class="p-2 bg-cyan-600 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">UNITÀ FONDAMENTALE</th>
            <th colspan="3" class="p-2 bg-cyan-500 text-white font-bold border-2 border-cyan-400 dark:border-cyan-600 text-center">SOTTOMULTIPLI</th>
          </tr>
          <tr>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">ettolitro<br><span class="font-bold">hℓ</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">decalitro<br><span class="font-bold">daℓ</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-100 dark:bg-cyan-900 text-gray-700 dark:text-gray-200">litro<br><span class="font-bold text-cyan-600 dark:text-cyan-400">ℓ</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">decilitro<br><span class="font-bold">dℓ</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">centilitro<br><span class="font-bold">cℓ</span></td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/50 text-gray-700 dark:text-gray-200">millilitro<br><span class="font-bold">mℓ</span></td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">100 ℓ</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">10 ℓ</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-cyan-50 dark:bg-cyan-900/30 font-bold text-cyan-600 dark:text-cyan-400">1 ℓ</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,1 ℓ</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,01 ℓ</td>
            <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200">0,001 ℓ</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Esercizio 1 IMPARARE TUTTI -->
    <div class="p-5 bg-white dark:bg-gray-800 rounded-2xl border-3 border-yellow-400 dark:border-yellow-500">
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= imparare_tutti_badge(1) %>
        Indica il valore di ogni cifra. Segui l'esempio.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-3">
          <!-- Esempio -->
          <p class="text-gray-700 dark:text-gray-200">
            5 703 mℓ = <span class="font-bold text-cyan-600 dark:text-cyan-400">5 ℓ  7 dℓ  0 cℓ  3 mℓ</span>
          </p>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>3,291 hℓ =</span>
            <input type="text" data-correct-answer="3 hℓ 2 daℓ 9 ℓ 1 dℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>584,6 dℓ =</span>
            <input type="text" data-correct-answer="5 daℓ 8 ℓ 4 dℓ 6 cℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>78,26 daℓ =</span>
            <input type="text" data-correct-answer="7 hℓ 8 daℓ 2 ℓ 6 dℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>0,58 ℓ =</span>
            <input type="text" data-correct-answer="5 dℓ 8 cℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>479,3 cℓ =</span>
            <input type="text" data-correct-answer="4 ℓ 7 dℓ 9 cℓ 3 mℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>3,082 daℓ =</span>
            <input type="text" data-correct-answer="3 daℓ 0 ℓ 8 dℓ 2 cℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>307,006 ℓ =</span>
            <input type="text" data-correct-answer="3 hℓ 0 daℓ 7 ℓ 0 dℓ 0 cℓ 6 mℓ" class="flex-1 min-w-[200px] border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(2) %>
        Componi inserendo gli zeri necessari. Per aiutarti, inserisci prima le misure in tabella.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Composizioni -->
        <div class="space-y-3">
          <!-- Esempio -->
          <p class="text-gray-700 dark:text-gray-200">
            23 daℓ 7 dℓ = <span class="font-bold text-cyan-600 dark:text-cyan-400">23 070</span> cℓ
          </p>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>3 ℓ 9 cℓ 6 mℓ =</span>
            <input type="text" data-correct-answer="3096" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>42 dℓ 8 mℓ =</span>
            <input type="text" data-correct-answer="4208" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>mℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>4 hℓ 1 ℓ 7 cℓ =</span>
            <input type="text" data-correct-answer="401,07" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>ℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>5 daℓ 2 ℓ 6 dℓ =</span>
            <input type="text" data-correct-answer="5260" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>8 daℓ 8 dℓ =</span>
            <input type="text" data-correct-answer="80,8" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>ℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>4 hℓ 5 ℓ 9 dℓ =</span>
            <input type="text" data-correct-answer="4,059" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>hℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>5 hℓ 3 ℓ =</span>
            <input type="text" data-correct-answer="50,3" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>daℓ</span>
          </div>
        </div>

        <!-- Tabella -->
        <div class="overflow-x-auto">
          <table class="border-collapse border-2 border-cyan-400 dark:border-cyan-600">
            <thead>
              <tr>
                <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-center font-bold text-gray-800 dark:text-gray-200">hℓ</th>
                <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-center font-bold text-gray-800 dark:text-gray-200">daℓ</th>
                <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-center font-bold text-gray-800 dark:text-gray-200">ℓ</th>
                <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-center font-bold text-gray-800 dark:text-gray-200">dℓ</th>
                <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-center font-bold text-gray-800 dark:text-gray-200">cℓ</th>
                <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900 text-center font-bold text-gray-800 dark:text-gray-200">mℓ</th>
              </tr>
            </thead>
            <tbody>
              <!-- Esempio -->
              <tr>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 font-bold text-cyan-600 dark:text-cyan-400">2</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 font-bold text-cyan-600 dark:text-cyan-400">3</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 font-bold text-cyan-600 dark:text-cyan-400">0</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 font-bold text-cyan-600 dark:text-cyan-400">7</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 font-bold text-cyan-600 dark:text-cyan-400">0</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400"></td>
              </tr>
              <% 6.times do %>
              <tr>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400">......</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400">......</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400">......</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400">......</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400">......</td>
                <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 text-center bg-white dark:bg-gray-800 text-gray-400">......</td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 e 4 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Esercizio 3 -->
      <div>
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(3) %>
          Esegui le equivalenze.
        </p>

        <div class="space-y-3">
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>5,27 dℓ =</span>
            <input type="text" data-correct-answer="0,527" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>ℓ =</span>
            <input type="text" data-correct-answer="52,7" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cℓ</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>0,503 ℓ =</span>
            <input type="text" data-correct-answer="50,3" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cℓ =</span>
            <input type="text" data-correct-answer="5,03" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>dℓ</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>61,2 cℓ =</span>
            <input type="text" data-correct-answer="6,12" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>dℓ =</span>
            <input type="text" data-correct-answer="0,612" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>ℓ</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>4 709 mℓ =</span>
            <input type="text" data-correct-answer="4,709" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>ℓ =</span>
            <input type="text" data-correct-answer="470,9" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cℓ</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>630 ℓ =</span>
            <input type="text" data-correct-answer="63" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>daℓ =</span>
            <input type="text" data-correct-answer="6300" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>dℓ =</span>
            <input type="text" data-correct-answer="630000" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>mℓ</span>
          </div>
          <div class="flex items-center gap-2 flex-wrap text-gray-700 dark:text-gray-200">
            <span>0,08 hℓ =</span>
            <input type="text" data-correct-answer="8" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>ℓ =</span>
            <input type="text" data-correct-answer="800" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>cℓ =</span>
            <input type="text" data-correct-answer="0,8" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>daℓ</span>
          </div>
        </div>
      </div>

      <!-- Esercizio 4 -->
      <div>
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(4) %>
          Completa per formare sempre <span class="font-bold text-cyan-600 dark:text-cyan-400">1 ℓ</span>.
        </p>

        <div class="space-y-3">
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>1 ℓ = 52 cℓ +</span>
            <input type="text" data-correct-answer="48 cℓ" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>1 ℓ = 8,3 dℓ +</span>
            <input type="text" data-correct-answer="1,7 dℓ" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>1 ℓ = 0,04 daℓ +</span>
            <input type="text" data-correct-answer="0,06 daℓ" class="w-24 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>1 ℓ =</span>
            <input type="text" data-correct-answer="309 mℓ" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>+ 691 mℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>1 ℓ =</span>
            <input type="text" data-correct-answer="2,6 dℓ" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>+ 7,4 dℓ</span>
          </div>
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-200">
            <span>1 ℓ =</span>
            <input type="text" data-correct-answer="80,5 cℓ" class="w-20 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>+ 19,5 cℓ</span>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
