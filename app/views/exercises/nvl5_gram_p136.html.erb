<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Esercizio 1: IMPARARE TUTTI -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-100 dark:bg-<%= @pagina.base_color %>-900/40 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-400 mb-4 flex items-center flex-wrap gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">1</span>
      <span class="bg-yellow-400 dark:bg-yellow-500 text-<%= @pagina.base_color %>-900 dark:text-<%= @pagina.base_color %>-950 px-3 py-1 rounded-lg font-bold">IMPARARE TUTTI</span>
      <span>Completa con <strong>mela</strong>, <strong>me la</strong> o <strong>me l'ha</strong>.</span>
    </h2>

    <div class="space-y-3">
      <div class="flex items-start gap-2">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
        <p>Ecco una bella <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="mela" data-correct-answer="mela"> matura: <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="me la" data-correct-answer="me la"> raccolta il nonno.</p>
      </div>

      <div class="flex items-start gap-2">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
        <p><input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="Me la" data-correct-answer="Me la"> presti la tua penna?</p>
      </div>

      <div class="flex items-start gap-2">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
        <p>Ho prestato la mia gomma a Sara e lei non <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="me l'ha" data-correct-answer="me l'ha"> più restituita.</p>
      </div>

      <div class="flex items-start gap-2">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
        <p><input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="Me la" data-correct-answer="Me la"> racconti ancora la fiaba di Cenerentola?</p>
      </div>

      <div class="flex items-start gap-2">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
        <p>La <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="mela" data-correct-answer="mela"> è il mio frutto preferito.</p>
      </div>

      <div class="flex items-start gap-2">
        <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
        <p>Ti piace questa giacca? <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-32 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="Me l'ha" data-correct-answer="Me l'ha"> regalata mia cugina.</p>
      </div>
    </div>
  </div>

  <!-- Esercizio 2: tela, te la -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-400 mb-4 flex items-center gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">2</span>
      <span>Completa con <strong>tela</strong>, <strong>te la</strong> o <strong>te l'ha</strong>.</span>
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="space-y-3">
        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Ho comprato la <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="tela" data-correct-answer="tela"> per fare una tenda.</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Chi <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="te l'ha" data-correct-answer="te l'ha"> detto?</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Chi <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="te l'ha" data-correct-answer="te l'ha"> data questa matita?</p>
        </div>
      </div>

      <div class="space-y-3">
        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Ti serve una gomma? <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="Te la" data-correct-answer="Te la"> presto io.</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>I jeans sono fatti con una <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="tela" data-correct-answer="tela"> robusta e resistente.</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Ho scritto una poesia: <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="te la" data-correct-answer="te la"> leggo?</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 3: telo, te lo -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-400 mb-4 flex items-center gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">3</span>
      <span>Completa con <strong>telo</strong>, <strong>te lo</strong> o <strong>te l'ho</strong>.</span>
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="space-y-3">
        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Ho comprato un bel <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="telo" data-correct-answer="telo"> da mare.</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Non <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="te lo" data-correct-answer="te lo"> voglio ripetere più: <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="te l'ho" data-correct-answer="te l'ho"> già detto troppe volte.</p>
        </div>
      </div>

      <div class="space-y-3">
        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Se questo libro ti piace, <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="te lo" data-correct-answer="te lo"> compro volentieri.</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p><input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="Te l'ho" data-correct-answer="Te l'ho"> promesso: mi impegnerò.</p>
        </div>

        <div class="flex items-start gap-2">
          <span class="text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 font-bold">•</span>
          <p>Ti piace il pupazzo? <input type="text" class="border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white px-2 py-1 w-24 focus:outline-none focus:border-<%= @pagina.base_color %>-500" data-fill-blanks-target="input" data-answer="Te lo" data-correct-answer="Te lo"> regalo.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 4: Scrivi una frase con -->
  <div class="mb-6 bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 rounded-lg p-4 md:p-6">
    <h2 class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-400 mb-4 flex items-center gap-2">
      <span class="bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center font-bold">4</span>
      <span>Scrivi una frase con:</span>
    </h2>

    <div class="space-y-4">
      <div class="flex items-start gap-3">
        <span class="inline-block px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-800 dark:text-red-300 font-bold">tela</span>
        <input type="text" class="flex-1 px-3 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white focus:border-<%= @pagina.base_color %>-500 focus:outline-none">
      </div>

      <div class="flex items-start gap-3">
        <span class="inline-block px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-800 dark:text-red-300 font-bold">te la</span>
        <input type="text" class="flex-1 px-3 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white focus:border-<%= @pagina.base_color %>-500 focus:outline-none">
      </div>

      <div class="flex items-start gap-3">
        <span class="inline-block px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-800 dark:text-red-300 font-bold">mela</span>
        <input type="text" class="flex-1 px-3 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white focus:border-<%= @pagina.base_color %>-500 focus:outline-none">
      </div>

      <div class="flex items-start gap-3">
        <span class="inline-block px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-800 dark:text-red-300 font-bold">me la</span>
        <input type="text" class="flex-1 px-3 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white focus:border-<%= @pagina.base_color %>-500 focus:outline-none">
      </div>

      <div class="flex items-start gap-3">
        <span class="inline-block px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-800 dark:text-red-300 font-bold">telo</span>
        <input type="text" class="flex-1 px-3 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white focus:border-<%= @pagina.base_color %>-500 focus:outline-none">
      </div>

      <div class="flex items-start gap-3">
        <span class="inline-block px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-800 dark:text-red-300 font-bold">te lo</span>
        <input type="text" class="flex-1 px-3 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 bg-transparent dark:text-white focus:border-<%= @pagina.base_color %>-500 focus:outline-none">
      </div>
    </div>
  </div>

  <%= render 'shared/exercise_controls' %>

</div>
