<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria AREOGRAMMA QUADRATO -->
    <div class="p-4 bg-custom-blue-light rounded-lg">
      <div class="bg-white rounded-lg p-4 border-2 border-<%= @pagina.base_color %>-400">
        <h3 class="font-bold text-center text-<%= @pagina.base_color %>-600 mb-3">AREOGRAMMA QUADRATO</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="flex items-center justify-center">
            <div class="grid grid-cols-10 gap-0 border border-gray-400">
              <!-- 100 celle colorate per rappresentare percentuali -->
              <% 45.times do %><div class="w-4 h-4 bg-blue-500"></div><% end %>
              <% 25.times do %><div class="w-4 h-4 bg-green-500"></div><% end %>
              <% 20.times do %><div class="w-4 h-4 bg-orange-400"></div><% end %>
              <% 10.times do %><div class="w-4 h-4 bg-yellow-400"></div><% end %>
            </div>
          </div>
          <div class="space-y-2">
            <p class="text-gray-700 font-bold">Sport praticati</p>
            <div class="space-y-1">
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-blue-500 rounded"></span> nuoto</span>
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-green-500 rounded"></span> basket</span>
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-orange-400 rounded"></span> karate</span>
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-yellow-400 rounded"></span> pallavolo</span>
            </div>
          </div>
        </div>
        <p class="text-center text-gray-600 font-bold mt-2">QUADRATINI</p>
      </div>
    </div>

    <!-- Box teoria AREOGRAMMA CIRCOLARE -->
    <div class="p-4 bg-custom-blue-light rounded-lg">
      <div class="bg-white rounded-lg p-4 border-2 border-<%= @pagina.base_color %>-400">
        <h3 class="font-bold text-center text-<%= @pagina.base_color %>-600 mb-3">AREOGRAMMA CIRCOLARE o GRAFICO A TORTA</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="flex items-center justify-center">
            <!-- Grafico a torta con CSS -->
            <div class="relative w-40 h-40">
              <svg viewBox="0 0 100 100" class="w-full h-full">
                <!-- 45% nuoto (blu) -->
                <circle cx="50" cy="50" r="40" fill="transparent" stroke="#3b82f6" stroke-width="40" stroke-dasharray="113 251.2" stroke-dashoffset="0" transform="rotate(-90 50 50)"></circle>
                <!-- 25% basket (verde) -->
                <circle cx="50" cy="50" r="40" fill="transparent" stroke="#22c55e" stroke-width="40" stroke-dasharray="62.8 251.2" stroke-dashoffset="-113" transform="rotate(-90 50 50)"></circle>
                <!-- 20% karate (arancione) -->
                <circle cx="50" cy="50" r="40" fill="transparent" stroke="#fb923c" stroke-width="40" stroke-dasharray="50.24 251.2" stroke-dashoffset="-175.8" transform="rotate(-90 50 50)"></circle>
                <!-- 10% pallavolo (giallo) -->
                <circle cx="50" cy="50" r="40" fill="transparent" stroke="#facc15" stroke-width="40" stroke-dasharray="25.12 251.2" stroke-dashoffset="-226.04" transform="rotate(-90 50 50)"></circle>
              </svg>
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center">
                  <span class="absolute top-2 right-4 font-bold">45 %</span>
                  <span class="absolute top-12 right-0 font-bold">25 %</span>
                  <span class="absolute bottom-4 right-4 font-bold">20 %</span>
                  <span class="absolute bottom-4 left-4 font-bold">10 %</span>
                </div>
              </div>
            </div>
          </div>
          <div class="space-y-2">
            <p class="text-gray-700 font-bold">Sport praticati</p>
            <div class="space-y-1">
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-blue-500 rounded"></span> nuoto</span>
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-green-500 rounded"></span> basket</span>
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-orange-400 rounded"></span> karate</span>
              <span class="flex items-center gap-2"><span class="w-4 h-4 bg-yellow-400 rounded"></span> pallavolo</span>
            </div>
          </div>
        </div>
        <p class="text-center text-gray-600 font-bold mt-2">SETTORI CIRCOLARI</p>
      </div>
    </div>

    <!-- Esercizio 1: Collega -->
    <div class="p-4 bg-orange-100 rounded-lg">
      <p class="font-bold text-gray-700 mb-4">
        <span class="text-<%= @pagina.base_color %>-500">●</span>
        Collega.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-3">
          <p class="text-gray-700">• L'<strong>ISTOGRAMMA</strong></p>
          <p class="text-gray-700">• L'<strong>IDEOGRAMMA</strong></p>
          <p class="text-gray-700">• L'<strong>AREOGRAMMA QUADRATO</strong></p>
          <p class="text-gray-700">• L'<strong>AREOGRAMMA CIRCOLARE</strong></p>
        </div>
        <div class="space-y-3">
          <p class="text-gray-700">usa i <strong>QUADRATINI</strong>.</p>
          <p class="text-gray-700">usa le <strong>COLONNE</strong>.</p>
          <p class="text-gray-700">usa i <strong>SETTORI CIRCOLARI</strong>.</p>
          <p class="text-gray-700">usa i <strong>DISEGNI</strong>.</p>
        </div>
      </div>

      <p class="text-gray-600 mt-4 italic">Collega mentalmente ogni tipo di grafico con il suo elemento caratteristico.</p>
    </div>

    <!-- Esercizio 2: Osserva e rispondi -->
    <div class="p-4 bg-orange-100 rounded-lg">
      <p class="font-bold text-gray-700 mb-4">
        <span class="text-<%= @pagina.base_color %>-500">●</span>
        Osserva e rispondi.
      </p>

      <div class="space-y-3">
        <p class="text-gray-700">• Quali grafici rappresentano i dati relativi ai frutti preferiti?</p>
        <div class="space-y-2 pl-4">
          <label class="flex items-center gap-2 cursor-pointer hover:bg-orange-50 p-2 rounded">
            <input type="radio" name="grafici_frutti" class="w-5 h-5" data-correct-answer="false">
            <span class="text-gray-700"><strong>AREOGRAMMA QUADRATO</strong> e <strong>AREOGRAMMA CIRCOLARE</strong>.</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer hover:bg-orange-50 p-2 rounded">
            <input type="radio" name="grafici_frutti" class="w-5 h-5" data-correct-answer="true">
            <span class="text-gray-700"><strong>ISTOGRAMMA</strong> e <strong>IDEOGRAMMA</strong>.</span>
          </label>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
