<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Introduzione -->
    <div class="p-4 bg-custom-blue-light rounded-lg">
      <p class="text-gray-700">
        Quando si analizzano i dati raccolti con un'indagine, si possono mettere in evidenza alcuni valori significativi.
      </p>
    </div>

    <!-- Esempio libri letti -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="space-y-4">
        <p class="text-gray-700">È stato chiesto a 7 bambini di scuola primaria quanti libri hanno letto in un anno.</p>

        <p class="font-bold text-gray-700">
          <span class="text-<%= @pagina.base_color %>-500">•</span> Osserva la tabella e rispondi.
        </p>

        <div class="overflow-x-auto">
          <table class="border-collapse border border-gray-300">
            <thead>
              <tr>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">alunno</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">n. libri letti</th>
              </tr>
            </thead>
            <tbody>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Davide</td><td class="p-2 border border-gray-300 bg-white text-center">3</td></tr>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Chiara</td><td class="p-2 border border-gray-300 bg-white text-center">4</td></tr>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Nadav</td><td class="p-2 border border-gray-300 bg-white text-center">2</td></tr>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Melissa</td><td class="p-2 border border-gray-300 bg-white text-center">3</td></tr>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Noemi</td><td class="p-2 border border-gray-300 bg-white text-center">1</td></tr>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Mattia</td><td class="p-2 border border-gray-300 bg-white text-center">3</td></tr>
              <tr><td class="p-2 border border-gray-300 bg-white text-center">Giosuè</td><td class="p-2 border border-gray-300 bg-white text-center">5</td></tr>
            </tbody>
          </table>
        </div>

        <div class="flex items-center gap-2 flex-wrap">
          <span class="text-gray-700">Qual è il dato che ha la frequenza maggiore, cioè qual è la moda?</span>
          <input type="text" data-correct-answer="3" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>

        <div class="p-3 bg-<%= @pagina.base_color %>-50 rounded-lg">
          <p class="text-gray-700">La <strong>moda</strong> è il <strong>dato che si presenta con maggiore frequenza</strong>.</p>
        </div>
      </div>

      <div class="overflow-x-auto">
        <table class="border-collapse border border-gray-300">
          <thead>
            <tr>
              <th class="p-2 border border-gray-300 bg-custom-blue-light text-center font-bold">n. libri letti</th>
              <th class="p-2 border border-gray-300 bg-custom-blue-light text-center font-bold">frequenza</th>
            </tr>
          </thead>
          <tbody>
            <tr><td class="p-2 border border-gray-300 bg-white text-center">1</td><td class="p-2 border border-gray-300 bg-white text-center">1</td></tr>
            <tr><td class="p-2 border border-gray-300 bg-white text-center">2</td><td class="p-2 border border-gray-300 bg-white text-center">1</td></tr>
            <tr><td class="p-2 border border-gray-300 bg-white text-center font-bold text-<%= @pagina.base_color %>-600">3</td><td class="p-2 border border-gray-300 bg-white text-center font-bold text-<%= @pagina.base_color %>-600">3</td></tr>
            <tr><td class="p-2 border border-gray-300 bg-white text-center">4</td><td class="p-2 border border-gray-300 bg-white text-center">1</td></tr>
            <tr><td class="p-2 border border-gray-300 bg-white text-center">5</td><td class="p-2 border border-gray-300 bg-white text-center">1</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- La MEDIA -->
    <div class="space-y-4">
      <p class="text-gray-700">In <strong>media</strong> quanti libri hanno letto i bambini intervistati? Per rispondere:</p>

      <ol class="list-decimal pl-6 space-y-2 text-gray-700">
        <li>addiziona i dati, cioè i libri letti:<br>
          <span class="font-bold text-<%= @pagina.base_color %>-600">3 + 4 + 2 + 3 + 1 + 3 + 5 = 21</span>
        </li>
        <li>dividi per il numero di dati, cioè per 7, quanti sono i bambini:<br>
          <span class="font-bold text-<%= @pagina.base_color %>-600">21 : 7 = 3</span>
        </li>
      </ol>

      <p class="text-gray-700">Nel gruppo di bambini intervistati, ciascuno in un anno ha letto in <strong>media</strong> 3 libri.</p>

      <div class="p-3 bg-custom-blue-light rounded-lg">
        <p class="text-gray-700">La <strong>media</strong> è il valore che si ottiene sommando tutti i dati e dividendo il risultato per il numero dei dati.</p>
      </div>
    </div>

    <!-- La MEDIANA -->
    <div class="space-y-4">
      <p class="text-gray-700">Scriviamo ora i dati in successione ordinata:</p>

      <div class="flex justify-center gap-1">
        <% [1, 2, 3].each do |n| %>
          <span class="w-10 h-10 flex items-center justify-center border-2 border-<%= @pagina.base_color %>-400 rounded bg-white"><%= n %></span>
        <% end %>
        <span class="w-10 h-10 flex items-center justify-center border-2 border-<%= @pagina.base_color %>-600 rounded bg-<%= @pagina.base_color %>-200 font-bold">3</span>
        <% [3, 4, 5].each do |n| %>
          <span class="w-10 h-10 flex items-center justify-center border-2 border-<%= @pagina.base_color %>-400 rounded bg-white"><%= n %></span>
        <% end %>
      </div>

      <div class="flex items-center gap-2 flex-wrap">
        <span class="text-gray-700">Qual è il dato che occupa la posizione centrale, cioè qual è la <strong>mediana</strong>?</span>
        <input type="text" data-correct-answer="3" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
      </div>

      <p class="text-gray-700">
        Nel nostro caso i dati sono dispari (7), quindi individuare la mediana è stato semplice. Se il numero dei dati della successione è pari, la mediana è data dalla media tra i due valori centrali.<br>
        Per esempio, in questa successione di dati:
      </p>

      <div class="flex items-center gap-2 flex-wrap justify-center">
        <div class="flex gap-1">
          <% [2, 2, 5, 6].each do |n| %>
            <span class="w-8 h-8 flex items-center justify-center border-2 border-cyan-400 rounded bg-white"><%= n %></span>
          <% end %>
          <span class="w-8 h-8 flex items-center justify-center border-2 border-cyan-600 rounded bg-cyan-200 font-bold">6</span>
          <span class="w-8 h-8 flex items-center justify-center border-2 border-cyan-600 rounded bg-cyan-200 font-bold">8</span>
          <% [8, 9, 9, 9].each do |n| %>
            <span class="w-8 h-8 flex items-center justify-center border-2 border-cyan-400 rounded bg-white"><%= n %></span>
          <% end %>
        </div>
        <span class="text-gray-700">la mediana è <strong>(6 + 8) : 2 =</strong></span>
        <input type="text" data-correct-answer="14" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        <span class="text-gray-700"><strong>: 2 =</strong></span>
        <input type="text" data-correct-answer="7" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
      </div>

      <div class="p-3 bg-custom-blue-light rounded-lg">
        <p class="text-gray-700">La <strong>mediana</strong> è il <strong>valore centrale</strong> in una successione ordinata.</p>
      </div>
    </div>

    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <div class="p-4 bg-white rounded-2xl -mx-4 md:-mx-6 -mt-4 md:-mt-6 border-3 border-blue-500">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          La tabella riporta il numero di biglietti venduti durante la settimana nel Museo dell'Arte Contadina di Altamura. Osservala ed esegui sul quaderno quanto richiesto.
        </p>

        <div class="overflow-x-auto mb-4">
          <table class="border-collapse border border-gray-300 mx-auto">
            <thead>
              <tr>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">lunedì</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">martedì</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">mercoledì</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">giovedì</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">venerdì</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">sabato</th>
                <th class="p-2 border border-gray-300 bg-<%= @pagina.base_color %>-100 text-center font-bold">domenica</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="p-2 border border-gray-300 bg-white text-center">15</td>
                <td class="p-2 border border-gray-300 bg-white text-center">14</td>
                <td class="p-2 border border-gray-300 bg-white text-center">9</td>
                <td class="p-2 border border-gray-300 bg-white text-center">15</td>
                <td class="p-2 border border-gray-300 bg-white text-center">18</td>
                <td class="p-2 border border-gray-300 bg-white text-center">15</td>
                <td class="p-2 border border-gray-300 bg-white text-center">26</td>
              </tr>
            </tbody>
          </table>
        </div>

        <ul class="list-disc pl-6 space-y-1 text-gray-700 marker:text-<%= @pagina.base_color %>-500">
          <li>Ricava la tabella di frequenza e individua la moda.</li>
          <li>Calcola la media giornaliera dei biglietti venduti.</li>
          <li>Scrivi i dati in successione ordinata e individua la mediana.</li>
        </ul>
      </div>
    </div>

    <%= render 'shared/quaderno_link', pagine: [261, 263] %>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
