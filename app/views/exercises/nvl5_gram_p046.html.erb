<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-indigo-50 via-white to-blue-50 rounded-3xl shadow-xl" data-controller="exercise-checker">

  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-indigo-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">
          MORFOLOGIA
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-indigo-600">Il significato dei nomi</h1>
      </div>
      <div class="flex-shrink-0 bg-indigo-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl">
        46
      </div>
    </div>
  </div>

  <!-- Introduction -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-indigo-200 shadow-2xl p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-indigo-700 mb-3">In base al significato, i nomi possono essere:</h2>
    <ul class="space-y-2 text-base md:text-lg text-gray-700">
      <li class="flex items-start gap-2">
        <span class="text-indigo-600 font-bold">•</span>
        <span><strong>comuni</strong> → maestro, città, isola</span>
      </li>
      <li class="flex items-start gap-2">
        <span class="text-indigo-600 font-bold">•</span>
        <span><strong>propri</strong> → Riccardo, Bologna, Capri</span>
      </li>
      <li class="flex items-start gap-2">
        <span class="text-blue-600 font-bold">•</span>
        <span><strong>concreti</strong> → aula, banco, campanella</span>
      </li>
      <li class="flex items-start gap-2">
        <span class="text-blue-600 font-bold">•</span>
        <span><strong>astratti</strong> → amicizia, curiosità, rispetto</span>
      </li>
      <li class="flex items-start gap-2">
        <span class="text-blue-600 font-bold">•</span>
        <span><strong>collettivi</strong> → classe, arcipelago</span>
      </li>
    </ul>
  </div>

  <!-- Exercise 1: Identify common and proper nouns -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-purple-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="true">
    <div class="mb-4 inline-block bg-gradient-to-r from-indigo-500 to-blue-500 text-white px-3 md:px-6 py-2 rounded-full text-xs md:text-sm font-bold shadow-lg">
      1 IMPARARE TUTTI
    </div>
    <h2 class="text-lg md:text-xl font-bold text-purple-700 mb-3 flex items-center flex-wrap gap-2">
      <span>Clicca sui <span class="text-blue-600">nomi comuni<span class="inline-block w-6 h-6 bg-blue-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="blue" data-action="click->word-highlighter#selectColor"></span></span> e sui <span class="text-violet-600">nomi propri<span class="inline-block w-6 h-6 bg-violet-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="violet" data-action="click->word-highlighter#selectColor"></span></span>. I nomi propri devono iniziare con la lettera maiuscola.</span>
    </h2>

    <div class="bg-purple-50 border-2 border-purple-200 rounded-xl px-4 py-4 text-base md:text-lg text-gray-700 leading-relaxed cursor-pointer">
      <p class="mb-3">
        "Io vivo a <span class="transition" data-word-highlighter-target="word" data-correct="violet" data-action="click->word-highlighter#toggleHighlight">napoli</span>, una <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">città</span> bellissima.
        Abito in una <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">casa</span> piccola e divido la <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">cameretta</span> con mio
        <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">fratello</span> <span class="transition" data-word-highlighter-target="word" data-correct="violet" data-action="click->word-highlighter#toggleHighlight">filippo</span>. Durante la
        <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">settimana</span> faccio i <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">compiti</span> e vado agli
        <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">allenamenti</span> di basket, ma la domenica <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">pomeriggio</span>
        esco sempre con il mio migliore <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">amico</span>,
        <span class="transition" data-word-highlighter-target="word" data-correct="violet" data-action="click->word-highlighter#toggleHighlight">giovanni</span> detto <span class="transition" data-word-highlighter-target="word" data-correct="violet" data-action="click->word-highlighter#toggleHighlight">giova</span>.
        La scorsa domenica abbiamo fatto una <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">passeggiata</span> lungo il
        <span class="transition" data-word-highlighter-target="word" data-correct="violet" data-action="click->word-highlighter#toggleHighlight">golfo di napoli</span>, con il
        <span class="transition" data-word-highlighter-target="word" data-correct="violet" data-action="click->word-highlighter#toggleHighlight">vesuvio</span> davanti a noi: che <span class="transition" data-word-highlighter-target="word" data-correct="blue" data-action="click->word-highlighter#toggleHighlight">emozione</span>!"
      </p>
      <p class="text-sm text-gray-600 italic">Nota: I nomi propri devono iniziare con la lettera maiuscola.</p>
    </div>
  </div>

  <!-- Exercise 2: Abstract vs Concrete nouns -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-green-200 shadow-2xl p-4 md:p-6" data-controller="word-highlighter" data-word-highlighter-multi-color-value="true">
    <h2 class="text-lg md:text-xl font-bold text-green-700 mb-3 flex items-center flex-wrap gap-2">
      <span class="font-bold">2</span>
      <span>Clicca sui <span class="text-red-600">nomi astratti<span class="inline-block w-6 h-6 bg-red-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="red" data-action="click->word-highlighter#selectColor"></span></span> e sui <span class="text-green-600">nomi concreti<span class="inline-block w-6 h-6 bg-green-300 rounded ml-1 align-middle cursor-pointer transition transform hover:scale-110" data-word-highlighter-target="colorBox" data-color="green" data-action="click->word-highlighter#selectColor"></span></span>.</span>
    </h2>

    <% nouns = [
      { word: "finestra", type: "concreto" },
      { word: "onestà", type: "astratto" },
      { word: "fiore", type: "concreto" },
      { word: "città", type: "concreto" },
      { word: "libro", type: "concreto" },
      { word: "felicità", type: "astratto" },
      { word: "amore", type: "astratto" },
      { word: "tavolo", type: "concreto" },
      { word: "paura", type: "astratto" },
      { word: "cuscino", type: "concreto" },
      { word: "altezza", type: "astratto" },
      { word: "notte", type: "concreto" },
      { word: "marmellata", type: "concreto" },
      { word: "simpatia", type: "astratto" },
      { word: "bellezza", type: "astratto" },
      { word: "gallo", type: "concreto" },
      { word: "giovinezza", type: "astratto" }
    ] %>

    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 text-base md:text-lg cursor-pointer">
      <% nouns.each do |noun| %>
        <div class="bg-gray-50 border-2 border-gray-200 hover:border-gray-300 rounded-xl px-3 py-2 text-center transition">
          <span class="transition" data-word-highlighter-target="word" data-correct="<%= noun[:type] == 'astratto' ? 'red' : 'green' %>" data-action="click->word-highlighter#toggleHighlight"><%= noun[:word] %></span>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Exercise 3: Collective nouns -->
  <div class="mb-6 bg-white rounded-2xl border-4 border-orange-200 shadow-2xl p-4 md:p-6" data-controller="fill-blanks">
    <h2 class="text-lg md:text-xl font-bold text-orange-700 mb-3">
      <span class="font-bold">3</span> Scrivi il nome collettivo.
    </h2>

    <% collectives = [
      { description: "insieme di musicisti", answer: "orchestra" },
      { description: "insieme di pecore", answer: "gregge" },
      { description: "insieme di navi", answer: "flotta" },
      { description: "insieme di pini", answer: "pineta" },
      { description: "insieme di uccelli", answer: "stormo" },
      { description: "insieme di stelle", answer: "costellazione" }
    ] %>

    <div class="space-y-3 text-base md:text-lg">
      <% collectives.each do |item| %>
        <div class="bg-orange-50 border-2 border-orange-200 rounded-xl px-3 py-3 flex flex-wrap items-center gap-2">
          <span class="text-gray-700"><%= item[:description] %></span>
          <span class="text-gray-500">→</span>
          <input type="text"
                 class="flex-1 min-w-[150px] border-b-2 border-orange-500 bg-transparent px-2 py-1 text-center focus:outline-none focus:border-orange-700"
                 data-fill-blanks-target="input"
                 data-answer="<%= item[:answer] %>"
                 data-correct-answer="<%= item[:answer] %>"
                 placeholder="..........................."
                 maxlength="20">
        </div>
      <% end %>
    </div>
  </div>

  <div class="text-right text-sm text-gray-500 mb-6">
    Esercizi pp. 146, 149 e 153
  </div>

  <!-- Exercise Controls -->
  <div class="mt-6">
    <%= render 'shared/exercise_controls', color: 'indigo', current_page: 'nvl5_gram_p046' %>
  </div>
</div>
