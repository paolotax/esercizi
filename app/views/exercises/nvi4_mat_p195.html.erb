<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Tabella riassuntiva proprietà -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <tbody>
          <!-- Moltiplicazione -->
          <tr>
            <td rowspan="3" class="p-3 border border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-800 text-center font-bold text-gray-700 dark:text-gray-200 align-middle">
              Moltiplicazione
            </td>
            <td class="p-2 text-center text-gray-700 dark:text-gray-200">→</td>
            <td class="p-3 border border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
              <p class="font-bold">Proprietà commutativa</p>
              <p><span class="font-bold">25</span> × 8 = 8 × <span class="font-bold">25</span> = 200</p>
            </td>
          </tr>
          <tr>
            <td class="p-2 text-center text-gray-700 dark:text-gray-200">→</td>
            <td class="p-3 border border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
              <p class="font-bold">Proprietà distributiva</p>
              <p><span class="font-bold">23</span> × 4 = 92</p>
              <p>(<span class="font-bold">20</span> + <span class="font-bold">3</span>) × 4 = 92</p>
              <p>(<span class="font-bold">20</span> × 4) + (<span class="font-bold">3</span> × 4) = 80 + 12 = 92</p>
            </td>
          </tr>
          <tr>
            <td class="p-2 text-center text-gray-700 dark:text-gray-200">→</td>
            <td class="p-3 border border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
              <p class="font-bold">Proprietà associativa</p>
              <div class="flex items-center gap-2 flex-wrap mt-2">
                <span>5 × 4 × 3 = 60</span>
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span>↓&nbsp;&nbsp;&nbsp;&nbsp;↓</span>
              </div>
              <div class="flex items-center gap-2 flex-wrap">
                <span class="font-bold">20</span><span> × 3 = 60</span>
              </div>
            </td>
          </tr>
          <!-- Divisione -->
          <tr>
            <td class="p-3 border border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-800 text-center font-bold text-gray-700 dark:text-gray-200">
              Divisione
            </td>
            <td class="p-2 text-center text-gray-700 dark:text-gray-200">→</td>
            <td class="p-3 border border-cyan-400 dark:border-cyan-600 text-gray-700 dark:text-gray-200">
              <p class="font-bold">Proprietà invariantiva</p>
              <p>20 : 4 = 5</p>
              <p>(20 <span class="font-bold">: 2</span>) : (4 <span class="font-bold">: 2</span>) = 10 : 2 = 5</p>
              <p>(20 <span class="font-bold">× 2</span>) : (4 <span class="font-bold">× 2</span>) = 40 : 8 = 5</p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Esercizio 1 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(1) %>
        Scrivi la proprietà che è stata applicata nelle seguenti operazioni.
      </p>

      <div class="space-y-4">
        <!-- Esempi -->
        <div class="p-3 bg-cyan-50 dark:bg-cyan-900 rounded-lg">
          <p class="text-gray-700 dark:text-gray-200">
            <span class="font-bold">60 × 20 = 20 × 60</span> = proprietà <span class="font-bold text-cyan-600 dark:text-cyan-400">commutativa</span>
          </p>
          <p class="text-gray-700 dark:text-gray-200">
            <span class="font-bold">96 : 8 = (96 : 2) : (8 : 2)</span> = proprietà <span class="font-bold text-cyan-600 dark:text-cyan-400">invariantiva</span>
          </p>
        </div>

        <!-- Domande -->
        <div class="space-y-3">
          <div class="flex items-center gap-2 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">6 × 2 × 4 = (6 × 2) × 4 = 12 × 4 = proprietà</span>
            <input type="text" data-correct-answer="associativa" class="w-40 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">2 × 8 × 6 × 5 = (2 × 8) × (6 × 5) = proprietà</span>
            <input type="text" data-correct-answer="associativa" class="w-40 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">(12 + 7) × 3 = (12 × 3) + (7 × 3) = proprietà</span>
            <input type="text" data-correct-answer="distributiva" class="w-40 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
          <div class="flex items-center gap-2 flex-wrap">
            <span class="text-gray-700 dark:text-gray-200">48 : 6 = (48 : 3) : (6 : 3) = proprietà</span>
            <input type="text" data-correct-answer="invariantiva" class="w-40 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(2) %>
        Collega ogni problema all'operazione che lo risolve.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Problemi a e b -->
        <div class="space-y-4">
          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <p class="font-bold text-gray-700 dark:text-gray-200 mb-2">a.</p>
            <p class="text-gray-700 dark:text-gray-200 mb-3">
              Duccio vuole sistemare le sue 306 carte in 6 album uguali.
              <br>Quante carte mette in ogni album?
            </p>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Operazione:</span>
              <select data-correct-answer="306 : 6" class="border-2 border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200">
                <option value="">Scegli...</option>
                <option value="306 × 6">306 × 6</option>
                <option value="306 : 6">306 : 6</option>
              </select>
            </div>
          </div>

          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <p class="font-bold text-gray-700 dark:text-gray-200 mb-2">b.</p>
            <p class="text-gray-700 dark:text-gray-200 mb-3">
              Un falegname ha acquistato 6 confezioni da 306 chiodi ciascuna.
              <br>Quanti chiodi ha acquistato?
            </p>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Operazione:</span>
              <select data-correct-answer="306 × 6" class="border-2 border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200">
                <option value="">Scegli...</option>
                <option value="306 × 6">306 × 6</option>
                <option value="306 : 6">306 : 6</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Problemi c e d -->
        <div class="space-y-4">
          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <p class="font-bold text-gray-700 dark:text-gray-200 mb-2">c.</p>
            <p class="text-gray-700 dark:text-gray-200 mb-3">
              Lo zio di Luca ha pagato la sua nuova automobile in 36 rate mensili da € 792 ciascuna. Quanto è costata in tutto l'automobile?
            </p>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Operazione:</span>
              <select data-correct-answer="792 × 36" class="border-2 border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200">
                <option value="">Scegli...</option>
                <option value="792 × 36">792 × 36</option>
                <option value="792 : 36">792 : 36</option>
              </select>
            </div>
          </div>

          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <p class="font-bold text-gray-700 dark:text-gray-200 mb-2">d.</p>
            <p class="text-gray-700 dark:text-gray-200 mb-3">
              Un fornaio acquista 792 kg di farina e la sistema in 36 sacchi.
              <br>Quanti kg di farina ci sono in ogni sacco?
            </p>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">Operazione:</span>
              <select data-correct-answer="792 : 36" class="border-2 border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200">
                <option value="">Scegli...</option>
                <option value="792 × 36">792 × 36</option>
                <option value="792 : 36">792 : 36</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div>
      <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
        <%= numero_esercizio_badge(3) %>
        Calcola in colonna sul quaderno. Poi segna con una <span class="bg-cyan-100 dark:bg-cyan-800 px-1 rounded font-bold">X</span> il risultato corretto tra quelli proposti.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- 1538 × 64 -->
        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-3">1 538 × 64 =</p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc1" value="97442" data-correct-answer="98432" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">97 442</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc1" value="96532" data-correct-answer="98432" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">96 532</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc1" value="98432" data-correct-answer="98432" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">98 432</span>
            </label>
          </div>
        </div>

        <!-- 9937 : 19 -->
        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-3">9 937 : 19 =</p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc2" value="532" data-correct-answer="523" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">532</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc2" value="523" data-correct-answer="523" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">523</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc2" value="522" data-correct-answer="523" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">522</span>
            </label>
          </div>
        </div>

        <!-- 426 × 356 -->
        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-3">426 × 356 =</p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc3" value="151656" data-correct-answer="151656" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">151 656</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc3" value="151565" data-correct-answer="151656" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">151 565</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc3" value="150556" data-correct-answer="151656" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">150 556</span>
            </label>
          </div>
        </div>

        <!-- 54915 : 35 -->
        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-3">54 915 : 35 =</p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc4" value="2578" data-correct-answer="1569" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">2 578</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc4" value="1569" data-correct-answer="1569" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">1 569</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="calc4" value="1479" data-correct-answer="1569" class="form-radio">
              <span class="text-gray-700 dark:text-gray-200">1 479</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
