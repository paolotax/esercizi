<div class="max-w-6xl mx-auto p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Box Ricorda! -->
    <div class="p-4 md:p-6 bg-[#CCEFFC] rounded-2xl">
      <h3 class="font-bold text-pink-600 mb-4">Ricorda!</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
        <div>
          <p class="text-gray-700 leading-relaxed mb-3">
            Frazionare significa dividere un intero in parti uguali.
          </p>
          <p class="text-gray-700 leading-relaxed">
            Ogni parte ottenuta si chiama <span class="font-bold">unità frazionaria</span>.
          </p>
          <div class="mt-4 flex items-center gap-3">
            <%= image_tag "nvi5_mat/p005/p005_02.jpg", alt: "Frazione 1/6" %>
            <span class="text-gray-700">= unità frazionaria</span>
          </div>
        </div>
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p005/output-1715938802005_683_258_199_210.png", alt: "Cerchio diviso in 6 parti" %>
        </div>
      </div>
    </div>

    <!-- Esercizi 1 e 2 affiancati -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Esercizio 1 -->
      <div class="p-4 md:p-6">
        <div class="flex items-start gap-3 mb-6">
          <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">1</div>
          <p class="text-gray-700">
            Osserva le figure e scrivi la frazione che corrisponde alla parte colorata. Segui l'esempio.
          </p>
        </div>
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p005/p005_03.jpg", alt: "Esercizio 1 - Figure con frazioni", class: "w-full max-w-md" %>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div class="p-4 md:p-6">
        <div class="flex items-start gap-3 mb-6">
          <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">2</div>
          <p class="text-gray-700">
            Colora le parti indicate dalle frazioni come nell'esempio.
          </p>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <!-- Esagono -->
          <div class="flex items-center gap-3">
            <svg viewBox="0 0 120 120" class="w-36 h-36" data-controller="fraction-coloring" data-fraction-coloring-parts-value="6" data-fraction-coloring-to-color-value="3">
              <polygon points="60,10 100,35 100,85 60,110 20,85 20,35" fill="white" stroke="#DB2777" stroke-width="2"/>
              <line x1="60" y1="60" x2="60" y2="10" stroke="#DB2777" stroke-width="2"/>
              <line x1="60" y1="60" x2="100" y2="35" stroke="#DB2777" stroke-width="2"/>
              <line x1="60" y1="60" x2="100" y2="85" stroke="#DB2777" stroke-width="2"/>
              <line x1="60" y1="60" x2="60" y2="110" stroke="#DB2777" stroke-width="2"/>
              <line x1="60" y1="60" x2="20" y2="85" stroke="#DB2777" stroke-width="2"/>
              <line x1="60" y1="60" x2="20" y2="35" stroke="#DB2777" stroke-width="2"/>
              <path d="M 60 60 L 60 10 L 100 35 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <path d="M 60 60 L 100 35 L 100 85 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <path d="M 60 60 L 100 85 L 60 110 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <path d="M 60 60 L 60 110 L 20 85 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <path d="M 60 60 L 20 85 L 20 35 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <path d="M 60 60 L 20 35 L 60 10 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
            </svg>
            <div class="flex flex-col items-center text-blue-600">
              <span class="border-b-2 border-pink-700 pb-1">3</span>
              <span class="pt-1">6</span>
            </div>
          </div>
          <!-- Quadrato 3x3 -->
          <div class="flex items-center gap-3">
            <svg viewBox="0 0 120 120" class="w-36 h-36" data-controller="fraction-coloring" data-fraction-coloring-parts-value="9" data-fraction-coloring-to-color-value="9">
              <rect x="10" y="10" width="100" height="100" fill="white" stroke="#DB2777" stroke-width="2"/>
              <line x1="10" y1="43.33" x2="110" y2="43.33" stroke="#DB2777" stroke-width="2"/>
              <line x1="10" y1="76.66" x2="110" y2="76.66" stroke="#DB2777" stroke-width="2"/>
              <line x1="43.33" y1="10" x2="43.33" y2="110" stroke="#DB2777" stroke-width="2"/>
              <line x1="76.66" y1="10" x2="76.66" y2="110" stroke="#DB2777" stroke-width="2"/>
              <rect x="10" y="10" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="43.33" y="10" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="76.66" y="10" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="10" y="43.33" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="43.33" y="43.33" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="76.66" y="43.33" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="10" y="76.66" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="43.33" y="76.66" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <rect x="76.66" y="76.66" width="33.33" height="33.33" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
            </svg>
            <div class="flex flex-col items-center text-blue-600">
              <span class="border-b-2 border-pink-700 pb-1">9</span>
              <span class="pt-1">9</span>
            </div>
          </div>
          <!-- Cerchio -->
          <div class="flex items-center gap-3">
            <svg viewBox="0 0 120 120" class="w-36 h-36" data-controller="fraction-coloring" data-fraction-coloring-parts-value="2" data-fraction-coloring-to-color-value="1">
              <circle cx="60" cy="60" r="50" fill="white" stroke="#DB2777" stroke-width="2"/>
              <line x1="10" y1="60" x2="110" y2="60" stroke="#DB2777" stroke-width="2"/>
              <path d="M 60 60 L 10 60 A 50 50 0 0 1 60 10 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <path d="M 60 60 L 60 10 A 50 50 0 0 1 110 60 Z" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
            </svg>
            <div class="flex flex-col items-center text-blue-600">
              <span class="border-b-2 border-pink-700 pb-1">1</span>
              <span class="pt-1">2</span>
            </div>
          </div>
          <!-- Parallelogramma -->
          <div class="flex items-center gap-3">
            <svg viewBox="0 0 140 100" class="w-40 h-28" data-controller="fraction-coloring" data-fraction-coloring-parts-value="6" data-fraction-coloring-to-color-value="5">
              <polygon points="20,10 120,10 100,90 0,90" fill="white" stroke="#DB2777" stroke-width="2"/>
              <line x1="36.67" y1="10" x2="16.67" y2="90" stroke="#DB2777" stroke-width="2"/>
              <line x1="53.33" y1="10" x2="33.33" y2="90" stroke="#DB2777" stroke-width="2"/>
              <line x1="70" y1="10" x2="50" y2="90" stroke="#DB2777" stroke-width="2"/>
              <line x1="86.67" y1="10" x2="66.67" y2="90" stroke="#DB2777" stroke-width="2"/>
              <line x1="103.33" y1="10" x2="83.33" y2="90" stroke="#DB2777" stroke-width="2"/>
              <polygon points="20,10 36.67,10 16.67,90 0,90" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <polygon points="36.67,10 53.33,10 33.33,90 16.67,90" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <polygon points="53.33,10 70,10 50,90 33.33,90" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <polygon points="70,10 86.67,10 66.67,90 50,90" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <polygon points="86.67,10 103.33,10 83.33,90 66.67,90" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
              <polygon points="103.33,10 120,10 100,90 83.33,90" class="cursor-pointer hover:opacity-80 transition-opacity" fill="transparent" stroke="transparent" data-action="click->fraction-coloring#togglePart" data-fraction-coloring-target="part"/>
            </svg>
            <div class="flex flex-col items-center text-blue-600">
              <span class="border-b-2 border-pink-700 pb-1">5</span>
              <span class="pt-1">6</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div class="p-4 md:p-6">
      <div class="flex items-start gap-3 mb-6">
        <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">3</div>
        <p class="text-gray-700">Inserisci i segni > oppure <. Segui l'esempio.</p>
      </div>
      <div class="space-y-4">
        <!-- Esempio -->
        <div class="p-4">
          <div class="flex flex-wrap items-center justify-center gap-4">
            <div class="flex flex-col items-center text-blue-700">
              <span class="border-b-2 border-blue-700 pb-1">3</span>
              <span class="pt-1">7</span>
            </div>
            <div class="px-4 py-2">&lt;</div>
            <div class="flex flex-col items-center text-blue-700">
              <span class="border-b-2 border-blue-700 pb-1">5</span>
              <span class="pt-1">7</span>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- 2/6 __ 2/4 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center justify-center gap-4">
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">2</span>
                <span class="pt-1">6</span>
              </div>
              <select class="bg-white px-4 py-2 border-2 border-blue-400 rounded text-blue-700 cursor-pointer" data-correct-answer="<">
                <option value="">...</option>
                <option value="<">&lt;</option>
                <option value=">">&gt;</option>
              </select>
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">2</span>
                <span class="pt-1">4</span>
              </div>
            </div>
          </div>
          <!-- 3/10 __ 5/10 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center justify-center gap-4">
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">3</span>
                <span class="pt-1">10</span>
              </div>
              <select class="bg-white px-4 py-2 border-2 border-blue-400 rounded text-blue-700 cursor-pointer" data-correct-answer="<">
                <option value="">...</option>
                <option value="<">&lt;</option>
                <option value=">">&gt;</option>
              </select>
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">5</span>
                <span class="pt-1">10</span>
              </div>
            </div>
          </div>
          <!-- 2/16 __ 16/16 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center justify-center gap-4">
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">2</span>
                <span class="pt-1">16</span>
              </div>
              <select class="bg-white px-4 py-2 border-2 border-blue-400 rounded text-blue-700 cursor-pointer" data-correct-answer="<">
                <option value="">...</option>
                <option value="<">&lt;</option>
                <option value=">">&gt;</option>
              </select>
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">16</span>
                <span class="pt-1">16</span>
              </div>
            </div>
          </div>
          <!-- 1/2 __ 1/5 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center justify-center gap-4">
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">1</span>
                <span class="pt-1">2</span>
              </div>
              <select class="bg-white px-4 py-2 border-2 border-blue-400 rounded text-blue-700 cursor-pointer" data-correct-answer=">">
                <option value="">...</option>
                <option value="<">&lt;</option>
                <option value=">">&gt;</option>
              </select>
              <div class="flex flex-col items-center text-blue-700">
                <span class="border-b-2 border-blue-700 pb-1">1</span>
                <span class="pt-1">5</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 4 -->
    <div class="p-4 md:p-6">
      <div class="flex items-start gap-3 mb-6">
        <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">4</div>
        <p class="text-gray-700">Calcola come nell'esempio.</p>
      </div>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Colonna 1 -->
        <div class="space-y-4">
          <!-- Esempio -->
          <div class="p-4">
            <div class="flex flex-wrap items-center gap-3">
              <div class="flex flex-col items-center">
                <span class="border-b-2 border-gray-700 pb-1">2</span>
                <span class="pt-1">3</span>
              </div>
              <span class="text-gray-700">di 21</span>
              <span class="text-gray-700">→</span>
              <div class="px-3 py-1">21 : 3 = 7</div>
              <span class="text-gray-700">→</span>
              <div class="px-3 py-1">7 × 2 = 14</div>
            </div>
          </div>
          <!-- 3/8 di 56 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center gap-3">
              <div class="flex flex-col items-center">
                <span class="border-b-2 border-gray-700 pb-1">3</span>
                <span class="pt-1">8</span>
              </div>
              <span class="text-gray-700">di 56</span>
              <span class="text-gray-700">→</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="56" placeholder="...">
              <span class="text-gray-700">:</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="8" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="7" placeholder="...">
              <span class="text-gray-700">×</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="3" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="21" placeholder="...">
            </div>
          </div>
          <!-- 6/8 di 32 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center gap-3">
              <div class="flex flex-col items-center">
                <span class="border-b-2 border-gray-700 pb-1">6</span>
                <span class="pt-1">8</span>
              </div>
              <span class="text-gray-700">di 32</span>
              <span class="text-gray-700">→</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="32" placeholder="...">
              <span class="text-gray-700">:</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="8" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="4" placeholder="...">
              <span class="text-gray-700">×</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="6" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="24" placeholder="...">
            </div>
          </div>
        </div>
        <!-- Colonna 2 -->
        <div class="space-y-4">
          <!-- 6/9 di 81 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center gap-3">
              <div class="flex flex-col items-center">
                <span class="border-b-2 border-gray-700 pb-1">6</span>
                <span class="pt-1">9</span>
              </div>
              <span class="text-gray-700">di 81</span>
              <span class="text-gray-700">→</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="81" placeholder="...">
              <span class="text-gray-700">:</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="9" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="9" placeholder="...">
              <span class="text-gray-700">×</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="6" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="54" placeholder="...">
            </div>
          </div>
          <!-- 2/10 di 60 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center gap-3">
              <div class="flex flex-col items-center">
                <span class="border-b-2 border-gray-700 pb-1">2</span>
                <span class="pt-1">10</span>
              </div>
              <span class="text-gray-700">di 60</span>
              <span class="text-gray-700">→</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="60" placeholder="...">
              <span class="text-gray-700">:</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="10" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="6" placeholder="...">
              <span class="text-gray-700">×</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="2" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="12" placeholder="...">
            </div>
          </div>
          <!-- 4/5 di 80 -->
          <div class="p-4">
            <div class="flex flex-wrap items-center gap-3">
              <div class="flex flex-col items-center">
                <span class="border-b-2 border-gray-700 pb-1">4</span>
                <span class="pt-1">5</span>
              </div>
              <span class="text-gray-700">di 80</span>
              <span class="text-gray-700">→</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="80" placeholder="...">
              <span class="text-gray-700">:</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="5" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="16" placeholder="...">
              <span class="text-gray-700">×</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="4" placeholder="...">
              <span class="text-gray-700">=</span>
              <input type="text" class="w-12 px-2 py-1 border-2 border-blue-400 rounded text-center" data-correct-answer="64" placeholder="...">
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls', color: 'blue' %>
</div>
