<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Due colonne -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <!-- Colonna sinistra -->
      <div class="space-y-6">

        <!-- Esercizio 1 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(1) %>
            Scrivi la frazione che rappresenta la parte colorata di ogni intero.
          </p>
          <%= image_tag "nvi4_mat/p082/p082_01.jpg", alt: "Figure da frazionare", class: "dark:bg-white dark:rounded-lg dark:p-1" %>
          <div class="grid grid-cols-3 gap-4 mt-3">
            <div class="flex items-center justify-center">
              <%= render 'shared/frazione', num: nil, den: nil, num_answer: "3", den_answer: "10" %>
            </div>
            <div class="flex items-center justify-center">
              <%= render 'shared/frazione', num: nil, den: nil, num_answer: "4", den_answer: "8" %>
            </div>
            <div class="flex items-center justify-center">
              <%= render 'shared/frazione', num: nil, den: nil, num_answer: "7", den_answer: "10" %>
            </div>
          </div>
        </div>

        <!-- Esercizio 2 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(2) %>
            Calcola sul quaderno il valore delle frazioni.
          </p>
          <%= image_tag "nvi4_mat/p082/p082_02.jpg", alt: "Frazioni da calcolare", class: "dark:bg-white dark:rounded-lg dark:p-1" %>
        </div>

        <!-- Esercizio 3 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(3) %>
            Confronta inserendo <span class="text-<%= @pagina.base_color %>-600 font-bold">></span>, <span class="text-<%= @pagina.base_color %>-600 font-bold"><</span> oppure <span class="text-<%= @pagina.base_color %>-600 font-bold">=</span>
          </p>
          <div class="grid grid-cols-2 gap-4">
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">7,24</span>
              <input type="text" data-correct-answer=">" class="w-10 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">7,204</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">0,6</span>
              <input type="text" data-correct-answer="=" class="w-10 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <%= render 'shared/frazione', num: 6, den: 10 %>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">0,015</span>
              <input type="text" data-correct-answer="<" class="w-10 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <%= render 'shared/frazione', num: 15, den: 100 %>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">45,7</span>
              <input type="text" data-correct-answer="<" class="w-10 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">45,70</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">4,32</span>
              <input type="text" data-correct-answer="<" class="w-10 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="text-gray-700 dark:text-gray-200">43,2</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-gray-700 dark:text-gray-200">0,28</span>
              <input type="text" data-correct-answer=">" class="w-10 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <%= render 'shared/frazione', num: 28, den: 1000 %>
            </div>
          </div>
        </div>

        <!-- Esercizio 4 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(4) %>
            Completa le tabelle.
          </p>

          <!-- Tabella addizione -->
          <div class="overflow-x-auto mb-4">
            <table class="border-collapse border-2 border-cyan-400 dark:border-cyan-600">
              <thead>
                <tr>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">+</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">0,5</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">1,8</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">1,3</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">2,5</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">0,3</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">6,5</td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="7" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="8,3" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="7,8" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="9" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="6,8" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                </tr>
                <tr>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">5,03</td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="5,53" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="6,83" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="6,33" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="7,53" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="5,33" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                </tr>
                <tr>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">4,12</td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="4,62" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="5,92" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="5,42" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="6,62" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="4,42" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Tabella sottrazione -->
          <div class="overflow-x-auto">
            <table class="border-collapse border-2 border-cyan-400 dark:border-cyan-600">
              <thead>
                <tr>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">−</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">0,5</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">2,5</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">0,7</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">10,2</th>
                  <th class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">1,6</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">35,5</td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="35" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="33" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="34,8" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="25,3" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="33,9" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                </tr>
                <tr>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">15,6</td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="15,1" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="13,1" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="14,9" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="5,4" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="14" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                </tr>
                <tr>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 text-gray-700 dark:text-gray-200 font-bold">23,29</td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="22,79" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="20,79" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="22,59" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="13,09" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                  <td class="p-2 border-2 border-cyan-400 dark:border-cyan-600 bg-white dark:bg-gray-700"><input type="text" data-correct-answer="21,69" class="w-12 text-center font-bold bg-transparent dark:text-white"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Colonna destra -->
      <div class="space-y-6">

        <!-- Esercizio 5 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(5) %>
            Esegui in colonna sul quaderno.
          </p>
          <div class="grid grid-cols-2 gap-x-4 gap-y-1">
            <p class="text-gray-700 dark:text-gray-200">634,27 + 45,348 =</p>
            <p class="text-gray-700 dark:text-gray-200">98,546 + 259,43 =</p>
            <p class="text-gray-700 dark:text-gray-200">98,29 − 9,548 =</p>
            <p class="text-gray-700 dark:text-gray-200">345,73 − 137,92 =</p>
            <p class="text-gray-700 dark:text-gray-200">35,6 × 13 =</p>
            <p class="text-gray-700 dark:text-gray-200">5,74 × 9,4 =</p>
            <p class="text-gray-700 dark:text-gray-200">68,9 : 14 =</p>
            <p class="text-gray-700 dark:text-gray-200">462,7 : 26 =</p>
            <p class="text-gray-700 dark:text-gray-200 mt-2"><span class="whitespace-nowrap">1 357</span> + 245,78 =</p>
            <p class="text-gray-700 dark:text-gray-200 mt-2">234,67 + 340 =</p>
            <p class="text-gray-700 dark:text-gray-200">345 − 7,62 =</p>
            <p class="text-gray-700 dark:text-gray-200"><span class="whitespace-nowrap">1 234</span> − 25,76 =</p>
            <p class="text-gray-700 dark:text-gray-200">74,2 × 8,5 =</p>
            <p class="text-gray-700 dark:text-gray-200">84,9 × 0,76 =</p>
            <p class="text-gray-700 dark:text-gray-200">87,42 : 4,9 =</p>
            <p class="text-gray-700 dark:text-gray-200">547,86 : 3,5 =</p>
          </div>
        </div>

        <!-- Esercizio 6 -->
        <div>
          <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
            <%= numero_esercizio_badge(6) %>
            Esegui in riga.
          </p>
          <div class="grid grid-cols-2 gap-3">
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">35,64 × <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="35640" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">4,8 × 100 =</span>
              <input type="text" data-correct-answer="480" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">456,7 : <span class="whitespace-nowrap">1 000</span> =</span>
              <input type="text" data-correct-answer="0,4567" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">0,58 : 10 =</span>
              <input type="text" data-correct-answer="0,058" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">0,542 × 10 =</span>
              <input type="text" data-correct-answer="5,42" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">4,72 × 100 =</span>
              <input type="text" data-correct-answer="472" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">14,72 : 10 =</span>
              <input type="text" data-correct-answer="1,472" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
            <div class="flex items-center gap-1">
              <span class="text-gray-700 dark:text-gray-200">328,9 : 100 =</span>
              <input type="text" data-correct-answer="3,289" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
          </div>
        </div>

        <!-- RISOLVI I PROBLEMI -->
        <div>
          <p class="font-bold text-<%= @pagina.base_color %>-700 dark:text-<%= @pagina.base_color %>-300 mb-4">RISOLVI I PROBLEMI</p>

          <!-- Problema 7 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(7) %>
              In un parcheggio, dei 96 posti disponibili, <%= render 'shared/frazione', num: 2, den: 4 %> sono riservati alle automobili e i restanti alle moto. Quanti sono i posti riservati alle moto?
            </p>
            <div class="flex items-center justify-end gap-2">
              <input type="text" data-correct-answer="48" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="shrink-0 text-gray-700 dark:text-gray-200">posti</span>
            </div>
          </div>

          <!-- Problema 8 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(8) %>
              Chiara aveva 37,25 euro. Spende 27,50 euro per fare un regalo per la mamma e con il resto compra delle bustine di figurine da 0,75 euro l'una. Quante bustine può comprare?
            </p>
            <div class="flex items-center justify-end gap-2">
              <input type="text" data-correct-answer="13" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="shrink-0 text-gray-700 dark:text-gray-200">bustine</span>
            </div>
          </div>

          <!-- Problema 9 -->
          <div class="mb-4">
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(9) %>
              Per uno spettacolo teatrale sono stati messi a disposizione gratuitamente per le scuole 350 posti. Quando le insegnanti telefonano per prenotare per i 26 alunni della 4ª C, i <%= render 'shared/frazione', num: 13, den: 14 %> dei biglietti sono stati già prenotati. Ci sono posti sufficienti per tutti gli alunni della 4ª C?
            </p>
            <div class="flex items-center gap-2">
              <label class="flex items-center gap-1 cursor-pointer">
                <input type="radio" name="p9" data-correct-answer="false" class="w-4 h-4">
                <span class="text-gray-700 dark:text-gray-200">Sì</span>
              </label>
              <label class="flex items-center gap-1 cursor-pointer">
                <input type="radio" name="p9" data-correct-answer="true" class="w-4 h-4">
                <span class="text-gray-700 dark:text-gray-200">No</span>
              </label>
            </div>
          </div>

          <!-- Problema 10 -->
          <div>
            <p class="text-gray-700 dark:text-gray-200 mb-2">
              <%= numero_esercizio_badge(10) %>
              Piero acquista 5 scatole di pennarelli che costano 12,80 euro l'una. Paga con due banconote da 50 euro. Quanto riceve di resto?
            </p>
            <div class="flex items-center justify-end gap-2">
              <input type="text" data-correct-answer="36" class="w-16 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span class="shrink-0 text-gray-700 dark:text-gray-200">euro</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
