<div class="max-w-6xl mx-auto p-3 md:p-8 bg-white" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Introduction -->
  <div class="bg-white p-4 md:p-6 pb-8">
    <div class="space-y-3 text-base md:text-lg">
      <p class="text-gray-700">
        <span class="text-<%= @pagina.base_color %>-500">•</span> Vado in montagna con i miei cugini. → <span class="font-semibold text-<%= @pagina.base_color %>-700">significato proprio</span>
      </p>
      <p class="text-gray-700">
        <span class="text-<%= @pagina.base_color %>-500">•</span> Ho una montagna di compiti. → <span class="font-semibold text-<%= @pagina.base_color %>-700">significato figurato</span>
      </p>
    </div>

    <div class="mt-4 bg-<%= @pagina.base_color %>-50 rounded-lg p-3">
      <p class="text-base md:text-lg text-gray-700 mb-2">
        <span class="text-<%= @pagina.base_color %>-500">•</span> Possiamo usare le parole:
      </p>
      <p class="text-base text-gray-700">
        <span class="text-<%= @pagina.base_color %>-500">•</span> nel <strong>significato proprio</strong> o <strong>letterale</strong> (es. montagna = rilievo terrestre)
      </p>
      <p class="text-base text-gray-700">
        <span class="text-<%= @pagina.base_color %>-500">•</span> con <strong>significato figurato</strong>, legato a quello proprio ma in contesto diverso (montagna di compiti = molti compiti)
      </p>
    </div>
  </div>

  <!-- Exercise 1: Identify proper meaning of "cuore" -->
  <div class="bg-white p-4 md:p-6 pb-8" data-controller="exercise-group">
    <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center gap-2">
      <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">1</span>
      Indica con una X la frase in cui la parola "cuore" è usata nel suo significato proprio.
    </h2>

    <% heart_sentences = [
      { text: "Tu non hai capito il cuore del problema.", correct: false },
      { text: "Il cuore ha un battito regolare.", correct: true },
      { text: "Passami un cuore di lattuga.", correct: false },
      { text: "È arrivato nel cuore della notte.", correct: false }
    ] %>

    <div class="space-y-3 text-base md:text-lg">
      <% heart_sentences.each_with_index do |sentence, index| %>
        <label class="flex items-start gap-3 rounded-lg p-3 cursor-pointer hover:bg-<%= @pagina.base_color %>-50 transition">
          <input type="checkbox"
                 name="heart_meaning"
                 value="<%= index %>"
                 data-correct-answer="<%= sentence[:correct] ? 'true' : 'false' %>"
                 class="w-5 h-5 mt-0.5">
          <span class="text-gray-700"><span class="text-<%= @pagina.base_color %>-500">•</span> <%= sentence[:text] %></span>
        </label>
      <% end %>
    </div>
  </div>

  <!-- Exercise 2: Identify proper (P) or figurative (F) meaning -->
  <div class="bg-white p-4 md:p-6 pb-8" data-controller="exercise-group">
    <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center gap-2">
      <span class="flex-shrink-0 bg-<%= @pagina.base_color %>-500 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center">2</span>
      Indica con una X se la parola evidenziata è usata nel significato proprio (P) o figurato (F).
    </h2>

    <% meaning_exercises = [
      { text: "Ce la puoi fare, non sei un asino.", word: "asino", proper: false, figurative: true },
      { text: "L'asino è il mio animale preferito.", word: "asino", proper: true, figurative: false },
      { text: "Cosa avrà mai fatto quell'angelo di Alessandro per farti arrabbiare così.", word: "angelo", proper: false, figurative: true },
      { text: "Nel quadro era raffigurato un angelo con le ali di tutti colori.", word: "angelo", proper: true, figurative: false },
      { text: "Quando sono con te, il tempo vola.", word: "vola", proper: false, figurative: true },
      { text: "Il falco vola alto per vedere le prede.", word: "vola", proper: true, figurative: false },
      { text: "La vipera è un serpente molto comune in montagna.", word: "vipera", proper: true, figurative: false },
      { text: "Giulia è buona e dolce, ma se si arrabbia diventa una vipera.", word: "vipera", proper: false, figurative: true }
    ] %>

    <div class="space-y-3 text-base md:text-lg">
      <% meaning_exercises.each_with_index do |exercise, index| %>
        <div class="rounded-lg p-3">
          <p class="text-gray-700 mb-2"><span class="text-<%= @pagina.base_color %>-500">•</span> <%= exercise[:text] %></p>
          <div class="flex gap-6 ml-6">
            <label class="flex items-center gap-2 cursor-pointer">
              <span class="text-sm font-semibold text-gray-600">P</span>
              <input type="radio"
                     name="meaning<%= index %>"
                     value="P"
                     data-correct-answer="<%= exercise[:proper] ? 'P' : 'F' %>"
                     class="w-5 h-5">
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <span class="text-sm font-semibold text-gray-600">F</span>
              <input type="radio"
                     name="meaning<%= index %>"
                     value="F"
                     data-correct-answer="<%= exercise[:proper] ? 'P' : 'F' %>"
                     class="w-5 h-5">
            </label>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="text-right text-sm text-gray-500 mb-6">
    Esercizi p. <%= link_to "143", pagina_path("nvl5_gram_p143"), class: "text-gray-600 hover:text-gray-800 underline" %>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls' %>
</div>
