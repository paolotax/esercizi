<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Introduzione - Ricorda! -->
    <div class="p-4 md:p-6 bg-custom-blue dark:bg-cyan-900/50 rounded-2xl">
      <h3 class="font-bold text-<%= @pagina.base_color %>-600 dark:text-<%= @pagina.base_color %>-400 italic mb-4">Ricorda!</h3>
      <p class="text-gray-700 dark:text-gray-200">
        I numeri possono essere scritti sulla <span class="font-bold">linea dei numeri</span> in <span class="font-bold">ordine crescente</span>, cioè dal minore al maggiore.
      </p>

      <!-- Number line with SVG -->
      <div class="flex justify-center w-full">
        <!-- SVG Line -->
        <svg width="900" height="50">
          <!-- Initial dashed section (before 100) -->
          <line x1="10" y1="30" x2="50" y2="30"
                stroke="#0891b2" stroke-width="2" stroke-dasharray="5,5"/>

          <!-- Numbers with dots from 100 to 115 -->
          <!-- 99 -->
          <text x="40" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">99</text>

          <!-- 100 -->
          <text x="90" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">100</text>
          <circle cx="90" cy="30" r="3" fill="#0891b2"/>
          <line x1="50" y1="30" x2="90" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 101 -->
          <text x="140" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">101</text>
          <circle cx="140" cy="30" r="3" fill="#0891b2"/>
          <line x1="90" y1="30" x2="140" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 102 -->
          <text x="190" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">102</text>
          <circle cx="190" cy="30" r="3" fill="#0891b2"/>
          <line x1="140" y1="30" x2="190" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 103 -->
          <text x="240" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">103</text>
          <circle cx="240" cy="30" r="3" fill="#0891b2"/>
          <line x1="190" y1="30" x2="240" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 104 -->
          <text x="290" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">104</text>
          <circle cx="290" cy="30" r="3" fill="#0891b2"/>
          <line x1="240" y1="30" x2="290" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 105 -->
          <text x="340" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">105</text>
          <circle cx="340" cy="30" r="3" fill="#0891b2"/>
          <line x1="290" y1="30" x2="340" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 106 -->
          <text x="390" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">106</text>
          <circle cx="390" cy="30" r="3" fill="#0891b2"/>
          <line x1="340" y1="30" x2="390" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 107 -->
          <text x="440" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">107</text>
          <circle cx="440" cy="30" r="3" fill="#0891b2"/>
          <line x1="390" y1="30" x2="440" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 108 -->
          <text x="490" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">108</text>
          <circle cx="490" cy="30" r="3" fill="#0891b2"/>
          <line x1="440" y1="30" x2="490" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 109 -->
          <text x="540" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">109</text>
          <circle cx="540" cy="30" r="3" fill="#0891b2"/>
          <line x1="490" y1="30" x2="540" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 110 -->
          <text x="590" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">110</text>
          <circle cx="590" cy="30" r="3" fill="#0891b2"/>
          <line x1="540" y1="30" x2="590" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 111 -->
          <text x="640" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">111</text>
          <circle cx="640" cy="30" r="3" fill="#0891b2"/>
          <line x1="590" y1="30" x2="640" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 112 -->
          <text x="690" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">112</text>
          <circle cx="690" cy="30" r="3" fill="#0891b2"/>
          <line x1="640" y1="30" x2="690" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 113 -->
          <text x="740" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">113</text>
          <circle cx="740" cy="30" r="3" fill="#0891b2"/>
          <line x1="690" y1="30" x2="740" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 114 -->
          <text x="790" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">114</text>
          <circle cx="790" cy="30" r="3" fill="#0891b2"/>
          <line x1="740" y1="30" x2="790" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- 115 -->
          <text x="840" y="20" text-anchor="middle" class="fill-cyan-600 font-bold text-sm">115</text>
          <circle cx="840" cy="30" r="3" fill="#0891b2"/>
          <line x1="790" y1="30" x2="840" y2="30" stroke="#0891b2" stroke-width="2"/>

          <!-- Final dashed section (after 115) -->
          <line x1="840" y1="30" x2="870" y2="30"
                stroke="#0891b2" stroke-width="2" stroke-dasharray="5,5"/>

          <!-- Arrow at the end -->
          <polygon points="880,30 870,25 870,35" fill="#0891b2"/>
        </svg>
      </div>
    </div>



    <!-- Container RIPASSO -->
    <div class="p-4 md:p-6">

      <!-- Esercizio 1: Completa le linee -->
      <div class="mb-8">
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(1) %>
          Completa le linee: scrivi i numeri al posto giusto.
        </p>

        <!-- Line 1 -->
        <div class="mb-8">
          <div class="text-center mb-4">
            <span class="text-pink-600 font-bold text-lg">400 • 350 • 300 • 450 • 100</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex-1 relative" style="height: 60px;">
              <!-- SVG Line with dots -->
              <svg width="100%" height="60" class="absolute top-0 left-0" style="z-index: 0;">
                <line x1="0" y1="40" x2="12%" y2="40" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5"/>
                <line x1="12%" y1="40" x2="88%" y2="40" stroke="#94a3b8" stroke-width="2"/>
                <line x1="88%" y1="40" x2="100%" y2="40" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5"/>
                <!-- 9 dots for positions 100, 150, 200, 250, 300, 350, 400, 450, 500 -->
                <circle cx="12%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="21.5%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="31%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="40.5%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="50%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="59.5%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="69%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="78.5%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="88%" cy="40" r="3" fill="#3b82f6"/>
              </svg>
              <!-- Numbers and inputs above the line positioned absolutely -->
              <div class="relative w-full" style="z-index: 1;">
                <input type="text" placeholder="............" class="absolute w-16 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 12%; transform: translateX(-50%); top: 0;" data-correct-answer="100" />
                <span class="absolute text-gray-700 font-semibold" style="left: 21.5%; transform: translateX(-50%); top: 0;">150</span>
                <span class="absolute text-gray-700 font-semibold" style="left: 31%; transform: translateX(-50%); top: 0;">200</span>
                <span class="absolute text-gray-700 font-semibold" style="left: 40.5%; transform: translateX(-50%); top: 0;">250</span>
                <input type="text" placeholder="............" class="absolute w-16 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 50%; transform: translateX(-50%); top: 0;" data-correct-answer="300" />
                <input type="text" placeholder="............" class="absolute w-16 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 59.5%; transform: translateX(-50%); top: 0;" data-correct-answer="350" />
                <input type="text" placeholder="............" class="absolute w-16 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 69%; transform: translateX(-50%); top: 0;" data-correct-answer="400" />
                <input type="text" placeholder="............" class="absolute w-16 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 78.5%; transform: translateX(-50%); top: 0;" data-correct-answer="450" />
                <span class="absolute text-gray-700 font-semibold" style="left: 88%; transform: translateX(-50%); top: 0;">500</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Line 2 -->
        <div class="mb-8">
          <div class="text-center mb-4">
            <span class="text-pink-600 font-bold text-lg">2 300 • 2 700 • 2 000 • 2 400 • 2 600</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex-1 relative" style="height: 60px;">
              <!-- SVG Line with dots -->
              <svg width="100%" height="60" class="absolute top-0 left-0" style="z-index: 0;">
                <line x1="0" y1="40" x2="12%" y2="40" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5"/>
                <line x1="12%" y1="40" x2="88%" y2="40" stroke="#94a3b8" stroke-width="2"/>
                <line x1="88%" y1="40" x2="100%" y2="40" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5"/>
                <!-- 9 dots for positions 2000, 2100, 2200, 2300, 2400, 2500, 2600, 2700, 2800 -->
                <circle cx="12%" cy="40" r="3" fill="#0095DA"/>
                <circle cx="21.5%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="31%" cy="40" r="3" fill="#3b82f6"/>
                <circle cx="40.5%" cy="40" r="3" fill="#0095DA"/>
                <circle cx="50%" cy="40" r="3" fill="#0095DA"/>
                <circle cx="59.5%" cy="40" r="3" fill="#0095DA"/>
                <circle cx="69%" cy="40" r="3" fill="#0095DA"/>
                <circle cx="78.5%" cy="40" r="3" fill="#0095DA"/>
                <circle cx="88%" cy="40" r="3" fill="#0095DA"/>
              </svg>
              <!-- Numbers and inputs above the line positioned absolutely -->
              <div class="relative w-full" style="z-index: 1;">
                <input type="text" placeholder="............" class="absolute w-20 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 12%; transform: translateX(-50%); top: 0;" data-correct-answer="2 000" />
                <span class="absolute text-gray-700 font-semibold" style="left: 21.5%; transform: translateX(-50%); top: 0;">2 100</span>
                <span class="absolute text-gray-700 font-semibold" style="left: 31%; transform: translateX(-50%); top: 0;">2 200</span>
                <input type="text" placeholder="............" class="absolute w-20 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 40.5%; transform: translateX(-50%); top: 0;" data-correct-answer="2 300" />
                <input type="text" placeholder="............" class="absolute w-20 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 50%; transform: translateX(-50%); top: 0;" data-correct-answer="2 400" />
                <span class="absolute text-gray-700 font-semibold" style="left: 59.5%; transform: translateX(-50%); top: 0;">2 500</span>
                <input type="text" placeholder="............" class="absolute w-20 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 69%; transform: translateX(-50%); top: 0;" data-correct-answer="2 600" />
                <input type="text" placeholder="............" class="absolute w-20 text-center border-0 bg-transparent text-gray-700 dark:text-gray-200 font-semibold placeholder-gray-400 dark:placeholder-gray-500" style="left: 78.5%; transform: translateX(-50%); top: 0;" data-correct-answer="2 700" />
                <span class="absolute text-gray-700 font-semibold" style="left: 88%; transform: translateX(-50%); top: 0;">2 800</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 2: Precedente e successivo -->
      <div class="mb-8">
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(2) %>
          Per ogni numero scrivi il <span class="underline">precedente</span> e il <span class="underline">successivo</span>. Segui l'esempio.
        </p>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <!-- Esempio -->
          <div class="flex items-center gap-1 px-5 py-2">
            <span class="font-bold text-<%= @pagina.base_color %>-600">88</span>
            <span class="px-6">89</span>
            <span class="font-bold text-<%= @pagina.base_color %>-600">90</span>
          </div>

          <% [
            { prec: "198", num: "199", succ: "200" },
            { prec: "3722", num: "3723", succ: "3724" },
            { prec: "1262", num: "1263", succ: "1264" },
            { prec: "323", num: "324", succ: "325" },
            { prec: "1898", num: "1899", succ: "1900" },
            { prec: "561", num: "562", succ: "563" },
            { prec: "3715", num: "3716", succ: "3717" },
            { prec: "6040", num: "6041", succ: "6042" }
          ].each do |item| %>
            <div class="flex items-center gap-1">
              <input type="text" data-correct-answer="<%= item[:prec] %>" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
              <span><%= item[:num] %></span>
              <input type="text" data-correct-answer="<%= item[:succ] %>" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            </div>
          <% end %>
        </div>
      </div>

      <!-- Esercizio 3: Ordine crescente -->
      <div class="mb-8">
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(3) %>
          Riscrivi i numeri in <span class="text-<%= @pagina.base_color %>-600">ordine crescente</span>, dal minore al maggiore.
        </p>

        <div class="p-4">
          <p class="text-center font-bold mb-3">152 • 367 • 456 • 898 • 52 • <span class="line-through">36</span> • 107</p>
          <div class="flex items-center justify-center gap-2 flex-wrap">
            <span class="font-bold text-<%= @pagina.base_color %>-600">36</span>
            <span>&lt;</span>
            <input type="text" data-correct-answer="52" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&lt;</span>
            <input type="text" data-correct-answer="107" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&lt;</span>
            <input type="text" data-correct-answer="152" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&lt;</span>
            <input type="text" data-correct-answer="367" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&lt;</span>
            <input type="text" data-correct-answer="456" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&lt;</span>
            <input type="text" data-correct-answer="898" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
      </div>

      <!-- Esercizio 4: Ordine decrescente -->
      <div>
        <p class="font-bold text-gray-700 dark:text-gray-200 mb-4">
          <%= numero_esercizio_badge(4) %>
          Riscrivi i numeri in <span class="  text-<%= @pagina.base_color %>-600">ordine decrescente</span>, dal maggiore al minore.
        </p>

        <div class="p-4">
          <p class="text-center font-bold mb-3">91 • 115 • 732 • <span class="line-through">962</span> • 891 • 542 • 563</p>
          <div class="flex items-center justify-center gap-2 flex-wrap">
            <span class="font-bold text-<%= @pagina.base_color %>-600">962</span>
            <span>&gt;</span>
            <input type="text" data-correct-answer="891" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&gt;</span>
            <input type="text" data-correct-answer="732" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&gt;</span>
            <input type="text" data-correct-answer="563" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&gt;</span>
            <input type="text" data-correct-answer="542" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&gt;</span>
            <input type="text" data-correct-answer="115" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
            <span>&gt;</span>
            <input type="text" data-correct-answer="91" class="w-14 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white">
          </div>
        </div>
      </div>

    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
