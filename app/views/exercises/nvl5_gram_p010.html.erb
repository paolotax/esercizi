<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-pink-50 to-red-50 rounded-lg shadow-lg" data-controller="exercise-checker">

  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Info Box -->
  <div class="mb-6 md:mb-8 bg-yellow-50 border-4 border-yellow-400 rounded-lg p-4 md:p-6">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-3">La lettera H si usa:</h2>
    <ul class="space-y-2 text-base md:text-lg">
      <li>â€¢ con i suoni duri <strong>C e G</strong>, davanti alle vocali <strong>E</strong> o <strong>I</strong> (che, chi, ghe, ghi);</li>
      <li>â€¢ in alcune forme del verbo <strong class="text-red-600">avere</strong> (<strong>ho, hai, ha, hanno</strong>) per distinguerle da altre parole che si pronunciano nello stesso modo (o, ai, a, anno);</li>
      <li>â€¢ nelle <strong class="text-yellow-600">esclamazioni</strong>, l'h segue la vocale (<strong>oh, ah</strong>) o sta tra due vocali (<strong>ahi, ahimÃ¨</strong>);</li>
      <li>â€¢ in alcune <strong class="text-blue-600">parole di origine straniera</strong>: hamburger, hotel, hobby...</li>
    </ul>
  </div>

  <!-- Exercise 1: IMPARARE TUTTI - Underline text -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md" data-controller="word-highlighter">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">1</span>
      <span class="bg-yellow-400 text-blue-800 px-2 py-1 rounded text-sm md:text-base font-bold">IMPARARE TUTTI</span>
      Clicca un colore, poi clicca le parole per evidenziarle.
    </h2>

    <div class="bg-gradient-to-br from-blue-50 to-purple-50 p-4 md:p-6 rounded-lg border-2 border-pink-300">
      <p class="text-base md:text-lg leading-relaxed text-gray-800">
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#highlightWord">Ai</span> "Giochi della scienza" un mio amico
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#highlightWord">ha</span> presentato un videogioco che
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#highlightWord">ha</span> inventato lui stesso. Lo
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#highlightWord">ha</span> chiamato "Esploratori delle stelle": bisogna fare finta di essere astronauti e di esplorare lo spazio
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#highlightWord">a</span> caccia di stelle
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#highlightWord">o</span> di comete rare. Ogni volta che tocchi una stella,
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#highlightWord">hai</span> un punto in piÃ¹. Quando l'<span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#highlightWord">ho</span> provato,
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="red" data-action="click->word-highlighter#highlightWord">ho</span> subito pensato: "<span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="yellow" data-action="click->word-highlighter#highlightWord">Ah</span>, che meraviglia, come vorrei andare veramente
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#highlightWord">a</span> esplorare le galassie
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#highlightWord">o</span>
        <span class="cursor-pointer hover:underline transition" data-word-highlighter-target="word" data-correct-color="green" data-action="click->word-highlighter#highlightWord">a</span> toccare le stelle!".
      </p>

      <div class="mt-6 flex flex-wrap gap-4 items-center justify-between">
        <div class="flex flex-wrap gap-4 text-sm md:text-base">
          <div class="flex items-center gap-2">
            <div class="w-6 h-6 bg-red-600 rounded cursor-pointer transition transform hover:scale-110 ring-2 ring-gray-300"
                 data-word-highlighter-target="colorBox"
                 data-color="red"
                 data-action="click->word-highlighter#selectColor"
                 title="Clicca per selezionare">
            </div>
            <span>Verbo avere (ho, hai, ha)</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-6 h-6 bg-green-600 rounded cursor-pointer transition transform hover:scale-110 ring-2 ring-gray-300"
                 data-word-highlighter-target="colorBox"
                 data-color="green"
                 data-action="click->word-highlighter#selectColor"
                 title="Clicca per selezionare">
            </div>
            <span>Preposizioni e congiunzione (a, ai, o)</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-6 h-6 bg-yellow-500 rounded cursor-pointer transition transform hover:scale-110 ring-2 ring-gray-300"
                 data-word-highlighter-target="colorBox"
                 data-color="yellow"
                 data-action="click->word-highlighter#selectColor"
                 title="Clicca per selezionare">
            </div>
            <span>Esclamazione (ah)</span>
          </div>
        </div>
        <button class="text-sm bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg transition font-semibold"
                data-action="click->word-highlighter#clearHighlights">
          Cancella
        </button>
      </div>
    </div>
  </div>

  <!-- Exercise 2: Complete with HO, HA, O, A, OH, AH -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">2</span>
      Completa con HO, HA, O, A, OH, AH.
    </h2>

    <div class="space-y-4" data-controller="fill-blanks">
      <% completions = [
        {text: 'Tra due giorni andrÃ²', answer: 'a', suffix: 'Bologna con la mamma.'},
        {text: 'Preferisci un panino', answer: 'o', suffix: 'una mela?'},
        {text: 'Andrea mi', answer: 'ha', suffix: 'regalato un libro molto bello.'},
        {text: '', answer: 'Oh', suffix: '! Che meraviglia i colori dell\'autunno!'},
        {text: 'Non posso venire al cinema:', answer: 'ho', suffix: 'molte cose da fare.'},
        {text: '', answer: 'Ah', suffix: ', che bellezza! Marta', answer2: 'ha', suffix2: 'ritrovato la penna a cui teneva tanto.'}
      ] %>

      <div class="p-3 bg-pink-50 rounded-lg flex flex-wrap items-center gap-2 text-base md:text-lg">
        <span>â€¢ Tra due giorni andrÃ²</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="a"
               data-correct-answer="a"
               maxlength="2">
        <span>Bologna con la mamma.</span>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex flex-wrap items-center gap-2 text-base md:text-lg">
        <span>â€¢ Preferisci un panino</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="o"
               data-correct-answer="o"
               maxlength="2">
        <span>una mela?</span>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex flex-wrap items-center gap-2 text-base md:text-lg">
        <span>â€¢ Andrea mi</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="ha"
               data-correct-answer="ha"
               maxlength="2">
        <span>regalato un libro molto bello.</span>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex flex-wrap items-center gap-2 text-base md:text-lg">
        <span>â€¢</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="oh"
               data-correct-answer="oh"
               maxlength="2">
        <span>! Che meraviglia i colori dell'autunno!</span>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex flex-wrap items-center gap-2 text-base md:text-lg">
        <span>â€¢ Non posso venire al cinema:</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="ho"
               data-correct-answer="ho"
               maxlength="2">
        <span>molte cose da fare.</span>
      </div>

      <div class="p-3 bg-pink-50 rounded-lg flex flex-wrap items-center gap-2 text-base md:text-lg">
        <span>â€¢</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="ah"
               data-correct-answer="ah"
               maxlength="2">
        <span>, che bellezza! Marta</span>
        <input type="text"
               class="border-b-3 border-pink-500 bg-white w-12 md:w-16 text-center focus:outline-none focus:border-pink-700"
               data-fill-blanks-target="input"
               data-answer="ha"
               data-correct-answer="ha"
               maxlength="2">
        <span>ritrovato la penna a cui teneva tanto.</span>
      </div>
    </div>
  </div>

  <!-- Exercise 3: Write sentences on notebook -->
  <div class="mb-6 md:mb-8 bg-white rounded-lg p-4 md:p-6 shadow-md">
    <h2 class="text-lg md:text-xl font-bold text-pink-600 mb-4">
      <span class="bg-pink-600 text-white rounded-full w-8 h-8 md:w-10 md:h-10 inline-flex items-center justify-center mr-2">3</span>
      Scrivi sul quaderno una frase con ognuna delle seguenti espressioni.
    </h2>

    <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 md:gap-4">
      <% expressions = [
        {text: 'Ahi, che male!', color: 'blue'},
        {text: 'Hai male?', color: 'orange'},
        {text: 'Ah, che caldo insopportabile!', color: 'green'},
        {text: 'Thomas ha caldo', color: 'pink'},
        {text: 'Non ce l\'hanno fatta', color: 'cyan'},
        {text: 'L\'anno passato', color: 'purple'}
      ] %>

      <% expressions.each do |expr| %>
        <div class="border-3 rounded-lg px-3 py-3 text-center font-bold text-sm md:text-base"
             style="border-color: <%= case expr[:color]
               when 'blue' then '#3b82f6'
               when 'orange' then '#f97316'
               when 'green' then '#22c55e'
               when 'pink' then '#ec4899'
               when 'cyan' then '#06b6d4'
               when 'purple' then '#a855f7'
               end %>;
               background-color: <%= case expr[:color]
               when 'blue' then '#dbeafe'
               when 'orange' then '#ffedd5'
               when 'green' then '#d1fae5'
               when 'pink' then '#fce7f3'
               when 'cyan' then '#cffafe'
               when 'purple' then '#f3e8ff'
               end %>;">
          <%= expr[:text] %>
        </div>
      <% end %>
    </div>

    <div class="mt-4 p-4 bg-gray-50 rounded-lg border-2 border-gray-300">
      <p class="text-sm md:text-base text-gray-600 italic">
        ðŸ““ Scrivi le tue frasi sul quaderno o usa quest'area per annotarle.
      </p>
    </div>
  </div>

  <!-- Reference note -->
  <div class="mb-6 bg-blue-100 border-l-4 border-blue-500 p-4 rounded">
    <p class="text-sm md:text-base text-blue-800">
      <strong>ðŸ“š Esercizi pp. 136-137</strong> - Per ulteriori esercizi sulla lettera H, consulta le pagine 136-137 del libro.
    </p>
  </div>

  <!-- Exercise Controls -->
  <%= render 'shared/exercise_controls', color: 'pink', current_page: 'nvl5_gr_p010' %>
</div>
