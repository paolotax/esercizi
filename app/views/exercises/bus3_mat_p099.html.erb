<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white font-mono"
     data-controller="exercise-checker page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p099/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Prova tu -->
  <div class="mb-8" data-controller="fill-blanks auto-advance">
    <p class="mb-4"><strong>Prova tu!</strong> Osserva le seguenti tassellazioni: quali poligoni riconosci? Scrivi i nomi.</p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
      <!-- Tassellazione 1 -->
      <div>
        <%= image_tag "bus3_mat/p099/output-1743504902099_111_236_393_265.png", alt: "Tassellazione con pentagoni e stelle", class: "w-full mb-4 rounded" %>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span>•</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="pentagoni"
                   class="flex-1 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>•</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="quadrilateri"
                   class="flex-1 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>•</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="decagoni"
                   class="flex-1 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center">
          </div>
        </div>
      </div>

      <!-- Tassellazione 2 -->
      <div>
        <%= image_tag "bus3_mat/p099/output-1743504902099_560_234_390_263.png", alt: "Tassellazione con esagoni", class: "w-full mb-4 rounded" %>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span>•</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="triangoli"
                   class="flex-1 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>•</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="quadrilateri"
                   class="flex-1 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>• Poligoni con</span>
            <input type="text" data-fill-blanks-target="input" data-correct-answer="12"
                   class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 text-center" inputmode="numeric">
            <span>lati (chiamati dodecagoni)</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Disegna tassellazione -->
  <div class="mb-8">
    <p class="mb-4"><strong>Disegna una tassellazione inventata da te con i poligoni e i colori che preferisci!</strong></p>

    <div class="flex justify-center">
      <%= image_tag "bus3_mat/p099/output-1743504902099_144_694_830_465.png", alt: "Griglia per disegnare", class: "max-w-full rounded border-2 border-gray-300" %>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls' %>
</div>
