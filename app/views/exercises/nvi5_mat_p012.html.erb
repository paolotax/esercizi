<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Introduzione -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 leading-relaxed mb-6">
        Gli antichi Romani usavano un sistema di numerazione diverso dal nostro: usavano
        <span class="font-bold">7 simboli</span> (7 lettere dell'alfabeto),
        e con questi simboli componevano tutti i numeri. I simboli mantengono lo stesso valore
        qualunque sia la posizione che occupano.
      </p>

      <!-- Tabella dei simboli -->
      <div class="overflow-x-auto mb-6">
        <table class="mx-auto text-center border-collapse border border-cyan-200">
          <thead>
            <tr class="bg-custom-blue-light text-cyan-600">
              <th class="py-3 px-6 font-bold border-r border-cyan-400">I</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400">V</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400">X</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400">L</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400">C</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400">D</th>
              <th class="py-3 px-6 font-bold">M</th>
            </tr>
          </thead>
          <tbody>
            <tr class="">
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">1</td>
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">5</td>
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">10</td>
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">50</td>
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">100</td>
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">500</td>
              <td class="py-3 px-6 font-bold text-cyan-600 border border-cyan-200">1000</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p class="text-gray-700">
        Il sistema di numerazione romana si basa sull'addizione e sulla sottrazione e ha precise <span class="font-bold">regole</span>. Vediamole insieme.
      </p>
    </div>

    <!-- Regola 1: Lettura -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-4">
        <span class="text-blue-600">&#9654;</span> I simboli si scrivono e si leggono da sinistra a destra:
      </p>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="text-center font-bold text-custom-sky whitespace-nowrap">XI = 11</div>
        <div class="text-center font-bold text-custom-sky whitespace-nowrap">LX = 60</div>
        <div class="text-center font-bold text-custom-sky whitespace-nowrap">CL = 150</div>
        <div class="text-center font-bold text-custom-sky whitespace-nowrap">MD = 1500</div>
      </div>
    </div>

    <!-- Regola 2: ADDIZIONE -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-4">
        <span class="text-blue-600">&#9654;</span> <span class="font-bold text-custom-sky">ADDIZIONE</span> Se il primo simbolo vale di più o è uguale al secondo, si fa la <span class="font-bold">somma</span> dei 2 simboli:
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">VI</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">V + I = 5 + 1 =</span>
          <span class="font-bold text-custom-sky">6</span>
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">XI</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">X + I =</span>
          <input type="text" class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="11" placeholder="...">
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">XVII</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">X + V + I + I =</span>
          <input type="text" class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="17" placeholder="...">
        </div>
        <div class="flex items-center gap-2">
          <span class="font-bold text-custom-sky">XXIII</span>
          <span class="text-pink-600">→</span>
          <input type="text" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="X + X + I + I + I = 23" placeholder="...">
        </div>
      </div>
    </div>

    <!-- Regola 3: SOTTRAZIONE -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-4">
        <span class="text-blue-600">&#9654;</span> <span class="font-bold text-custom-sky">SOTTRAZIONE</span> Se il primo simbolo vale meno del secondo, si fa la <span class="font-bold">sottrazione</span>:
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">IV</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">V − I = 5 − 1 =</span>
          <span class="font-bold text-custom-sky">4</span>
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">XC</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">C − X =</span>
          <input type="text" class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="90" placeholder="...">
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">XL</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">L − X =</span>
          <input type="text" class="w-16 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="40" placeholder="...">
        </div>
        <div class="flex items-center gap-2">
          <span class="font-bold text-custom-sky">CM</span>
          <span class="text-pink-600">→</span>
          <input type="text" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="M − C = 900" placeholder="...">
        </div>
      </div>
    </div>

    <!-- Regola 4: ADDIZIONE E SOTTRAZIONE -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-4">
        <span class="text-blue-600">&#9654;</span> <span class="font-bold text-custom-sky">ADDIZIONE E SOTTRAZIONE</span> Alcuni numeri infine si formano unendo addizioni e sottrazioni.
      </p>
      <div class="space-y-3">
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold text-custom-sky">XXIV</span>
          <span class="text-pink-600">→</span>
          <span class="text-gray-600">X + X + (V − I) = 10 + 10 + (5 − 1) =</span>
          <span class="font-bold text-custom-sky">24</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="font-bold text-custom-sky">XLVIII</span>
          <span class="text-pink-600">→</span>
          <input type="text" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="(L − X) + V + I + I + I = 48" placeholder="...">
        </div>
        <div class="flex items-center gap-2">
          <span class="font-bold text-custom-sky">CIX</span>
          <span class="text-pink-600">→</span>
          <input type="text" class="flex-1 min-w-0 px-2 py-1 border-b-2 border-dotted border-gray-400 bg-transparent text-center" data-correct-answer="C + (X − I) = 109" placeholder="...">
        </div>
      </div>
    </div>

    <!-- Regola 5: Ripetizione massimo 3 volte -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-2">
        <span class="text-blue-600">&#9654;</span> I simboli <span class="font-bold text-custom-sky">I</span>, <span class="font-bold text-custom-sky">X</span>, <span class="font-bold text-custom-sky">C</span> e <span class="font-bold text-custom-sky">M</span> possono essere scritti al massimo 3 volte di seguito all'interno di un numero.
      </p>
      <p class="text-gray-700 ml-4">
        Così, per esempio <span class="font-bold">4</span> si scrive <span class="font-bold text-custom-sky">IV</span> e non <span class="line-through text-gray-400">IIII</span>.
      </p>
    </div>

    <!-- Regola 6: Ripetizione una volta sola -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 mb-2">
        <span class="text-blue-600">&#9654;</span> I simboli <span class="font-bold text-custom-sky">V</span>, <span class="font-bold text-custom-sky">L</span> e <span class="font-bold text-custom-sky">D</span> possono essere scritti solo una volta:
      </p>
      <p class="text-gray-700 ml-4">
        <span class="font-bold">15</span> si scrive <span class="font-bold text-custom-sky">XV</span> e non <span class="line-through text-gray-400">VVV</span>.
      </p>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls' %>
  </div>
</div>
