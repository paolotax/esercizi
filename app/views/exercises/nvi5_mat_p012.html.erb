<div class="max-w-6xl mx-auto bg-white dark:bg-gray-900 text-black dark:text-white p-3 md:p-6 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">

    <!-- Introduzione -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 leading-relaxed mb-6">
        Gli antichi Romani usavano un sistema di numerazione diverso dal nostro: usavano
        <span class="font-bold">7 simboli</span> (7 lettere dell'alfabeto),
        e con questi simboli componevano tutti i numeri. I simboli mantengono lo stesso valore
        qualunque sia la posizione che occupano.
      </p>

      <!-- Tabella dei simboli -->
      <div class="overflow-x-auto mb-6">
        <table class="mx-auto text-center border-collapse border border-cyan-200 dark:border-cyan-700">
          <thead>
            <tr class="bg-custom-blue-light dark:bg-cyan-900/40 text-cyan-600 dark:text-cyan-400">
              <th class="py-3 px-6 font-bold border-r border-cyan-400 dark:border-cyan-600">I</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400 dark:border-cyan-600">V</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400 dark:border-cyan-600">X</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400 dark:border-cyan-600">L</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400 dark:border-cyan-600">C</th>
              <th class="py-3 px-6 font-bold border-r border-cyan-400 dark:border-cyan-600">D</th>
              <th class="py-3 px-6 font-bold">M</th>
            </tr>
          </thead>
          <tbody>
            <tr class="dark:bg-gray-800">
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">1</td>
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">5</td>
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">10</td>
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">50</td>
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">100</td>
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">500</td>
              <td class="py-3 px-6 font-bold text-cyan-600 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-700">1000</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p class="text-gray-700 dark:text-gray-200">
        Il sistema di numerazione romana si basa sull'addizione e sulla sottrazione e ha precise <span class="font-bold">regole</span>. Vediamole insieme.
      </p>
    </div>

    <!-- Regola 1: Lettura -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-blue-600 dark:text-blue-400">&#9654;</span> I simboli si scrivono e si leggono da sinistra a destra:
      </p>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="text-center font-bold text-custom-sky dark:text-cyan-400 whitespace-nowrap">XI = 11</div>
        <div class="text-center font-bold text-custom-sky dark:text-cyan-400 whitespace-nowrap">LX = 60</div>
        <div class="text-center font-bold text-custom-sky dark:text-cyan-400 whitespace-nowrap">CL = 150</div>
        <div class="text-center font-bold text-custom-sky dark:text-cyan-400 whitespace-nowrap">MD = 1500</div>
      </div>
    </div>

    <!-- Regola 2: ADDIZIONE -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-blue-600 dark:text-blue-400">&#9654;</span> <span class="font-bold text-custom-sky dark:text-cyan-400">ADDIZIONE</span> Se il primo simbolo vale di più o è uguale al secondo, si fa la <span class="font-bold">somma</span> dei 2 simboli:
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <%= render 'shared/fill_list',
            color: "pink",
            arrow: true,
            items: [
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>VI</span>" }, { text: "V + I = 5 + 1 =" }, { html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>6</span>" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XI</span>" }, { text: "X + I =" }, { answer: "11" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XVII</span>" }, { text: "X + V + I + I =" }, { answer: "17" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XXIII</span>" }, { answer: "X + X + I + I + I = 23", flex: true }] }
            ],
            container_class: "contents" %>
      </div>
    </div>

    <!-- Regola 3: SOTTRAZIONE -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-blue-600 dark:text-blue-400">&#9654;</span> <span class="font-bold text-custom-sky dark:text-cyan-400">SOTTRAZIONE</span> Se il primo simbolo vale meno del secondo, si fa la <span class="font-bold">sottrazione</span>:
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <%= render 'shared/fill_list',
            color: "pink",
            arrow: true,
            items: [
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>IV</span>" }, { text: "V − I = 5 − 1 =" }, { html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>4</span>" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XC</span>" }, { text: "C − X =" }, { answer: "90" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XL</span>" }, { text: "L − X =" }, { answer: "40" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>CM</span>" }, { answer: "M − C = 900", flex: true }] }
            ],
            container_class: "contents" %>
      </div>
    </div>

    <!-- Regola 4: ADDIZIONE E SOTTRAZIONE -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 mb-4">
        <span class="text-blue-600 dark:text-blue-400">&#9654;</span> <span class="font-bold text-custom-sky dark:text-cyan-400">ADDIZIONE E SOTTRAZIONE</span> Alcuni numeri infine si formano unendo addizioni e sottrazioni.
      </p>
      <div class="space-y-3">
        <%= render 'shared/fill_list',
            color: "pink",
            arrow: true,
            items: [
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XXIV</span>" }, { text: "X + X + (V − I) = 10 + 10 + (5 − 1) =" }, { html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>24</span>" }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>XLVIII</span>" }, { answer: "(L − X) + V + I + I + I = 48", flex: true }] },
              { segments: [{ html: "<span class='font-bold text-custom-sky dark:text-cyan-400'>CIX</span>" }, { answer: "C + (X − I) = 109", flex: true }] }
            ],
            container_class: "space-y-3" %>
      </div>
    </div>

    <!-- Regola 5: Ripetizione massimo 3 volte -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 mb-2">
        <span class="text-blue-600 dark:text-blue-400">&#9654;</span> I simboli <span class="font-bold text-custom-sky dark:text-cyan-400">I</span>, <span class="font-bold text-custom-sky dark:text-cyan-400">X</span>, <span class="font-bold text-custom-sky dark:text-cyan-400">C</span> e <span class="font-bold text-custom-sky dark:text-cyan-400">M</span> possono essere scritti al massimo 3 volte di seguito all'interno di un numero.
      </p>
      <p class="text-gray-700 dark:text-gray-200 ml-4">
        Così, per esempio <span class="font-bold">4</span> si scrive <span class="font-bold text-custom-sky dark:text-cyan-400">IV</span> e non <span class="line-through text-gray-400 dark:text-gray-500">IIII</span>.
      </p>
    </div>

    <!-- Regola 6: Ripetizione una volta sola -->
    <div class="p-4 md:p-6">
      <p class="text-gray-700 dark:text-gray-200 mb-2">
        <span class="text-blue-600 dark:text-blue-400">&#9654;</span> I simboli <span class="font-bold text-custom-sky dark:text-cyan-400">V</span>, <span class="font-bold text-custom-sky dark:text-cyan-400">L</span> e <span class="font-bold text-custom-sky dark:text-cyan-400">D</span> possono essere scritti solo una volta:
      </p>
      <p class="text-gray-700 dark:text-gray-200 ml-4">
        <span class="font-bold">15</span> si scrive <span class="font-bold text-custom-sky dark:text-cyan-400">XV</span> e non <span class="line-through text-gray-400 dark:text-gray-500">VVV</span>.
      </p>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls' %>
  </div>
</div>
