<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls word-highlighter"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Esercizio 1: IMPARARE TUTTI -->
    <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
      <p class="font-bold text-gray-700 mb-4">
        <%= imparare_tutti_badge(1) %>
        In ogni gruppo di numeri cerchia il più grande e sottolinea il più piccolo.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Gruppo 1 -->
        <div class="p-4 bg-gray-50 rounded-lg">
          <div class="space-y-1 text-center">
            <% ["43 000 001", "8 200 595", "1 450 790 238", "356 830 401", "571 000 000 352", "571 000 100 593", "11 000 505"].each do |num| %>
              <p class="font-mono text-gray-700 whitespace-nowrap" data-word-highlighter-target="word"><%= num %></p>
            <% end %>
          </div>
        </div>

        <!-- Gruppo 2 -->
        <div class="p-4 bg-gray-50 rounded-lg">
          <div class="space-y-1 text-center">
            <% ["992 440", "5 039 291 933", "184 450 220 930", "402 391 000 348", "402 390 268 229", "40 311 110", "76 881 003 653"].each do |num| %>
              <p class="font-mono text-gray-700 whitespace-nowrap" data-word-highlighter-target="word"><%= num %></p>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div class="mb-6">
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Scrivi il precedente e il successivo di ciascun numero.
      </p>

      <div class="space-y-3">
        <% [
          ["1 000 000", "999999", "1000001"],
          ["34 871 200", "34871199", "34871201"],
          ["40 000 000 000", "39999999999", "40000000001"],
          ["135 400 000", "135399999", "135400001"],
          ["6 100 999 999", "6100999998", "6101000000"],
          ["593 999 999", "593999998", "594000000"]
        ].each do |num, prev, succ| %>
          <div class="flex items-center justify-center gap-2 flex-wrap">
            <input type="text" data-correct-answer="<%= prev %>" class="w-36 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            <span class="font-bold text-gray-700 whitespace-nowrap bg-custom-blue-light-light px-4 py-1 rounded"><%= num %></span>
            <input type="text" data-correct-answer="<%= succ %>" class="w-36 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
          </div>
        <% end %>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div class="mb-6">
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Scrivi i numeri in ordine crescente.
      </p>

      <div class="space-y-4">
        <div class="p-3 bg-white rounded-lg border border-gray-200">
          <p class="text-gray-700 mb-2">
            <span class="whitespace-nowrap">582 009 421</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">582 090 413</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">5 098 090 423</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">50 009 351 234</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">5 900 456 021</span>
          </p>
          <input type="text" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>

        <div class="p-3 bg-white rounded-lg border border-gray-200">
          <p class="text-gray-700 mb-2">
            <span class="whitespace-nowrap">112 570 923</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">121 043 923</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">11 570 000 902</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">1 210 891 963</span>
            <span class="text-cyan-500 mx-1">•</span>
            <span class="whitespace-nowrap">2 112 570 111</span>
          </p>
          <input type="text" class="w-full border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
      </div>
    </div>

    <!-- Esercizio 4 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(4) %>
        Individua la regola di ogni successione e completa.
      </p>

      <div class="space-y-4">
        <!-- Successione 1: +1 000 -->
        <div class="flex items-center justify-center gap-2 flex-wrap">
          <span class="px-3 py-2 bg-white rounded-full border-2 border-cyan-400 whitespace-nowrap"><span class="whitespace-nowrap">7 453 912</span></span>
          <span class="text-cyan-500">→</span>
          <span class="px-3 py-2 bg-white rounded-full border-2 border-cyan-400 whitespace-nowrap"><span class="whitespace-nowrap">7 454 912</span></span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="7455912" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="7456912" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="7457912" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
        </div>

        <!-- Successione 2: +10 000 000 -->
        <div class="flex items-center justify-center gap-2 flex-wrap">
          <input type="text" data-correct-answer="258032491" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
          <span class="text-cyan-500">→</span>
          <span class="px-3 py-2 bg-white rounded-full border-2 border-cyan-400 whitespace-nowrap"><span class="whitespace-nowrap">268 032 491</span></span>
          <span class="text-cyan-500">→</span>
          <span class="px-3 py-2 bg-white rounded-full border-2 border-cyan-400 whitespace-nowrap"><span class="whitespace-nowrap">278 032 491</span></span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="288032491" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="298032491" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
        </div>

        <!-- Successione 3: -100 000 000 -->
        <div class="flex items-center justify-center gap-2 flex-wrap">
          <input type="text" data-correct-answer="5719036882" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="5619036882" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
          <span class="text-cyan-500">→</span>
          <span class="px-3 py-2 bg-white rounded-full border-2 border-cyan-400 whitespace-nowrap"><span class="whitespace-nowrap">5 519 036 882</span></span>
          <span class="text-cyan-500">→</span>
          <span class="px-3 py-2 bg-white rounded-full border-2 border-cyan-400 whitespace-nowrap"><span class="whitespace-nowrap">5 419 036 882</span></span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="5319036882" class="w-28 px-3 py-2 rounded-full border-2 border-cyan-400 text-center font-bold bg-white">
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
