<div class="max-w-6xl mx-auto p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">
  
  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>
  
  <div class="space-y-6">     <!-- Introduzione -->
    <div class="p-6 text-gray-800 leading-relaxed">       
      <p>
        La sottrazione gode della proprietà invariantiva, che è utile per <strong class="text-blue-600">semplificare i calcoli</strong>.
      </p>
    </div>
    <!-- Proprietà Invariantiva -->
    <div class="p-4 p-6" data-controller="fill-blanks">       
      <h2 class=" font-bold text-blue-600 mb-4">
        • Leggi e completa.
      </h2>
      <div class="p-4 p-6 mb-6">         
        <h3 class=" font-bold text-blue-600 mb-3">Proprietà invariantiva</h3>
        <p class=" text-gray-800">
          Se aggiungi o togli uno stesso numero a minuendo e sottraendo, il risultato non cambia.
        </p>
      </div>
      <div class="overflow-x-">         
        <table class="full text-center  md:">
          <tr>
            <td class="px-2 py-3">138</td>
            <td class="px-2 py-3">–</td>
            <td class="px-2 py-3">63</td>
            <td class="px-2 py-3">=</td>
            <td class="px-2 py-3"></td>
            <td class="px-4"></td>
            <td class="px-2 py-3">138</td>
            <td class="px-2 py-3">–</td>
            <td class="px-2 py-3">63</td>
            <td class="px-2 py-3">=</td>
            <td class="px-2 py-3"></td>
          </tr>
          <tr class="text-blue-600 font-bold">
            <td class="px-2 py-3">↓<strong>– 3</strong></td>
            <td class="px-2 py-3"></td>
            <td class="px-2 py-3">↓<strong>– 3</strong></td>
            <td class="px-2 py-3"></td>
            <td class="px-4"></td>
            <td class="px-4"></td>
            <td class="px-2 py-3">(138 <strong>– 3</strong>)</td>
            <td class="px-2 py-3">–</td>
            <td class="px-2 py-3">(63 <strong>–</strong>
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center font-bold" data-fill-blanks-target="input" data-correct-answer="3">
              )
            </td>
            <td class="px-2 py-3">=</td>
            <td class="px-2 py-3"></td>
          </tr>
          <tr>
            <td class="px-2 py-3">
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="135">
            </td>
            <td class="px-2 py-3">–</td>
            <td class="px-2 py-3">
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="60">
            </td>
            <td class="px-2 py-3">=</td>
            <td class="px-2 py-3">
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="75">
            </td>
            <td class="px-4"></td>
            <td class="px-2 py-3">
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="135">
            </td>
            <td class="px-2 py-3">–</td>
            <td class="px-2 py-3">
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="60">
            </td>
            <td class="px-2 py-3">=</td>
            <td class="px-2 py-3">
              <input type="text" class="border-b-2 border-purple-400 bg-transparent px-1 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="75">
            </td>
          </tr>
        </table>
      </div>
    </div>
    <!-- La prova della sottrazione -->
    <div class="p-4 p-6">       
      <h2 class=" font-bold text-blue-600 mb-4">La prova della sottrazione</h2>
      <p class=" text-gray-800 mb-4">
        <strong>La sottrazione è l'operazione inversa dell'addizione.</strong><br>
        Per eseguire la prova di una sottrazione aggiungi al <span class="underline font-bold text-red-600">resto</span>
        il <span class="underline font-bold italic text-blue-600">sottraendo</span> e ottieni il <strong>minuendo</strong>.
      </p>
      <div class="flex justify-center">         <%= image_tag "nvi5_mat/p031/p031_01.jpg", alt: "Prova della sottrazione" %>
      </div>
    </div>
    <!-- Lo zero e l'uno nella sottrazione -->
    <div class="p-4 p-6" data-controller="fill-blanks">       
      <h2 class=" font-bold text-blue-600 mb-4">Lo zero e l'uno nella sottrazione</h2>
      <h3 class=" font-bold text-gray-700 mb-4">
        • Leggi e completa.
      </h3>
      <div class="space-y-6">         <!-- Zero -->
        <div class="p-4">           
          <p class=" text-gray-800 mb-4">
            Se da un numero <strong class="text-blue-600">togli 0</strong>, ottieni il <strong class="text-blue-600">numero stesso</strong>.
            La sottrazione con 0 al minuendo fra numeri naturali si può fare solo in un caso: <strong class="text-blue-600">0 – 0 = 0</strong>.
          </p>
          <div class="grid grid-cols-1 grid-cols-2 gap-4">  
            <div>               
              <p class=" md:">
                6,38 – <strong>0</strong> =
                <input type="text" class="border-b-2 border-purple-400 bg-transparent px-2 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="6,38">
              </p>
            </div>
            <div>               
              <p class=" md:">
                2 358 – <strong>0</strong> =
                <input type="text" class="border-b-2 border-purple-400 bg-transparent px-2 py-1 focus:outline-none focus:border-purple-600  text-center" data-fill-blanks-target="input" data-correct-answer="2358">
              </p>
            </div>
          </div>
        </div>
        <!-- Uno -->
        <div class="p-4">           
          <p class=" text-gray-800 mb-4">
            Se togli <strong class="text-blue-600">1</strong> a un <strong class="text-blue-600">numero intero</strong> ottieni il
            <strong class="text-blue-600">numero precedente</strong>. Se continui a togliere 1 arrivi a 0.<br>
            Nei <strong class="text-blue-600">numeri decimali non esiste il precedente</strong> perché
            <strong class="text-blue-600">tra due numeri decimali ci sono infiniti numeri decimali</strong>.
          </p>
          <p class=" md:">
            3 – <strong>1</strong> =
            <input type="text" class="border-b-2 border-pink-400 bg-transparent px-2 py-1 focus:outline-none focus:border-pink-600  text-center" data-fill-blanks-target="input" data-correct-answer="2">
          </p>
        </div>
        <!-- Numeri relativi -->
        <div class="p-4">           
          <p class=" text-gray-800">
            Quest'anno hai imparato che con i <strong class="text-blue-700">numeri interi relativi</strong> è possibile eseguire sottrazioni
            anche con il sottraendo maggiore del minuendo: <strong class="text-blue-700">8 – 13 = – 5</strong>.
          </p>
        </div>
      </div>
    </div>
    <!-- Esercizi -->
    <div class="p-4 p-6">       
      <h2 class=" font-bold text-blue-600 mb-6">ESERCIZI</h2>
      <!-- Esercizio 1 -->
      <div class="mb-6 p-4 p-6">         
        <h3 class=" font-bold text-gray-700 mb-4">
          <span class="bg-blue-500 text-white rounded-full   inline-flex items-center justify-center mr-2">1</span>
          Applica la proprietà invariantiva e calcola sul quaderno.
        </h3>
        <div class="grid grid-cols-1 grid-cols-2 lg:grid-cols-3 gap-3  md:">           
          <p>597 – 164 =</p>
          <p>783 – 659 =</p>
          <p>907 – 703 =</p>
          <p>859 – 236 =</p>
          <p>13,52 – 12,82 =</p>
          <p>82,4 – 22,1 =</p>
          <p>8,59 – 2,36 =</p>
        </div>
      </div>
      <!-- Esercizio 2 -->
      <div class="p-4 p-6" data-controller="fill-blanks">         
        <h3 class=" font-bold text-gray-700 mb-4">
          <span class="bg-green-600 text-white rounded-full   inline-flex items-center justify-center mr-2">2</span>
          Completa le uguaglianze.
        </h3>
        <div class="grid grid-cols-1 grid-cols-2 gap-4  md:">  
          <div class="space-y-3">             
            <p>5,4 + <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="0,6"> = 6</p>
            <p>9,009 + <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="0,991"> = 10</p>
            <p>12,5 + <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="0,5"> = 13</p>
            <p>8,009 + <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="1,991"> = 10</p>
          </div>
          <div class="space-y-3">             
            <p>10,08 + <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="0,92"> = 11</p>
            <p>35 – <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="33,5"> = 1,5</p>
            <p><input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="0,6"> + 15,4 = 16</p>
            <p>46 – <input type="text" class="border-b-2 border-green-400 bg-transparent px-2 py-1 focus:outline-none focus:border-green-600  text-center" data-fill-blanks-target="input" data-correct-answer="0,5"> = 45,5</p>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer con riferimento -->
    <div class="mt-8 text-center">       
      <p class="text-red-600 font-bold ">Quaderno esercizi pp. 187, 200</p>
    </div>
  </div>
  <!-- Exercise controls -->
  <%= render 'shared/exercise_controls', color: 'purple' %>
</div>
