<div class="max-w-6xl mx-auto p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Sezione teorica con immagini -->
    <div class="p-4 md:p-6">
      <!-- Immagine con i personaggi e termometri -->
      <div class="mb-6">
        <%= image_tag "nvi5_mat/p020/p020_01.jpg", alt: "Personaggi con termometri", class: "max-w-full rounded-lg" %>
      </div>

      <!-- Spiegazione teorica -->
      <div class="p-4 md:p-6 bg-white border-3 border-blue-500 rounded-3xl mb-6">
        <p class="text-gray-800 mb-4">
          <span class="text-blue-600 font-bold">&#9654;</span> I numeri <span class="font-bold">più 2 (+ 2)</span> e <span class="font-bold">meno 6 (– 6)</span> sono <span class="font-bold">numeri interi relativi</span>.
        </p>
        <p class="text-gray-800 mb-4">
          I numeri preceduti dal segno <span class="font-bold">più</span> sono detti <span class="font-bold text-blue-600">numeri positivi</span>; quelli preceduti dal segno <span class="font-bold">meno</span> sono detti <span class="font-bold text-red-600">numeri negativi</span>.
        </p>
        <p class="text-gray-800">
          Per rappresentare i numeri interi relativi sulla linea dei numeri dobbiamo allungare quest'ultima verso sinistra. Osserva.
        </p>
      </div>

      <!-- Linea dei numeri con spiegazione -->
      <div class="mb-6">
        <%= image_tag "nvi5_mat/p020/p020_02.jpg", alt: "Linea dei numeri relativi", class: "max-w-full rounded-lg" %>
      </div>

      <!-- Box informativo -->
      <div class="p-4 md:p-6 bg-pink-100 rounded-lg">
        <p class="text-gray-800">
          <span class="text-blue-600 font-bold">&#9654;</span> I numeri interi relativi si usano per indicare, oltre la temperatura, l'altitudine o la profondità rispetto al livello del mare, i piani di un edificio...
        </p>
      </div>
    </div>

    <!-- Sezione ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <h2 class="font-bold text-pink-600 mb-6">ESERCIZI</h2>

      <div class="space-y-6">
        <!-- Exercise 1: Linea dei numeri -->
        <div>
          <div class="flex items-start gap-3 mb-4">
            <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">1</div>
            <p class="font-bold text-gray-700">Disegna sul quaderno una linea dei numeri da – 15 a + 15 e inserisci i seguenti numeri.</p>
          </div>
          <div class="ml-11">
            <!-- Numeri da inserire -->
            <div class="mb-6">
              <p class="text-gray-600 mb-4">Numeri da inserire sulla linea:</p>
              <div class="flex flex-wrap gap-3 justify-center">
                <% ["+5", "–8", "+10", "–3", "–6", "+4", "–4", "–5", "–7", "+7", "+8", "–10", "–12", "+12", "–15"].each_with_index do |num, i| %>
                  <% if num.start_with?("+") %>
                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded font-bold"><%= num %></span>
                  <% else %>
                    <span class="bg-red-100 text-red-700 px-3 py-1 rounded font-bold"><%= num %></span>
                  <% end %>
                  <% unless i == 14 %><span class="text-pink-600">&#8226;</span><% end %>
                <% end %>
              </div>
            </div>

            <!-- Linea dei numeri interattiva -->
            <div class="p-4 bg-white rounded-lg overflow-x-auto">
              <p class="text-center text-gray-600 mb-4">Clicca sui numeri che devono essere inseriti sulla linea:</p>
              <!-- Linea dei numeri semplificata -->
              <div class="flex items-center justify-center gap-1 min-w-[800px] relative py-4">
                <span class="text-red-500 font-bold">←</span>
                <% (-15..15).each do |num| %>
                  <%
                    correct_nums = [-15, -12, -10, -8, -7, -6, -5, -4, -3, 4, 5, 7, 8, 10, 12]
                    is_correct = correct_nums.include?(num)
                    color_class = num < 0 ? "text-red-600" : (num > 0 ? "text-blue-600" : "text-gray-800")
                  %>
                  <label class="flex flex-col items-center cursor-pointer group">
                    <input type="checkbox" data-correct-answer="<%= is_correct ? 'true' : 'false' %>" class="peer hidden">
                    <div class="w-1 h-3 bg-gray-400 mb-1"></div>
                    <span class="font-bold <%= color_class %> peer-checked:bg-yellow-200 peer-checked:px-1 rounded">
                      <%= num > 0 ? "+#{num}" : num %>
                    </span>
                  </label>
                <% end %>
                <span class="text-blue-500 font-bold">→</span>
              </div>

              <!-- Legenda -->
              <div class="mt-4 flex justify-center gap-6">
                <div class="flex items-center gap-2">
                  <div class="w-4 h-4 bg-red-200 rounded"></div>
                  <span class="text-gray-700">Numeri negativi</span>
                </div>
                <div class="flex items-center gap-2">
                  <div class="w-4 h-4 bg-gray-200 rounded"></div>
                  <span class="text-gray-700">Zero</span>
                </div>
                <div class="flex items-center gap-2">
                  <div class="w-4 h-4 bg-blue-200 rounded"></div>
                  <span class="text-gray-700">Numeri positivi</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Riferimento quaderno -->
    <div class="p-4 text-right">
      <p class="text-gray-700">
        <span class="font-bold">Quaderno</span> p. <a href="#" class="text-red-600 font-bold hover:underline">182</a>
      </p>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls', color: 'blue' %>
  </div>
</div>
