<% content_for :titolo, "#{@pagina.titolo} - #{@pagina.numero}" %>

<div class="max-w-7xl mx-auto p-3 md:p-6 bg-white dark:bg-gray-900 text-black dark:text-white transition-colors duration-300"
     data-controller="exercise-checker page-viewer text-toggle font-controls"
     data-page-viewer-image-url-value="<%= asset_path('bus3_mat/p011/page.png') %>"
     data-text-toggle-target="content"
     data-font-controls-target="content">
  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <!-- Parte teorica -->
  <div class="bg-cyan-100 dark:bg-cyan-900/40 p-4 -mx-3 md:-mx-0 md:p-6 mb-8">
    <p class="text-gray-800 dark:text-gray-200 mb-4">
      <strong>• Per confrontare due o più numeri procedi come indicato.</strong>
    </p>

    <ul class="space-y-6">
      <!-- Regola 1 -->
      <li>
        <p class="text-gray-800 dark:text-gray-200 mb-3">
          <strong>Confronta il numero di cifre:</strong> è maggiore il numero che ha più cifre:
        </p>
        <div>
          <div class="flex flex-wrap gap-6 justify-center font-bold">
            <div class="bg-white dark:bg-gray-800 px-4 py-2 rounded-lg border-2 border-cyan-400 dark:border-cyan-500">251 <span class="text-blue-600 dark:text-blue-400">&gt;</span> 46</div>
            <div class="bg-white dark:bg-gray-800 px-4 py-2 rounded-lg border-2 border-cyan-400 dark:border-cyan-500">106 <span class="text-blue-600 dark:text-blue-400">&gt;</span> 9</div>
            <div class="bg-white dark:bg-gray-800 px-4 py-2 rounded-lg border-2 border-cyan-400 dark:border-cyan-500">63 <span class="text-blue-600 dark:text-blue-400">&gt;</span> 7</div>
          </div>
        </div>
      </li>

      <!-- Regola 2 -->
      <li>
        <p class="text-gray-800 dark:text-gray-200 mb-3">
          <strong>Se il numero di cifre è uguale,</strong> confronta le cifre iniziando da sinistra.
        </p>

        <!-- Esempio 1: 251 vs 246 -->
        <div class="p-4 mb-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="overflow-x-auto">
              <div class="border-3 border-cyan-400 dark:border-cyan-500 rounded-2xl overflow-hidden">
                <table class="w-full">
                  <thead>
                    <tr class="bg-white dark:bg-gray-800">
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-green-600 dark:text-green-400">h</th>
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-red-600 dark:text-red-400">da</th>
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-cyan-600 dark:text-cyan-400">u</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">2</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">5</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">1</td>
                    </tr>
                    <tr>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">2</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">4</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">6</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="flex items-center">
              <p class="text-gray-700 dark:text-gray-200">
                I numeri hanno entrambi 3 cifre.<br>
                Confronta le cifre delle centinaia:<br>
                <strong class="">2 <span class="text-blue-600 dark:text-blue-400">=</span> 2</strong><br><br>
              </p>
            </div>
          </div>
        </div>

        <!-- Esempio 1: 251 vs 246 -->
        <div class="p-4 mb-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="overflow-x-auto">
              <div class="border-3 border-cyan-400 dark:border-cyan-500 rounded-2xl overflow-hidden">
                <table class="w-full">
                  <thead>
                    <tr class="bg-white dark:bg-gray-800">
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-green-600 dark:text-green-400">h</th>
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-red-600 dark:text-red-400">da</th>
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-cyan-600 dark:text-cyan-400">u</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">2</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">5</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">1</td>
                    </tr>
                    <tr>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">2</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">4</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">6</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="flex items-center">
              <p class="text-gray-700 dark:text-gray-200">
                Confronta quindi le cifre delle decine.<br>
                5 è maggiore di 4.<br>
                Allora: <strong>251 <span class="text-blue-600 dark:text-blue-400">&gt;</span> 246</strong>
              </p>
            </div>
          </div>
        </div>

        <!-- Esempio 2: 251 vs 257 -->
        <div class="p-4 mb-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="overflow-x-auto">
              <div class="border-3 border-cyan-400 dark:border-cyan-500 rounded-2xl overflow-hidden">
                <table class="w-full">
                  <thead>
                    <tr class="bg-white dark:bg-gray-800">
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-green-600 dark:text-green-400">h</th>
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-red-600 dark:text-red-400">da</th>
                      <th class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-2 text-center font-bold text-cyan-600 dark:text-cyan-400">u</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">2</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">5</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">1</td>
                    </tr>
                    <tr>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">2</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">5</td>
                      <td class="border-2 border-cyan-400 dark:border-cyan-500 px-4 py-3 text-center font-bold bg-white dark:bg-gray-800">7</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="flex items-center">
              <p class="text-gray-700 dark:text-gray-200">
                Se anche la cifra delle decine è uguale,<br>
                confronta le cifre delle unità.<br>
                1 è minore di 7.<br>
                Allora: <strong>251 <span class="text-blue-600 dark:text-blue-400">&lt;</span> 257</strong>
              </p>
            </div>
          </div>
        </div>
      </li>
    </ul>

    <!-- Legenda simboli -->
    <div class="mt-6 bg-white dark:bg-gray-800 p-4 rounded-lg border-3 border-pink-500 dark:border-pink-400">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center font-bold">
        <div>
          <span class="text-blue-600 dark:text-blue-400">&gt;</span> significa è <strong class="text-green-600 dark:text-green-400">maggiore di</strong>
        </div>
        <div>
          <span class="text-blue-600 dark:text-blue-400">&lt;</span> significa è <strong class="text-blue-600 dark:text-blue-400">minore di</strong>
        </div>
        <div>
          <span class="text-blue-600 dark:text-blue-400">=</span> significa è <strong class="text-purple-600 dark:text-purple-400">uguale a</strong>
        </div>
      </div>
    </div>
  </div>

  <!-- Esercizio 1: Confronta coppie di numeri -->
  <div class="bg-transparent p-4 md:p-8 mb-8" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        Confronta ogni coppia di numeri: scrivi il simbolo <strong class="text-blue-600 dark:text-blue-400">&gt;</strong>, <strong class="text-blue-600 dark:text-blue-400">&lt;</strong> o <strong class="text-blue-600 dark:text-blue-400">=</strong>.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <%
        comparisons = [
          { a: 203, b: 302, answer: "<" },
          { a: 872, b: 782, answer: ">" },
          { a: 456, b: 546, answer: "<" },
          { a: 865, b: 856, answer: ">" },
          { a: 486, b: 648, answer: "<" },
          { a: 158, b: 158, answer: "=" },
          { a: 395, b: 395, answer: "=" },
          { a: 623, b: 236, answer: ">" }
        ]

        comparisons.each do |comp|
      %>
        <div class="p-4 flex items-center justify-center gap-3 bg-white dark:bg-gray-800 rounded-lg border-3 border-yellow-400 dark:border-yellow-500">
          <span class="font-bold"><%= comp[:a] %></span>
          <input type="text"
                 data-fill-blanks-target="input"
                 data-correct-answer="<%= comp[:answer] %>"
                 class="w-16 px-2 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white"
                 maxlength="1">
          <span class="font-bold"><%= comp[:b] %></span>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Esercizio 2: Ordina i numeri -->
  <div class="bg-transparent p-4 md:p-8 mb-8" data-controller="fill-blanks auto-advance">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-gray-700 dark:text-gray-200">
        Scrivi i numeri:
      </p>
    </div>

    <!-- Ordine crescente -->
    <div class="bg-white dark:bg-gray-800 p-4 md:p-6 mb-8 rounded-lg">
      <h3 class="font-bold mb-4">
        • In <span class="text-blue-600 dark:text-blue-400">ordine crescente</span> (dal minore al maggiore).
      </h3>

      <div class="mb-4">
        <p class="font-bold text-center mb-2">Numeri da ordinare:</p>
        <div class="flex flex-wrap justify-center gap-3 mb-6">
          <% [698, 548, 58, 125, 992, 664, 400].each do |num| %>
            <span class="bg-white dark:bg-gray-700 px-4 py-2 rounded-lg border-2 border-cyan-400 dark:border-cyan-500 font-bold"><%= num %></span>
          <% end %>
        </div>
      </div>

      <div class="flex flex-wrap items-center justify-center gap-2">
        <% 7.times do |i| %>
          <input type="text"
                 data-fill-blanks-target="input"
                 data-correct-answer="<%= [58, 125, 400, 548, 664, 698, 992][i] %>"
                 class="w-20 px-2 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white"
                 maxlength="3"
                 inputmode="numeric">
          <% if i < 6 %>
            <span class="font-bold text-red-600 dark:text-red-400">&lt;</span>
          <% end %>
        <% end %>
      </div>
    </div>

    <!-- Ordine decrescente -->
    <div class="bg-white dark:bg-gray-800 p-4 md:p-6 rounded-lg">
      <h3 class="font-bold mb-4">
        • In <span class="text-blue-600 dark:text-blue-400">ordine decrescente</span> (dal maggiore al minore).
      </h3>

      <div class="mb-4">
        <p class="font-bold text-center mb-2">Numeri da ordinare:</p>
        <div class="flex flex-wrap justify-center gap-3 mb-6">
          <% [845, 236, 695, 542, 121, 210, 620].each do |num| %>
            <span class="bg-white dark:bg-gray-700 px-4 py-2 rounded-lg border-2 border-cyan-400 dark:border-cyan-500 font-bold"><%= num %></span>
          <% end %>
        </div>
      </div>

      <div class="flex flex-wrap items-center justify-center gap-2">
        <% 7.times do |i| %>
          <input type="text"
                 data-fill-blanks-target="input"
                 data-correct-answer="<%= [845, 695, 620, 542, 236, 210, 121][i] %>"
                 class="w-20 px-2 py-2 border-b-2 border-dotted border-gray-400 dark:border-gray-500 text-center font-bold bg-transparent dark:text-white"
                 maxlength="3"
                 inputmode="numeric">
          <% if i < 6 %>
            <span class="font-bold text-red-600 dark:text-red-400">&gt;</span>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls', color: 'cyan' %>
</div>
