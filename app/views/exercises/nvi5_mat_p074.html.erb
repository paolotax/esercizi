<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-blue-50 via-white to-blue-50 rounded-3xl shadow-xl" data-controller="exercise-checker page-viewer" data-page-viewer-image-url-value="<%= asset_path('nvi5_mat/p074/page.png') %>">

  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-blue-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">RISOLVERE PROBLEMI</div>
        <h1 class="text-2xl sm:text-3xl font-bold text-blue-600">RIFLETTERE SUI DATI E SUL RISULTATO</h1>
      </div>
      <div class="flex-shrink-0 bg-purple-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl cursor-pointer hover:bg-purple-700 transition-colors"
           data-action="click->page-viewer#openOriginal" title="Clicca per vedere la pagina originale">74</div>
    </div>
  </div>

  <!-- Introduzione -->
  <div class="mb-8 bg-pink-50 border-2 border-pink-300 rounded-2xl p-4 md:p-6">
    <p class="text-lg">Per risolvere un problema non basta eseguire un'operazione, bisogna anche <strong>riflettere sui risultati trovati e chiedersi se sono verosimili</strong>.</p>
  </div>

  <!-- Problema taxi -->
  <div class="mb-8 bg-white rounded-2xl border-4 border-cyan-200 shadow-2xl p-4 md:p-6">
    <h2 class="text-2xl font-bold text-cyan-700 mb-4">Viaggio in taxi</h2>

    <div class="flex flex-col md:flex-row gap-6 mb-6">
      <div class="flex-1">
        <div class="bg-cyan-50 border-2 border-cyan-300 rounded-xl p-4 mb-4">
          <p>Un gruppo di 53 turisti, al termine del soggiorno in hotel, deve raggiungere la stazione. Il trasporto viene organizzato in taxi da 6 posti. Quanti taxi è necessario prenotare?</p>
        </div>

        <p class="font-bold mb-3">• Osserva le soluzioni proposte da 3 bambini.</p>

        <div class="space-y-3 mb-4">
          <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-3">
            <p class="font-bold mb-1">Enrico <span class="text-blue-600">→ 53 − 6 = 47</span></p>
            <p>È necessario prenotare 47 taxi.</p>
          </div>

          <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-3">
            <p class="font-bold mb-1">Giacomo <span class="text-blue-600">→ 53 × 6 = 318</span></p>
            <p>È necessario prenotare 318 taxi.</p>
          </div>

          <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-3">
            <p class="font-bold mb-1">Laura <span class="text-blue-600">→ 53 : 6 = 8 resto 5</span></p>
            <p>È necessario prenotare 9 taxi: 8 da 6 posti pieni e 1 per le 5 persone che restano.</p>
          </div>
        </div>

        <div>
          <p class="mb-2">Chi ha risposto correttamente?
            <input type="text" class="w-48 px-3 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none ml-2">
          </p>
        </div>
      </div>

      <%= image_tag "nvi5_mat/p074/p074_01.jpg", class: "w-full md:w-64 rounded-lg shadow-lg", alt: "Taxi" %>
    </div>

    <div class="bg-pink-50 border-2 border-pink-300 rounded-xl p-4">
      <p class="mb-3">A volte può capitare di giudicare non accettabile il risultato di un problema. Allora che cosa fai? Rivedi i calcoli, cerchi l'errore e correggi. Altre volte non trovi errori e pensi: questo risultato è impossibile!</p>
    </div>
  </div>

  <!-- Osserva le situazioni -->
  <div class="mb-8 bg-white rounded-2xl border-4 border-purple-200 shadow-2xl p-4 md:p-6">
    <h2 class="text-2xl font-bold text-purple-700 mb-4">• Osserva le situazioni rappresentate e prova a rispondere.</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <!-- Problema gelati -->
      <div class="space-y-4">
        <div class="flex gap-3">
          <%= image_tag "nvi5_mat/p074/p074_02.jpg", class: "w-32 rounded-lg shadow-lg", alt: "Gelati" %>
          <div class="flex-1 bg-cyan-50 border-2 border-cyan-300 rounded-xl p-3">
            <p class="text-sm">1 CONFEZIONE 5 EURO<br>3 CONFEZIONI 18 EURO</p>
          </div>
        </div>

        <div class="space-y-2">
          <div>
            <span>– Quanto paghi ogni confezione se ne acquisti tre?</span>
            <input type="text" class="w-32 px-2 py-1 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none ml-2">
          </div>
          <div class="flex items-center gap-3">
            <span>– La proposta è conveniente?</span>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">Sì</button>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">No</button>
          </div>
          <div class="flex items-center gap-3">
            <span>– Ci sono informazioni impossibili o non accettabili?</span>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">Sì</button>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">No</button>
          </div>
        </div>

        <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-3">
          <p class="text-sm">In questa situazione c'è un dato contraddittorio: comprando 3 confezioni, ognuna costa più di 5 euro, quindi non è vero che "paghi 2 prendi 3".</p>
        </div>
      </div>

      <!-- Problema treni -->
      <div class="space-y-4">
        <%= image_tag "nvi5_mat/p074/p074_03.jpg", class: "w-full rounded-lg shadow-lg", alt: "Orario treni" %>

        <div class="space-y-2">
          <div>
            <span>– Quanto durano i tre viaggi?</span>
          </div>
          <div>
            <span class="ml-4">FI-PA</span>
            <input type="text" class="w-32 px-2 py-1 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none ml-2">
          </div>
          <div>
            <span class="ml-4">FI-MI</span>
            <input type="text" class="w-32 px-2 py-1 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none ml-2">
          </div>
          <div>
            <span class="ml-4">FI-TO</span>
            <input type="text" class="w-32 px-2 py-1 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none ml-2">
          </div>
          <div class="flex items-center gap-3">
            <span>– Sono tutti tempi possibili?</span>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">Sì</button>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">No</button>
            <span>Perché?</span>
          </div>
          <div class="flex items-center gap-3">
            <span>– Ci sono informazioni impossibili o non accettabili?</span>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">Sì</button>
            <button class="px-4 py-1 border-2 border-blue-300 rounded-lg hover:bg-blue-100">No</button>
          </div>
        </div>

        <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-3">
          <p class="text-sm">In questa situazione c'è un'informazione impossibile perché anche il treno più veloce non può impiegare 30 minuti per andare da Firenze a Palermo!</p>
        </div>
      </div>
    </div>
  </div>

  <%= render 'shared/exercise_controls', color: 'purple' %>

</div>
