<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-4">
    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg space-y-6">
      <!-- Esercizio 1 - IMPARARE TUTTI -->
      <div class="p-4 bg-white rounded-2xl -mx-4 md:-mx-6 -mt-4 md:-mt-6 border-3 border-blue-500">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          Calcola sul quaderno le seguenti operazioni e riporta qui i risultati.
        </p>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
          <div class="flex items-center gap-2">
            <span>12 + 3,5 =</span>
            <input type="text" data-correct-answer="15,5" class="w-20 px-2 py-1 border-b-2 border-dotted text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>58,5 – 11 =</span>
            <input type="text" data-correct-answer="47,5" class="w-20 px-2 py-1 border-b-2 border-dotted text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>75 × 0,2 =</span>
            <input type="text" data-correct-answer="15" class="w-20 px-2 py-1 border-b-2 border-dotted text-center">
          </div>
          <div class="flex items-center gap-2">
            <span>195 : 1,5 =</span>
            <input type="text" data-correct-answer="130" class="w-20 px-2 py-1 border-b-2 border-dotted text-center">
          </div>
        </div>
      </div>

      <!-- Esercizio 2 -->
      <div>
        <p class="font-bold text-gray-700 mb-2">
          <%= numero_esercizio_badge(2) %>
          Applica le proprietà commutativa e associativa e calcola sul quaderno. Osserva l'esempio.
        </p>
        <p class="text-custom-pink font-bold mb-4">16 + 1,3 + 14 = 16 + 14 + 1,3 = 30 + 1,3 = 31,3</p>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <p>51 + 35 + 189 + 65 =</p>
          <p>173 + 42 + 17 + 108 =</p>
          <p>9,2 + 2 + 0,8 =</p>
          <p>12,5 + 6 + 15,5 =</p>
        </div>
      </div>

      <!-- Esercizi 3 e 5 affiancati -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Esercizio 3 -->
        <div>
          <p class="font-bold text-gray-700 mb-2">
            <%= numero_esercizio_badge(3) %>
            Applica la proprietà invariantiva e calcola sul quaderno. Osserva l'esempio.
          </p>
          <p class="text-custom-pink font-bold mb-4">873 – 59 = (873 + 1) – (59 + 1) = 874 – 60 = 814</p>
          <div class="grid grid-cols-3 gap-2">
            <p>868 – 431 =</p>
            <p><span class="whitespace-nowrap">1 436</span> – 313 =</p>
            <p><span class="whitespace-nowrap">2 347</span> – <span class="whitespace-nowrap">1 128</span> =</p>
            <p>38,5 – 15,5 =</p>
            <p>12,34 – 7,17 =</p>
            <p>67,52 – 5,41 =</p>
            <p>12,52 – 11,92 =</p>
            <p>82,4 – 12,1 =</p>
            <p>136,7 – 21,4 =</p>
          </div>
        </div>

        <!-- Esercizio 5 -->
        <div>
          <p class="font-bold text-gray-700 mb-2">
            <%= numero_esercizio_badge(5) %>
            Applica la proprietà invariantiva e calcola sul quaderno. Osserva l'esempio.
          </p>
          <p class="text-custom-pink font-bold mb-4"><span class="whitespace-nowrap">1 740</span> : 15 = (<span class="whitespace-nowrap">1 740</span> : 5) : (15 : 5) = 348 : 3 = 116</p>
          <div class="grid grid-cols-3 gap-2">
            <p>594 : 9 =</p>
            <p><span class="whitespace-nowrap">2 556</span> : 12 =</p>
            <p>734 : 2 =</p>
            <p>4,68 : 0,02 =</p>
            <p>670 : 0,5 =</p>
            <p>9,92 : 4 =</p>
          </div>
        </div>
      </div>

      <!-- Esercizi 4 e 6 affiancati -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Esercizio 4 -->
        <div>
          <p class="font-bold text-gray-700 mb-2">
            <%= numero_esercizio_badge(4) %>
            Applica la proprietà distributiva e calcola sul quaderno. Osserva l'esempio.
          </p>
          <p class="text-custom-pink font-bold mb-4">12,5 × 6 = (12 + 0,5) × 6 = (12 × 6) + (0,5 × 6) = 72 + 3 = 75</p>
          <div class="grid grid-cols-3 gap-2">
            <p>124 × 8 =</p>
            <p>35 × 12 =</p>
            <p>57 × 14 =</p>
            <p>26,4 × 3 =</p>
            <p>7,5 × 4 =</p>
            <p>8,2 × 15 =</p>
          </div>
        </div>

        <!-- Esercizio 6 -->
        <div>
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(6) %>
            Completa le uguaglianze.
          </p>
          <div class="grid grid-cols-2 gap-x-4 gap-y-2">
            <div class="flex items-center gap-1">
              <span class="font-bold">a)</span>
              <input type="text" data-correct-answer="10" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>+ 2,3 = 12,3</span>
            </div>
            <div class="flex items-center gap-1">
              <span>3,009 +</span>
              <input type="text" data-correct-answer="2,991" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>= 6</span>
            </div>
            <div class="flex items-center gap-1">
              <span class="font-bold">b)</span>
              <input type="text" data-correct-answer="90" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>– 0,5 = 89,5</span>
            </div>
            <div class="flex items-center gap-1">
              <span>47,569 –</span>
              <input type="text" data-correct-answer="0,569" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>= 47</span>
            </div>
            <div class="flex items-center gap-1">
              <span class="font-bold">c)</span>
              <span>64 ×</span>
              <input type="text" data-correct-answer="0,5" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>= 32</span>
            </div>
            <div class="flex items-center gap-1">
              <input type="text" data-correct-answer="50" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>× 0,08 = 4</span>
            </div>
            <div class="flex items-center gap-1">
              <span class="font-bold">d)</span>
              <span>207 :</span>
              <input type="text" data-correct-answer="23" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>= 9</span>
            </div>
            <div class="flex items-center gap-1">
              <input type="text" data-correct-answer="9,6" class="w-16 px-1 py-1 border-b-2 border-dotted text-center">
              <span>: 1,2 = 8</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Esercizio 7 -->
      <div>
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(7) %>
          Calcola in colonna sul quaderno, poi verifica i risultati con la prova.
        </p>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="space-y-1">
            <p class="font-bold text-custom-pink">a)</p>
            <p>231,34 + 0,85 =</p>
            <p><span class="whitespace-nowrap">3 146</span> + 12,45 =</p>
            <p>46,1 + 11,47 =</p>
            <p><span class="whitespace-nowrap">12 841</span> + <span class="whitespace-nowrap">3 576</span> =</p>
            <p>0,7 + 2,856 =</p>
          </div>
          <div class="space-y-1">
            <p class="font-bold text-custom-pink">b)</p>
            <p>34,5 – 31,6 =</p>
            <p><span class="whitespace-nowrap">14 508</span> – 983 =</p>
            <p>12,4 – 9,56 =</p>
            <p>872 – 75,48 =</p>
            <p>1,3 – 1,13 =</p>
          </div>
          <div class="space-y-1">
            <p class="font-bold text-custom-pink">c)</p>
            <p>312 × 25 =</p>
            <p>154 × 3,8 =</p>
            <p>24,15 × 0,26 =</p>
            <p>6,18 × 4,5 =</p>
            <p>476 × 168 =</p>
          </div>
          <div class="space-y-1">
            <p class="font-bold text-custom-pink">d)</p>
            <p><span class="whitespace-nowrap">1 701</span> : 54 =</p>
            <p>166,5 : 37 =</p>
            <p>37,12 : 0,32 =</p>
            <p>52,2 : 0,15 =</p>
            <p>220 : 5,5 =</p>
          </div>
        </div>
      </div>

      <!-- Esercizio 8 -->
      <div>
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(8) %>
          Calcola in colonna sul quaderno.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="flex items-start gap-2">
            <p class="font-bold text-custom-pink whitespace-nowrap">Procedi fino a resto 0</p>
            <span>→</span>
            <p>788 : 8 =</p>
            <p>498 : 12 =</p>
          </div>
          <div class="flex items-start gap-2">
            <p class="font-bold text-custom-pink whitespace-nowrap">Procedi fino ai millesimi</p>
            <span>→</span>
            <p>14 : 65 =</p>
            <p>517,2 : 13 =</p>
          </div>
        </div>
      </div>

      <!-- Esercizio 9 -->
      <div>
        <p class="font-bold text-gray-700 mb-4">
          <%= numero_esercizio_badge(9) %>
          Indica, senza fare i calcoli, se il prodotto delle seguenti moltiplicazioni è maggiore di entrambi i fattori, di uno solo o è minore di entrambi. Poi verifica sul quaderno.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>45,3 × 2,4</span>
              <span>→</span>
              <strong class="text-custom-pink">maggiore di entrambi</strong>
            </div>
            <div class="flex items-center gap-2">
              <span>0,6 × 0,008</span>
              <span>→</span>
              <input type="text" data-correct-answer="minore di entrambi" class="flex-1 px-2 py-1 border-b-2 border-dotted">
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span>5,25 × 0,19</span>
              <span>→</span>
              <input type="text" data-correct-answer="minore di entrambi" class="flex-1 px-2 py-1 border-b-2 border-dotted">
            </div>
            <div class="flex items-center gap-2">
              <span>2,8 × 3</span>
              <span>→</span>
              <input type="text" data-correct-answer="maggiore di entrambi" class="flex-1 px-2 py-1 border-b-2 border-dotted">
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
