<div class="page-viewer bg-white dark:bg-gray-900 transition-colors duration-300"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-8 p-3 md:p-6">

    <!-- LE FRAZIONI DECIMALI -->
    <div class="flex justify-center">
      <div class="bg-blue-500 text-white font-bold px-8 py-3 rounded-2xl shadow">
        LE FRAZIONI DECIMALI
      </div>
    </div>

    <!-- Freccia -->
    <div class="flex justify-center">
      <span class="text-cyan-500">&#8595;</span>
    </div>

    <!-- Tre colonne: CHE COSA SONO, COME SI LEGGONO, COME SI SCRIVONO -->
    <div class="flex flex-row justify-center gap-4 md:gap-8 flex-wrap">
      <!-- CHE COSA SONO -->
      <div class="flex flex-col items-center gap-3">
        <div class="bg-cyan-500 text-white font-bold px-4 py-2 rounded-2xl text-center">
          CHE COSA SONO
        </div>
        <span class="text-cyan-500">&#8595;</span>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-3 shadow border border-cyan-500 dark:border-cyan-600 text-gray-700 dark:text-gray-200 text-left max-w-48">
          Sono frazioni che hanno come <strong>denominatore 10, 100, 1000</strong>
        </div>
      </div>

      <!-- COME SI LEGGONO -->
      <div class="flex flex-col items-center gap-3">
        <div class="bg-cyan-500 text-white font-bold px-4 py-2 rounded-2xl text-center">
          COME SI LEGGONO
        </div>
        <span class="text-cyan-500">&#8595;</span>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-3 shadow border border-cyan-500 dark:border-cyan-600 text-gray-700 dark:text-gray-200 text-left">
          <%= render 'shared/frazione', num: 3, den: 100 %> si legge <strong>tre centesimi</strong>
        </div>
      </div>

      <!-- COME SI SCRIVONO -->
      <div class="flex flex-col items-center gap-3">
        <div class="bg-cyan-500 text-white font-bold px-4 py-2 rounded-2xl text-center">
          COME SI SCRIVONO
        </div>
        <span class="text-cyan-500">&#8595;</span>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-3 shadow border border-cyan-500 dark:border-cyan-600 text-gray-700 dark:text-gray-200 text-left">
          <p class="text-gray-700 dark:text-gray-200"><span class="text-<%= @pagina.base_color %>-500">•</span> Come frazioni: <%= render 'shared/frazione', num: 1, den: 100 %> o</p>
          <p class="text-gray-700 dark:text-gray-200"><span class="text-<%= @pagina.base_color %>-500">•</span> come numeri con la virgola: <strong>0,01</strong></p>
        </div>
      </div>
    </div>

    <!-- Separatore -->
    <div class="my-8"></div>

    <!-- I NUMERI DECIMALI -->
    <div class="flex justify-center">
      <div class="bg-blue-500 text-white font-bold px-8 py-3 rounded-2xl shadow">
        I NUMERI DECIMALI
      </div>
    </div>

    <!-- Freccia -->
    <div class="flex justify-center">
      <span class="text-cyan-500">&#8595;</span>
    </div>

    <!-- Tre colonne: CHE COSA SONO, DA CHE COSA SONO FORMATI, COME SI LEGGONO -->
    <div class="flex flex-row justify-center gap-4 md:gap-8 flex-wrap">
      <!-- CHE COSA SONO -->
      <div class="flex flex-col items-center gap-3">
        <div class="bg-cyan-500 text-white font-bold px-4 py-2 rounded-2xl text-center">
          CHE COSA SONO
        </div>
        <span class="text-cyan-500">&#8595;</span>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-3 shadow border border-cyan-500 dark:border-cyan-600 text-gray-700 dark:text-gray-200 text-left">
          <p>Sono numeri con la <strong>virgola</strong></p>
          <p class="font-bold text-custom-sky">4,5</p>
        </div>
      </div>

      <!-- DA CHE COSA SONO FORMATI -->
      <div class="flex flex-col items-center gap-3">
        <div class="bg-<%= @pagina.base_color %>-500 text-white font-bold px-4 py-2 rounded-2xl text-center">
          DA CHE COSA SONO FORMATI
        </div>
        <span class="text-cyan-500">&#8595;</span>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-3 shadow border border-cyan-500 dark:border-cyan-600 text-gray-700 dark:text-gray-200 text-left">
          <p>Sono formati da una <strong>parte intera</strong> e una <span class="text-<%= @pagina.base_color %>-600 font-bold">parte decimale</span></p>
          <p><span class="font-bold">4 153</span><span class="text-<%= @pagina.base_color %>-600 font-bold">,789</span></p>
        </div>
      </div>

      <!-- COME SI LEGGONO -->
      <div class="flex flex-col items-center gap-3">
        <div class="bg-cyan-500 text-white font-bold px-4 py-2 rounded-2xl text-center">
          COME SI LEGGONO
        </div>
        <span class="text-cyan-500">&#8595;</span>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-3 shadow border border-cyan-500 dark:border-cyan-600 text-gray-700 dark:text-gray-200 text-left">
          <p><strong>3,4</strong> si legge</p>
          <p><strong>tre virgola quattro</strong></p>
        </div>
      </div>
    </div>

    <!-- Freccia verso tabella posizionale -->
    <div class="flex justify-center">
      <span class="text-cyan-500">&#8595;</span>
    </div>

    <!-- Tabella posizionale -->
    <div class="overflow-x-auto">
      <table class="mx-auto border-collapse">
        <!-- Header PARTE INTERA / PARTE DECIMALE -->
        <tr>
          <th colspan="4" class="p-2 bg-<%= @pagina.base_color %>-500 text-white border-2 border-<%= @pagina.base_color %>-500 font-bold text-center">
            PARTE INTERA
          </th>
          <td class="border-none"></td>
          <th colspan="3" class="p-2 bg-<%= @pagina.base_color %>-300 text-white border-2 border-<%= @pagina.base_color %>-300 font-bold text-center">
            PARTE DECIMALE
          </th>
        </tr>
        <!-- Abbreviazioni -->
        <tr>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-green-600">uk</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-red-600">h</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-blue-600">da</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-green-600">u</td>
          <td class="border-none"></td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-gray-600 dark:text-gray-300">d</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-gray-600 dark:text-gray-300">c</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-<%= @pagina.base_color %>-50 dark:bg-<%= @pagina.base_color %>-900/30 font-bold text-gray-600 dark:text-gray-300">m</td>
        </tr>
        <!-- Nomi -->
        <tr>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">migliaia</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">centinaia</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">decine</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">unità</td>
          <td class="border-none"></td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">decimi</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">centesimi</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300">millesimi</td>
        </tr>
        <!-- Valori -->
        <tr>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 font-bold text-gray-700 dark:text-gray-200">4</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 font-bold text-gray-700 dark:text-gray-200">1</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 font-bold text-gray-700 dark:text-gray-200">5</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-400 text-center bg-white dark:bg-gray-700 font-bold text-gray-700 dark:text-gray-200">3</td>
          <td class="p-2 font-bold text-<%= @pagina.base_color %>-600">,</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-white dark:bg-gray-700 font-bold text-<%= @pagina.base_color %>-600">7</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-white dark:bg-gray-700 font-bold text-<%= @pagina.base_color %>-600">8</td>
          <td class="p-2 border-2 border-<%= @pagina.base_color %>-300 text-center bg-white dark:bg-gray-700 font-bold text-<%= @pagina.base_color %>-600">9</td>
        </tr>
      </table>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
