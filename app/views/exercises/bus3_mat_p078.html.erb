<% content_for :titolo, "Frazioni - Dall'UnitÃ  Frazionaria all'Intero - Pagina 78" %>

<div class="max-w-7xl mx-auto p-6 bg-gradient-to-b from-blue-50 to-white" data-controller="exercise-checker fraction-grids">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-start sm:items-center justify-between gap-4 mb-4">
      <div class="flex flex-col-reverse sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        <div class="bg-blue-500 text-white text-md sm:text-xl px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg font-bold">
          FRAZIONI
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-blue-600">DALL'UNITÃ€ FRAZIONARIA ALL'INTERO</h1>
      </div>
      <div class="flex-shrink-0 bg-red-600 text-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-lg sm:text-xl">
        78
      </div>
    </div>
  </div>

  <!-- Esercizio 1 - Griglie con unitÃ  frazionarie -->
  <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold flex-shrink-0">
        1
      </div>
      <p class="text-lg text-gray-700">
        Scrivi il valore in ogni unitÃ  frazionaria. Segui l'esempio.
      </p>
    </div>

    <!-- Griglia 1 - Esempio con 1/7 (7 celle) -->
    <div class="mb-8">
      <div class="flex gap-0 w-[560px] mx-auto mb-2">
        <% 7.times do %>
          <div class="flex-1 h-24 border-2 border-blue-500 flex flex-col items-center justify-center bg-blue-50">
            <span class="text-xl font-bold text-blue-600">1</span>
            <div class="w-6 h-0.5 bg-blue-600 my-1"></div>
            <span class="text-xl font-bold text-blue-600">7</span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Griglia 2 - 3 celle vuote (risposta: 1/3) -->
    <div class="mb-8">
      <div class="flex gap-0 w-[560px] mx-auto mb-2">
        <% 3.times do |i| %>
          <div class="flex-1 h-24 border-2 border-blue-500 flex flex-col items-center justify-center bg-white">
            <input type="text"
                   class="w-10 h-8 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="1"
                   data-correct-answer="1"
                   maxlength="1"
                   placeholder="">
            <div class="w-10 h-1 bg-gray-400 my-1"></div>
            <input type="text"
                   class="w-10 h-8 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="3"
                   data-correct-answer="3"
                   maxlength="1"
                   placeholder="">
          </div>
        <% end %>
      </div>
    </div>

    <!-- Griglia 3 - 6 celle vuote (risposta: 1/6) -->
    <div class="mb-8">
      <div class="flex gap-0 w-[560px] mx-auto mb-2">
        <% 6.times do |i| %>
          <div class="flex-1 h-24 border-2 border-blue-500 flex flex-col items-center justify-center bg-white">
            <input type="text"
                   class="w-10 h-8 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="1"
                   data-correct-answer="1"
                   maxlength="1"
                   placeholder="">
            <div class="w-10 h-1 bg-gray-400 my-1"></div>
            <input type="text"
                   class="w-10 h-8 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="6"
                   data-correct-answer="6"
                   maxlength="1"
                   placeholder="">
          </div>
        <% end %>
      </div>
    </div>

    <!-- Griglia 4 - 9 celle vuote (risposta: 1/9) -->
    <div class="mb-6">
      <div class="flex gap-0 w-[560px] mx-auto mb-2">
        <% 9.times do |i| %>
          <div class="flex-1 h-24 border-2 border-blue-500 flex flex-col items-center justify-center bg-white">
            <input type="text"
                   class="w-10 h-8 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="1"
                   data-correct-answer="1"
                   maxlength="1"
                   placeholder="">
            <div class="w-10 h-1 bg-gray-400 my-1"></div>
            <input type="text"
                   class="w-10 h-8 text-center text-xl font-bold border-b-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="9"
                   data-correct-answer="9"
                   maxlength="1"
                   placeholder="">
          </div>
        <% end %>
      </div>
    </div>

    <!-- Pulsante verifica -->
    <div class="text-center mt-6">
      <button data-action="click->fraction-grids#checkExercise1"
              class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-colors">
        Verifica Esercizio 1
      </button>
      <div data-fraction-grids-target="feedback1" class="mt-4 text-lg font-semibold"></div>
    </div>
  </div>

  <!-- Esercizio 2 - Progressione frazioni -->
  <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold flex-shrink-0">
        2
      </div>
      <p class="text-lg text-gray-700">
        Colora e conta sempre un'unitÃ  frazionaria in piÃ¹ fino all'intero. Segui l'esempio.
      </p>
    </div>

    <!-- Sequenza 1: terzi (0, 1/3, 2/3, 3/3) -->
    <div class="mb-12">
      <div class="flex items-center gap-4 justify-center flex-wrap">
        <!-- Griglia 0 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 3.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"></div>
            <% end %>
          </div>
          <div class="text-2xl font-bold text-gray-700">0</div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 1/3 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <div class="w-20 h-20 border-2 border-blue-500 bg-blue-300"
                 data-fraction-grids-target="cell"
                 data-clickable="true"
                 data-action="click->fraction-grids#toggleCell"></div>
            <% 2.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
          </div>
          <div class="flex flex-col items-center justify-center">
            <span class="text-2xl font-bold text-blue-600">1</span>
            <div class="w-10 h-0.5 bg-blue-600 my-1"></div>
            <span class="text-2xl font-bold text-blue-600">3</span>
          </div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 2/3 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 2.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
            <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                 data-fraction-grids-target="cell"
                 data-clickable="true"
                 data-action="click->fraction-grids#toggleCell"></div>
          </div>
          <div class="flex flex-col items-center justify-center">
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="2"
                   data-correct-answer="2"
                   maxlength="1">
            <div class="w-10 h-0.5 bg-gray-600 my-1"></div>
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="3"
                   data-correct-answer="3"
                   maxlength="1">
          </div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 3/3 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 3.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
          </div>
          <div class="flex flex-col items-center justify-center">
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="3"
                   data-correct-answer="3"
                   maxlength="1">
            <div class="w-10 h-0.5 bg-gray-600 my-1"></div>
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="3"
                   data-correct-answer="3"
                   maxlength="1">
          </div>
        </div>
      </div>
    </div>

    <!-- Sequenza 2: quarti (0, 1/4, 2/4, 3/4, 4/4) -->
    <div class="mb-6">
      <div class="flex items-center gap-4 justify-center flex-wrap">
        <!-- Griglia 0 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 4.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"></div>
            <% end %>
          </div>
          <div class="text-2xl font-bold text-gray-700">0</div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 1/4 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <div class="w-20 h-20 border-2 border-blue-500 bg-blue-300"
                 data-fraction-grids-target="cell"
                 data-clickable="true"
                 data-action="click->fraction-grids#toggleCell"></div>
            <% 3.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
          </div>
          <div class="flex flex-col items-center justify-center">
            <span class="text-2xl font-bold text-blue-600">1</span>
            <div class="w-10 h-0.5 bg-blue-600 my-1"></div>
            <span class="text-2xl font-bold text-blue-600">4</span>
          </div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 2/4 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 4.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
          </div>
          <div class="flex flex-col items-center justify-center">
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="2"
                   data-correct-answer="2"
                   maxlength="1">
            <div class="w-10 h-0.5 bg-gray-600 my-1"></div>
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="4"
                   data-correct-answer="4"
                   maxlength="1">
          </div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 3/4 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 4.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
          </div>
          <div class="flex flex-col items-center justify-center">
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="3"
                   data-correct-answer="3"
                   maxlength="1">
            <div class="w-10 h-0.5 bg-gray-600 my-1"></div>
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="4"
                   data-correct-answer="4"
                   maxlength="1">
          </div>
        </div>

        <!-- Freccia -->
        <div class="text-4xl text-cyan-400">â†’</div>

        <!-- Griglia 4/4 -->
        <div class="text-center">
          <div class="flex gap-0 mb-2">
            <% 4.times do %>
              <div class="w-20 h-20 border-2 border-blue-500 bg-white"
                   data-fraction-grids-target="cell"
                   data-clickable="true"
                   data-action="click->fraction-grids#toggleCell"></div>
            <% end %>
          </div>
          <div class="flex flex-col items-center justify-center">
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="4"
                   data-correct-answer="4"
                   maxlength="1">
            <div class="w-10 h-0.5 bg-gray-600 my-1"></div>
            <input type="text"
                   class="w-12 h-10 text-center text-xl font-bold border-2 border-gray-300 focus:border-blue-500 focus:outline-none"
                   data-fraction-grids-target="input"
                   data-answer="4"
                   data-correct-answer="4"
                   maxlength="1">
          </div>
        </div>
      </div>
    </div>

    <!-- Pulsante verifica -->
    <div class="text-center mt-6">
      <button data-action="click->fraction-grids#checkExercise2"
              class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-colors">
        Verifica Esercizio 2
      </button>
      <div data-fraction-grids-target="feedback2" class="mt-4 text-lg font-semibold"></div>
    </div>
  </div>

  <!-- Esercizio 3 - BERE... CON LE FRAZIONI! -->
  <div class="bg-gradient-to-br from-green-50 to-lime-50 rounded-xl shadow-lg p-8 mb-8 border-4 border-lime-300">
    <div class="flex items-start gap-3 mb-6">
      <div class="bg-blue-500 text-white px-6 py-3 rounded-lg font-bold text-sm shadow-lg flex items-center gap-2">
        <span class="text-2xl">ðŸ’§</span>
        <span>mate<span class="bg-white text-blue-500 px-2 rounded">VIVA</span></span>
      </div>
      <div class="flex-1">
        <h2 class="text-2xl font-bold text-blue-600 mb-2">BERE... CON LE FRAZIONI!</h2>
        <p class="text-lg text-gray-700">
          <span class="text-blue-600 font-bold">ðŸ§ƒ</span> Osserva il succo che diminuisce: scrivi la frazione corrispondente al succo rimasto.
        </p>
      </div>
    </div>

    <!-- Immagine con bicchieri -->
    <div class="mb-6">
      <%= image_tag "bus3_mat_p078_img03.jpg",
          alt: "Bicchieri con succo che diminuisce",
          class: "w-full h-auto max-w-3xl mx-auto" %>
    </div>

    <!-- Input per le frazioni -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto">
      <!-- Bicchiere 1 - pieno (es. 4/4 o 1) -->
      <div class="bg-white rounded-lg p-4 shadow-md">
        <p class="text-center text-sm text-gray-600 mb-2">Bicchiere 1</p>
        <div class="flex flex-col items-center justify-center">
          <input type="text"
                 class="w-16 h-12 text-center text-2xl font-bold border-2 border-orange-400 rounded focus:border-orange-500 focus:outline-none"
                 data-fraction-grids-target="input"
                 data-answer="4"
                 data-correct-answer="4"
                 maxlength="1"
                 placeholder="">
          <div class="w-12 h-2 bg-gray-600 my-1"></div>
          <input type="text"
                 class="w-16 h-12 text-center text-2xl font-bold border-2 border-orange-400 rounded focus:border-orange-500 focus:outline-none"
                 data-fraction-grids-target="input"
                 data-answer="4"
                 data-correct-answer="4"
                 maxlength="1"
                 placeholder="">
        </div>
      </div>

      <!-- Bicchiere 2 - 3/4 -->
      <div class="bg-white rounded-lg p-4 shadow-md">
        <p class="text-center text-sm text-gray-600 mb-2">Bicchiere 2</p>
        <div class="flex flex-col items-center justify-center">
          <input type="text"
                 class="w-16 h-12 text-center text-2xl font-bold border-2 border-orange-400 rounded focus:border-orange-500 focus:outline-none"
                 data-fraction-grids-target="input"
                 data-answer="3"
                 data-correct-answer="3"
                 maxlength="1"
                 placeholder="">
          <div class="w-12 h-2 bg-gray-600 my-1"></div>
          <input type="text"
                 class="w-16 h-12 text-center text-2xl font-bold border-2 border-orange-400 rounded focus:border-orange-500 focus:outline-none"
                 data-fraction-grids-target="input"
                 data-answer="4"
                 data-correct-answer="4"
                 maxlength="1"
                 placeholder="">
        </div>
      </div>

      <!-- Bicchiere 3 - 2/4 -->
      <div class="bg-white rounded-lg p-4 shadow-md">
        <p class="text-center text-sm text-gray-600 mb-2">Bicchiere 3</p>
        <div class="flex flex-col items-center justify-center">
          <input type="text"
                 class="w-16 h-12 text-center text-2xl font-bold border-2 border-orange-400 rounded focus:border-orange-500 focus:outline-none"
                 data-fraction-grids-target="input"
                 data-answer="2"
                 data-correct-answer="2"
                 maxlength="1"
                 placeholder="">
          <div class="w-12 h-2 bg-gray-600 my-1"></div>
          <input type="text"
                 class="w-16 h-12 text-center text-2xl font-bold border-2 border-orange-400 rounded focus:border-orange-500 focus:outline-none"
                 data-fraction-grids-target="input"
                 data-answer="4"
                 data-correct-answer="4"
                 maxlength="1"
                 placeholder="">
        </div>
      </div>

      <!-- Bicchiere 4 - vuoto (0) -->
      <div class="bg-white rounded-lg p-4 shadow-md">
        <p class="text-center text-sm text-gray-600 mb-2">Bicchiere 4</p>
        <div class="text-center">
          <span class="text-4xl font-bold text-gray-700">0</span>
        </div>
      </div>
    </div>

    <!-- Pulsante verifica -->
    <div class="text-center mt-8">
      <button data-action="click->fraction-grids#checkExercise3"
              class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-colors">
        Verifica Esercizio 3
      </button>
      <div data-fraction-grids-target="feedback3" class="mt-4 text-lg font-semibold"></div>
    </div>
  </div>

  <!-- Footer con controlli -->
  <%= render 'shared/exercise_controls', color: 'blue', current_page: 'bus3_mat_p078' %>
</div>
