<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <!-- Esercizio 1 - IMPARARE TUTTI -->
      <div class="p-4 bg-white rounded-2xl -mx-4 md:-mx-6 -mt-4 md:-mt-6 mb-6 border-3 border-blue-500">
        <p class="font-bold text-gray-700 mb-4">
          <%= imparare_tutti_badge(1) %>
          Inserisci l'unità di misura corretta. Segui l'esempio.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="space-y-3">
            <p class="text-gray-700">7 m = 0,7 <span class="border-b-2 border-gray-400 px-2 font-bold">dam</span></p>
            <p class="text-gray-700 flex items-center gap-1">
              <span class="whitespace-nowrap">1 350</span> mm = 13,5
              <input type="text" data-correct-answer="dm" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </p>
          </div>
          <div class="space-y-3">
            <p class="text-gray-700 flex items-center gap-1">
              0,9 hℓ = 90
              <input type="text" data-correct-answer="ℓ" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </p>
            <p class="text-gray-700 flex items-center gap-1">
              75 dℓ = 0,75
              <input type="text" data-correct-answer="hℓ" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </p>
          </div>
          <div class="space-y-3">
            <p class="text-gray-700 flex items-center gap-1">
              1,85 kg = <span class="whitespace-nowrap">1 850</span>
              <input type="text" data-correct-answer="g" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </p>
            <p class="text-gray-700 flex items-center gap-1">
              9,6 dg = 0,096
              <input type="text" data-correct-answer="g" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </p>
          </div>
        </div>
      </div>

      <!-- Esercizi 2, 3 | 4 -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:divide-x-2 md:divide-orange-300">
        <!-- Colonna sinistra: Esercizi 2 e 3 -->
        <div class="space-y-6 md:pr-4">
          <!-- Esercizio 2 -->
          <div>
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(2) %>
              Esegui le equivalenze.
            </p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
              <div class="space-y-2">
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0">0,352 km =</span>
                  <input type="text" data-correct-answer="35,2" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">dam</span>
                </p>
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0">0,567 km =</span>
                  <input type="text" data-correct-answer="567" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">m</span>
                </p>
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0"><span class="whitespace-nowrap">19 725</span> mm =</span>
                  <input type="text" data-correct-answer="19,725" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">m</span>
                </p>
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0">0,04 cℓ =</span>
                  <input type="text" data-correct-answer="0,004" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">dℓ</span>
                </p>
              </div>
              <div class="space-y-2">
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0"><span class="whitespace-nowrap">9 876</span> cℓ =</span>
                  <input type="text" data-correct-answer="9,876" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">daℓ</span>
                </p>
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0">473,18 dag =</span>
                  <input type="text" data-correct-answer="4731,8" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">g</span>
                </p>
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0">1,4 kg =</span>
                  <input type="text" data-correct-answer="1400" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">g</span>
                </p>
                <p class="text-gray-700 flex items-center gap-2">
                  <span class="shrink-0">0,031 Mg =</span>
                  <input type="text" data-correct-answer="31" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="shrink-0">kg</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Esercizio 3 -->
          <div>
            <p class="font-bold text-gray-700 mb-4">
              <%= numero_esercizio_badge(3) %>
              Esegui le seguenti operazioni.
            </p>
            <div class="space-y-3">
              <p class="text-gray-700 flex items-center gap-2 flex-wrap">
                <span class="shrink-0">95 m + 48 cm =</span>
                <input type="text" data-correct-answer="9548" class="min-w-0 flex-1 max-w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">cm</span>
              </p>
              <p class="text-gray-700 flex items-center gap-2 flex-wrap">
                <span class="shrink-0">72 ℓ – <span class="whitespace-nowrap">3 500</span> mℓ =</span>
                <input type="text" data-correct-answer="68,5" class="min-w-0 flex-1 max-w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">ℓ</span>
              </p>
              <p class="text-gray-700 flex items-center gap-2 flex-wrap">
                <span class="shrink-0">0,96 g + 36 cg =</span>
                <input type="text" data-correct-answer="1,32" class="min-w-0 flex-1 max-w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">g</span>
              </p>
            </div>
          </div>
        </div>

        <!-- Colonna destra: Esercizio 4 -->
        <div class="md:pl-4">
          <p class="font-bold text-gray-700 mb-4">
            <%= numero_esercizio_badge(4) %>
            Completa la tabella.
          </p>
          <div class="overflow-x-auto">
            <table class="w-full border-collapse bg-white">
              <thead>
                <tr>
                  <th class="p-2 border border-gray-300 bg-custom-blue-light0 text-white font-bold">peso lordo</th>
                  <th class="p-2 border border-gray-300 bg-green-500 text-white font-bold">peso netto</th>
                  <th class="p-2 border border-gray-300 bg-custom-pink text-white font-bold">tara</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="p-2 border border-gray-300 text-center">
                    <input type="text" data-correct-answer="525 g" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="p-2 border border-gray-300 text-center">500 g</td>
                  <td class="p-2 border border-gray-300 text-center">25 g</td>
                </tr>
                <tr>
                  <td class="p-2 border border-gray-300 text-center">
                    <input type="text" data-correct-answer="270 mg" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="p-2 border border-gray-300 text-center">250 mg</td>
                  <td class="p-2 border border-gray-300 text-center">20 mg</td>
                </tr>
                <tr>
                  <td class="p-2 border border-gray-300 text-center">370 kg</td>
                  <td class="p-2 border border-gray-300 text-center">300 kg</td>
                  <td class="p-2 border border-gray-300 text-center">
                    <input type="text" data-correct-answer="70 kg" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                </tr>
                <tr>
                  <td class="p-2 border border-gray-300 text-center">780 dg</td>
                  <td class="p-2 border border-gray-300 text-center">
                    <input type="text" data-correct-answer="700 dg" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="p-2 border border-gray-300 text-center">80 dg</td>
                </tr>
                <tr>
                  <td class="p-2 border border-gray-300 text-center"><span class="whitespace-nowrap">1 500</span> cg</td>
                  <td class="p-2 border border-gray-300 text-center"><span class="whitespace-nowrap">1 350</span> cg</td>
                  <td class="p-2 border border-gray-300 text-center">
                    <input type="text" data-correct-answer="150 cg" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                </tr>
                <tr>
                  <td class="p-2 border border-gray-300 text-center">
                    <input type="text" data-correct-answer="23450 kg" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  </td>
                  <td class="p-2 border border-gray-300 text-center"><span class="whitespace-nowrap">4 200</span> kg</td>
                  <td class="p-2 border border-gray-300 text-center">19,25 Mg</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- RISOLVI I PROBLEMI -->
      <div class="mt-6">
        <h2 class="font-bold text-custom-pink mb-4 italic">RISOLVI I PROBLEMI</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:divide-x-2 md:divide-orange-300">
          <!-- Colonna sinistra: 5-8 -->
          <div class="space-y-4 md:pr-4">
            <!-- Problema 5 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(5) %>
                Marzia ha acquistato 3 strisce di nastro per il saggio di danza. Se due strisce misurano complessivamente 180 cm e l'altra 2,30 m, quanti metri di nastro ha comprato in tutto?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="4,1" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">m</span>
              </div>
            </div>

            <!-- Problema 6 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(6) %>
                Fabrizio percorre ogni giorno 27 km, tra andata e ritorno, per raggiungere il suo ufficio. Quanti chilometri percorre in una settimana, se il sabato e la domenica non lavora?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="135" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">km</span>
              </div>
            </div>

            <!-- Problema 7 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(7) %>
                Un fruttivendolo sta sistemando 12,6 kg di ciliegie dentro dei cestini. Ogni cestino deve contenere 700 g di ciliegie. Quanti cestini potrà riempire?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="18" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">cestini</span>
              </div>
            </div>

            <!-- Problema 8 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(8) %>
                Lo zaino di Filippo pieno pesa 12,7 kg, ma l'insegnante ha suggerito di non riempirlo oltre 10 kg. Se lo zaino vuoto pesa <span class="whitespace-nowrap">2 550</span> g, quanto dovrebbe essere il peso massimo del contenuto dello zaino?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="7450" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">g</span>
              </div>
            </div>
          </div>

          <!-- Colonna destra: 9-12 -->
          <div class="space-y-4 md:pl-4">
            <!-- Problema 9 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(9) %>
                Una fabbrica di succhi di frutta confeziona ogni giorno 250 brick al gusto di pera. Se ogni brick contiene 125 mℓ, quanti litri di succo di pera confeziona la fabbrica in una settimana?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="218,75" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">ℓ</span>
              </div>
            </div>

            <!-- Problema 10 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(10) %>
                Gabriele produce aceto balsamico. Deve travasarlo in bottigliette da 350 mℓ ciascuna. Se nella botte ci sono 15 ℓ di aceto, quante bottigliette riuscirà a riempire?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="42" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">bottigliette</span>
              </div>
            </div>

            <!-- Problema 11 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(11) %>
                Davide ha ordinato online un nuovo cellulare. Quando arriva, sulla confezione c'è scritto che il pacco pesa 320 g. Dopo l'apertura Davide pesa il cellulare e scopre che pesa 170 g. Quanto pesa la confezione che lo conteneva?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="150" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">g</span>
              </div>
            </div>

            <!-- Problema 12 -->
            <div class="space-y-2">
              <p class="text-gray-700">
                <%= numero_esercizio_badge(12) %>
                Un autocarro vuoto pesa 2,8 Mg. Viene riempito con 250 televisori del peso di 18 kg ciascuno. Quanti chilogrammi peserà quando sarà carico?
              </p>
              <div class="flex items-center gap-2">
                <input type="text" data-correct-answer="7300" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                <span class="shrink-0">kg</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
