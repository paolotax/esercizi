<div class="max-w-6xl mx-auto p-3 md:p-8 bg-gradient-to-br from-pink-50 via-white to-red-50 rounded-3xl shadow-xl">

  <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="mb-6">
    <p class="text-sm md:text-base text-pink-700">
      Osserva l'immagine della biblioteca e tocca i cartellini per ascoltare la parola corretta.
    </p>
  </div>

  <!-- Interactive Image -->
  <div class="relative rounded-2xl overflow-hidden border-4 border-pink-200 shadow-2xl">
    <%= image_tag "nvl5_gram/p004/p04_01.jpg",
        alt: "Biblioteca con cartellini: finestra, manifesto, scala, scaffale, lampada, quaderno, tavolo, libro, sedia, cuscino, tappeto, poltrona, schermo interattivo e bibliotecaria",
        class: "w-full h-full object-cover select-none pointer-events-none" %>

    <div class="absolute inset-0">
      <% hotspots = [
        { label: "Finestra", top: "8.5%", left: "8.0%", width: "10.0%", height: "3.5%" },
        { label: "Manifesto", top: "8.5%", left: "31.0%", width: "10.5%", height: "3.5%" },
        { label: "Scala", top: "28.5%", left: "11.5%", width: "7.0%", height: "3.5%" },
        { label: "Scaffale", top: "40.5%", left: "12.0%", width: "9.5%", height: "3.5%" },
        { label: "Lampada", top: "48.5%", left: "3.5%", width: "9.0%", height: "3.5%" },
        { label: "Quaderno", top: "45.0%", left: "30.0%", width: "10.5%", height: "3.5%" },
        { label: "Tavolo", top: "48.5%", left: "51.5%", width: "8.5%", height: "3.5%" },
        { label: "Libro", top: "48.0%", left: "27.0%", width: "7.0%", height: "3.5%" },
        { label: "Sedia", top: "58.0%", left: "35.0%", width: "6.5%", height: "3.5%" },
        { label: "Cuscino", top: "58.0%", left: "15.0%", width: "8.5%", height: "3.5%" },
        { label: "Tappeto", top: "68.0%", left: "12.5%", width: "9.5%", height: "3.5%" },
        { label: "Poltrona", top: "68.0%", left: "35.5%", width: "10.0%", height: "3.5%" },
        { label: "Schermo interattivo", top: "32.0%", left: "66.0%", width: "16.0%", height: "3.5%" },
        { label: "Bibliotecaria", top: "68.0%", left: "79.0%", width: "14.5%", height: "3.5%" }
      ] %>

      <% hotspots.each do |hotspot| %>
        <button type="button"
                class="absolute rounded-xl bg-pink-500 hover:bg-pink-500/25 border-2 border-transparent hover:border-pink-500 focus:border-pink-600 focus:outline-none transition shadow-sm"
                style="top: <%= hotspot[:top] %>; left: <%= hotspot[:left] %>; width: <%= hotspot[:width] %>; height: <%= hotspot[:height] %>;"
                aria-label="Leggi: <%= hotspot[:label] %>"
                data-controller="image-speech"
                data-image-speech-word-value="<%= hotspot[:label] %>"
                data-image-speech-lang-value="it-IT"
                data-action="click->image-speech#speak">
          <span class="sr-only"><%= hotspot[:label] %></span>
        </button>
      <% end %>
    </div>
  </div>

  <!-- Exercise Controls -->
  <div class="mt-6">
    <%= render 'shared/exercise_controls', color: 'pink', show_exercise_buttons: false %>
  </div>
</div>
