<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box informativo: Ricorda! -->
    <div class="p-4 md:p-6">
      <div class="flex items-start gap-3 mb-4">
        <span class="text-pink-600 font-bold italic">Ricorda!</span>
      </div>
      <p class="text-gray-800 leading-relaxed mb-4">
        Le <span class="font-bold text-custom-sky">cifre</span> di un numero hanno un valore diverso in base al posto che occupano.
      </p>

      <!-- Tabella di riferimento -->
      <div class="overflow-x-auto">
        <table class="w-full text-center border-collapse">
          <thead>
            <tr class="bg-gradient-to-r from-pink-300 to-blue-300 text-gray-800">
              <th class="py-3 px-2 font-bold border border-white">Centinaia<br>di migliaia<br><span class="text-custom-sky">hk</span></th>
              <th class="py-3 px-2 font-bold border border-white">Decine<br>di migliaia<br><span class="text-custom-sky">dak</span></th>
              <th class="py-3 px-2 font-bold border border-white">Migliaia<br><span class="text-custom-sky">uk</span></th>
              <th class="py-3 px-2 font-bold border border-white">Centinaia<br><span class="text-green-600">h</span></th>
              <th class="py-3 px-2 font-bold border border-white">Decine<br><span class="text-red-600">da</span></th>
              <th class="py-3 px-2 font-bold border border-white">Unità<br><span class="text-custom-sky">u</span></th>
            </tr>
          </thead>
          <tbody class="bg-white">
            <tr>
              <td class="py-3 px-2 border border-gray-200" colspan="2"></td>
              <td class="py-3 px-2 border border-gray-200 text-left" colspan="4">1 uk = 1 000 u</td>
            </tr>
            <tr class="bg-custom-blue">
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 font-bold text-custom-sky border border-gray-200">1</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
            </tr>
            <tr>
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 border border-gray-200 text-left" colspan="5">1 dak = 10 000 u</td>
            </tr>
            <tr class="bg-custom-blue">
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 font-bold text-custom-sky border border-gray-200">1</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
            </tr>
            <tr>
              <td class="py-3 px-2 border border-gray-200 text-left" colspan="6">1 hk = 100 000 u</td>
            </tr>
            <tr class="bg-custom-blue">
              <td class="py-3 px-2 font-bold text-custom-sky border border-gray-200">1</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 font-bold border border-gray-200">0</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 1: Scomponi i numeri -->
    <div class="p-4 md:p-6">
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(1) %>
        Scomponi i numeri. Segui l'esempio.
      </p>

      <div class="overflow-x-auto">
        <table class="w-full text-center border-collapse">
          <thead>
            <tr class="bg-gradient-to-r from-pink-300 to-blue-300 text-gray-800">
              <th class="py-3 px-2 font-bold border border-white"></th>
              <th class="py-3 px-2 font-bold border border-white">Centinaia<br>di migliaia<br><span class="text-custom-sky">hk</span></th>
              <th class="py-3 px-2 font-bold border border-white">Decine<br>di migliaia<br><span class="text-custom-sky">dak</span></th>
              <th class="py-3 px-2 font-bold border border-white">Migliaia<br><span class="text-custom-sky">uk</span></th>
              <th class="py-3 px-2 font-bold border border-white">Centinaia<br><span class="text-green-600">h</span></th>
              <th class="py-3 px-2 font-bold border border-white">Decine<br><span class="text-red-600">da</span></th>
              <th class="py-3 px-2 font-bold border border-white">Unità<br><span class="text-custom-sky">u</span></th>
            </tr>
          </thead>
          <tbody class="bg-white">
            <!-- Esempio -->
            <tr class="bg-pink-50">
              <td class="py-3 px-3 font-bold border border-gray-200">107 228</td>
              <td class="py-3 px-2 border border-gray-200"><span class="font-bold text-pink-600">1</span></td>
              <td class="py-3 px-2 border border-gray-200"><span class="font-bold text-pink-600">0</span></td>
              <td class="py-3 px-2 border border-gray-200"><span class="font-bold text-pink-600">7</span></td>
              <td class="py-3 px-2 border border-gray-200"><span class="font-bold text-pink-600">2</span></td>
              <td class="py-3 px-2 border border-gray-200"><span class="font-bold text-pink-600">2</span></td>
              <td class="py-3 px-2 border border-gray-200"><span class="font-bold text-pink-600">8</span></td>
            </tr>
            <!-- 97 001 -->
            <tr class="bg-custom-blue">
              <td class="py-3 px-3 font-bold border border-gray-200">97 001</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="9">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="7">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="1">
              </td>
            </tr>
            <!-- 148 669 -->
            <tr class="bg-pink-50">
              <td class="py-3 px-3 font-bold border border-gray-200">148 669</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="1">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="4">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="8">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="6">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="6">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="9">
              </td>
            </tr>
            <!-- 196 000 -->
            <tr class="bg-custom-blue">
              <td class="py-3 px-3 font-bold border border-gray-200">196 000</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="1">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="9">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="6">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
            </tr>
            <!-- 230 850 -->
            <tr class="bg-pink-50">
              <td class="py-3 px-3 font-bold border border-gray-200">230 850</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="2">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="3">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="8">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="5">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="0">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 2: Indica quale posto occupa la cifra cerchiata -->
    <div class="p-4 md:p-6">
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Indica quale posto occupa la cifra cerchiata in ciascun numero. Segui l'esempio.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Esempio -->
        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold">7</span>
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
            <span class="font-bold text-pink-600">8</span>
          </span>
          <span class="font-bold">32</span>
          <span class="text-pink-600 mx-2">→</span>
          <span class="font-bold text-pink-600">h</span>
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold">21 4</span>
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
            <span class="font-bold text-pink-600">0</span>
          </span>
          <span class="font-bold">3</span>
          <span class="text-pink-600 mx-2">→</span>
          <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="h">
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold">6 6</span>
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
            <span class="font-bold text-pink-600">5</span>
          </span>
          <span class="font-bold">5</span>
          <span class="text-pink-600 mx-2">→</span>
          <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="da">
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold">9</span>
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
            <span class="font-bold text-pink-600">0</span>
          </span>
          <span class="font-bold">6 421</span>
          <span class="text-pink-600 mx-2">→</span>
          <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="dak">
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold">27</span>
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
            <span class="font-bold text-pink-600">0</span>
          </span>
          <span class="font-bold">626</span>
          <span class="text-pink-600 mx-2">→</span>
          <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="uk">
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <span class="font-bold">80</span>
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
            <span class="font-bold text-pink-600">6</span>
          </span>
          <span class="font-bold">922</span>
          <span class="text-pink-600 mx-2">→</span>
          <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="uk">
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Componi e scomponi -->
    <div class="p-4 md:p-6">
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Componi e scomponi come negli esempi.
      </p>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Sezione COMPONI -->
        <div class="space-y-4">
          <h4 class="font-bold text-custom-sky mb-3">Componi</h4>

          <!-- Esempio -->
          <div class="flex flex-wrap items-center gap-2">
            <span class="font-semibold">3 dak, 2 h, 6 u</span>
            <span class="text-pink-600 mx-1">=</span>
            <span class="font-bold text-pink-600">30 206</span>
          </div>

          <div class="flex flex-wrap items-center gap-2">
            <span class="font-semibold">7 uk, 9 h, 0 da, 5 u</span>
            <span class="text-pink-600 mx-1">=</span>
            <input type="text" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="7905">
          </div>

          <div class="flex flex-wrap items-center gap-2">
            <span class="font-semibold">5 hk, 0 dak, 0 uk, 5 h, 2 da, 1 u</span>
            <span class="text-pink-600 mx-1">=</span>
            <input type="text" class="w-24 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="500521">
          </div>
        </div>

        <!-- Sezione SCOMPONI -->
        <div class="space-y-4">
          <h4 class="font-bold text-custom-sky mb-3">Scomponi</h4>

          <!-- Esempio -->
          <div class="flex flex-wrap items-center gap-2">
            <span class="font-bold text-pink-600">7 783</span>
            <span class="text-pink-600 mx-1">=</span>
            <span class="font-semibold text-pink-600">7 uk, 7 h, 8 da, 3 u</span>
          </div>

          <div class="flex flex-wrap items-center gap-2">
            <span class="font-bold">906 421</span>
            <span class="text-pink-600 mx-1">=</span>
            <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="9 hk, 0 dak, 6 uk, 4 h, 2 da, 1 u" placeholder="Scrivi la scomposizione...">
          </div>

          <div class="flex flex-wrap items-center gap-2">
            <span class="font-bold">21 403</span>
            <span class="text-pink-600 mx-1">=</span>
            <input type="text" class="min-w-0 flex-1 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent" data-correct-answer="2 dak, 1 uk, 4 h, 0 da, 3 u" placeholder="Scrivi la scomposizione...">
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
