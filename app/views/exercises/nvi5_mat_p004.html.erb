<div class="max-w-6xl mx-auto p-3 md:p-6" data-controller="exercise-checker page-viewer" data-page-viewer-image-url-value="<%= asset_path('nvi5_mat/p004/page.png') %>">   <!-- Header -->
  <%= render 'shared/page_header', pagina: @pagina %>

 <div class="space-y-6">     <!-- Box informativo: Ricorda! -->
 <div class="p-4 md:p-6">  <div class="flex items-start gap-3 mb-4">         <span class="text-pink-600 text-2xl font-bold italic">Ricorda!</span>
      </div>
      <p class="text-lg text-gray-800 leading-relaxed mb-4">
        Le <span class="font-bold text-pink-600">cifre</span> di un numero hanno un valore diverso in base al posto che occupano.
      </p>

      <!-- Tabella di riferimento -->
 <div class="overflow-x-auto">         <table class="w-full text-center border-collapse">
          <thead>
            <tr class="bg-gradient-to-r from-pink-300 to-blue-300 text-gray-800">
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Centinaia<br>di migliaia<br><span class="text-pink-600">hk</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Decine<br>di migliaia<br><span class="text-pink-600">dak</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Migliaia<br><span class="text-blue-600">uk</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Centinaia<br><span class="text-green-600">h</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Decine<br><span class="text-red-600">da</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Unità<br><span class="text-blue-600">u</span></th>
            </tr>
          </thead>
          <tbody class="bg-white">
            <tr>
              <td class="py-3 px-2 text-sm md:text-base border border-gray-200" colspan="6">1 uk = 1 000 u</td>
            </tr>
            <tr class="bg-cyan-50">
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 text-lg font-bold text-blue-600 border border-gray-200">1</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
            </tr>
            <tr>
              <td class="py-3 px-2 text-sm md:text-base border border-gray-200" colspan="6">1 dak = 10 000 u</td>
            </tr>
            <tr class="bg-cyan-50">
              <td class="py-3 px-2 border border-gray-200"></td>
              <td class="py-3 px-2 text-lg font-bold text-pink-600 border border-gray-200">1</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
            </tr>
            <tr>
              <td class="py-3 px-2 text-sm md:text-base border border-gray-200" colspan="6">1 hk = 100 000 u</td>
            </tr>
            <tr class="bg-cyan-50">
              <td class="py-3 px-2 text-lg font-bold text-pink-600 border border-gray-200">1</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
              <td class="py-3 px-2 text-lg font-bold border border-gray-200">0</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 1: Scomponi i numeri -->
 <div class="p-4 md:p-6">       <h3 class="text-lg font-bold text-pink-700 mb-4 flex items-center gap-3">
        <span class="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">1</span>
        <span>Scomponi i numeri. Segui l'esempio.</span>
      </h3>

 <div class="overflow-x-auto">         <table class="w-full text-center border-collapse">
          <thead>
            <tr class="bg-gradient-to-r from-pink-300 to-blue-300 text-gray-800">
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white"></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Centinaia<br>di migliaia<br><span class="text-pink-600">hk</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Decine<br>di migliaia<br><span class="text-pink-600">dak</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Migliaia<br><span class="text-blue-600">uk</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Centinaia<br><span class="text-green-600">h</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Decine<br><span class="text-red-600">da</span></th>
              <th class="py-3 px-2 text-sm md:text-base font-bold border border-white">Unità<br><span class="text-blue-600">u</span></th>
            </tr>
          </thead>
          <tbody class="bg-white">
            <!-- Esempio -->
            <tr class="bg-pink-50">
              <td class="py-3 px-3 text-base md:text-lg font-bold border border-gray-200">107 228</td>
              <td class="py-3 px-2 border border-gray-200">
                <span class="text-lg font-bold text-pink-600">1</span>
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <span class="text-lg font-bold text-pink-600">0</span>
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <span class="text-lg font-bold text-blue-600">7</span>
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <span class="text-lg font-bold text-green-600">2</span>
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <span class="text-lg font-bold text-red-600">2</span>
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <span class="text-lg font-bold text-blue-600">8</span>
              </td>
            </tr>

            <!-- 97 001 -->
            <tr class="bg-blue-50">
              <td class="py-3 px-3 text-base md:text-lg font-bold border border-gray-200">97 001</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="9">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="7">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-green-300 rounded focus:border-green-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-red-300 rounded focus:border-red-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="1">
              </td>
            </tr>

            <!-- 148 669 -->
            <tr class="bg-pink-50">
              <td class="py-3 px-3 text-base md:text-lg font-bold border border-gray-200">148 669</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="1">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="4">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="8">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-green-300 rounded focus:border-green-500 focus:outline-none text-center font-bold" data-correct-answer="6">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-red-300 rounded focus:border-red-500 focus:outline-none text-center font-bold" data-correct-answer="6">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="9">
              </td>
            </tr>

            <!-- 196 000 -->
            <tr class="bg-blue-50">
              <td class="py-3 px-3 text-base md:text-lg font-bold border border-gray-200">196 000</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="1">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="9">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="6">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-green-300 rounded focus:border-green-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-red-300 rounded focus:border-red-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
            </tr>

            <!-- 230 850 -->
            <tr class="bg-pink-50">
              <td class="py-3 px-3 text-base md:text-lg font-bold border border-gray-200">230 850</td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="2">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none text-center font-bold" data-correct-answer="3">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-green-300 rounded focus:border-green-500 focus:outline-none text-center font-bold" data-correct-answer="8">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-red-300 rounded focus:border-red-500 focus:outline-none text-center font-bold" data-correct-answer="5">
              </td>
              <td class="py-3 px-2 border border-gray-200">
                <input type="text" class="w-12 px-2 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none text-center font-bold" data-correct-answer="0">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 2: Indica quale posto occupa la cifra cerchiata -->
 <div class="p-4 md:p-6">       <h3 class="text-lg font-bold text-blue-700 mb-4 flex items-center gap-3">
        <span class="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">2</span>
        <span>Indica quale posto occupa la cifra cerchiata in ciascun numero. Segui l'esempio.</span>
      </h3>

 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">         <!-- Esempio -->
 <div class="p-4">  <div class="flex flex-wrap items-center gap-2">             <span class="text-xl font-bold">7</span>
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
              <span class="text-xl font-bold text-pink-600">8</span>
            </span>
            <span class="text-xl font-bold">32</span>
            <span class="mx-2">→</span>
            <span class="text-lg font-bold text-blue-600">h</span>
          </div>
        </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2">             <span class="text-xl font-bold">21 4</span>
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
              <span class="text-xl font-bold text-pink-600">0</span>
            </span>
            <span class="text-xl font-bold">3</span>
            <span class="mx-2">→</span>
            <input type="text" class="w-20 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="h">
          </div>
        </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2">             <span class="text-xl font-bold">6 6</span>
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
              <span class="text-xl font-bold text-pink-600">5</span>
            </span>
            <span class="text-xl font-bold">8</span>
            <span class="mx-2">→</span>
            <input type="text" class="w-20 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="da">
          </div>
        </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2">             <span class="text-xl font-bold">9</span>
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-blue-500 bg-white">
              <span class="text-xl font-bold text-blue-600">0</span>
            </span>
            <span class="text-xl font-bold">6 421</span>
            <span class="mx-2">→</span>
            <input type="text" class="w-20 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="dak">
          </div>
        </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2">             <span class="text-xl font-bold">27</span>
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-blue-500 bg-white">
              <span class="text-xl font-bold text-blue-600">0</span>
            </span>
            <span class="text-xl font-bold">626</span>
            <span class="mx-2">→</span>
            <input type="text" class="w-20 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="uk">
          </div>
        </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2">             <span class="text-xl font-bold">80</span>
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full border-3 border-pink-500 bg-white">
              <span class="text-xl font-bold text-pink-600">6</span>
            </span>
            <span class="text-xl font-bold">922</span>
            <span class="mx-2">→</span>
            <input type="text" class="w-20 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="uk">
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Componi e scomponi -->
 <div class="p-4 md:p-6">       <h3 class="text-lg font-bold text-pink-700 mb-4 flex items-center gap-3">
        <span class="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">3</span>
        <span>Componi e scomponi come negli esempi.</span>
      </h3>

 <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">         <!-- Sezione COMPONI -->
 <div class="space-y-4">           <h4 class="text-lg font-bold text-pink-600 mb-3">Componi</h4>

          <!-- Esempio -->
 <div class="p-4">  <div class="flex flex-wrap items-center gap-2 text-base">               <span class="font-semibold">3 dak, 2 h, 6 u</span>
              <span class="mx-1">=</span>
              <span class="font-bold text-pink-600">30 206</span>
            </div>
          </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2 text-base">               <span class="font-semibold">7 uk, 9 h, 0 da, 5 u</span>
              <span class="mx-1">=</span>
              <input type="text" class="w-24 px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="7905">
            </div>
          </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2 text-base">               <span class="font-semibold">5 hk, 0 dak, 0 uk, 5 h, 2 da, 1 u</span>
              <span class="mx-1">=</span>
              <input type="text" class="w-24 px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="500521">
            </div>
          </div>
        </div>

        <!-- Sezione SCOMPONI -->
 <div class="space-y-4">           <h4 class="text-lg font-bold text-blue-600 mb-3">Scomponi</h4>

          <!-- Esempio -->
 <div class="p-4">  <div class="flex flex-wrap items-center gap-2 text-base">               <span class="font-bold text-blue-600">7 783</span>
              <span class="mx-1">=</span>
              <span class="font-semibold">7 uk, 7 h, 8 da, 3 u</span>
            </div>
          </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2 text-base">               <span class="font-bold text-pink-600">906 421</span>
              <span class="mx-1">=</span>
              <input type="text" class="flex-1 min-w-[200px] px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="9 hk, 0 dak, 6 uk, 4 h, 2 da, 1 u" placeholder="Scrivi la scomposizione...">
            </div>
          </div>

 <div class="p-4">  <div class="flex flex-wrap items-center gap-2 text-base">               <span class="font-bold text-blue-600">21 403</span>
              <span class="mx-1">=</span>
              <input type="text" class="flex-1 min-w-[200px] px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="2 dak, 1 uk, 4 h, 0 da, 3 u" placeholder="Scrivi la scomposizione...">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 4: Calcola come nell'esempio -->
 <div class="p-4 md:p-6">       <h3 class="text-lg font-bold text-blue-700 mb-4 flex items-center gap-3">
        <span class="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">4</span>
        <span>Calcola come nell'esempio.</span>
      </h3>

 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">         <!-- Esempio -->
 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">8 uk × 10 =</div>  <div class="text-lg font-bold text-blue-600">8 dak</div>           </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">60 dak × 10 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="60 hk">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">5 uk × 100 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="5 hk">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">7 h × 10 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="7 uk">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">9 h × 100 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="9 dak">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">4 da × 1000 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="4 hk">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">30 dak : 10 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="30 uk">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">80 hk : 10 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="80 dak">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">6 uk : 10 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="6 h">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">50 dak : 100 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="50 h">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">20 hk : 100 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-blue-300 rounded focus:border-blue-500 focus:outline-none font-bold" data-correct-answer="20 uk">
          </div>
        </div>

 <div class="p-4">  <div class="space-y-2">  <div class="text-base font-semibold">90 hk : 1000 =</div>             <input type="text" class="w-full px-3 py-2 border-2 border-pink-300 rounded focus:border-pink-500 focus:outline-none font-bold" data-correct-answer="90 da">
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls', color: 'pink', current_page: 'nvi5_mat_p004' %>

  </div>
</div>
