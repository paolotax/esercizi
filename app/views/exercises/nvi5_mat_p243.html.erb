<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria: Formule del parallelogramma -->
    <div class="p-4 bg-custom-blue-light rounded-2xl w-fit mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
        <!-- Immagine parallelogramma -->
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p243/p243_01.jpg", alt: "Parallelogramma", class: "max-w-sm" %>
        </div>

        <!-- Formule -->
        <div class="md:col-span-2">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="font-bold text-cyan-600 mb-1">Perimetro</p>
              <p class="text-gray-700">P = (b + ℓ) × 2</p>
              <p class="text-gray-700 mt-2">Formule inverse:</p>
              <p class="text-gray-700">b = (P : 2) – ℓ</p>
              <p class="text-gray-700">ℓ = (P : 2) – b</p>
            </div>
            <div>
              <p class="font-bold text-cyan-600 mb-1">Area</p>
              <p class="text-gray-700">A = b × h</p>
              <p class="text-gray-700 mt-2">Formule inverse:</p>
              <p class="text-gray-700">b = A : h</p>
              <p class="text-gray-700">h = A : b</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 1 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(1) %>
        Trasforma i parallelogrammi in rettangoli equivalenti, come nell'esempio. Poi misura e calcola l'area sul quaderno.
      </p>

      <div class="flex justify-center">
        <%= image_tag "nvi5_mat/p243/output-1715938802243_157_453_814_132.png", alt: "Parallelogrammi", class: "max-w-full" %>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Completa la tabella. Utilizza anche le formule inverse.
      </p>

      <div class="overflow-x-auto flex justify-center">
        <table class="border-collapse border border-cyan-400">
          <thead>
            <tr>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light text-center text-gray-800 font-bold">Parallelogramma</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light text-center text-gray-800 font-bold">Dati</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light text-center text-gray-800 font-bold">Perimetro</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light text-center text-gray-800 font-bold">Area</th>
            </tr>
          </thead>
          <tbody>
            <!-- Riga 1 -->
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <%= image_tag "nvi5_mat/p243/p243_02.jpg", alt: "Parallelogramma", class: "mx-auto max-w-[100px]" %>
              </td>
              <td class="p-2 border border-cyan-400 bg-white">
                <p class="text-gray-700">AB = 18,7 cm</p>
                <div class="flex items-center gap-1">
                  <span class="text-gray-700">BC =</span>
                  <input type="text" data-correct-answer="11,3" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="text-gray-700">cm</span>
                </div>
                <p class="text-gray-700">h = 9,7 cm</p>
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">P = 60 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <div class="flex items-center justify-center gap-1">
                  <span class="text-gray-700">A =</span>
                  <input type="text" data-correct-answer="181,39" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="text-gray-700">cm²</span>
                </div>
              </td>
            </tr>
            <!-- Riga 2 -->
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <%= image_tag "nvi5_mat/p243/p243_03.jpg", alt: "Parallelogramma", class: "mx-auto max-w-[80px]" %>
              </td>
              <td class="p-2 border border-cyan-400 bg-white">
                <div class="flex items-center gap-1">
                  <span class="text-gray-700">AB =</span>
                  <input type="text" data-correct-answer="6,8" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="text-gray-700">cm</span>
                </div>
                <p class="text-gray-700">BC = 9,2 cm</p>
                <p class="text-gray-700">h = 7,9 cm</p>
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <div class="flex items-center justify-center gap-1">
                  <span class="text-gray-700">P =</span>
                  <input type="text" data-correct-answer="32" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="text-gray-700">cm</span>
                </div>
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">A = 53,72 cm²</td>
            </tr>
            <!-- Riga 3 -->
            <tr>
              <td class="p-2 border border-cyan-400 text-center bg-white">
                <%= image_tag "nvi5_mat/p243/p243_04.jpg", alt: "Parallelogramma", class: "mx-auto max-w-[100px]" %>
              </td>
              <td class="p-2 border border-cyan-400 bg-white">
                <p class="text-gray-700">AB = 16,8 cm</p>
                <div class="flex items-center gap-1">
                  <span class="text-gray-700">BC =</span>
                  <input type="text" data-correct-answer="14,8" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="text-gray-700">cm</span>
                </div>
                <p class="text-gray-700">h = 10,2 cm</p>
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">P = 63,2 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <div class="flex items-center justify-center gap-1">
                  <span class="text-gray-700">A =</span>
                  <input type="text" data-correct-answer="171,36" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
                  <span class="text-gray-700">cm²</span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Esegui i calcoli sul quaderno e scegli con una <span class="font-bold">X</span> la risposta corretta.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Domanda a -->
        <div class="p-4 space-y-3">
          <p class="text-gray-700">
            <span class="font-bold text-cyan-600">a.</span> Quanto misura l'altezza di un parallelogramma che ha la base di 54 cm e l'area di <span class="whitespace-nowrap">3 969</span> cm²?
          </p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
              <input type="radio" name="es3a" class="w-5 h-5" data-correct-answer="true">
              <span>73,5 cm</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
              <input type="radio" name="es3a" class="w-5 h-5">
              <span>735 cm</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
              <input type="radio" name="es3a" class="w-5 h-5">
              <span>8,45 cm</span>
            </label>
          </div>
        </div>

        <!-- Domanda b -->
        <div class="p-4 space-y-3">
          <p class="text-gray-700">
            <span class="font-bold text-cyan-600">b.</span> L'area di un parallelogramma è di 112,86 m² e l'altezza misura 5,7 m. Quanto misura la base?
          </p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
              <input type="radio" name="es3b" class="w-5 h-5">
              <span>18,6 m</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
              <input type="radio" name="es3b" class="w-5 h-5">
              <span>19,5 m</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded border border-gray-200">
              <input type="radio" name="es3b" class="w-5 h-5" data-correct-answer="true">
              <span>19,8 m</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
