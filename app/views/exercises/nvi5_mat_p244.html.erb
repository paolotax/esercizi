<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria: Formule del rombo -->
    <div class="p-4 bg-custom-blue-light rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
        <!-- Immagine rombo -->
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p244/p244_01.jpg", alt: "Rombo", class: "max-w-[150px]" %>
        </div>

        <!-- Formule -->
        <div class="md:col-span-2">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="font-bold text-cyan-600 mb-1">Perimetro</p>
              <p class="text-gray-700">P = ℓ × 4</p>
              <p class="text-gray-700 mt-2">Formula inversa:</p>
              <p class="text-gray-700">ℓ = P : 4</p>
            </div>
            <div>
              <p class="font-bold text-cyan-600 mb-1">Area</p>
              <p class="text-gray-700">A = (D × d) : 2</p>
              <p class="text-gray-700 mt-2">Formule inverse:</p>
              <p class="text-gray-700">D = (A × 2) : d</p>
              <p class="text-gray-700">d = (A × 2) : D</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 1: IMPARARE TUTTI -->
    <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
      <p class="font-bold text-gray-700 mb-4">
        <%= imparare_tutti_badge(1) %>
        Misura con una riga e completa.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Rombo 1 -->
        <div class="text-center space-y-3">
          <%= image_tag "nvi5_mat/p244/p244_02.jpg", alt: "Rombo", class: "mx-auto max-w-[150px]" %>
          <div class="grid grid-cols-3 gap-2 text-center">
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">ℓ =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">D =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">d =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
          <div class="grid grid-cols-2 gap-2 text-center">
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">P =</span>
              <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">A =</span>
              <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>

        <!-- Rombo 2 -->
        <div class="text-center space-y-3">
          <%= image_tag "nvi5_mat/p244/p244_03.jpg", alt: "Rombo", class: "mx-auto max-w-[150px]" %>
          <div class="grid grid-cols-3 gap-2 text-center">
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">ℓ =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">D =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">d =</span>
              <input type="text" class="w-12 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
          <div class="grid grid-cols-2 gap-2 text-center">
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">P =</span>
              <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">A =</span>
              <input type="text" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 2 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Utilizza le formule dirette e inverse e completa.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Rombo 1: A = 61,74 cm², d = 6,3 cm -->
        <div class="text-center space-y-3 p-4 border border-gray-200 rounded-lg">
          <%= image_tag "nvi5_mat/p244/p244_04.jpg", alt: "Rombo", class: "mx-auto max-w-[100px]" %>
          <div class="space-y-2">
            <p class="text-gray-700">A = 61,74 cm²</p>
            <p class="text-gray-700">d = 6,3 cm</p>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">D =</span>
              <input type="text" data-correct-answer="19,6" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">cm</span>
            </div>
          </div>
        </div>

        <!-- Rombo 2: d = 5,9 mm, D = 8,76 mm -->
        <div class="text-center space-y-3 p-4 border border-gray-200 rounded-lg">
          <%= image_tag "nvi5_mat/p244/p244_05.jpg", alt: "Rombo", class: "mx-auto max-w-[100px]" %>
          <div class="space-y-2">
            <p class="text-gray-700">d = 5,9 mm</p>
            <p class="text-gray-700">D = 8,76 mm</p>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">A =</span>
              <input type="text" data-correct-answer="25,842" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">mm²</span>
            </div>
          </div>
        </div>

        <!-- Rombo 3: A = 1 323 m², D = 73,5 m -->
        <div class="text-center space-y-3 p-4 border border-gray-200 rounded-lg">
          <%= image_tag "nvi5_mat/p244/p244_06.jpg", alt: "Rombo", class: "mx-auto max-w-[100px]" %>
          <div class="space-y-2">
            <p class="text-gray-700">A = <span class="whitespace-nowrap">1 323</span> m²</p>
            <p class="text-gray-700">D = 73,5 m</p>
            <div class="flex items-center justify-center gap-1">
              <span class="text-gray-700">d =</span>
              <input type="text" data-correct-answer="36" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
              <span class="text-gray-700">m</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Esercizio 3 -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Completa la tabella. Utilizza anche le formule inverse.
      </p>

      <div class="overflow-x-auto">
        <table class="w-full border-collapse border border-cyan-400">
          <thead>
            <tr>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light-light text-center text-gray-800 font-bold">Lato</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light-light text-center text-gray-800 font-bold">Diagonale maggiore</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light-light text-center text-gray-800 font-bold">Diagonale minore</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light-light text-center text-gray-800 font-bold">Perimetro</th>
              <th class="p-2 border border-cyan-400 bg-custom-blue-light-light text-center text-gray-800 font-bold">Area</th>
            </tr>
          </thead>
          <tbody>
            <!-- Riga 1 -->
            <tr>
              <td class="p-2 border border-cyan-400 bg-white text-center">17,75 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">28,5 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">21,2 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="71" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> cm
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="302,1" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> cm²
              </td>
            </tr>
            <!-- Riga 2 -->
            <tr>
              <td class="p-2 border border-cyan-400 bg-white text-center">18 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">30 cm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="19,6" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> cm
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="72" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> cm
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">294 cm²</td>
            </tr>
            <!-- Riga 3 -->
            <tr>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="50" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> m
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="80" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> m
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center">60 m</td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">200 m</td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600"><span class="whitespace-nowrap">2 400</span> m²</td>
            </tr>
            <!-- Riga 4 -->
            <tr>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="13" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> dm
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center">24 dm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center">
                <input type="text" data-correct-answer="10" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> dm
              </td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">52 dm</td>
              <td class="p-2 border border-cyan-400 bg-white text-center font-bold text-cyan-600">120 dm²</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
