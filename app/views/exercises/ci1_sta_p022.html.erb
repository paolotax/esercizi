<style>
  /* Grid background pattern - 1cm = approximately 37.8px at 96 DPI */
  .grid-background {
    background-color: white;
    background-image:
      linear-gradient(to right, #e3f2fd 1px, transparent 1px),
      linear-gradient(to bottom, #e3f2fd 1px, transparent 1px);
    background-size: 37.8px 37.8px;
  }

  .dark .grid-background {
    background-color: #1f2937;
    background-image:
      linear-gradient(to right, #374151 1px, transparent 1px),
      linear-gradient(to bottom, #374151 1px, transparent 1px);
  }

  /* Beige writing area */
  .writing-strip {
    background-color: #fef3e3;
  }

  .dark .writing-strip {
    background-color: #78350f;
  }

  /* Letter cell - exactly 1cm (37.8px) */
  .letter-cell {
    display: inline-block;
    width: 37.8px;
    height: 37.8px;
    position: relative;
    text-align: center;
    line-height: 37.8px;
    font-size: 28px;
    font-weight: bold;
    font-family: 'Comic Sans MS', cursive;
  }

  /* Dashed letter A with red dots */
  .dashed-letter-a-cell {
    display: inline-block;
    width: 37.8px;
    height: 37.8px;
    position: relative;
  }

  .dashed-letter-a-cell svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  .dashed-letter-a-cell path {
    fill: none;
    stroke: #ef4444;
    stroke-width: 2;
    stroke-dasharray: 1, 5;
    stroke-linecap: round;
  }
</style>

<div class="grid-background min-h-screen py-8 px-4" data-controller="exercise-checker">
  <div class="max-w-6xl mx-auto">

    <!-- Header -->
    <div class="flex items-center gap-4 mb-12">
      <div class="bg-gradient-to-r from-orange-500 to-red-500 rounded-lg px-8 py-4 shadow-lg">
        <span class="text-4xl font-bold text-white">SCRIVO</span>
      </div>
      <div class="bg-white dark:bg-gray-700 rounded-lg px-6 py-4 border-4 border-orange-500 shadow-lg">
        <span class="text-5xl font-bold text-orange-500">A</span>
      </div>
      <div class="ml-auto bg-orange-500 text-white rounded-full w-16 h-16 flex items-center justify-center font-bold text-2xl shadow-lg">
        22
      </div>
    </div>

    <!-- Exercise 1: Trace and write letter A -->
    <div class="mb-12 border-l-4 border-gray-800 dark:border-gray-400 pl-6">
      <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-3">
        <span class="inline-block w-6 h-6 bg-yellow-400 rounded-full"></span>
        RIPASSA E POI SCRIVI LA LETTERA <span class="text-orange-500">A</span>.
      </h2>

      <div class="writing-strip p-8 border-t-2 border-b-2 border-gray-300">
        <div class="flex items-start">
          <!-- Solid example A - larger -->
          <div class="text-6xl font-bold text-gray-400 mr-4" style="font-family: 'Comic Sans MS', cursive;">A</div>

          <!-- Grid-aligned letters -->
          <div class="flex">
            <!-- Three dashed A letters -->
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M 20 90 L 50 15" />
                <path d="M 50 15 L 80 90" />
                <path d="M 30 60 L 70 60" />
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M 20 90 L 50 15" />
                <path d="M 50 15 L 80 90" />
                <path d="M 30 60 L 70 60" />
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M 20 90 L 50 15" />
                <path d="M 50 15 L 80 90" />
                <path d="M 30 60 L 70 60" />
              </svg>
            </div>

            <!-- Empty cells with guide dots -->
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
            <div class="dashed-letter-a-cell">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="90" r="2" fill="#ef4444"/>
                <circle cx="50" cy="15" r="2" fill="#ef4444"/>
                <circle cx="80" cy="90" r="2" fill="#ef4444"/>
                <circle cx="30" cy="60" r="2" fill="#ef4444"/>
                <circle cx="70" cy="60" r="2" fill="#ef4444"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise 2: Find A in words -->
    <div class="mb-12 border-l-4 border-gray-800 dark:border-gray-400 pl-6">
      <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-3">
        <span class="inline-block w-6 h-6 bg-yellow-400 rounded-full"></span>
        RIPASSA <span class="text-orange-500">A</span> NELLE PAROLE.
      </h2>

      <div class="grid grid-cols-3 gap-12 mt-8">
        <!-- AUTO -->
        <div class="text-center" data-controller="exercise-group">
          <div class="mb-4">
            <span class="text-8xl">üöó</span>
          </div>
          <div class="flex justify-center">
            <div class="cursor-pointer hover:opacity-70 transition"
                 data-action="click->exercise-group#toggleCheck"
                 data-exercise-group-target="option"
                 data-correct="true"
                 data-word="AUTO">
              <div class="dashed-letter-a-cell">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                  <path d="M 20 90 L 50 15" />
                  <path d="M 50 15 L 80 90" />
                  <path d="M 30 60 L 70 60" />
                </svg>
              </div>
            </div>
            <span class="letter-cell text-gray-700 dark:text-gray-200">U</span>
            <span class="letter-cell text-gray-700 dark:text-gray-200">T</span>
            <span class="letter-cell text-gray-700 dark:text-gray-200">O</span>
          </div>
        </div>

        <!-- MORA -->
        <div class="text-center" data-controller="exercise-group">
          <div class="mb-4">
            <span class="text-8xl">ü´ê</span>
          </div>
          <div class="flex justify-center">
            <span class="letter-cell text-gray-700 dark:text-gray-200">M</span>
            <span class="letter-cell text-gray-700 dark:text-gray-200">O</span>
            <span class="letter-cell text-gray-700 dark:text-gray-200">R</span>
            <div class="cursor-pointer hover:opacity-70 transition"
                 data-action="click->exercise-group#toggleCheck"
                 data-exercise-group-target="option"
                 data-correct="true"
                 data-word="MORA">
              <div class="dashed-letter-a-cell">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                  <path d="M 20 90 L 50 15" />
                  <path d="M 50 15 L 80 90" />
                  <path d="M 30 60 L 70 60" />
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- VASO -->
        <div class="text-center" data-controller="exercise-group">
          <div class="mb-4">
            <span class="text-8xl">üè∫</span>
          </div>
          <div class="flex justify-center">
            <span class="letter-cell text-gray-700 dark:text-gray-200">V</span>
            <div class="cursor-pointer hover:opacity-70 transition"
                 data-action="click->exercise-group#toggleCheck"
                 data-exercise-group-target="option"
                 data-correct="true"
                 data-word="VASO">
              <div class="dashed-letter-a-cell">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                  <path d="M 20 90 L 50 15" />
                  <path d="M 50 15 L 80 90" />
                  <path d="M 30 60 L 70 60" />
                </svg>
              </div>
            </div>
            <span class="letter-cell text-gray-700 dark:text-gray-200">S</span>
            <span class="letter-cell text-gray-700 dark:text-gray-200">O</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise 3: Write A and complete words -->
    <div class="mb-12 border-l-4 border-gray-800 dark:border-gray-400 pl-6" data-controller="auto-advance">
      <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-3">
        <span class="inline-block w-6 h-6 bg-yellow-400 rounded-full"></span>
        SCRIVI <span class="text-orange-500">A</span> E COMPLETA LE PAROLE.
      </h2>

      <div class="grid grid-cols-2 gap-x-16 gap-y-8 mt-8">
        <!-- ALI -->
        <div class="flex items-center gap-6">
          <div>
            <span class="text-7xl">ü¶ã</span>
          </div>
          <div class="flex items-center gap-1 text-3xl sm:text-4xl md:text-5xl font-bold" style="font-family: 'Comic Sans MS', cursive;">
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
            <span class="text-gray-700 dark:text-gray-200">LI</span>
          </div>
        </div>

        <!-- ROSA -->
        <div class="flex items-center gap-6">
          <div>
            <span class="text-7xl">üåπ</span>
          </div>
          <div class="flex items-center gap-1 text-3xl sm:text-4xl md:text-5xl font-bold" style="font-family: 'Comic Sans MS', cursive;">
            <span class="text-gray-700 dark:text-gray-200">ROS</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
          </div>
        </div>

        <!-- NAVE -->
        <div class="flex items-center gap-6">
          <div>
            <span class="text-7xl">üö¢</span>
          </div>
          <div class="flex items-center gap-1 text-3xl sm:text-4xl md:text-5xl font-bold" style="font-family: 'Comic Sans MS', cursive;">
            <span class="text-gray-700 dark:text-gray-200">N</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
            <span class="text-gray-700 dark:text-gray-200">VE</span>
          </div>
        </div>

        <!-- MANO -->
        <div class="flex items-center gap-6">
          <div>
            <span class="text-7xl">‚úã</span>
          </div>
          <div class="flex items-center gap-1 text-3xl sm:text-4xl md:text-5xl font-bold" style="font-family: 'Comic Sans MS', cursive;">
            <span class="text-gray-700 dark:text-gray-200">M</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
            <span class="text-gray-700 dark:text-gray-200">NO</span>
          </div>
        </div>

        <!-- FATA -->
        <div class="flex items-center gap-6">
          <div>
            <span class="text-7xl">üßö</span>
          </div>
          <div class="flex items-center gap-1 text-3xl sm:text-4xl md:text-5xl font-bold" style="font-family: 'Comic Sans MS', cursive;">
            <span class="text-gray-700 dark:text-gray-200">F</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
            <span class="text-gray-700 dark:text-gray-200">T</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
          </div>
        </div>

        <!-- LAMA -->
        <div class="flex items-center gap-6">
          <div>
            <span class="text-7xl">ü¶ô</span>
          </div>
          <div class="flex items-center gap-1 text-3xl sm:text-4xl md:text-5xl font-bold" style="font-family: 'Comic Sans MS', cursive;">
            <span class="text-gray-700 dark:text-gray-200">L</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
            <span class="text-gray-700 dark:text-gray-200">M</span>
            <input type="text"
                   class="w-10 h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 border-b-4 border-orange-400 dark:border-orange-500 rounded text-center focus:border-orange-600 focus:outline-none text-3xl sm:text-4xl md:text-5xl font-bold bg-transparent dark:text-white"
                   maxlength="1"
                   data-correct-answer="A">
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="flex justify-between items-center mt-12 pt-8 border-t-2 border-gray-300 dark:border-gray-600">
      <div class="text-red-500 dark:text-red-400 font-bold text-lg">
        Quaderno del corsivo p. 10
      </div>
    </div>

    <!-- Exercise Controls -->
    <%= render 'shared/exercise_controls', color: 'orange', current_page: 'pag022' %>

  </div>
</div>
