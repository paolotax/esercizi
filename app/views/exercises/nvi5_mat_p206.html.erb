<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria: Frazione di un numero -->
    <div class="p-4 bg-custom-blue-light rounded-lg">
      <p class="text-gray-700 mb-2">
        Per calcolare la <span class="font-bold text-cyan-600">frazione di un numero</span>:
      </p>
      <ul class="list-disc pl-6 text-gray-700 marker:text-cyan-500">
        <li><span class="font-bold text-cyan-600">dividi</span> il numero <span class="font-bold">per il denominatore</span>;</li>
        <li><span class="font-bold text-cyan-600">moltiplica</span> il risultato <span class="font-bold">per il numeratore</span>.</li>
      </ul>
      <div class="mt-3 flex items-center gap-2 flex-wrap">
        <%= render 'shared/frazione', num: 3, den: 5, border: nil %>
        <span class="text-gray-700">di 45</span>
        <span class="text-cyan-500">→</span>
        <span class="text-gray-700">45 <span class="font-bold">: 5</span> = 9</span>
        <span class="text-cyan-500">→</span>
        <span class="text-gray-700">9 <span class="font-bold">× 3</span> = <span class="font-bold text-cyan-600">27</span></span>
      </div>
    </div>

    <!-- Esercizio 1: IMPARARE TUTTI - Calcola il valore delle frazioni -->
    <div class="p-4 bg-white rounded-2xl border-3 border-yellow-400">
      <p class="font-bold text-gray-700 mb-4">
        <%= imparare_tutti_badge(1) %>
        Calcola il valore delle frazioni. Segui l'esempio.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Esempio: 2/5 di 100 = (100 : 5) × 2 = 20 × 2 = 40 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 2, den: 5, border: nil %>
          <span class="text-gray-700">di 100</span>
          <span class="text-cyan-500">→</span>
          <span class="font-bold text-cyan-600">(100 : 5) × 2 = 20 × 2 = 40</span>
        </div>
        <!-- 3/7 di 63 = (63 : 7) × 3 = 27 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 3, den: 7, border: nil %>
          <span class="text-gray-700">di 63</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="27" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 9/12 di 96 = (96 : 12) × 9 = 72 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 9, den: 12, border: nil %>
          <span class="text-gray-700">di 96</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="72" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 6/10 di 200 = (200 : 10) × 6 = 120 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 6, den: 10, border: nil %>
          <span class="text-gray-700">di 200</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="120" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 2/8 di 88 = (88 : 8) × 2 = 22 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 2, den: 8, border: nil %>
          <span class="text-gray-700">di 88</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="22" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 8/15 di 150 = (150 : 15) × 8 = 80 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 8, den: 15, border: nil %>
          <span class="text-gray-700">di 150</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="80" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 5/20 di 140 = (140 : 20) × 5 = 35 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 5, den: 20, border: nil %>
          <span class="text-gray-700">di 140</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="35" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 4/18 di 360 = (360 : 18) × 4 = 80 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 4, den: 18, border: nil %>
          <span class="text-gray-700">di 360</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="80" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
      </div>
    </div>

    <!-- Box teoria: Dalla frazione all'intero -->
    <div class="p-4 bg-custom-blue-light rounded-lg">
      <p class="text-gray-700 mb-2">
        Per calcolare l'<span class="font-bold text-cyan-600">intero</span> conoscendo il valore della frazione:
      </p>
      <ul class="list-disc pl-6 text-gray-700 marker:text-cyan-500">
        <li><span class="font-bold text-cyan-600">dividi</span> il numero <span class="font-bold">per il numeratore</span>;</li>
        <li><span class="font-bold text-cyan-600">moltiplica</span> il risultato <span class="font-bold">per il denominatore</span>.</li>
      </ul>
      <div class="mt-3 flex items-center gap-2 flex-wrap">
        <%= render 'shared/frazione', num: 3, den: 4, border: nil %>
        <span class="text-gray-700">= 24</span>
        <span class="text-cyan-500">→</span>
        <span class="text-gray-700">24 <span class="font-bold">: 3</span> = 8</span>
        <span class="text-cyan-500">→</span>
        <span class="text-gray-700">8 <span class="font-bold">× 4</span> = <span class="font-bold text-cyan-600">32</span></span>
        <span class="text-gray-700">(cioè <%= render 'shared/frazione', num: 4, den: 4, border: nil %>)</span>
      </div>
    </div>

    <!-- Esercizio 2: Calcola il valore dell'intero -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(2) %>
        Calcola il valore dell'intero. Segui l'esempio.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Esempio: 3/4 = 21 → (21 : 3) × 4 = 7 × 4 = 28 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 3, den: 4, border: nil %>
          <span class="text-gray-700">= 21</span>
          <span class="text-cyan-500">→</span>
          <span class="font-bold text-cyan-600">(21 : 3) × 4 = 7 × 4 = 28</span>
        </div>
        <!-- 6/5 = 36 → (36 : 6) × 5 = 30 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 6, den: 5, border: nil %>
          <span class="text-gray-700">= 36</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="30" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 6/10 = 120 → (120 : 6) × 10 = 200 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 6, den: 10, border: nil %>
          <span class="text-gray-700">= 120</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="200" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 5/13 = 50 → (50 : 5) × 13 = 130 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 5, den: 13, border: nil %>
          <span class="text-gray-700">= 50</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="130" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 5/9 = 350 → (350 : 5) × 9 = 630 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 5, den: 9, border: nil %>
          <span class="text-gray-700">= 350</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="630" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 8/15 = 64 → (64 : 8) × 15 = 120 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 8, den: 15, border: nil %>
          <span class="text-gray-700">= 64</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="120" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 3/20 = 45 → (45 : 3) × 20 = 300 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 3, den: 20, border: nil %>
          <span class="text-gray-700">= 45</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="300" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
        <!-- 11/20 = 88 → (88 : 11) × 20 = 160 -->
        <div class="flex items-center gap-2 flex-wrap">
          <%= render 'shared/frazione', num: 11, den: 20, border: nil %>
          <span class="text-gray-700">= 88</span>
          <span class="text-cyan-500">→</span>
          <input type="text" data-correct-answer="160" class="w-32 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent">
        </div>
      </div>
    </div>

    <!-- Esercizio 3: Scegli l'espressione corretta -->
    <div>
      <p class="font-bold text-gray-700 mb-4">
        <%= numero_esercizio_badge(3) %>
        Scegli con una <span class="font-bold text-cyan-600">X</span> l'espressione che risolve il problema e calcola sul quaderno.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Problema a -->
        <div class="p-4 bg-custom-blue-light rounded-2xl">
          <p class="text-gray-700 mb-3">
            <span class="font-bold">a.</span> Flavia ha regalato a Ginevra 25 perline, cioè i <%= render 'shared/frazione', num: 5, den: 12, border: nil %> delle perline che possedeva. Quante perline aveva Flavia?
          </p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer hover:bg-custom-blue-light p-2 rounded">
              <input type="radio" name="prob_a" class="w-5 h-5" data-correct-answer="false">
              <span>(25 : 12) × 5 =</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer hover:bg-custom-blue-light p-2 rounded">
              <input type="radio" name="prob_a" class="w-5 h-5" data-correct-answer="true">
              <span>(25 : 5) × 12 =</span>
            </label>
          </div>
        </div>

        <!-- Problema b -->
        <div class="p-4 bg-custom-blue-light rounded-2xl">
          <p class="text-gray-700 mb-3">
            <span class="font-bold">b.</span> Il quaderno di Karim ha 48 pagine. I <%= render 'shared/frazione', num: 3, den: 8, border: nil %> si sporcano con l'inchiostro. Quante sono le pagine sporche del quaderno?
          </p>
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer hover:bg-custom-blue-light p-2 rounded">
              <input type="radio" name="prob_b" class="w-5 h-5" data-correct-answer="true">
              <span>(48 : 8) × 3 =</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer hover:bg-custom-blue-light p-2 rounded">
              <input type="radio" name="prob_b" class="w-5 h-5" data-correct-answer="false">
              <span>(48 : 3) × 8 =</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
