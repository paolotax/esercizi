<div class="max-w-6xl mx-auto bg-white p-3 md:p-6"
     data-controller="exercise-checker text-toggle font-controls"
     data-text-toggle-target="content"
     data-font-controls-target="content">

  <%= render 'shared/page_header', pagina: @pagina %>

  <div class="space-y-6">
    <!-- Box teoria apotema -->
    <div class="p-4 bg-white rounded-2xl border-3 border-blue-400">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="flex justify-center">
          <%= image_tag "nvi5_mat/p118/p118_01.jpg", class: "max-w-full", alt: "Apotema" %>
        </div>
        <div class="md:col-span-2">
          <p class="text-gray-700 mb-2">
            <span class="text-<%= @pagina.base_color %>-500">▶</span> Tutti gli assi di simmetria di un poligono regolare si incontrano in un punto (<strong>O</strong>) che è il <strong>centro</strong> del poligono.
          </p>
          <p class="text-gray-700 mb-2">
            Il centro del poligono si trova alla stessa distanza da ciascuno dei lati del poligono (e anche dai suoi vertici).
          </p>
          <p class="text-gray-700">
            La distanza dai lati si rappresenta con un segmento di perpendicolare che si chiama <strong>apotema</strong> (<strong>a</strong>).
          </p>
        </div>
      </div>
    </div>

    <!-- Numero fisso -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <p class="text-gray-700 mb-4">
          <span class="text-<%= @pagina.base_color %>-500">▶</span> Nei poligoni regolari esiste un <strong>rapporto costante tra la misura dell'apotema e la lunghezza del lato</strong>: dividendo la misura dell'apotema per quella del lato si ottiene sempre lo stesso numero che viene chiamato <strong>numero fisso</strong>.
        </p>
        <p class="text-gray-700 mb-4">
          Ogni poligono regolare ha il suo numero fisso (come puoi vedere nella tabella a lato). Esso permette di calcolare il lato conoscendo l'apotema e di calcolare l'apotema conoscendo il lato.
        </p>

        <!-- Schema lato-apotema -->
        <div class="flex justify-center my-4">
          <%= image_tag "nvi5_mat/p118/p118_02.jpg", class: "max-w-full", alt: "Schema lato apotema" %>
        </div>
      </div>

      <!-- Tabella numeri fissi -->
      <div>
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr>
              <th class="border border-gray-300 p-2 bg-<%= @pagina.base_color %>-100 font-bold text-<%= @pagina.base_color %>-700">poligono regolare</th>
              <th class="border border-gray-300 p-2 bg-<%= @pagina.base_color %>-100 font-bold text-<%= @pagina.base_color %>-700">numero fisso</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">triangolo</td>
              <td class="border border-gray-300 p-2 text-center bg-white">0,289</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">quadrato</td>
              <td class="border border-gray-300 p-2 text-center bg-white">0,5</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">pentagono</td>
              <td class="border border-gray-300 p-2 text-center bg-white">0,688</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">esagono</td>
              <td class="border border-gray-300 p-2 text-center bg-white">0,866</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">ettagono</td>
              <td class="border border-gray-300 p-2 text-center bg-white">1,038</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">ottagono</td>
              <td class="border border-gray-300 p-2 text-center bg-white">1,207</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">ennagono</td>
              <td class="border border-gray-300 p-2 text-center bg-white">1,374</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2 text-center bg-white">decagono</td>
              <td class="border border-gray-300 p-2 text-center bg-white">1,539</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Sezione ESERCIZI -->
    <div class="p-4 md:p-6 bg-orange-100 rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Colonna sinistra -->
        <div class="space-y-4">
          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(1) %>
              Calcola l'apotema di un pentagono regolare che ha il lato lungo 6,5 cm.
            </p>
            <div class="text-gray-700">
              <input type="text" data-correct-answer="4,472" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> cm
            </div>
          </div>

          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(2) %>
              Se un esagono regolare ha il perimetro di 72 dm, quanto misura l'apotema?
            </p>
            <div class="text-gray-700">
              <input type="text" data-correct-answer="10,392" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> dm
            </div>
          </div>

          <div>
            <p class="text-gray-700 mb-2">
              <%= numero_esercizio_badge(3) %>
              Il perimetro di un triangolo equilatero è 90 cm. Quanto misura l'apotema?
            </p>
            <div class="text-gray-700">
              <input type="text" data-correct-answer="8,67" class="w-20 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent"> cm
            </div>
          </div>
        </div>

        <!-- Colonna destra: AllenaMente -->
        <div class="p-4 bg-white rounded-2xl border-3 border-blue-400">
          <p class="font-bold text-orange-500 mb-2">AllenaMente!</p>
          <p class="text-gray-700 mb-4">
            Calcola l'apotema di ciascun poligono, sapendo che il lato del triangolo equilatero misura 4,5 cm e che il perimetro del quadrato è di 2,8 dm.
          </p>
          <div class="flex justify-center gap-4">
            <div class="text-center">
              <svg viewBox="0 0 100 100" class="w-16 h-16 mx-auto">
                <polygon points="50,15 85,85 15,85" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600"/>
                <circle cx="50" cy="62" r="2" fill="currentColor" class="text-gray-600"/>
                <line x1="50" y1="62" x2="50" y2="85" stroke="currentColor" stroke-width="1" stroke-dasharray="3,3" class="text-gray-600"/>
              </svg>
              <input type="text" data-correct-answer="1,3" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent mt-2"> cm
            </div>
            <div class="text-center">
              <svg viewBox="0 0 100 100" class="w-16 h-16 mx-auto">
                <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600"/>
                <circle cx="50" cy="50" r="2" fill="currentColor" class="text-gray-600"/>
                <line x1="50" y1="50" x2="50" y2="80" stroke="currentColor" stroke-width="1" stroke-dasharray="3,3" class="text-gray-600"/>
              </svg>
              <input type="text" data-correct-answer="3,5" class="w-16 border-b-2 border-dotted border-gray-400 text-center font-bold bg-transparent mt-2"> cm
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared/exercise_controls' %>
  </div>
</div>
